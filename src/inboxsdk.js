!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.InboxSDK=e()}}(function(){var e;return function(){function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}return e}()({1:[function(e,t,r){t.exports=e("core-js/library/fn/array/from")},{"core-js/library/fn/array/from":139}],2:[function(e,t,r){t.exports=e("core-js/library/fn/array/is-array")},{"core-js/library/fn/array/is-array":140}],3:[function(e,t,r){t.exports=e("core-js/library/fn/date/now")},{"core-js/library/fn/date/now":141}],4:[function(e,t,r){t.exports=e("core-js/library/fn/json/stringify")},{"core-js/library/fn/json/stringify":142}],5:[function(e,t,r){t.exports=e("core-js/library/fn/map")},{"core-js/library/fn/map":143}],6:[function(e,t,r){t.exports=e("core-js/library/fn/number/is-nan")},{"core-js/library/fn/number/is-nan":144}],7:[function(e,t,r){t.exports=e("core-js/library/fn/number/max-safe-integer")},{"core-js/library/fn/number/max-safe-integer":145}],8:[function(e,t,r){t.exports=e("core-js/library/fn/number/min-safe-integer")},{"core-js/library/fn/number/min-safe-integer":146}],9:[function(e,t,r){t.exports=e("core-js/library/fn/object/assign")},{"core-js/library/fn/object/assign":147}],10:[function(e,t,r){t.exports=e("core-js/library/fn/object/create")},{"core-js/library/fn/object/create":148}],11:[function(e,t,r){t.exports=e("core-js/library/fn/object/define-properties")},{"core-js/library/fn/object/define-properties":149}],12:[function(e,t,r){t.exports=e("core-js/library/fn/object/define-property")},{"core-js/library/fn/object/define-property":150}],13:[function(e,t,r){t.exports=e("core-js/library/fn/object/freeze")},{"core-js/library/fn/object/freeze":151}],14:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-descriptor")},{"core-js/library/fn/object/get-own-property-descriptor":152}],15:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-descriptors")},{"core-js/library/fn/object/get-own-property-descriptors":153}],16:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-names")},{"core-js/library/fn/object/get-own-property-names":154}],17:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-own-property-symbols")},{"core-js/library/fn/object/get-own-property-symbols":155}],18:[function(e,t,r){t.exports=e("core-js/library/fn/object/get-prototype-of")},{"core-js/library/fn/object/get-prototype-of":156}],19:[function(e,t,r){t.exports=e("core-js/library/fn/object/keys")},{"core-js/library/fn/object/keys":157}],20:[function(e,t,r){t.exports=e("core-js/library/fn/object/set-prototype-of")},{"core-js/library/fn/object/set-prototype-of":158}],21:[function(e,t,r){t.exports=e("core-js/library/fn/object/values")},{"core-js/library/fn/object/values":159}],22:[function(e,t,r){t.exports=e("core-js/library/fn/parse-float")},{"core-js/library/fn/parse-float":160}],23:[function(e,t,r){t.exports=e("core-js/library/fn/parse-int")},{"core-js/library/fn/parse-int":161}],24:[function(e,t,r){t.exports=e("core-js/library/fn/promise")},{"core-js/library/fn/promise":162}],25:[function(e,t,r){t.exports=e("core-js/library/fn/reflect/construct")},{"core-js/library/fn/reflect/construct":163}],26:[function(e,t,r){t.exports=e("core-js/library/fn/reflect/get")},{"core-js/library/fn/reflect/get":164}],27:[function(e,t,r){t.exports=e("core-js/library/fn/set")},{"core-js/library/fn/set":165}],28:[function(e,t,r){t.exports=e("core-js/library/fn/symbol")},{"core-js/library/fn/symbol":166}],29:[function(e,t,r){t.exports=e("core-js/library/fn/symbol/iterator")},{"core-js/library/fn/symbol/iterator":167}],30:[function(e,t,r){t.exports=e("core-js/library/fn/weak-map")},{"core-js/library/fn/weak-map":168}],31:[function(e,t,r){t.exports=e("core-js/library/fn/weak-set")},{"core-js/library/fn/weak-set":169}],32:[function(e,t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],33:[function(e,t,r){function n(e){if(o(e))return e}var o=e("@babel/runtime-corejs2/core-js/array/is-array");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/array/is-array":2}],34:[function(e,t,r){function n(e){if(o(e))return i(e)}var o=e("@babel/runtime-corejs2/core-js/array/is-array"),i=e("./arrayLikeToArray.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":32,"@babel/runtime-corejs2/core-js/array/is-array":2}],35:[function(e,t,r){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],36:[function(e,t,r){function n(e,t,r,n,o,a,s){try{var l=e[a](s),u=l.value}catch(e){return void r(e)}l.done?t(u):i.resolve(u).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new i(function(o,i){function a(e){n(l,o,i,a,s,"next",e)}function s(e){n(l,o,i,a,s,"throw",e)}var l=e.apply(t,r);a(void 0)})}}var i=e("@babel/runtime-corejs2/core-js/promise");t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/promise":24}],37:[function(e,t,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],38:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),i(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var i=e("@babel/runtime-corejs2/core-js/object/define-property");t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/define-property":12}],39:[function(e,t,r){function n(e,t,r){return t in e?o(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("@babel/runtime-corejs2/core-js/object/define-property");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/define-property":12}],40:[function(e,t,r){function n(){return t.exports=n=o||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}var o=e("@babel/runtime-corejs2/core-js/object/assign");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/assign":9}],41:[function(e,t,r){function n(e,r,s){return"undefined"!=typeof Reflect&&o?(t.exports=n=o,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(e,t,r){var n=a(e,t);if(n){var o=i(n,t);return o.get?o.get.call(r):o.value}},t.exports.default=t.exports,t.exports.__esModule=!0),n(e,r,s||e)}var o=e("@babel/runtime-corejs2/core-js/reflect/get"),i=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),a=e("./superPropBase.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./superPropBase.js":54,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/reflect/get":26}],42:[function(e,t,r){function n(e){return t.exports=n=o?i:function(e){return e.__proto__||i(e)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}var o=e("@babel/runtime-corejs2/core-js/object/set-prototype-of"),i=e("@babel/runtime-corejs2/core-js/object/get-prototype-of");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/get-prototype-of":18,"@babel/runtime-corejs2/core-js/object/set-prototype-of":20}],43:[function(e,t,r){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=o(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}var o=e("@babel/runtime-corejs2/core-js/object/create"),i=e("./setPrototypeOf.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./setPrototypeOf.js":52,"@babel/runtime-corejs2/core-js/object/create":10}],44:[function(e,t,r){function n(e){return e&&e.__esModule?e:{default:e}}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],45:[function(e,t,r){function n(e){if(void 0!==o&&null!=e[i]||null!=e["@@iterator"])return a(e)}var o=e("@babel/runtime-corejs2/core-js/symbol"),i=e("@babel/runtime-corejs2/core-js/symbol/iterator"),a=e("@babel/runtime-corejs2/core-js/array/from");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29}],46:[function(e,t,r){function n(e,t){var r=null==e?null:void 0!==o&&e[i]||e["@@iterator"];if(null!=r){var n,a,s=[],l=!0,u=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{l||null==r.return||r.return()}finally{if(u)throw a}}return s}}var o=e("@babel/runtime-corejs2/core-js/symbol"),i=e("@babel/runtime-corejs2/core-js/symbol/iterator");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29}],47:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],48:[function(e,t,r){function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],49:[function(e,t,r){function n(e,t){if(null==e)return{};var r,n,a=i(e,t);if(o){var s=o(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var o=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),i=e("./objectWithoutPropertiesLoose.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./objectWithoutPropertiesLoose.js":50,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17}],50:[function(e,t,r){function n(e,t){if(null==e)return{};var r,n,i={},a=o(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var o=e("@babel/runtime-corejs2/core-js/object/keys");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/keys":19}],51:[function(e,t,r){function n(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?i(e):t}var o=e("@babel/runtime-corejs2/helpers/typeof").default,i=e("./assertThisInitialized.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./assertThisInitialized.js":35,"@babel/runtime-corejs2/helpers/typeof":57}],52:[function(e,t,r){function n(e,r){return t.exports=n=o||function(e,t){return e.__proto__=t,e},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}var o=e("@babel/runtime-corejs2/core-js/object/set-prototype-of");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/set-prototype-of":20}],53:[function(e,t,r){function n(e,t){return o(e)||i(e,t)||a(e,t)||s()}var o=e("./arrayWithHoles.js"),i=e("./iterableToArrayLimit.js"),a=e("./unsupportedIterableToArray.js"),s=e("./nonIterableRest.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithHoles.js":33,"./iterableToArrayLimit.js":46,"./nonIterableRest.js":47,"./unsupportedIterableToArray.js":58}],54:[function(e,t,r){function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=o(e)););return e}var o=e("./getPrototypeOf.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./getPrototypeOf.js":42}],55:[function(e,t,r){function n(e,t){return t||(t=e.slice(0)),o(i(e,{raw:{value:o(t)}}))}var o=e("@babel/runtime-corejs2/core-js/object/freeze"),i=e("@babel/runtime-corejs2/core-js/object/define-properties");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/freeze":13}],56:[function(e,t,r){function n(e){return o(e)||i(e)||a(e)||s()}var o=e("./arrayWithoutHoles.js"),i=e("./iterableToArray.js"),a=e("./unsupportedIterableToArray.js"),s=e("./nonIterableSpread.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayWithoutHoles.js":34,"./iterableToArray.js":45,"./nonIterableSpread.js":48,"./unsupportedIterableToArray.js":58}],57:[function(e,t,r){function n(e){"@babel/helpers - typeof";return"function"==typeof o&&"symbol"==typeof i?(t.exports=n=function(e){return typeof e},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(e){return e&&"function"==typeof o&&e.constructor===o&&e!==o.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}var o=e("@babel/runtime-corejs2/core-js/symbol"),i=e("@babel/runtime-corejs2/core-js/symbol/iterator");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29}],58:[function(e,t,r){function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?o(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}var o=e("@babel/runtime-corejs2/core-js/array/from"),i=e("./arrayLikeToArray.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":32,"@babel/runtime-corejs2/core-js/array/from":1}],59:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":607}],60:[function(e,t,r){arguments[4][32][0].apply(r,arguments)},{dup:32}],61:[function(e,t,r){function n(e){if(Array.isArray(e))return e}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],62:[function(e,t,r){arguments[4][35][0].apply(r,arguments)},{dup:35}],63:[function(e,t,r){arguments[4][37][0].apply(r,arguments)},{dup:37}],64:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},{}],65:[function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],66:[function(e,t,r){function n(){return t.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],67:[function(e,t,r){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],68:[function(e,t,r){function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}var o=e("./setPrototypeOf.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./setPrototypeOf.js":77}],69:[function(e,t,r){arguments[4][44][0].apply(r,arguments)},{dup:44}],70:[function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(o,s,l):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}var i=e("@babel/runtime/helpers/typeof").default;t.exports=o,t.exports.default=t.exports,t.exports.__esModule=!0},{"@babel/runtime/helpers/typeof":79}],71:[function(e,t,r){function n(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],72:[function(e,t,r){arguments[4][47][0].apply(r,arguments)},{dup:47}],73:[function(e,t,r){function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}var o=e("./defineProperty.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./defineProperty.js":65}],74:[function(e,t,r){function n(e,t){if(null==e)return{};var r,n,i=o(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var o=e("./objectWithoutPropertiesLoose.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./objectWithoutPropertiesLoose.js":75}],75:[function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],76:[function(e,t,r){function n(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?i(e):t}var o=e("@babel/runtime/helpers/typeof").default,i=e("./assertThisInitialized.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./assertThisInitialized.js":62,"@babel/runtime/helpers/typeof":79}],77:[function(e,t,r){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],78:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"./arrayWithHoles.js":61,"./iterableToArrayLimit.js":71,"./nonIterableRest.js":72,"./unsupportedIterableToArray.js":80,dup:53}],79:[function(e,t,r){function n(e){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(e){return typeof e},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{}],80:[function(e,t,r){function n(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}var o=e("./arrayLikeToArray.js");t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},{"./arrayLikeToArray.js":60}],81:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r._62To10=r._36To10=r._32To10=r._16To10=r._8To10=r._2To10=r._10To62=r._10To36=r._10To32=r._10To16=r._10To8=r._10To2=r.convertBase=void 0;var o=n(e("decimal.js"));o.default.set({precision:1e9}),o.default.set({toExpPos:9e15});var i=function(e,t){for(var r=[],n=new o.default(e),i=new o.default(t.length);!n.isZero();){var a=n.mod(i).toNumber();n=n.dividedToIntegerBy(i),r.unshift(t.substr(a,1))}return 0===r.length&&r.unshift("0"),r.join("")},a=function(e,t){for(var r={},n=0;n<t.length;n++)r[t.substr(n,1)]=new o.default(n);for(var i=new o.default(t.length),a=new o.default(0),n=0;n<e.length;n++){var s=r[e.substr(-1*(n+1),1)],l=o.default.pow(i,n),u=s.times(l);a=a.plus(u)}return a.toString()},s=function(e,t,r){var n="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";if("number"!=typeof e&&"string"!=typeof e||"number"==typeof e&&!isFinite(e))throw new Error("First augument must be a number or string.");if("number"==typeof e&&(e=e.toString()),"number"!=typeof t&&"string"!=typeof t)throw new Error("Second augument must be a number or string.");if("number"==typeof t){if(!Number.isInteger(t))throw new Error("Second augument must be integer.");if(!(2<=t&&t<=62))throw new Error("Second augument must be between 2 and 62.");t=n.substr(0,t)}if(t.length<=1)throw new Error("Second augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");if(t.length!==new Set(t).size)throw new Error("Second augument must not contain the same characters.");if(!new RegExp("^["+t+"]+$").test(e))throw new Error("First augument must consist of second augument.");if("number"!=typeof r&&"string"!=typeof r)throw new Error("Third augument must be a number or string.");if("number"==typeof r){if(!Number.isInteger(r))throw new Error("Third augument must be integer.");if(!(2<=r&&r<=62))throw new Error("Third augument must be between 2 and 62.");r=n.substr(0,r)}if(r.length<=1)throw new Error("Third augument' length must be larger than 1. Base 1 or smaller cannnot be defined.");if(r.length!==new Set(r).size)throw new Error("Third augument must not contain the same characters.");var o=a(e,t);return i(o,r)};r.convertBase=s;var l=function(e){return s(e,10,2)};r._10To2=l;var u=function(e){return s(e,10,8)};r._10To8=u;var c=function(e){return s(e,10,16)};r._10To16=c;var d=function(e){return s(e,10,32)};r._10To32=d;var f=function(e){return s(e,10,36)};r._10To36=f;var p=function(e){return s(e,10,62)};r._10To62=p;var m=function(e){return s(e,2,10)};r._2To10=m;var h=function(e){return s(e,8,10)};r._8To10=h;var b=function(e){return s(e,16,10)};r._16To10=b;var v=function(e){return s(e,32,10)};r._32To10=v;var _=function(e){return s(e,36,10)};r._36To10=_;var g=function(e){return s(e,62,10)};r._62To10=g},{"decimal.js":300}],82:[function(e,t,r){t.exports=function(e,t){var r="number"==typeof e,n="number"==typeof t;r&&!n?(t=e,e=0):r||n||(e=0,t=0),e|=0,t|=0;var o=t-e;if(o<0)throw new Error("array length must be positive");for(var i=new Array(o),a=0,s=e;a<o;a++,s++)i[a]=s;return i}},{}],83:[function(e,t,r){"use strict";function n(){if(l.length)throw l.shift()}function o(e){var t;t=s.length?s.pop():new i,t.task=e,a(t)}function i(){this.task=null}var a=e("./raw"),s=[],l=[],u=a.makeRequestCallFromTimer(n);t.exports=o,i.prototype.call=function(){try{this.task.call()}catch(e){o.onerror?o.onerror(e):(l.push(e),u())}finally{this.task=null,s[s.length]=this}}},{"./raw":84}],84:[function(e,t,r){(function(e){(function(){"use strict";function r(e){a.length||(i(),s=!0),a[a.length]=e}function n(){for(;l<a.length;){var e=l;if(l+=1,a[e].call(),l>u){for(var t=0,r=a.length-l;t<r;t++)a[t]=a[t+l];a.length-=l,l=0}}a.length=0,l=0,s=!1}function o(e){return function(){function t(){clearTimeout(r),clearInterval(n),e()}var r=setTimeout(t,0),n=setInterval(t,50)}}t.exports=r;var i,a=[],s=!1,l=0,u=1024,c=void 0!==e?e:self,d=c.MutationObserver||c.WebKitMutationObserver;i="function"==typeof d?function(e){var t=1,r=new d(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):o(n),r.requestFlush=i,r.makeRequestCallFromTimer=o}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],85:[function(e,t,r){(function(r){(function(){"use strict";function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0}function o(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function a(e){return!o(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(j.isFunction(e)){if(E)return e.name;var t=e.toString(),r=t.match(C);return r&&r[1]}}function l(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(E||!j.isFunction(e))return j.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return l(u(e.actual),128)+" "+e.operator+" "+l(u(e.expected),128)}function d(e,t,r,n,o){throw new S.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:o})}function f(e,t){e||d(e,!0,t,"==",S.ok)}function p(e,t,r,s){if(e===t)return!0;if(o(e)&&o(t))return 0===n(e,t);if(j.isDate(e)&&j.isDate(t))return e.getTime()===t.getTime();if(j.isRegExp(e)&&j.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(a(e)&&a(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),h(e,t,r,s))}return r?e===t:e==t}function m(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function h(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(j.isPrimitive(e)||j.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=m(e),i=m(t);if(o&&!i||!o&&i)return!1;if(o)return e=x.call(e),t=x.call(t),p(e,t,r);var a,s,l=I(e),u=I(t);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(a=l[s],!p(e[a],t[a],r,n))return!1;return!0}function b(e,t,r){p(e,t,!0)&&d(e,t,r,"notDeepStrictEqual",b)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function _(e){var t;try{e()}catch(e){t=e}return t}function g(e,t,r,n){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),o=_(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!o&&d(o,r,"Missing expected exception"+n);var i="string"==typeof n,a=!e&&j.isError(o),s=!e&&o&&!r;if((a&&i&&v(o,r)||s)&&d(o,r,"Got unwanted exception"+n),e&&o&&r&&!v(o,r)||!e&&o)throw o}function y(e,t){e||d(e,!0,t,"==",y)}var w=e("object-assign"),j=e("util/"),k=Object.prototype.hasOwnProperty,x=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),S=t.exports=f,C=/\s*function\s+([^\(\s]*)\s*/;S.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,o=s(t),i=n.indexOf("\n"+o);if(i>=0){var a=n.indexOf("\n",i+1);n=n.substring(a+1)}this.stack=n}}},j.inherits(S.AssertionError,Error),S.fail=d,S.ok=f,S.equal=function(e,t,r){e!=t&&d(e,t,r,"==",S.equal)},S.notEqual=function(e,t,r){e==t&&d(e,t,r,"!=",S.notEqual)},S.deepEqual=function(e,t,r){p(e,t,!1)||d(e,t,r,"deepEqual",S.deepEqual)},S.deepStrictEqual=function(e,t,r){p(e,t,!0)||d(e,t,r,"deepStrictEqual",S.deepStrictEqual)},S.notDeepEqual=function(e,t,r){p(e,t,!1)&&d(e,t,r,"notDeepEqual",S.notDeepEqual)},S.notDeepStrictEqual=b,S.strictEqual=function(e,t,r){e!==t&&d(e,t,r,"===",S.strictEqual)},S.notStrictEqual=function(e,t,r){e===t&&d(e,t,r,"!==",S.notStrictEqual)},S.throws=function(e,t,r){g(!0,e,t,r)},S.doesNotThrow=function(e,t,r){g(!1,e,t,r)},S.ifError=function(e){if(e)throw e},S.strict=w(y,S,{equal:S.strictEqual,deepEqual:S.deepStrictEqual,notEqual:S.notStrictEqual,notDeepEqual:S.notDeepStrictEqual}),S.strict.strict=S.strict;var I=Object.keys||function(e){var t=[];for(var r in e)k.call(e,r)&&t.push(r);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":535,"util/":88}],86:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],87:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],88:[function(e,t,r){(function(t,n){(function(){function o(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&r._extend(n,t),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=i),l(n,e,n.depth)}function i(e,t){var r=o.styles[t];return r?"["+o.colors[r][0]+"m"+e+"["+o.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function l(e,t,n){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return g(o)||(o=l(e,o,n)),o}var i=u(e,t);if(i)return i;var a=Object.keys(t),h=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),E(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(j(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(E(t))return c(t)}var v="",_=!1,y=["{","}"];if(m(t)&&(_=!0,y=["[","]"]),S(t)){v=" [Function"+(t.name?": "+t.name:"")+"]"}if(j(t)&&(v=" "+RegExp.prototype.toString.call(t)),x(t)&&(v=" "+Date.prototype.toUTCString.call(t)),E(t)&&(v=" "+c(t)),0===a.length&&(!_||0==t.length))return y[0]+v+y[1];if(n<0)return j(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var w;return w=_?d(e,t,n,h,a):a.map(function(r){return f(e,t,n,h,r,_)}),e.seen.pop(),p(w,v,y)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(g(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}
return _(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)D(t,String(a))?i.push(f(e,t,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(f(e,t,r,n,o,!0))}),i}function f(e,t,r,n,o,i){var a,s,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),D(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=b(r)?l(e,u.value,null):l(e,u.value,r-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function m(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function b(e){return null===e}function v(e){return null==e}function _(e){return"number"==typeof e}function g(e){return"string"==typeof e}function y(e){return"symbol"==typeof e}function w(e){return void 0===e}function j(e){return k(e)&&"[object RegExp]"===I(e)}function k(e){return"object"==typeof e&&null!==e}function x(e){return k(e)&&"[object Date]"===I(e)}function E(e){return k(e)&&("[object Error]"===I(e)||e instanceof Error)}function S(e){return"function"==typeof e}function C(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}function T(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var M=/%[sdj%]/g;r.format=function(e){if(!g(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,i=n.length,a=String(e).replace(M,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<i;s=n[++r])b(s)||!k(s)?a+=" "+s:a+=" "+o(s);return a},r.deprecate=function(e,o){function i(){if(!a){if(t.throwDeprecation)throw new Error(o);t.traceDeprecation?console.trace(o):console.error(o),a=!0}return e.apply(this,arguments)}if(w(n.process))return function(){return r.deprecate(e,o).apply(this,arguments)};if(!0===t.noDeprecation)return e;var a=!1;return i};var R,O={};r.debuglog=function(e){if(w(R)&&(R=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=t.pid;O[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else O[e]=function(){};return O[e]},r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=m,r.isBoolean=h,r.isNull=b,r.isNullOrUndefined=v,r.isNumber=_,r.isString=g,r.isSymbol=y,r.isUndefined=w,r.isRegExp=j,r.isObject=k,r.isDate=x,r.isError=E,r.isFunction=S,r.isPrimitive=C,r.isBuffer=e("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",T(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":87,_process:568,inherits:86}],89:[function(e,t,r){"use strict";function n(e){var t=new Array(2*e.length-1);t[0]=e[0];for(var r=0,n=arguments.length<=1?0:arguments.length-1;r<n;r++){var i=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];t[2*r+1]=i&&Object.prototype.hasOwnProperty.call(i,"__html")?i.__html:(0,o.default)(i),t[2*r+2]=e[r+1]}return t.join("")}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(e("lodash/escape"));t.exports=r.default,t.exports.default=r.default},{"lodash/escape":482}],90:[function(e,t,r){(function(e){(function(){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"];t.exports=function(){for(var t=[],n=0;n<r.length;n++)"function"==typeof e[r[n]]&&(t[t.length]=r[n]);return t}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],91:[function(e,t,r){t.exports={default:e("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":142}],92:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":147}],93:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":150}],94:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":157}],95:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],96:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/define-property"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":93}],97:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/assign"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},{"../core-js/object/assign":92}],98:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function o(e){var t=n(e),r=t[0],o=t[1];return 3*(r+o)/4-o}function i(e,t,r){return 3*(t+r)/4-r}function a(e){var t,r,o=n(e),a=o[0],s=o[1],l=new f(i(e,a,s)),u=0,c=s>0?a-4:a;for(r=0;r<c;r+=4)t=d[e.charCodeAt(r)]<<18|d[e.charCodeAt(r+1)]<<12|d[e.charCodeAt(r+2)]<<6|d[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=d[e.charCodeAt(r)]<<2|d[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===s&&(t=d[e.charCodeAt(r)]<<10|d[e.charCodeAt(r+1)]<<4|d[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l}function s(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function l(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(s(n));return o.join("")}function u(e){for(var t,r=e.length,n=r%3,o=[],i=0,a=r-n;i<a;i+=16383)o.push(l(e,i,i+16383>a?a:i+16383));return 1===n?(t=e[r-1],o.push(c[t>>2]+c[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(c[t>>10]+c[t>>4&63]+c[t<<2&63]+"=")),o.join("")}r.byteLength=o,r.toByteArray=a,r.fromByteArray=u;for(var c=[],d=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",m=0,h=p.length;m<h;++m)c[m]=p[m],d[p.charCodeAt(m)]=m;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}],99:[function(t,r,n){!function(t){"use strict";function n(e){function t(e,r){var n,o,i,a,l,u,c,d,p=this;if(!(p instanceof t))return new t(e,r);if(null==r){if(e&&!0===e._isBigNumber)return p.s=e.s,void(!e.c||e.e>L?p.c=p.e=null:e.e<P?p.c=[p.e=0]:(p.e=e.e,p.c=e.c.slice()));if((u="number"==typeof e)&&0*e==0){if(p.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,l=e;l>=10;l/=10,a++);return void(a>L?p.c=p.e=null:(p.e=a,p.c=[e]))}d=String(e)}else{if(!f.test(d=String(e)))return I(p,d,u);p.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(l=d.search(/e/i))>0?(a<0&&(a=l),a+=+d.slice(l+1),d=d.substring(0,l)):a<0&&(a=d.length)}else{if(s(r,2,U.length,"Base"),10==r)return p=new t(e),x(p,D+p.e+1,M);if(d=String(e),u="number"==typeof e){if(0*e!=0)return I(p,d,u,r);if(p.s=1/e<0?(d=d.slice(1),-1):1,t.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(b+e)}else p.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=U.slice(0,r),a=l=0,c=d.length;l<c;l++)if(n.indexOf(o=d.charAt(l))<0){if("."==o){if(l>a){a=c;continue}}else if(!i&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){i=!0,l=-1,a=0;continue}return I(p,String(e),u,r)}u=!1,d=C(d,r,10,p.s),(a=d.indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(l=0;48===d.charCodeAt(l);l++);for(c=d.length;48===d.charCodeAt(--c););if(d=d.slice(l,++c)){if(c-=l,u&&t.DEBUG&&c>15&&(e>g||e!==m(e)))throw Error(b+p.s*e);if((a=a-l-1)>L)p.c=p.e=null;else if(a<P)p.c=[p.e=0];else{if(p.e=a,p.c=[],l=(a+1)%_,a<0&&(l+=_),l<c){for(l&&p.c.push(+d.slice(0,l)),c-=_;l<c;)p.c.push(+d.slice(l,l+=_));l=_-(d=d.slice(l)).length}else l-=c;for(;l--;d+="0");p.c.push(+d)}}else p.c=[p.e=0]}function r(e,r,n,o){var a,l,d,f,p;if(null==n?n=M:s(n,0,8),!e.c)return e.toString();if(a=e.c[0],d=e.e,null==r)p=i(e.c),p=1==o||2==o&&(d<=R||d>=O)?u(p,d):c(p,d,"0");else if(e=x(new t(e),r,n),l=e.e,p=i(e.c),f=p.length,1==o||2==o&&(r<=l||l<=R)){for(;f<r;p+="0",f++);p=u(p,l)}else if(r-=d,p=c(p,l,"0"),l+1>f){if(--r>0)for(p+=".";r--;p+="0");}else if((r+=l-f)>0)for(l+1==f&&(p+=".");r--;p+="0");return e.s<0&&a?"-"+p:p}function d(e,r){for(var n,o=1,i=new t(e[0]);o<e.length;o++){if(n=new t(e[o]),!n.s){i=n;break}r.call(i,n)&&(i=n)}return i}function k(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*_-1)>L?e.c=e.e=null:r<P?e.c=[e.e=0]:(e.e=r,e.c=t),e}function x(e,t,r,n){var o,i,a,s,l,u,c,d=e.c,f=y;if(d){e:{for(o=1,s=d[0];s>=10;s/=10,o++);if((i=t-o)<0)i+=_,a=t,l=d[u=0],c=l/f[o-a-1]%10|0;else if((u=p((i+1)/_))>=d.length){if(!n)break e;for(;d.length<=u;d.push(0));l=c=0,o=1,i%=_,a=i-_+1}else{for(l=s=d[u],o=1;s>=10;s/=10,o++);i%=_,a=i-_+o,c=a<0?0:l/f[o-a-1]%10|0}if(n=n||t<0||null!=d[u+1]||(a<0?l:l%f[o-a-1]),n=r<4?(c||n)&&(0==r||r==(e.s<0?3:2)):c>5||5==c&&(4==r||n||6==r&&(i>0?a>0?l/f[o-a]:0:d[u-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,n?(t-=e.e+1,d[0]=f[(_-t%_)%_],e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=u,s=1,u--):(d.length=u+1,s=f[_-i],d[u]=a>0?m(l/f[o-a]%f[a])*s:0),n)for(;;){if(0==u){for(i=1,a=d[0];a>=10;a/=10,i++);for(a=d[0]+=s,s=1;a>=10;a/=10,s++);i!=s&&(e.e++,d[0]==v&&(d[0]=1));break}if(d[u]+=s,d[u]!=v)break;d[u--]=0,s=1}for(i=d.length;0===d[--i];d.pop());}e.e>L?e.c=e.e=null:e.e<P&&(e.c=[e.e=0])}return e}function E(e){var t,r=e.e;return null===r?e.toString():(t=i(e.c),t=r<=R||r>=O?u(t,r):c(t,r,"0"),e.s<0?"-"+t:t)}var S,C,I,A=t.prototype={constructor:t,toString:null,valueOf:null},T=new t(1),D=20,M=4,R=-7,O=21,P=-1e7,L=1e7,V=!1,N=1,B=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},U="0123456789abcdefghijklmnopqrstuvwxyz";return t.clone=n,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(h+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(r=e[t],s(r,0,j,t),D=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(r=e[t],s(r,0,8,t),M=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&(r=e[t],r&&r.pop?(s(r[0],-j,0,t),s(r[1],0,j,t),R=r[0],O=r[1]):(s(r,-j,j,t),R=-(O=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)s(r[0],-j,-1,t),s(r[1],1,j,t),P=r[0],L=r[1];else{if(s(r,-j,j,t),!r)throw Error(h+t+" cannot be zero: "+r);P=-(L=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(h+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw V=!r,Error(h+"crypto unavailable");V=r}else V=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(r=e[t],s(r,0,9,t),N=r),e.hasOwnProperty(t="POW_PRECISION")&&(r=e[t],s(r,0,j,t),B=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(h+t+" not an object: "+r);q=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(h+t+" invalid: "+r);U=r}}return{DECIMAL_PLACES:D,ROUNDING_MODE:M,EXPONENTIAL_AT:[R,O],RANGE:[P,L],CRYPTO:V,MODULO_MODE:N,POW_PRECISION:B,FORMAT:q,ALPHABET:U}},t.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!t.DEBUG)return!0;var r,n,o=e.c,i=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(o)){if((1===a||-1===a)&&i>=-j&&i<=j&&i===m(i)){if(0===o[0]){if(0===i&&1===o.length)return!0;break e}if(r=(i+1)%_,r<1&&(r+=_),String(o[0]).length==r){for(r=0;r<o.length;r++)if((n=o[r])<0||n>=v||n!==m(n))break e;if(0!==n)return!0}}}else if(null===o&&null===i&&(null===a||1===a||-1===a))return!0;throw Error(h+"Invalid BigNumber: "+e)},t.maximum=t.max=function(){return d(arguments,A.lt)},t.minimum=t.min=function(){return d(arguments,A.gt)},t.random=function(){var e=9007199254740992*Math.random()&2097151?function(){return m(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(r){var n,o,i,a,l,u=0,c=[],d=new t(T);if(null==r?r=D:s(r,0,j),a=p(r/_),V)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(a*=2));u<a;)l=131072*n[u]+(n[u+1]>>>11),l>=9e15?(o=crypto.getRandomValues(new Uint32Array(2)),n[u]=o[0],n[u+1]=o[1]):(c.push(l%1e14),u+=2);u=a/2}else{if(!crypto.randomBytes)throw V=!1,Error(h+"crypto unavailable");for(n=crypto.randomBytes(a*=7);u<a;)l=281474976710656*(31&n[u])+1099511627776*n[u+1]+4294967296*n[u+2]+16777216*n[u+3]+(n[u+4]<<16)+(n[u+5]<<8)+n[u+6],l>=9e15?crypto.randomBytes(7).copy(n,u):(c.push(l%1e14),u+=7);u=a/7}if(!V)for(;u<a;)(l=e())<9e15&&(c[u++]=l%1e14);for(a=c[--u],r%=_,a&&r&&(l=y[_-r],c[u]=m(a/l)*l);0===c[u];c.pop(),u--);if(u<0)c=[i=0];else{for(i=-1;0===c[0];c.splice(0,1),i-=_);for(u=1,l=c[0];l>=10;l/=10,u++);u<_&&(i-=_-u)}return d.e=i,d.c=c,d}}(),t.sum=function(){for(var e=1,r=arguments,n=new t(r[0]);e<r.length;)n=n.plus(r[e++]);return n},C=function(){function e(e,t,r,n){for(var o,i,a=[0],s=0,l=e.length;s<l;){for(i=a.length;i--;a[i]*=t);for(a[0]+=n.indexOf(e.charAt(s++)),o=0;o<a.length;o++)a[o]>r-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/r|0,a[o]%=r)}return a.reverse()}return function(r,n,o,a,s){var l,u,d,f,p,m,h,b,v=r.indexOf("."),_=D,g=M;for(v>=0&&(f=B,B=0,r=r.replace(".",""),b=new t(n),m=b.pow(r.length-v),B=f,b.c=e(c(i(m.c),m.e,"0"),10,o,"0123456789"),b.e=b.c.length),h=e(r,n,o,s?(l=U,"0123456789"):(l="0123456789",U)),d=f=h.length;0==h[--f];h.pop());if(!h[0])return l.charAt(0);if(v<0?--d:(m.c=h,m.e=d,m.s=a,m=S(m,b,_,g,o),h=m.c,p=m.r,d=m.e),u=d+_+1,v=h[u],f=o/2,p=p||u<0||null!=h[u+1],p=g<4?(null!=v||p)&&(0==g||g==(m.s<0?3:2)):v>f||v==f&&(4==g||p||6==g&&1&h[u-1]||g==(m.s<0?8:7)),u<1||!h[0])r=p?c(l.charAt(1),-_,l.charAt(0)):l.charAt(0);else{if(h.length=u,p)for(--o;++h[--u]>o;)h[u]=0,u||(++d,h=[1].concat(h));for(f=h.length;!h[--f];);for(v=0,r="";v<=f;r+=l.charAt(h[v++]));r=c(r,d,l.charAt(0))}return r}}(),S=function(){function e(e,t,r){var n,o,i,a,s=0,l=e.length,u=t%w,c=t/w|0;for(e=e.slice();l--;)i=e[l]%w,a=e[l]/w|0,n=c*i+a*u,o=u*i+n%w*w+s,s=(o/r|0)+(n/w|0)+c*a,e[l]=o%r;return s&&(e=[s].concat(e)),e}function r(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function n(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,a,s,l,u){var c,d,f,p,h,b,g,y,w,j,k,E,S,C,I,A,T,D=i.s==a.s?1:-1,M=i.c,R=a.c;if(!(M&&M[0]&&R&&R[0]))return new t(i.s&&a.s&&(M?!R||M[0]!=R[0]:R)?M&&0==M[0]||!R?0*D:D/0:NaN);for(y=new t(D),w=y.c=[],d=i.e-a.e,D=s+d+1,u||(u=v,d=o(i.e/_)-o(a.e/_),D=D/_|0),f=0;R[f]==(M[f]||0);f++);if(R[f]>(M[f]||0)&&d--,D<0)w.push(1),p=!0;else{for(C=M.length,A=R.length,f=0,D+=2,h=m(u/(R[0]+1)),h>1&&(R=e(R,h,u),M=e(M,h,u),A=R.length,C=M.length),S=A,j=M.slice(0,A),k=j.length;k<A;j[k++]=0);T=R.slice(),T=[0].concat(T),I=R[0],R[1]>=u/2&&I++;do{if(h=0,(c=r(R,j,A,k))<0){if(E=j[0],A!=k&&(E=E*u+(j[1]||0)),(h=m(E/I))>1)for(h>=u&&(h=u-1),b=e(R,h,u),g=b.length,k=j.length;1==r(b,j,g,k);)h--,n(b,A<g?T:R,g,u),g=b.length,c=1;else 0==h&&(c=h=1),b=R.slice(),g=b.length;if(g<k&&(b=[0].concat(b)),n(j,b,k,u),k=j.length,-1==c)for(;r(R,j,A,k)<1;)h++,n(j,A<k?T:R,k,u),k=j.length}else 0===c&&(h++,j=[0]);w[f++]=h,j[0]?j[k++]=M[S]||0:(j=[M[S]],k=1)}while((S++<C||null!=j[0])&&D--);p=null!=j[0],w[0]||w.splice(0,1)}if(u==v){for(f=1,D=w[0];D>=10;D/=10,f++);x(y,s+(y.e=f+d*_-1)+1,l,p)}else y.e=d,y.r=+p;return y}}(),I=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,n=/^\.([^.]+)$/,o=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(a,s,l,u){var c,d=l?s:s.replace(i,"");if(o.test(d))a.s=isNaN(d)?null:d<0?-1:1;else{if(!l&&(d=d.replace(e,function(e,t,r){return c="x"==(r=r.toLowerCase())?16:"b"==r?2:8,u&&u!=c?e:t}),u&&(c=u,d=d.replace(r,"$1").replace(n,"0.$1")),s!=d))return new t(d,c);if(t.DEBUG)throw Error(h+"Not a"+(u?" base "+u:"")+" number: "+s);a.s=null}a.c=a.e=null}}(),A.absoluteValue=A.abs=function(){var e=new t(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,r){return a(this,new t(e,r))},A.decimalPlaces=A.dp=function(e,r){var n,i,a,l=this;if(null!=e)return s(e,0,j),null==r?r=M:s(r,0,8),x(new t(l),e+l.e+1,r);if(!(n=l.c))return null;if(i=((a=n.length-1)-o(this.e/_))*_,a=n[a])for(;a%10==0;a/=10,i--);return i<0&&(i=0),i},A.dividedBy=A.div=function(e,r){return S(this,new t(e,r),D,M)},A.dividedToIntegerBy=A.idiv=function(e,r){return S(this,new t(e,r),0,1)},A.exponentiatedBy=A.pow=function(e,r){var n,o,i,a,s,u,c,d,f=this;if(e=new t(e),e.c&&!e.isInteger())throw Error(h+"Exponent not an integer: "+E(e));if(null!=r&&(r=new t(r)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return d=new t(Math.pow(+E(f),s?2-l(e):+E(e))),r?d.mod(r):d;if(u=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new t(NaN);o=!u&&f.isInteger()&&r.isInteger(),o&&(f=f.mod(r))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return a=f.s<0&&l(e)?-0:0,f.e>-1&&(a=1/a),new t(u?1/a:a);B&&(a=p(B/_+2))}for(s?(n=new t(.5),u&&(e.s=1),c=l(e)):(i=Math.abs(+E(e)),c=i%2),d=new t(T);;){if(c){if(d=d.times(f),!d.c)break;a?d.c.length>a&&(d.c.length=a):o&&(d=d.mod(r))}if(i){if(0===(i=m(i/2)))break;c=i%2}else if(e=e.times(n),x(e,e.e+1,1),e.e>14)c=l(e);else{if(0===(i=+E(e)))break;c=i%2}f=f.times(f),a?f.c&&f.c.length>a&&(f.c.length=a):o&&(f=f.mod(r))}return o?d:(u&&(d=T.div(d)),r?d.mod(r):a?x(d,B,M,void 0):d)},A.integerValue=function(e){var r=new t(this);return null==e?e=M:s(e,0,8),x(r,r.e+1,e)},A.isEqualTo=A.eq=function(e,r){return 0===a(this,new t(e,r))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,r){return a(this,new t(e,r))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,r){return 1===(r=a(this,new t(e,r)))||0===r},A.isInteger=function(){return!!this.c&&o(this.e/_)>this.c.length-2},A.isLessThan=A.lt=function(e,r){return a(this,new t(e,r))<0},A.isLessThanOrEqualTo=A.lte=function(e,r){return-1===(r=a(this,new t(e,r)))||0===r},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,r){var n,i,a,s,l=this,u=l.s;if(e=new t(e,r),r=e.s,!u||!r)return new t(NaN);if(u!=r)return e.s=-r,l.plus(e);var c=l.e/_,d=e.e/_,f=l.c,p=e.c;if(!c||!d){if(!f||!p)return f?(e.s=-r,e):new t(p?l:NaN);if(!f[0]||!p[0])return p[0]?(e.s=-r,e):new t(f[0]?l:3==M?-0:0)}if(c=o(c),d=o(d),f=f.slice(),u=c-d){for((s=u<0)?(u=-u,a=f):(d=c,a=p),a.reverse(),r=u;r--;a.push(0));a.reverse()}else for(i=(s=(u=f.length)<(r=p.length))?u:r,u=r=0;r<i;r++)if(f[r]!=p[r]){s=f[r]<p[r];break}if(s&&(a=f,f=p,p=a,e.s=-e.s),(r=(i=p.length)-(n=f.length))>0)for(;r--;f[n++]=0);for(r=v-1;i>u;){if(f[--i]<p[i]){for(n=i;n&&!f[--n];f[n]=r);--f[n],f[i]+=v}f[i]-=p[i]}for(;0==f[0];f.splice(0,1),--d);return f[0]?k(e,f,d):(e.s=3==M?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,r){var n,o,i=this;return e=new t(e,r),!i.c||!e.s||e.c&&!e.c[0]?new t(NaN):!e.c||i.c&&!i.c[0]?new t(i):(9==N?(o=e.s,e.s=1,n=S(i,e,0,3),e.s=o,n.s*=o):n=S(i,e,0,N),e=i.minus(n.times(e)),e.c[0]||1!=N||(e.s=i.s),e)},A.multipliedBy=A.times=function(e,r){var n,i,a,s,l,u,c,d,f,p,m,h,b,g,y,j=this,x=j.c,E=(e=new t(e,r)).c;if(!(x&&E&&x[0]&&E[0]))return!j.s||!e.s||x&&!x[0]&&!E||E&&!E[0]&&!x?e.c=e.e=e.s=null:(e.s*=j.s,x&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=o(j.e/_)+o(e.e/_),e.s*=j.s,c=x.length,p=E.length,c<p&&(b=x,x=E,E=b,a=c,c=p,p=a),a=c+p,b=[];a--;b.push(0));for(g=v,y=w,a=p;--a>=0;){for(n=0,m=E[a]%y,h=E[a]/y|0,l=c,s=a+l;s>a;)d=x[--l]%y,f=x[l]/y|0,u=h*d+f*m,d=m*d+u%y*y+b[s]+n,n=(d/g|0)+(u/y|0)+h*f,b[s--]=d%g;b[s]=n}return n?++i:b.splice(0,1),k(e,b,i)},A.negated=function(){var e=new t(this);return e.s=-e.s||null,e},A.plus=function(e,r){var n,i=this,a=i.s;if(e=new t(e,r),r=e.s,!a||!r)return new t(NaN);if(a!=r)return e.s=-r,i.minus(e);var s=i.e/_,l=e.e/_,u=i.c,c=e.c;if(!s||!l){if(!u||!c)return new t(a/0);if(!u[0]||!c[0])return c[0]?e:new t(u[0]?i:0*a)}if(s=o(s),l=o(l),u=u.slice(),a=s-l){for(a>0?(l=s,n=c):(a=-a,n=u),n.reverse();a--;n.push(0));n.reverse()}for(a=u.length,r=c.length,a-r<0&&(n=c,c=u,u=n,r=a),a=0;r;)a=(u[--r]=u[r]+c[r]+a)/v|0,u[r]=v===u[r]?0:u[r]%v;return a&&(u=[a].concat(u),++l),k(e,u,l)},A.precision=A.sd=function(e,r){var n,o,i,a=this;if(null!=e&&e!==!!e)return s(e,1,j),null==r?r=M:s(r,0,8),x(new t(a),e,r);if(!(n=a.c))return null;if(i=n.length-1,o=i*_+1,i=n[i]){for(;i%10==0;i/=10,o--);for(i=n[0];i>=10;i/=10,o++);}return e&&a.e+1>o&&(o=a.e+1),o},A.shiftedBy=function(e){return s(e,-g,g),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,r,n,a,s,l=this,u=l.c,c=l.s,d=l.e,f=D+4,p=new t("0.5");if(1!==c||!u||!u[0])return new t(!c||c<0&&(!u||u[0])?NaN:u?l:1/0);if(c=Math.sqrt(+E(l)),0==c||c==1/0?(r=i(u),(r.length+d)%2==0&&(r+="0"),c=Math.sqrt(+r),d=o((d+1)/2)-(d<0||d%2),c==1/0?r="5e"+d:(r=c.toExponential(),r=r.slice(0,r.indexOf("e")+1)+d),n=new t(r)):n=new t(c+""),n.c[0])for(d=n.e,c=d+f,c<3&&(c=0);;)if(s=n,n=p.times(s.plus(S(l,s,f,1))),i(s.c).slice(0,c)===(r=i(n.c)).slice(0,c)){if(n.e<d&&--c,"9999"!=(r=r.slice(c-3,c+1))&&(a||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(x(n,n.e+D+2,1),e=!n.times(n).eq(l));break}if(!a&&(x(s,s.e+D+2,0),s.times(s).eq(l))){n=s;break}f+=4,c+=4,a=1}return x(n,n.e+D+1,M,e)},A.toExponential=function(e,t){return null!=e&&(s(e,0,j),e++),r(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(s(e,0,j),e=e+this.e+1),r(this,e,t)},A.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=q;else if("object"!=typeof r)throw Error(h+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,a=n.split("."),s=+r.groupSize,l=+r.secondaryGroupSize,u=r.groupSeparator||"",c=a[0],d=a[1],f=o.s<0,p=f?c.slice(1):c,m=p.length;if(l&&(i=s,s=l,l=i,m-=i),s>0&&m>0){for(i=m%s||s,c=p.substr(0,i);i<m;i+=s)c+=u+p.substr(i,s);l>0&&(c+=u+p.slice(i)),f&&(c="-"+c)}n=d?c+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):c}return(r.prefix||"")+n+(r.suffix||"")},A.toFraction=function(e){var r,n,o,a,s,l,u,c,d,f,p,m,b=this,v=b.c;if(null!=e&&(u=new t(e),!u.isInteger()&&(u.c||1!==u.s)||u.lt(T)))throw Error(h+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+E(u));if(!v)return new t(b);for(r=new t(T),d=n=new t(T),o=c=new t(T),m=i(v),s=r.e=m.length-b.e-1,r.c[0]=y[(l=s%_)<0?_+l:l],e=!e||u.comparedTo(r)>0?s>0?r:d:u,l=L,L=1/0,u=new t(m),c.c[0]=0;f=S(u,r,0,1),a=n.plus(f.times(o)),1!=a.comparedTo(e);)n=o,o=a,d=c.plus(f.times(a=d)),c=a,r=u.minus(f.times(a=r)),u=a;return a=S(e.minus(n),o,0,1),c=c.plus(a.times(d)),n=n.plus(a.times(o)),c.s=d.s=b.s,s*=2,p=S(d,o,s,M).minus(b).abs().comparedTo(S(c,n,s,M).minus(b).abs())<1?[d,o]:[c,n],L=l,p},A.toNumber=function(){return+E(this)},A.toPrecision=function(e,t){return null!=e&&s(e,1,j),r(this,e,t,2)},A.toString=function(e){var r,n=this,o=n.s,a=n.e;return null===a?o?(r="Infinity",o<0&&(r="-"+r)):r="NaN":(null==e?r=a<=R||a>=O?u(i(n.c),a):c(i(n.c),a,"0"):10===e?(n=x(new t(n),D+a+1,M),r=c(i(n.c),n.e,"0")):(s(e,2,U.length,"Base"),r=C(c(i(n.c),a,"0"),10,e,o,!0)),o<0&&n.c[0]&&(r="-"+r)),r},A.valueOf=A.toJSON=function(){return E(this)},A._isBigNumber=!0,null!=e&&t.set(e),t}function o(e){var t=0|e;return e>0||e===t?t:t-1}function i(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=_-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function a(e,t){var r,n,o=e.c,i=t.c,a=e.s,s=t.s,l=e.e,u=t.e;if(!a||!s)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=l==u,!o||!i)return n?0:!o^r?1:-1;if(!n)return l>u^r?1:-1;for(s=(l=o.length)<(u=i.length)?l:u,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^r?1:-1;return l==u?0:l>u^r?1:-1}function s(e,t,r,n){if(e<t||e>r||e!==m(e))throw Error(h+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function l(e){var t=e.c.length-1;return o(e.e/_)==t&&e.c[t]%2!=0}function u(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function c(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(n=e.length,++t>n){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var d,f=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,p=Math.ceil,m=Math.floor,h="[BigNumber Error] ",b=h+"Number primitive has more than 15 significant digits: ",v=1e14,_=14,g=9007199254740991,y=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],w=1e7,j=1e9;d=n(),d.default=d.BigNumber=d,"function"==typeof e&&e.amd?e(function(){return d}):void 0!==r&&r.exports?r.exports=d:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=d)}(this)},{}],100:[function(e,t,r){(function(n){(function(){"use strict";var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime/helpers/slicedToArray")),a=o(e("@babel/runtime/helpers/classCallCheck")),s=o(e("@babel/runtime/helpers/createClass")),l=o(e("@babel/runtime/helpers/defineProperty")),u=o(e("lodash/throttle")),c=o(e("lodash/sortBy")),d=function(){function e(t){var r=this,o=t.key,s=t.getAfromB,d=t.getBfromA,f=t.storage,p=t.saveThrottle,m=t.maxLimit,h=t.maxAge;(0,a.default)(this,e),(0,l.default)(this,"_key",void 0),(0,l.default)(this,"_getAfromB",void 0),(0,l.default)(this,"_getBfromA",void 0),(0,l.default)(this,"_storage",void 0),(0,l.default)(this,"_aToTimestamp",new Map),(0,l.default)(this,"_aToB",new Map),(0,l.default)(this,"_bToA",new Map),(0,l.default)(this,"_aToBpromise",new Map),(0,l.default)(this,"_bToApromise",new Map),(0,l.default)(this,"_saveCache",void 0),this._key=o,this._getBfromA=d,this._getAfromB=s,this._storage=f||(n.localStorage?n.localStorage:null),null==p&&(p=3e3),null==m&&(m=1e3),null==h&&(h=31536e6);var b=m,v=h;this._saveCache=(0,u.default)(function(){var e=r._storage;if(e){r._loadCache();var t=Date.now()-v,n={version:2,ids:[]};r._aToB.forEach(function(e,o){var i=r._aToTimestamp.get(o);null!=i&&i>t&&n.ids.push([o,e,i])}),n.ids.length>b&&(n.ids=(0,c.default)(n.ids,function(e){return(0,i.default)(e,3)[2]}).slice(-b)),e.setItem(r._key,JSON.stringify(n))}},p,{leading:!1}),this._loadCache()}return(0,s.default)(e,[{key:"_loadCache",value:function(){var e=this._storage;if(e)try{var t=JSON.parse(e.getItem(this._key)||"null");if(!t||2!==t.version)return;var r=!0,n=!1,o=void 0;try{for(var a,s=t.ids[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,u=(0,i.default)(l,3),c=u[0],d=u[1],f=u[2];this._aToTimestamp.set(c,f),this._aToB.set(c,d),this._bToA.set(d,c)}}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}}catch(e){console.error("failed to load BiMapCache from storage",e)}}},{key:"_rememberPair",value:function(e,t){this._aToTimestamp.set(e,Date.now()),this._aToB.set(e,t),this._bToA.set(t,e),this._saveCache()}},{key:"_update",value:function(e){this._aToTimestamp.set(e,Date.now()),this._saveCache()}},{key:"getBfromA",value:function(e){var t=this,r=this._aToB.get(e);if(r)return this._update(e),Promise.resolve(r);var n=this._aToBpromise.get(e);if(n)return n;var o=this._getBfromA(e);return this._aToBpromise.set(e,o),o.then(function(r){o===t._aToBpromise.get(e)&&(t._aToBpromise.delete(e),t._rememberPair(e,r))},function(){o===t._aToBpromise.get(e)&&t._aToBpromise.delete(e)}),o}},{key:"getAfromB",value:function(e){var t=this,r=this._bToA.get(e);if(r)return this._update(r),Promise.resolve(r);var n=this._bToApromise.get(e);if(n)return n;var o=this._getAfromB(e);return this._bToApromise.set(e,o),o.then(function(r){o===t._bToApromise.get(e)&&(t._bToApromise.delete(e),t._rememberPair(r,e))},function(){o===t._bToApromise.get(e)&&t._bToApromise.delete(e)}),o}},{key:"removeAfromCache",value:function(e){if(this._aToBpromise.delete(e),this._aToB.has(e)){var t=this._aToB.get(e);this._aToB.delete(e),this._bToA.delete(t),this._saveCache()}}},{key:"removeBfromCache",value:function(e){if(this._bToApromise.delete(e),this._bToA.has(e)){var t=this._bToA.get(e);this._aToB.delete(t),this._bToA.delete(e),this._saveCache()}}}]),e}();r.default=d,t.exports=r.default,t.exports.default=r.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/slicedToArray":78,"lodash/sortBy":519,"lodash/throttle":523}],101:[function(e,t,r){(function(t){(function(){"use strict";function t(e){if(e>$)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=n.prototype,t}function n(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}return o(e,t,r)}function o(e,t,r){if("string"==typeof e)return l(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(z(e,ArrayBuffer)||e&&z(e.buffer,ArrayBuffer))return c(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var o=e.valueOf&&e.valueOf();if(null!=o&&o!==e)return n.from(o,t,r);var i=d(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return n.from(e[Symbol.toPrimitive]("string"),t,r)
;throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function a(e,r,n){return i(e),e<=0?t(e):void 0!==r?"string"==typeof n?t(e).fill(r,n):t(e).fill(r):t(e)}function s(e){return i(e),t(e<0?0:0|f(e))}function l(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!n.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var o=0|m(e,r),i=t(o),a=i.write(e,r);return a!==o&&(i=i.slice(0,a)),i}function u(e){for(var r=e.length<0?0:0|f(e.length),n=t(r),o=0;o<r;o+=1)n[o]=255&e[o];return n}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var o;return o=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.__proto__=n.prototype,o}function d(e){if(n.isBuffer(e)){var r=0|f(e.length),o=t(r);return 0===o.length?o:(e.copy(o,0,0,r),o)}return void 0!==e.length?"number"!=typeof e.length||W(e.length)?t(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}function f(e){if(e>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|e}function p(e){return+e!=e&&(e=0),n.alloc(+e)}function m(e,t){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,o=arguments.length>2&&!0===arguments[2];if(!o&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return o?-1:B(e).length;t=(""+t).toLowerCase(),i=!0}}function h(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return A(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,o,i){if(0===e.length)return-1;if("string"==typeof r?(o=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,W(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=n.from(t,o)),n.isBuffer(t))return 0===t.length?-1:_(e,t,r,o,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,o,i);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}var u;if(o){var c=-1;for(u=r;u<s;u++)if(i(e,u)===i(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*a}else-1!==c&&(u-=u-c),c=-1}else for(r+l>s&&(r=s-l),u=r;u>=0;u--){for(var d=!0,f=0;f<l;f++)if(i(e,u+f)!==i(t,f)){d=!1;break}if(d)return u}return-1}function g(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(W(s))return a;e[r+a]=s}return a}function y(e,t,r,n){return H(B(t,e.length-r),e,r,n)}function w(e,t,r,n){return H(q(t),e,r,n)}function j(e,t,r,n){return w(e,t,r,n)}function k(e,t,r,n){return H(F(t),e,r,n)}function x(e,t,r,n){return H(U(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?G.fromByteArray(e):G.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){var l,u,c,d;switch(s){case 1:i<128&&(a=i);break;case 2:l=e[o+1],128==(192&l)&&(d=(31&i)<<6|63&l)>127&&(a=d);break;case 3:l=e[o+1],u=e[o+2],128==(192&l)&&128==(192&u)&&(d=(15&i)<<12|(63&l)<<6|63&u)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:l=e[o+1],u=e[o+2],c=e[o+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&(d=(15&i)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return C(n)}function C(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=J));return r}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function A(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function T(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=N(e[i]);return o}function D(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function M(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,o,i,a){if(!n.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+o>e.length)throw new RangeError("Index out of range")}function O(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,o){return t=+t,r>>>=0,o||O(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function L(e,t,r,n,o){return t=+t,r>>>=0,o||O(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function V(e){if(e=e.split("=")[0],e=e.trim().replace(Y,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function U(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function F(e){return G.toByteArray(V(e))}function H(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function W(e){return e!==e}var G=e("base64-js"),K=e("ieee754");r.Buffer=n,r.SlowBuffer=p,r.INSPECT_MAX_BYTES=50;var $=2147483647;r.kMaxLength=$,n.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),n.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(n.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(e,t,r){return o(e,t,r)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(e,t,r){return a(e,t,r)},n.allocUnsafe=function(e){return s(e)},n.allocUnsafeSlow=function(e){return s(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==n.prototype},n.compare=function(e,t){if(z(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),z(t,Uint8Array)&&(t=n.from(t,t.offset,t.byteLength)),!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,o=t.length,i=0,a=Math.min(r,o);i<a;++i)if(e[i]!==t[i]){r=e[i],o=t[i];break}return r<o?-1:o<r?1:0},n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var o=n.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(z(a,Uint8Array)&&(a=n.from(a)),!n.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,i),i+=a.length}return o},n.byteLength=m,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},n.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},n.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},n.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):h.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},n.prototype.compare=function(e,t,r,o,i){if(z(e,Uint8Array)&&(e=n.from(e,e.offset,e.byteLength)),!n.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||r>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=r)return 0;if(o>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,o>>>=0,i>>>=0,this===e)return 0;for(var a=i-o,s=r-t,l=Math.min(a,s),u=this.slice(o,i),c=e.slice(t,r),d=0;d<l;++d)if(u[d]!==c[d]){a=u[d],s=c[d];break}return a<s?-1:s<a?1:0},n.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},n.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},n.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},n.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return y(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return j(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;n.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var o=this.subarray(e,t);return o.__proto__=n.prototype,o},n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},n.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||M(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},n.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),K.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),K.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),K.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),K.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},n.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},n.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var o=Math.pow(2,8*r-1);R(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,o){if(!n.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<r&&(o=r),o===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-r&&(o=e.length-t+r);var i=o-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,o);else if(this===e&&r<t&&t<o)for(var a=i-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,o),t);return i},n.prototype.fill=function(e,t,r,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,r=this.length):"string"==typeof r&&(o=r,r=this.length),void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!n.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(1===e.length){var i=e.charCodeAt(0);("utf8"===o&&i<128||"latin1"===o)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=n.isBuffer(e)?e:n.from(e,o),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=s[a%l]}return this};var Y=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":98,buffer:101,ieee754:316}],102:[function(e,t,r){"use strict";var n=e("get-intrinsic"),o=e("./"),i=o(n("String.prototype.indexOf"));t.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},{"./":103,"get-intrinsic":312}],103:[function(e,t,r){"use strict";var n=e("function-bind"),o=e("get-intrinsic"),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),l=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}t.exports=function(e){var t=s(n,a,arguments);if(l&&u){l(t,"length").configurable&&u(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(n,i,arguments)};u?u(t.exports,"apply",{value:d}):t.exports.apply=d},{"function-bind":311,"get-intrinsic":312}],104:[function(t,r,n){!function(){"use strict";function t(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var i=typeof o;if("string"===i||"number"===i)e.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&e.push(a)}}else if("object"===i)if(o.toString===Object.prototype.toString)for(var s in o)n.call(o,s)&&o[s]&&e.push(s);else e.push(o.toString())}}return e.join(" ")}var n={}.hasOwnProperty;void 0!==r&&r.exports?(t.default=t,r.exports=t):"function"==typeof e&&"object"==typeof e.amd&&e.amd?e("classnames",[],function(){return t}):window.classNames=t}()},{}],105:[function(e,t,r){(function(n){(function(){"use strict";function o(e,t){if(s)return s.call(e,t);var r=e;do{if((0,i.default)(r,t))return r;r=r.parentNode}while(r&&r!==n.document);return null}r.__esModule=!0,r.default=o;var i=function(e){return e&&e.__esModule?e:{default:e}}(e("matches-selector-ng")),a=n.Element&&n.Element.prototype,s=a&&a.closest;t.exports=r.default,t.exports.default=r.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"matches-selector-ng":534}],106:[function(e,t,r){"use strict";t.exports=function(e,t){var r=this,n=r.constructor;return r.callbacks={},r.activeSequences=[],r.resetTimer,r.ignoreNextKeyup=!1,r.ignoreNextKeypress=!1,r.nextExpectedAction=!1,r.element=e,r.addEvents(t),n.instances.push(r),r},t.exports.prototype.bind=e("./prototype/bind"),t.exports.prototype.bindMultiple=e("./prototype/bindMultiple"),t.exports.prototype.trigger=e("./prototype/trigger"),t.exports.prototype.reset=e("./prototype/reset.js"),t.exports.prototype.stopCallback=e("./prototype/stopCallback"),t.exports.prototype.handleKey=e("./prototype/handleKey"),t.exports.prototype.addEvents=e("./prototype/addEvents"),t.exports.prototype.bindSingle=e("./prototype/bindSingle"),t.exports.prototype.getKeyInfo=e("./prototype/getKeyInfo"),t.exports.prototype.pickBestAction=e("./prototype/pickBestAction"),t.exports.prototype.getReverseMap=e("./prototype/getReverseMap"),t.exports.prototype.getMatches=e("./prototype/getMatches"),t.exports.prototype.resetSequences=e("./prototype/resetSequences"),t.exports.prototype.fireCallback=e("./prototype/fireCallback"),t.exports.prototype.bindSequence=e("./prototype/bindSequence"),t.exports.prototype.resetSequenceTimer=e("./prototype/resetSequenceTimer"),t.exports.instances=[],t.exports.reset=e("./reset"),t.exports.REVERSE_MAP=null},{"./prototype/addEvents":107,"./prototype/bind":108,"./prototype/bindMultiple":109,"./prototype/bindSequence":110,"./prototype/bindSingle":111,"./prototype/fireCallback":112,"./prototype/getKeyInfo":113,"./prototype/getMatches":114,"./prototype/getReverseMap":115,"./prototype/handleKey":116,"./prototype/pickBestAction":119,"./prototype/reset.js":120,"./prototype/resetSequenceTimer":121,"./prototype/resetSequences":122,"./prototype/stopCallback":123,"./prototype/trigger":124,"./reset":125}],107:[function(e,t,r){"use strict";t.exports=function(t){var r,n,o,i=this,a=i.element;n=e("./handleKeyEvent"),r=e("../../helpers/addEvent"),o=n.bind(i),r(a,"keypress",o,t),r(a,"keydown",o,t),r(a,"keyup",o,t)}},{"../../helpers/addEvent":126,"./handleKeyEvent":117}],108:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=this;return e=e instanceof Array?e:[e],n.bindMultiple(e,t,r)}},{}],109:[function(e,t,r){"use strict";t.exports=function(e,t,r){for(var n=this,o=[],i=0;i<e.length;++i)o.push(n.bindSingle(e[i],t,r));return function(){for(var e=0;e<o.length;e++)o[e]()}}},{}],110:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){function i(r){var i;a.fireCallback(n,r,t),"keyup"!==o&&(i=e("../../helpers/characterFromEvent"),a.ignoreNextKeyup=i(r)),setTimeout(function(){a.resetSequences()},10)}var a=this;n.currentLevel=0;for(var s=[],l=0;l<r.length;++l){var u=l+1===r.length,c=u?i:function(e){return function(){return a.nextExpectedAction=e,++n.currentLevel,a.resetSequenceTimer(),!0}}(o||a.getKeyInfo(r[l+1]).action);s.push(a.bindSingle(r[l],c,o,t,l,n))}return function(){for(var e=0;e<s.length;e++)s[e]()}}},{"../../helpers/characterFromEvent":127}],111:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,o,i){var a=this;e=e.replace(/\s+/g," ");var s,l=e.split(" ");if(l.length>1)return a.bindSequence(e,l,t,r);s=a.getKeyInfo(e,r),a.callbacks[s.key]=a.callbacks[s.key]||{sequences:[],singles:[]};var u=a.callbacks[s.key][n?"sequences":"singles"],c={callback:t,originalCallback:i||t,modifiers:s.modifiers,action:s.action,seq:n,level:o,combo:e};return u.push(c),function(){var e=u.indexOf(c);u.splice(e,1)}}},{}],112:[function(e,t,r){"use strict";t.exports=function(t,r,n,o){var i,a=this;if(a.stopCallback(r,r.target||r.srcElement,n,o))return!0;var s=t(r,n);return!1===s&&(i=e("../../helpers/preventDefault"),i(r),e("../../helpers/stopPropagation")(r)),s}},{"../../helpers/preventDefault":131,"../../helpers/stopPropagation":136}],113:[function(e,t,r){"use strict";t.exports=function(t,r){var n,o,i,a,s,l,u,c=this,d=[];for(n=e("../../helpers/keysFromString"),o=n(t),s=e("../../helpers/special-aliases"),l=e("../../helpers/shift-map"),u=e("../../helpers/isModifier"),a=0;a<o.length;++a)i=o[a],s[i]&&(i=s[i]),r&&"keypress"!==r&&l[i]&&(i=l[i],d.push("shift")),u(i)&&d.push(i);return r=c.pickBestAction(i,d,r),{key:i,modifiers:d,action:r}}},{"../../helpers/isModifier":129,"../../helpers/keysFromString":130,"../../helpers/shift-map":132,"../../helpers/special-aliases":133}],114:[function(e,t,r){"use strict";t.exports=function(t,r,n,o,i,a){var s,l,u,c=this,d=[],f=n.type;if(!c.callbacks[t])return[];l=e("../../helpers/isModifier"),"keyup"===f&&l(t)&&(r=[t]);var p=c.callbacks[t].sequences.reverse().concat(c.callbacks[t].singles.reverse());for(c.callbacks[t].sequences.reverse(),c.callbacks[t].singles.reverse(),s=0;s<p.length;++s){var m=p[s];!o&&m.seq&&m.originalCallback.currentLevel!==m.level||f===m.action&&(u=e("./modifiersMatch"),("keypress"===f&&!n.metaKey&&!n.ctrlKey||u(r,m.modifiers))&&d.push(m))}return d}},{"../../helpers/isModifier":129,"./modifiersMatch":118}],115:[function(e,t,r){"use strict";t.exports=function(){var t,r=this,n=r.constructor;if(!n.REVERSE_MAP){n.REVERSE_MAP={},t=e("../../helpers/special-keys-map");for(var o in t)o>95&&o<112||t.hasOwnProperty(o)&&(n.REVERSE_MAP[t[o]]=o)}return n.REVERSE_MAP}},{"../../helpers/special-keys-map":135}],116:[function(e,t,r){"use strict";t.exports=function(t,r,n){var o,i,a,s,l=this,u=[],c=0,d=!1;for(o=l.getMatches(t,r,n),i=0;i<o.length;++i)o[i].seq&&(c=Math.max(c,o[i].level));for(i=0;i<o.length;++i)if(o[i].seq){if(o[i].level!==c)continue;if(d=!0,u.push(o[i].originalCallback),!l.fireCallback(o[i].callback,n,o[i].combo,o[i].seq)){u=[];break}}else d||l.fireCallback(o[i].callback,n,o[i].combo);s="keypress"===n.type&&l.ignoreNextKeypress,a=e("../../helpers/isModifier"),n.type!==l.nextExpectedAction||a(t)||s||l.resetSequences(u),l.ignoreNextKeypress=d&&"keydown"===n.type}},{"../../helpers/isModifier":129}],117:[function(e,t,r){"use strict";t.exports=function(t){var r,n,o=this;"number"!=typeof t.which&&(t.which=t.keyCode),r=e("../../helpers/characterFromEvent");var i=r(t);if(i){if("keyup"===t.type&&o.ignoreNextKeyup===i)return void(o.ignoreNextKeyup=!1);n=e("../../helpers/eventModifiers"),o.handleKey(i,n(t),t)}}},{"../../helpers/characterFromEvent":127,"../../helpers/eventModifiers":128}],118:[function(e,t,r){"use strict";t.exports=function(e,t){return e.sort().join(",")===t.sort().join(",")}},{}],119:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=this;return r||(r=n.getReverseMap()[e]?"keydown":"keypress"),"keypress"===r&&t.length&&(r="keydown"),r}},{}],120:[function(e,t,r){"use strict";t.exports=function(){var e=this;return e.callbacks={},e.directMap={},this}},{}],121:[function(e,t,r){"use strict";t.exports=function(){var e=this;clearTimeout(e.resetTimer),e.resetTimer=setTimeout(function(){e.resetSequences()},1e3)}},{}],122:[function(e,t,r){"use strict";t.exports=function(e){e=e||[];for(var t in this.callbacks)for(var r=this.callbacks[t].sequences,n=0;n<r.length;n++)-1===e.indexOf(r[n].originalCallback)&&(r[n].originalCallback.currentLevel=0);this.nextExpectedAction=e.length>0}},{}],123:[function(e,t,r){"use strict";t.exports=function(e,t){return!((" "+t.className+" ").indexOf(" combokeys ")>-1)&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)}},{}],124:[function(e,t,r){"use strict";t.exports=function(e,t){}},{}],125:[function(e,t,r){"use strict";t.exports=function(){this.instances.forEach(function(e){e.reset()})}},{}],126:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){if(e.addEventListener)return void e.addEventListener(t,r,n);e.attachEvent("on"+t,r)}},{}],127:[function(e,t,r){"use strict";t.exports=function(t){var r,n;if(r=e("./special-keys-map"),n=e("./special-characters-map"),"keypress"===t.type){var o=String.fromCharCode(t.which);return t.shiftKey||(o=o.toLowerCase()),o}return r[t.which]?r[t.which]:n[t.which]?n[t.which]:String.fromCharCode(t.which).toLowerCase()}},{"./special-characters-map":134,"./special-keys-map":135}],128:[function(e,t,r){"use strict";t.exports=function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}},{}],129:[function(e,t,r){"use strict";t.exports=function(e){return"shift"===e||"ctrl"===e||"alt"===e||"meta"===e}},{}],130:[function(e,t,r){"use strict";t.exports=function(e){return"+"===e?["+"]:e.split("+")}},{}],131:[function(e,t,r){"use strict";t.exports=function(e){if(e.preventDefault)return void e.preventDefault();e.returnValue=!1}},{}],132:[function(e,t,r){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},{}],133:[function(e,t,r){"use strict";t.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},{}],134:[function(e,t,r){"use strict";t.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},{}],135:[function(e,t,r){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var n=1;n<20;++n)t.exports[111+n]="f"+n;for(n=0;n<=9;++n)t.exports[n+96]=n},{}],136:[function(e,t,r){"use strict";t.exports=function(e){if(e.stopPropagation)return void e.stopPropagation();e.cancelBubble=!0}},{}],137:[function(e,t,r){"use strict";t.exports=e("./Combokeys")},{"./Combokeys":106}],138:[function(e,t,r){"use strict";function n(e,t,r){for(var n=o(e),a=o(t),u={all:r.buffer||0,top:r.topBuffer||0,bottom:r.bottomBuffer||0,left:r.leftBuffer||0,right:r.rightBuffer||0},c=Array.isArray(r.position)?r.position:[r.position].filter(Boolean),d=Array.isArray(r.hAlign)?r.hAlign:[r.hAlign].filter(Boolean),f=Array.isArray(r.vAlign)?r.vAlign:[r.vAlign].filter(Boolean),p=c.length>0&&r.forcePosition?c:(0,l.default)(c.concat(["top","bottom","left","right"])),m=d.length>0&&r.forceHAlign?d:(0,l.default)(d.concat(["center","left","right"])),h=f.length>0&&r.forceVAlign?f:(0,l.default)(f.concat(["center","top","bottom"])),b=(0,s.default)(p.map(function(e){return"cover"===e?(0,s.default)(m.map(function(t){return h.map(function(r){return{position:e,hAlign:t,vAlign:r}})})):"top"===e||"bottom"===e?m.map(function(t){return{position:e,hAlign:t,vAlign:"center"}}):h.map(function(t){return{position:e,hAlign:"center",vAlign:t}})})),v=null,_=0;_<b.length;_++){var g=b[_],y=i(n,a,g,u),w=y.top,j=y.left
;if(w-u.all-u.top>=0&&j-u.all-u.left>=0&&w+n.height+u.all+u.bottom<=window.innerHeight&&j+n.width+u.all+u.right<=window.innerWidth){v={choice:g,coord:y};break}}if(!v){var k={position:c[0]||"top",hAlign:d[0]||"center",vAlign:f[0]||"center"};v={choice:k,coord:i(n,a,k,u)}}return e.style.top="".concat(v.coord.top,"px"),e.style.left="".concat(v.coord.left,"px"),v.choice}function o(e){var t=e.getBoundingClientRect();return"width"in t||(t=Object.assign({width:t.right-t.left,height:t.bottom-t.top},t)),t}function i(e,t,r,n){var o=r.position,i=r.hAlign,a=r.vAlign,s=0,l=0;if("cover"===o){switch(i){case"center":l=Math.round((t.left+t.right-e.width)/2);break;case"left":l=Math.floor(t.left);break;case"right":l=Math.ceil(t.right-e.width);break;default:throw new Error("Should not happen")}switch(a){case"center":s=Math.round((t.top+t.bottom-e.height)/2);break;case"top":s=Math.floor(t.top);break;case"bottom":s=Math.ceil(t.bottom-e.height);break;default:throw new Error("Should not happen")}}else if("top"===o||"bottom"===o){switch(o){case"top":s=Math.floor(t.top-e.height-n.all-n.bottom);break;case"bottom":s=Math.ceil(t.bottom+n.all+n.top);break;default:throw new Error("Should not happen")}switch(i){case"center":l=Math.round((t.left+t.right-e.width)/2);break;case"left":l=Math.round(t.left);break;case"right":l=Math.round(t.right-e.width);break;default:throw new Error("Should not happen")}}else{switch(o){case"left":l=Math.floor(t.left-e.width-n.all-n.right);break;case"right":l=Math.ceil(t.right+n.all+n.left);break;default:throw new Error("Should not happen")}switch(a){case"center":s=Math.round((t.top+t.bottom-e.height)/2);break;case"top":s=Math.round(t.top);break;case"bottom":s=Math.round(t.bottom-e.height);break;default:throw new Error("Should not happen")}}return{top:s,left:l}}var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var s=a(e("lodash/flatten")),l=a(e("lodash/uniq"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":69,"lodash/flatten":488,"lodash/uniq":528}],139:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":186,"../../modules/es6.array.from":257,"../../modules/es6.string.iterator":281}],140:[function(e,t,r){e("../../modules/es6.array.is-array"),t.exports=e("../../modules/_core").Array.isArray},{"../../modules/_core":186,"../../modules/es6.array.is-array":258}],141:[function(e,t,r){e("../../modules/es6.date.now"),t.exports=e("../../modules/_core").Date.now},{"../../modules/_core":186,"../../modules/es6.date.now":260}],142:[function(e,t,r){var n=e("../../modules/_core"),o=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(e){return o.stringify.apply(o,arguments)}},{"../../modules/_core":186}],143:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":186,"../modules/es6.map":261,"../modules/es6.object.to-string":275,"../modules/es6.string.iterator":281,"../modules/es7.map.from":285,"../modules/es7.map.of":286,"../modules/es7.map.to-json":287,"../modules/web.dom.iterable":299}],144:[function(e,t,r){e("../../modules/es6.number.is-nan"),t.exports=e("../../modules/_core").Number.isNaN},{"../../modules/_core":186,"../../modules/es6.number.is-nan":262}],145:[function(e,t,r){e("../../modules/es6.number.max-safe-integer"),t.exports=9007199254740991},{"../../modules/es6.number.max-safe-integer":263}],146:[function(e,t,r){e("../../modules/es6.number.min-safe-integer"),t.exports=-9007199254740991},{"../../modules/es6.number.min-safe-integer":264}],147:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":186,"../../modules/es6.object.assign":265}],148:[function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.create(e,t)}},{"../../modules/_core":186,"../../modules/es6.object.create":266}],149:[function(e,t,r){e("../../modules/es6.object.define-properties");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.defineProperties(e,t)}},{"../../modules/_core":186,"../../modules/es6.object.define-properties":267}],150:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":186,"../../modules/es6.object.define-property":268}],151:[function(e,t,r){e("../../modules/es6.object.freeze"),t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":186,"../../modules/es6.object.freeze":269}],152:[function(e,t,r){e("../../modules/es6.object.get-own-property-descriptor");var n=e("../../modules/_core").Object;t.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},{"../../modules/_core":186,"../../modules/es6.object.get-own-property-descriptor":270}],153:[function(e,t,r){e("../../modules/es7.object.get-own-property-descriptors"),t.exports=e("../../modules/_core").Object.getOwnPropertyDescriptors},{"../../modules/_core":186,"../../modules/es7.object.get-own-property-descriptors":288}],154:[function(e,t,r){e("../../modules/es6.object.get-own-property-names");var n=e("../../modules/_core").Object;t.exports=function(e){return n.getOwnPropertyNames(e)}},{"../../modules/_core":186,"../../modules/es6.object.get-own-property-names":271}],155:[function(e,t,r){e("../../modules/es6.symbol"),t.exports=e("../../modules/_core").Object.getOwnPropertySymbols},{"../../modules/_core":186,"../../modules/es6.symbol":282}],156:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/_core").Object.getPrototypeOf},{"../../modules/_core":186,"../../modules/es6.object.get-prototype-of":272}],157:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":186,"../../modules/es6.object.keys":273}],158:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/_core").Object.setPrototypeOf},{"../../modules/_core":186,"../../modules/es6.object.set-prototype-of":274}],159:[function(e,t,r){e("../../modules/es7.object.values"),t.exports=e("../../modules/_core").Object.values},{"../../modules/_core":186,"../../modules/es7.object.values":289}],160:[function(e,t,r){e("../modules/es6.parse-float"),t.exports=e("../modules/_core").parseFloat},{"../modules/_core":186,"../modules/es6.parse-float":276}],161:[function(e,t,r){e("../modules/es6.parse-int"),t.exports=e("../modules/_core").parseInt},{"../modules/_core":186,"../modules/es6.parse-int":277}],162:[function(e,t,r){(function(e){(function(){t.exports=e.Promise}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],163:[function(e,t,r){e("../../modules/es6.reflect.construct"),t.exports=e("../../modules/_core").Reflect.construct},{"../../modules/_core":186,"../../modules/es6.reflect.construct":278}],164:[function(e,t,r){e("../../modules/es6.reflect.get"),t.exports=e("../../modules/_core").Reflect.get},{"../../modules/_core":186,"../../modules/es6.reflect.get":279}],165:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),e("../modules/es7.set.of"),e("../modules/es7.set.from"),t.exports=e("../modules/_core").Set},{"../modules/_core":186,"../modules/es6.object.to-string":275,"../modules/es6.set":280,"../modules/es6.string.iterator":281,"../modules/es7.set.from":290,"../modules/es7.set.of":291,"../modules/es7.set.to-json":292,"../modules/web.dom.iterable":299}],166:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),t.exports=e("../../modules/_core").Symbol},{"../../modules/_core":186,"../../modules/es6.object.to-string":275,"../../modules/es6.symbol":282,"../../modules/es7.symbol.async-iterator":293,"../../modules/es7.symbol.observable":294}],167:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/_wks-ext").f("iterator")},{"../../modules/_wks-ext":254,"../../modules/es6.string.iterator":281,"../../modules/web.dom.iterable":299}],168:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-map"),e("../modules/es7.weak-map.of"),e("../modules/es7.weak-map.from"),t.exports=e("../modules/_core").WeakMap},{"../modules/_core":186,"../modules/es6.object.to-string":275,"../modules/es6.weak-map":283,"../modules/es7.weak-map.from":295,"../modules/es7.weak-map.of":296,"../modules/web.dom.iterable":299}],169:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-set"),e("../modules/es7.weak-set.of"),e("../modules/es7.weak-set.from"),t.exports=e("../modules/_core").WeakSet},{"../modules/_core":186,"../modules/es6.object.to-string":275,"../modules/es6.weak-set":284,"../modules/es7.weak-set.from":297,"../modules/es7.weak-set.of":298,"../modules/web.dom.iterable":299}],170:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],171:[function(e,t,r){t.exports=function(){}},{}],172:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],173:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":206}],174:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":196}],175:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-absolute-index");t.exports=function(e){return function(t,r,a){var s,l=n(t),u=o(l.length),c=i(a,u);if(e&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===r)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":245,"./_to-iobject":247,"./_to-length":248}],176:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,l=2==e,u=3==e,c=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,m){for(var h,b,v=i(t),_=o(v),g=n(s,m,3),y=a(_.length),w=0,j=r?p(t,y):l?p(t,0):void 0;y>w;w++)if((f||w in _)&&(h=_[w],b=g(h,w,v),e))if(r)j[w]=b;else if(b)switch(e){case 3:return!0;case 5:return h;case 6:return w;case 2:j.push(h)}else if(c)return!1;return d?-1:u||c?c:j}}},{"./_array-species-create":178,"./_ctx":188,"./_iobject":203,"./_to-length":248,"./_to-object":249}],177:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":205,"./_is-object":206,"./_wks":255}],178:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":177}],179:[function(e,t,r){"use strict";var n=e("./_a-function"),o=e("./_is-object"),i=e("./_invoke"),a=[].slice,s={},l=function(e,t,r){if(!(t in s)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};t.exports=Function.bind||function(e){var t=n(this),r=a.call(arguments,1),s=function(){var n=r.concat(a.call(arguments));return this instanceof s?l(t,n.length,n):i(t,n,e)};return o(t.prototype)&&(s.prototype=t.prototype),s}},{"./_a-function":170,"./_invoke":202,"./_is-object":206}],180:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":181,"./_wks":255}],181:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],182:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),l=e("./_for-of"),u=e("./_iter-define"),c=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,m=e("./_validate-collection"),h=f?"_s":"size",b=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,u){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=n&&l(n,r,e[u],e)});return i(c.prototype,{clear:function(){for(var e=m(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var r=m(this,t),n=b(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[h]--}return!!n},forEach:function(e){m(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!b(m(this,t),e)}}),f&&n(c.prototype,"size",{get:function(){return m(this,t)[h]}}),c},def:function(e,t,r){var n,o,i=b(e,t);return i?i.v=r:(e._l=i={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[h]++,"F"!==o&&(e._i[o]=i)),e},getEntry:b,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=m(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":172,"./_ctx":188,"./_descriptors":190,"./_for-of":196,"./_iter-define":209,"./_iter-step":211,"./_meta":214,"./_object-create":216,"./_object-dp":217,"./_redefine-all":233,"./_set-species":238,"./_validate-collection":252}],183:[function(e,t,r){var n=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":174,"./_classof":180}],184:[function(e,t,r){"use strict";var n=e("./_redefine-all"),o=e("./_meta").getWeak,i=e("./_an-object"),a=e("./_is-object"),s=e("./_an-instance"),l=e("./_for-of"),u=e("./_array-methods"),c=e("./_has"),d=e("./_validate-collection"),f=u(5),p=u(6),m=0,h=function(e){return e._l||(e._l=new b)},b=function(){this.a=[]},v=function(e,t){return f(e.a,function(e){return e[0]===t})};b.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=p(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},t.exports={getConstructor:function(e,t,r,i){var u=e(function(e,n){s(e,u,t,"_i"),e._t=t,e._i=m++,e._l=void 0,void 0!=n&&l(n,r,e[i],e)});return n(u.prototype,{delete:function(e){if(!a(e))return!1;var r=o(e);return!0===r?h(d(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!a(e))return!1;var r=o(e);return!0===r?h(d(this,t)).has(e):r&&c(r,this._i)}}),u},def:function(e,t,r){var n=o(i(t),!0);return!0===n?h(e).set(t,r):n[e._i]=r,e},ufstore:h}},{"./_an-instance":172,"./_an-object":173,"./_array-methods":176,"./_for-of":196,"./_has":198,"./_is-object":206,"./_meta":214,"./_redefine-all":233,"./_validate-collection":252}],185:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),i=e("./_meta"),a=e("./_fails"),s=e("./_hide"),l=e("./_redefine-all"),u=e("./_for-of"),c=e("./_an-instance"),d=e("./_is-object"),f=e("./_set-to-string-tag"),p=e("./_object-dp").f,m=e("./_array-methods")(0),h=e("./_descriptors");t.exports=function(e,t,r,b,v,_){var g=n[e],y=g,w=v?"set":"add",j=y&&y.prototype,k={};return h&&"function"==typeof y&&(_||j.forEach&&!a(function(){(new y).entries().next()}))?(y=t(function(t,r){c(t,y,e,"_c"),t._c=new g,void 0!=r&&u(r,v,t[w],t)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in j&&(!_||"clear"!=e)&&s(y.prototype,e,function(r,n){if(c(this,y,e),!t&&_&&!d(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o})}),_||p(y.prototype,"size",{get:function(){return this._c.size}})):(y=b.getConstructor(t,e,v,w),l(y.prototype,r),i.NEED=!0),f(y,e),k[e]=y,o(o.G+o.W+o.F,k),_||b.setStrong(y,e,v),y}},{"./_an-instance":172,"./_array-methods":176,"./_descriptors":190,"./_export":194,"./_fails":195,"./_for-of":196,"./_global":197,"./_hide":199,"./_is-object":206,"./_meta":214,"./_object-dp":217,"./_redefine-all":233,"./_set-to-string-tag":239}],186:[function(e,t,r){var n=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},{}],187:[function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},{"./_object-dp":217,"./_property-desc":232}],188:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":170}],189:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],190:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":195}],191:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":197,"./_is-object":206}],192:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],193:[function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");t.exports=function(e){var t=n(e),r=o.f;if(r)for(var a,s=r(e),l=i.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},{"./_object-gops":222,"./_object-keys":225,"./_object-pie":226}],194:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s=e("./_has"),l=function(e,t,r){var u,c,d,f=e&l.F,p=e&l.G,m=e&l.S,h=e&l.P,b=e&l.B,v=e&l.W,_=p?o:o[t]||(o[t]={}),g=_.prototype,y=p?n:m?n[t]:(n[t]||{}).prototype;p&&(r=t);for(u in r)(c=!f&&y&&void 0!==y[u])&&s(_,u)||(d=c?y[u]:r[u],_[u]=p&&"function"!=typeof y[u]?r[u]:b&&c?i(d,n):v&&y[u]==d?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):h&&"function"==typeof d?i(Function.call,d):d,h&&((_.virtual||(_.virtual={}))[u]=d,e&l.R&&g&&!g[u]&&a(g,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},{"./_core":186,"./_ctx":188,"./_global":197,"./_has":198,"./_hide":199}],195:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],196:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),l=e("./core.get-iterator-method"),u={},c={},r=t.exports=function(e,t,r,d,f){var p,m,h,b,v=f?function(){return e}:l(e),_=n(r,d,t?2:1),g=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(i(v)){for(p=s(e.length);p>g;g++)if((b=t?_(a(m=e[g])[0],m[1]):_(e[g]))===u||b===c)return b}else for(h=v.call(e);!(m=h.next()).done;)if((b=o(h,_,m.value,t))===u||b===c)return b};r.BREAK=u,r.RETURN=c},{"./_an-object":173,"./_ctx":188,"./_is-array-iter":204,"./_iter-call":207,"./_to-length":248,"./core.get-iterator-method":256}],197:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],198:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],199:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":190,"./_object-dp":217,"./_property-desc":232}],200:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":197}],201:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":190,"./_dom-create":191,"./_fails":195}],202:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],203:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":181}],204:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./_iterators":212,"./_wks":255}],205:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":181}],206:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],207:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"./_an-object":173}],208:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},{"./_hide":199,"./_object-create":216,"./_property-desc":232,"./_set-to-string-tag":239,"./_wks":255}],209:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_iterators"),l=e("./_iter-create"),u=e("./_set-to-string-tag"),c=e("./_object-gpo"),d=e("./_wks")("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(e,t,r,m,h,b,v){l(r,t,m);var _,g,y,w=function(e){if(!f&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},j=t+" Iterator",k="values"==h,x=!1,E=e.prototype,S=E[d]||E["@@iterator"]||h&&E[h],C=S||w(h),I=h?k?w("entries"):C:void 0,A="Array"==t?E.entries||S:S;if(A&&(y=c(A.call(new e)))!==Object.prototype&&y.next&&(u(y,j,!0),n||"function"==typeof y[d]||a(y,d,p)),k&&S&&"values"!==S.name&&(x=!0,C=function(){return S.call(this)}),n&&!v||!f&&!x&&E[d]||a(E,d,C),s[t]=C,s[j]=p,h)if(_={values:k?C:w("values"),keys:b?C:w("keys"),entries:I},v)for(g in _)g in E||i(E,g,_[g]);else o(o.P+o.F*(f||x),t,_);return _}},{"./_export":194,"./_hide":199,"./_iter-create":208,"./_iterators":212,"./_library":213,"./_object-gpo":223,"./_redefine":234,"./_set-to-string-tag":239,"./_wks":255}],210:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},{"./_wks":255}],211:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],212:[function(e,t,r){t.exports={}},{}],213:[function(e,t,r){t.exports=!0},{}],214:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,l=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[n].w},p=function(e){return u&&m.NEED&&l(e)&&!i(e,n)&&c(e),e},m=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},{"./_fails":195,"./_has":198,"./_is-object":206,"./_object-dp":217,"./_uid":251}],215:[function(e,t,r){"use strict";var n=e("./_descriptors"),o=e("./_object-keys"),i=e("./_object-gops"),a=e("./_object-pie"),s=e("./_to-object"),l=e("./_iobject"),u=Object.assign;t.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=s(e),u=arguments.length,c=1,d=i.f,f=a.f;u>c;)for(var p,m=l(arguments[c++]),h=d?o(m).concat(d(m)):o(m),b=h.length,v=0;b>v;)p=h[v++],n&&!f.call(m,p)||(r[p]=m[p]);return r}:u},{"./_descriptors":190,"./_fails":195,"./_iobject":203,"./_object-gops":222,"./_object-keys":225,"./_object-pie":226,"./_to-object":249}],216:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},l=function(){var t,r=e("./_dom-create")("iframe"),n=i.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[i[n]];return l()};t.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=l(),void 0===t?r:o(r,t)}},{"./_an-object":173,"./_dom-create":191,"./_enum-bug-keys":192,"./_html":200,"./_object-dps":218,"./_shared-key":240}],217:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":173,"./_descriptors":190,"./_ie8-dom-define":201,"./_to-primitive":250}],218:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,l=0;s>l;)n.f(e,r=a[l++],t[r]);return e}},{"./_an-object":173,"./_descriptors":190,"./_object-dp":217,"./_object-keys":225}],219:[function(e,t,r){var n=e("./_object-pie"),o=e("./_property-desc"),i=e("./_to-iobject"),a=e("./_to-primitive"),s=e("./_has"),l=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;r.f=e("./_descriptors")?u:function(e,t){if(e=i(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},{"./_descriptors":190,"./_has":198,"./_ie8-dom-define":201,"./_object-pie":226,"./_property-desc":232,"./_to-iobject":247,"./_to-primitive":250}],220:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};t.exports.f=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(n(e))}},{"./_object-gopn":221,"./_to-iobject":247}],221:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys").concat("length","prototype");r.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},{"./_enum-bug-keys":192,"./_object-keys-internal":224}],222:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],223:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":198,"./_shared-key":240,"./_to-object":249}],224:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=o(e),l=0,u=[];for(r in s)r!=a&&n(s,r)&&u.push(r);for(;t.length>l;)n(s,r=t[l++])&&(~i(u,r)||u.push(r));return u}},{"./_array-includes":175,"./_has":198,"./_shared-key":240,"./_to-iobject":247}],225:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":192,"./_object-keys-internal":224}],226:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],227:[function(e,t,r){var n=e("./_export"),o=e("./_core"),i=e("./_fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},{"./_core":186,"./_export":194,"./_fails":195}],228:[function(e,t,r){var n=e("./_descriptors"),o=e("./_object-keys"),i=e("./_to-iobject"),a=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,s=i(t),l=o(s),u=l.length,c=0,d=[];u>c;)r=l[c++],n&&!a.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}}},{"./_descriptors":190,"./_object-keys":225,"./_object-pie":226,"./_to-iobject":247}],229:[function(e,t,r){var n=e("./_object-gopn"),o=e("./_object-gops"),i=e("./_an-object"),a=e("./_global").Reflect;t.exports=a&&a.ownKeys||function(e){var t=n.f(i(e)),r=o.f;return r?t.concat(r(e)):t}},{"./_an-object":173,"./_global":197,"./_object-gopn":221,"./_object-gops":222}],230:[function(e,t,r){var n=e("./_global").parseFloat,o=e("./_string-trim").trim;t.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function(e){var t=o(String(e),3),r=n(t);return 0===r&&"-"==t.charAt(0)?-0:r}:n},{"./_global":197,"./_string-trim":243,"./_string-ws":244}],231:[function(e,t,r){var n=e("./_global").parseInt,o=e("./_string-trim").trim,i=e("./_string-ws"),a=/^[-+]?0[xX]/;t.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(e,t){var r=o(String(e),3);return n(r,t>>>0||(a.test(r)?16:10))}:n},{"./_global":197,"./_string-trim":243,"./_string-ws":244}],232:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],233:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":199}],234:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":199}],235:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_a-function"),i=e("./_ctx"),a=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,l=arguments[1];return o(this),t=void 0!==l,t&&o(l),void 0==e?new this:(r=[],t?(n=0,s=i(l,arguments[2],2),a(e,!1,function(e){r.push(s(e,n++))})):a(e,!1,r.push,r),new this(r))}})}},{"./_a-function":170,"./_ctx":188,"./_export":194,"./_for-of":196}],236:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":194}],237:[function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2),n(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function(e,t){return i(e,t),r?e.__proto__=t:n(e,t),e}}({},!1):void 0),check:i}},{"./_an-object":173,"./_ctx":188,"./_is-object":206,"./_object-gopd":219}],238:[function(e,t,r){"use strict"
;var n=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":186,"./_descriptors":190,"./_global":197,"./_object-dp":217,"./_wks":255}],239:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":198,"./_object-dp":217,"./_wks":255}],240:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":241,"./_uid":251}],241:[function(e,t,r){var n=e("./_core"),o=e("./_global"),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(t.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":186,"./_global":197,"./_library":213}],242:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),l=n(r),u=s.length;return l<0||l>=u?e?"":void 0:(i=s.charCodeAt(l),i<55296||i>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):i:e?s.slice(l,l+2):a-56320+(i-55296<<10)+65536)}}},{"./_defined":189,"./_to-integer":246}],243:[function(e,t,r){var n=e("./_export"),o=e("./_defined"),i=e("./_fails"),a=e("./_string-ws"),s="["+a+"]",l="​",u=RegExp("^"+s+s+"*"),c=RegExp(s+s+"*$"),d=function(e,t,r){var o={},s=i(function(){return!!a[e]()||l[e]()!=l}),u=o[e]=s?t(f):a[e];r&&(o[r]=u),n(n.P+n.F*s,"String",o)},f=d.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(c,"")),e};t.exports=d},{"./_defined":189,"./_export":194,"./_fails":195,"./_string-ws":244}],244:[function(e,t,r){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},{}],245:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":246}],246:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],247:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":189,"./_iobject":203}],248:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":246}],249:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":189}],250:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":206}],251:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],252:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":206}],253:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;t.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},{"./_core":186,"./_global":197,"./_library":213,"./_object-dp":217,"./_wks-ext":254}],254:[function(e,t,r){r.f=e("./_wks")},{"./_wks":255}],255:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i;(t.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},{"./_global":197,"./_shared":241,"./_uid":251}],256:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"./_classof":180,"./_core":186,"./_iterators":212,"./_wks":255}],257:[function(e,t,r){"use strict";var n=e("./_ctx"),o=e("./_export"),i=e("./_to-object"),a=e("./_iter-call"),s=e("./_is-array-iter"),l=e("./_to-length"),u=e("./_create-property"),c=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,f=i(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,b=void 0!==h,v=0,_=c(f);if(b&&(h=n(h,m>2?arguments[2]:void 0,2)),void 0==_||p==Array&&s(_))for(t=l(f.length),r=new p(t);t>v;v++)u(r,v,b?h(f[v],v):f[v]);else for(d=_.call(f),r=new p;!(o=d.next()).done;v++)u(r,v,b?a(d,h,[o.value,v],!0):o.value);return r.length=v,r}})},{"./_create-property":187,"./_ctx":188,"./_export":194,"./_is-array-iter":204,"./_iter-call":207,"./_iter-detect":210,"./_to-length":248,"./_to-object":249,"./core.get-iterator-method":256}],258:[function(e,t,r){var n=e("./_export");n(n.S,"Array",{isArray:e("./_is-array")})},{"./_export":194,"./_is-array":205}],259:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":171,"./_iter-define":209,"./_iter-step":211,"./_iterators":212,"./_to-iobject":247}],260:[function(e,t,r){var n=e("./_export");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":194}],261:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":185,"./_collection-strong":182,"./_validate-collection":252}],262:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isNaN:function(e){return e!=e}})},{"./_export":194}],263:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":194}],264:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":194}],265:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":194,"./_object-assign":215}],266:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{create:e("./_object-create")})},{"./_export":194,"./_object-create":216}],267:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},{"./_descriptors":190,"./_export":194,"./_object-dps":218}],268:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":190,"./_export":194,"./_object-dp":217}],269:[function(e,t,r){var n=e("./_is-object"),o=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function(t){return e&&n(t)?e(o(t)):t}})},{"./_is-object":206,"./_meta":214,"./_object-sap":227}],270:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},{"./_object-gopd":219,"./_object-sap":227,"./_to-iobject":247}],271:[function(e,t,r){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},{"./_object-gopn-ext":220,"./_object-sap":227}],272:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function(e){return o(n(e))}})},{"./_object-gpo":223,"./_object-sap":227,"./_to-object":249}],273:[function(e,t,r){var n=e("./_to-object"),o=e("./_object-keys");e("./_object-sap")("keys",function(){return function(e){return o(n(e))}})},{"./_object-keys":225,"./_object-sap":227,"./_to-object":249}],274:[function(e,t,r){var n=e("./_export");n(n.S,"Object",{setPrototypeOf:e("./_set-proto").set})},{"./_export":194,"./_set-proto":237}],275:[function(e,t,r){},{}],276:[function(e,t,r){var n=e("./_export"),o=e("./_parse-float");n(n.G+n.F*(parseFloat!=o),{parseFloat:o})},{"./_export":194,"./_parse-float":230}],277:[function(e,t,r){var n=e("./_export"),o=e("./_parse-int");n(n.G+n.F*(parseInt!=o),{parseInt:o})},{"./_export":194,"./_parse-int":231}],278:[function(e,t,r){var n=e("./_export"),o=e("./_object-create"),i=e("./_a-function"),a=e("./_an-object"),s=e("./_is-object"),l=e("./_fails"),u=e("./_bind"),c=(e("./_global").Reflect||{}).construct,d=l(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),f=!l(function(){c(function(){})});n(n.S+n.F*(d||f),"Reflect",{construct:function(e,t){i(e),a(t);var r=arguments.length<3?e:i(arguments[2]);if(f&&!d)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(u.apply(e,n))}var l=r.prototype,p=o(s(l)?l:Object.prototype),m=Function.apply.call(e,p,t);return s(m)?m:p}})},{"./_a-function":170,"./_an-object":173,"./_bind":179,"./_export":194,"./_fails":195,"./_global":197,"./_is-object":206,"./_object-create":216}],279:[function(e,t,r){function n(e,t){var r,s,c=arguments.length<3?e:arguments[2];return u(e)===c?e[t]:(r=o.f(e,t))?a(r,"value")?r.value:void 0!==r.get?r.get.call(c):void 0:l(s=i(e))?n(s,t,c):void 0}var o=e("./_object-gopd"),i=e("./_object-gpo"),a=e("./_has"),s=e("./_export"),l=e("./_is-object"),u=e("./_an-object");s(s.S,"Reflect",{get:n})},{"./_an-object":173,"./_export":194,"./_has":198,"./_is-object":206,"./_object-gopd":219,"./_object-gpo":223}],280:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"Set"),e=0===e?0:e,e)}},n)},{"./_collection":185,"./_collection-strong":182,"./_validate-collection":252}],281:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":209,"./_string-at":242}],282:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_has"),i=e("./_descriptors"),a=e("./_export"),s=e("./_redefine"),l=e("./_meta").KEY,u=e("./_fails"),c=e("./_shared"),d=e("./_set-to-string-tag"),f=e("./_uid"),p=e("./_wks"),m=e("./_wks-ext"),h=e("./_wks-define"),b=e("./_enum-keys"),v=e("./_is-array"),_=e("./_an-object"),g=e("./_is-object"),y=e("./_to-object"),w=e("./_to-iobject"),j=e("./_to-primitive"),k=e("./_property-desc"),x=e("./_object-create"),E=e("./_object-gopn-ext"),S=e("./_object-gopd"),C=e("./_object-gops"),I=e("./_object-dp"),A=e("./_object-keys"),T=S.f,D=I.f,M=E.f,R=n.Symbol,O=n.JSON,P=O&&O.stringify,L=p("_hidden"),V=p("toPrimitive"),N={}.propertyIsEnumerable,B=c("symbol-registry"),q=c("symbols"),U=c("op-symbols"),F=Object.prototype,H="function"==typeof R&&!!C.f,z=n.QObject,W=!z||!z.prototype||!z.prototype.findChild,G=i&&u(function(){return 7!=x(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=T(F,t);n&&delete F[t],D(e,t,r),n&&e!==F&&D(F,t,n)}:D,K=function(e){var t=q[e]=x(R.prototype);return t._k=e,t},$=H&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},J=function(e,t,r){return e===F&&J(U,t,r),_(e),t=j(t,!0),_(r),o(q,t)?(r.enumerable?(o(e,L)&&e[L][t]&&(e[L][t]=!1),r=x(r,{enumerable:k(0,!1)})):(o(e,L)||D(e,L,k(1,{})),e[L][t]=!0),G(e,t,r)):D(e,t,r)},Y=function(e,t){_(e);for(var r,n=b(t=w(t)),o=0,i=n.length;i>o;)J(e,r=n[o++],t[r]);return e},Q=function(e,t){return void 0===t?x(e):Y(x(e),t)},Z=function(e){var t=N.call(this,e=j(e,!0));return!(this===F&&o(q,e)&&!o(U,e))&&(!(t||!o(this,e)||!o(q,e)||o(this,L)&&this[L][e])||t)},X=function(e,t){if(e=w(e),t=j(t,!0),e!==F||!o(q,t)||o(U,t)){var r=T(e,t);return!r||!o(q,t)||o(e,L)&&e[L][t]||(r.enumerable=!0),r}},ee=function(e){for(var t,r=M(w(e)),n=[],i=0;r.length>i;)o(q,t=r[i++])||t==L||t==l||n.push(t);return n},te=function(e){for(var t,r=e===F,n=M(r?U:w(e)),i=[],a=0;n.length>a;)!o(q,t=n[a++])||r&&!o(F,t)||i.push(q[t]);return i};H||(R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(U,r),o(this,L)&&o(this[L],e)&&(this[L][e]=!1),G(this,e,k(1,r))};return i&&W&&G(F,e,{configurable:!0,set:t}),K(e)},s(R.prototype,"toString",function(){return this._k}),S.f=X,I.f=J,e("./_object-gopn").f=E.f=ee,e("./_object-pie").f=Z,C.f=te,i&&!e("./_library")&&s(F,"propertyIsEnumerable",Z,!0),m.f=function(e){return K(p(e))}),a(a.G+a.W+a.F*!H,{Symbol:R});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;re.length>ne;)p(re[ne++]);for(var oe=A(p.store),ie=0;oe.length>ie;)h(oe[ie++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return o(B,e+="")?B[e]:B[e]=R(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!H,"Object",{create:Q,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:X,getOwnPropertyNames:ee,getOwnPropertySymbols:te});var ae=u(function(){C.f(1)});a(a.S+a.F*ae,"Object",{getOwnPropertySymbols:function(e){return C.f(y(e))}}),O&&a(a.S+a.F*(!H||u(function(){var e=R();return"[null]"!=P([e])||"{}"!=P({a:e})||"{}"!=P(Object(e))})),"JSON",{stringify:function(e){for(var t,r,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=t=n[1],(g(t)||void 0!==e)&&!$(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!$(t))return t}),n[1]=t,P.apply(O,n)}}),R.prototype[V]||e("./_hide")(R.prototype,V,R.prototype.valueOf),d(R,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},{"./_an-object":173,"./_descriptors":190,"./_enum-keys":193,"./_export":194,"./_fails":195,"./_global":197,"./_has":198,"./_hide":199,"./_is-array":205,"./_is-object":206,"./_library":213,"./_meta":214,"./_object-create":216,"./_object-dp":217,"./_object-gopd":219,"./_object-gopn":221,"./_object-gopn-ext":220,"./_object-gops":222,"./_object-keys":225,"./_object-pie":226,"./_property-desc":232,"./_redefine":234,"./_set-to-string-tag":239,"./_shared":241,"./_to-iobject":247,"./_to-object":249,"./_to-primitive":250,"./_uid":251,"./_wks":255,"./_wks-define":253,"./_wks-ext":254}],283:[function(e,t,r){"use strict";var n,o=e("./_global"),i=e("./_array-methods")(0),a=e("./_redefine"),s=e("./_meta"),l=e("./_object-assign"),u=e("./_collection-weak"),c=e("./_is-object"),d=e("./_validate-collection"),f=e("./_validate-collection"),p=!o.ActiveXObject&&"ActiveXObject"in o,m=s.getWeak,h=Object.isExtensible,b=u.ufstore,v=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},_={get:function(e){if(c(e)){var t=m(e);return!0===t?b(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(d(this,"WeakMap"),e,t)}},g=t.exports=e("./_collection")("WeakMap",v,_,u,!0,!0);f&&p&&(n=u.getConstructor(v,"WeakMap"),l(n.prototype,_),s.NEED=!0,i(["delete","has","get","set"],function(e){var t=g.prototype,r=t[e];a(t,e,function(t,o){if(c(t)&&!h(t)){this._f||(this._f=new n);var i=this._f[e](t,o);return"set"==e?this:i}return r.call(this,t,o)})}))},{"./_array-methods":176,"./_collection":185,"./_collection-weak":184,"./_global":197,"./_is-object":206,"./_meta":214,"./_object-assign":215,"./_redefine":234,"./_validate-collection":252}],284:[function(e,t,r){"use strict";var n=e("./_collection-weak"),o=e("./_validate-collection");e("./_collection")("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(o(this,"WeakSet"),e,!0)}},n,!1,!0)},{"./_collection":185,"./_collection-weak":184,"./_validate-collection":252}],285:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":235}],286:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":236}],287:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":183,"./_export":194}],288:[function(e,t,r){var n=e("./_export"),o=e("./_own-keys"),i=e("./_to-iobject"),a=e("./_object-gopd"),s=e("./_create-property");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=i(e),l=a.f,u=o(n),c={},d=0;u.length>d;)void 0!==(r=l(n,t=u[d++]))&&s(c,t,r);return c}})},{"./_create-property":187,"./_export":194,"./_object-gopd":219,"./_own-keys":229,"./_to-iobject":247}],289:[function(e,t,r){var n=e("./_export"),o=e("./_object-to-array")(!1);n(n.S,"Object",{values:function(e){return o(e)}})},{"./_export":194,"./_object-to-array":228}],290:[function(e,t,r){e("./_set-collection-from")("Set")},{"./_set-collection-from":235}],291:[function(e,t,r){e("./_set-collection-of")("Set")},{"./_set-collection-of":236}],292:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Set",{toJSON:e("./_collection-to-json")("Set")})},{"./_collection-to-json":183,"./_export":194}],293:[function(e,t,r){e("./_wks-define")("asyncIterator")},{"./_wks-define":253}],294:[function(e,t,r){e("./_wks-define")("observable")},{"./_wks-define":253}],295:[function(e,t,r){e("./_set-collection-from")("WeakMap")},{"./_set-collection-from":235}],296:[function(e,t,r){e("./_set-collection-of")("WeakMap")},{"./_set-collection-of":236}],297:[function(e,t,r){e("./_set-collection-from")("WeakSet")},{"./_set-collection-from":235}],298:[function(e,t,r){e("./_set-collection-of")("WeakSet")},{"./_set-collection-of":236}],299:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=n[u],d=c&&c.prototype;d&&!d[a]&&o(d,a,u),i[u]=i.Array}},{"./_global":197,"./_hide":199,"./_iterators":212,"./_wks":255,"./es6.array.iterator":259}],300:[function(t,r,n){!function(t){"use strict";function n(e){var t,r,n,o=e.length-1,i="",a=e[0];if(o>0){for(i+=a,t=1;t<o;t++)n=e[t]+"",r=Le-n.length,r&&(i+=m(r)),i+=n;a=e[t],n=a+"",r=Le-n.length,r&&(i+=m(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return i+a}function o(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Se+e)}function i(e,t,r,n){var o,i,a,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=Le,o=0):(o=Math.ceil((t+1)/Le),t%=Le),i=Te(10,Le-t),s=e[o]%i|0,null==n?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),a=r<4&&99999==s||r>3&&49999==s||5e4==s||0==s):a=(r<4&&s+1==i||r>3&&s+1==i/2)&&(e[o+1]/i/100|0)==Te(10,t-2)-1||(s==i/2||0==s)&&0==(e[o+1]/i/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),a=(n||r<4)&&9999==s||!n&&r>3&&4999==s):a=((n||r<4)&&s+1==i||!n&&r>3&&s+1==i/2)&&(e[o+1]/i/1e3|0)==Te(10,t-3)-1,a}function a(e,t,r){for(var n,o,i=[0],a=0,s=e.length;a<s;){for(o=i.length;o--;)i[o]*=t;for(i[0]+=ye.indexOf(e.charAt(a++)),n=0;n<i.length;n++)i[n]>r-1&&(void 0===i[n+1]&&(i[n+1]=0),i[n+1]+=i[n]/r|0,i[n]%=r)}return i.reverse()}function s(e,t){var r,n,o=t.d.length;o<32?(r=Math.ceil(o/3),n=(1/E(4,r)).toString()):(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=x(e,1,t.times(n),new e(1));for(var i=r;i--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=r,t}function l(e,t,r,n){var o,i,a,s,l,u,c,d,f,p=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(o=1,s=d[0];s>=10;s/=10)o++;if((i=t-o)<0)i+=Le,a=t,c=d[f=0],l=c/Te(10,o-a-1)%10|0;else if(f=Math.ceil((i+1)/Le),s=d.length,f>=s){if(!n)break e;for(;s++<=f;)d.push(0);c=l=0,o=1,i%=Le,a=i-Le+1}else{for(c=s=d[f],o=1;s>=10;s/=10)o++;i%=Le,a=i-Le+o,l=a<0?0:c/Te(10,o-a-1)%10|0}if(n=n||t<0||void 0!==d[f+1]||(a<0?c:c%Te(10,o-a-1)),u=r<4?(l||n)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(i>0?a>0?c/Te(10,o-a):0:d[f-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,u?(t-=e.e+1,d[0]=Te(10,(Le-t%Le)%Le),e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=f,s=1,f--):(d.length=f+1,s=Te(10,Le-i),d[f]=a>0?(c/Te(10,o-a)%Te(10,a)|0)*s:0),u)for(;;){if(0==f){for(i=1,a=d[0];a>=10;a/=10)i++;for(a=d[0]+=s,s=1;a>=10;a/=10)s++;i!=s&&(e.e++,d[0]==Pe&&(d[0]=1));break}if(d[f]+=s,d[f]!=Pe)break;d[f--]=0,s=1}for(i=d.length;0===d[--i];)d.pop()}return xe&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function u(e,t,r){if(!e.isFinite())return y(e);var o,i=e.e,a=n(e.d),s=a.length;return t?(r&&(o=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+m(o):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+m(-i-1)+a,r&&(o=r-s)>0&&(a+=m(o))):i>=s?(a+=m(i+1-s),r&&(o=r-i-1)>0&&(a=a+"."+m(o))):((o=i+1)<s&&(a=a.slice(0,o)+"."+a.slice(o)),r&&(o=r-s)>0&&(i+1===s&&(a+="."),a+=m(o))),a}function c(e,t){var r=e[0];for(t*=Le;r>=10;r/=10)t++;return t}function d(e,t,r){if(t>Ve)throw xe=!0,r&&(e.precision=r),Error(Ce);return l(new e(we),t,1,!0)}function f(e,t,r){if(t>Ne)throw Error(Ce);return l(new e(je),t,r,!0)}function p(e){var t=e.length-1,r=t*Le+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function m(e){for(var t="";e--;)t+="0";return t}function h(e,t,r,n){var o,i=new e(1),a=Math.ceil(n/Le+4);for(xe=!1;;){if(r%2&&(i=i.times(t),I(i.d,a)&&(o=!0)),0===(r=Ae(r/2))){r=i.d.length-1,o&&0===i.d[r]&&++i.d[r];break}t=t.times(t),I(t.d,a)}return xe=!0,i}function b(e){return 1&e.d[e.d.length-1]}function v(e,t,r){for(var n,o=new e(t[0]),i=0;++i<t.length;){if(n=new e(t[i]),!n.s){o=n;break}o[r](n)&&(o=n)}return o}function _(e,t){var r,o,a,s,u,c,d,f=0,p=0,m=0,h=e.constructor,b=h.rounding,v=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(xe=!1,d=v):d=t,c=new h(.03125);e.e>-2;)e=e.times(c),m+=5;for(o=Math.log(Te(2,m))/Math.LN10*2+5|0,d+=o,r=s=u=new h(1),h.precision=d;;){if(s=l(s.times(e),d,1),r=r.times(++p),c=u.plus(qe(s,r,d,1)),n(c.d).slice(0,d)===n(u.d).slice(0,d)){for(a=m;a--;)u=l(u.times(u),d,1);if(null!=t)return h.precision=v,u;if(!(f<3&&i(u.d,d-o,b,f)))return l(u,h.precision=v,b,xe=!0);h.precision=d+=10,r=s=c=new h(1),p=0,f++}u=c}}function g(e,t){var r,o,a,s,u,c,f,p,m,h,b,v=1,_=e,y=_.d,w=_.constructor,j=w.rounding,k=w.precision;if(_.s<0||!y||!y[0]||!_.e&&1==y[0]&&1==y.length)return new w(y&&!y[0]?-1/0:1!=_.s?NaN:y?0:_);if(null==t?(xe=!1,m=k):m=t,w.precision=m+=10,r=n(y),o=r.charAt(0),!(Math.abs(s=_.e)<15e14))return p=d(w,m+2,k).times(s+""),_=g(new w(o+"."+r.slice(1)),m-10).plus(p),w.precision=k,null==t?l(_,k,j,xe=!0):_;for(;o<7&&1!=o||1==o&&r.charAt(1)>3;)_=_.times(e),r=n(_.d),o=r.charAt(0),v++;for(s=_.e,o>1?(_=new w("0."+r),s++):_=new w(o+"."+r.slice(1)),h=_,f=u=_=qe(_.minus(1),_.plus(1),m,1),b=l(_.times(_),m,1),a=3;;){if(u=l(u.times(b),m,1),p=f.plus(qe(u,new w(a),m,1)),n(p.d).slice(0,m)===n(f.d).slice(0,m)){if(f=f.times(2),0!==s&&(f=f.plus(d(w,m+2,k).times(s+""))),f=qe(f,new w(v),m,1),null!=t)return w.precision=k,f;if(!i(f.d,m-10,j,c))return l(f,w.precision=k,j,xe=!0);w.precision=m+=10,p=u=_=qe(h.minus(1),h.plus(1),m,1),b=l(_.times(_),m,1),a=c=1}f=p,a+=2}}function y(e){return String(e.s*e.s/0)}function w(e,t){var r,n,o;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);n++);for(o=t.length;48===t.charCodeAt(o-1);--o);if(t=t.slice(n,o)){if(o-=n,e.e=r=r-n-1,e.d=[],n=(r+1)%Le,r<0&&(n+=Le),n<o){for(n&&e.d.push(+t.slice(0,n)),o-=Le;n<o;)e.d.push(+t.slice(n,n+=Le));t=t.slice(n),n=Le-t.length}else n-=o;for(;n--;)t+="0";e.d.push(+t),xe&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function j(e,t){var r,n,o,i,s,l,u,d,f;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Me.test(t))r=16,t=t.toLowerCase();else if(De.test(t))r=2;else{if(!Re.test(t))throw Error(Se+t);r=8}for(i=t.search(/p/i),i>0?(u=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),i=t.indexOf("."),s=i>=0,n=e.constructor,s&&(t=t.replace(".",""),l=t.length,i=l-i,o=h(n,new n(r),i,2*i)),d=a(t,r,Pe),f=d.length-1,i=f;0===d[i];--i)d.pop();return i<0?new n(0*e.s):(e.e=c(d,f),e.d=d,xe=!1,s&&(e=qe(e,o,4*l)),u&&(e=e.times(Math.abs(u)<54?Te(2,u):me.pow(2,u))),xe=!0,e)}function k(e,t){var r,n=t.d.length;if(n<3)return x(e,2,t,t);r=1.4*Math.sqrt(n),r=r>16?16:0|r,t=t.times(1/E(5,r)),t=x(e,2,t,t);for(var o,i=new e(5),a=new e(16),s=new e(20);r--;)o=t.times(t),t=t.times(i.plus(o.times(a.times(o).minus(s))));return t}function x(e,t,r,n,o){var i,a,s,l,u=1,c=e.precision,d=Math.ceil(c/Le);for(xe=!1,l=r.times(r),s=new e(n);;){if(a=qe(s.times(l),new e(t++*t++),c,1),s=o?n.plus(a):n.minus(a),n=qe(a.times(l),new e(t++*t++),c,1),a=s.plus(n),void 0!==a.d[d]){for(i=d;a.d[i]===s.d[i]&&i--;);if(-1==i)break}i=s,s=n,n=a,a=i,u++}return xe=!0,a.d.length=d+1,a}function E(e,t){for(var r=e;--t;)r*=e;return r}function S(e,t){var r,n=t.s<0,o=f(e,e.precision,1),i=o.times(.5);if(t=t.abs(),t.lte(i))return ve=n?4:1,t;if(r=t.divToInt(o),r.isZero())ve=n?3:2;else{if(t=t.minus(r.times(o)),t.lte(i))return ve=b(r)?n?2:3:n?4:1,t;ve=b(r)?n?1:4:n?3:2}return t.minus(o).abs()}function C(e,t,r,n){var i,s,l,c,d,f,p,m,h,b=e.constructor,v=void 0!==r;if(v?(o(r,1,ge),void 0===n?n=b.rounding:o(n,0,8)):(r=b.precision,n=b.rounding),e.isFinite()){for(p=u(e),l=p.indexOf("."),v?(i=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):i=t,l>=0&&(p=p.replace(".",""),h=new b(1),h.e=p.length-l,h.d=a(u(h),10,i),h.e=h.d.length),m=a(p,10,i),s=d=m.length;0==m[--d];)m.pop();if(m[0]){if(l<0?s--:(e=new b(e),e.d=m,e.e=s,e=qe(e,h,r,n,0,i),m=e.d,s=e.e,f=he),l=m[r],c=i/2,f=f||void 0!==m[r+1],f=n<4?(void 0!==l||f)&&(0===n||n===(e.s<0?3:2)):l>c||l===c&&(4===n||f||6===n&&1&m[r-1]||n===(e.s<0?8:7)),m.length=r,f)for(;++m[--r]>i-1;)m[r]=0,r||(++s,m.unshift(1));for(d=m.length;!m[d-1];--d);for(l=0,p="";l<d;l++)p+=ye.charAt(m[l]);if(v){if(d>1)if(16==t||8==t){for(l=16==t?4:3,--d;d%l;d++)p+="0";for(m=a(p,i,t),d=m.length;!m[d-1];--d);for(l=1,p="1.";l<d;l++)p+=ye.charAt(m[l])}else p=p.charAt(0)+"."+p.slice(1);p=p+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)p="0"+p;p="0."+p}else if(++s>d)for(s-=d;s--;)p+="0";else s<d&&(p=p.slice(0,s)+"."+p.slice(s))}else p=v?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=y(e);return e.s<0?"-"+p:p}function I(e,t){if(e.length>t)return e.length=t,!0}function A(e){return new this(e).abs()}function T(e){return new this(e).acos()}function D(e){return new this(e).acosh()}function M(e,t){return new this(e).plus(t)}function R(e){return new this(e).asin()}function O(e){return new this(e).asinh()}function P(e){return new this(e).atan()}function L(e){return new this(e).atanh()}function V(e,t){e=new this(e),t=new this(t);var r,n=this.precision,o=this.rounding,i=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?f(this,n,o):new this(0),r.s=e.s):!e.d||t.isZero()?(r=f(this,i,1).times(.5),r.s=e.s):t.s<0?(this.precision=i,this.rounding=1,r=this.atan(qe(e,t,i,1)),t=f(this,i,1),this.precision=n,this.rounding=o,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(qe(e,t,i,1)):(r=f(this,i,1).times(t.s>0?.25:.75),r.s=e.s):r=new this(NaN),r}function N(e){return new this(e).cbrt()}function B(e){return l(e=new this(e),e.e+1,2)}function q(e){if(!e||"object"!=typeof e)throw Error(Ee+"Object expected");var t,r,n,o=!0===e.defaults,i=["precision",1,ge,"rounding",0,8,"toExpNeg",-_e,0,"toExpPos",0,_e,"maxE",0,_e,"minE",-_e,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(r=i[t],o&&(this[r]=ke[r]),void 0!==(n=e[r])){if(!(Ae(n)===n&&n>=i[t+1]&&n<=i[t+2]))throw Error(Se+r+": "+n);this[r]=n}if(r="crypto",o&&(this[r]=ke[r]),void 0!==(n=e[r])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(Se+r+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Ie);this[r]=!0}else this[r]=!1}return this}function U(e){return new this(e).cos()}function F(e){return new this(e).cosh()}function H(e){function t(e){var r,n,o,i=this;if(!(i instanceof t))return new t(e);if(i.constructor=t,e instanceof t)return i.s=e.s,void(xe?!e.d||e.e>t.maxE?(i.e=NaN,i.d=null):e.e<t.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(o=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(r=0,n=e;n>=10;n/=10)r++;return void(xe?r>t.maxE?(i.e=NaN,i.d=null):r<t.minE?(i.e=0,i.d=[0]):(i.e=r,i.d=[e]):(i.e=r,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):w(i,e.toString())}if("string"!==o)throw Error(Se+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),Oe.test(e)?w(i,e):j(i,e)}var r,n,o;if(t.prototype=Be,t.ROUND_UP=0,t.ROUND_DOWN=1,t.ROUND_CEIL=2,t.ROUND_FLOOR=3,t.ROUND_HALF_UP=4,t.ROUND_HALF_DOWN=5,t.ROUND_HALF_EVEN=6,t.ROUND_HALF_CEIL=7,t.ROUND_HALF_FLOOR=8,t.EUCLID=9,t.config=t.set=q,t.clone=H,t.isDecimal=$,t.abs=A,t.acos=T,t.acosh=D,t.add=M,t.asin=R,t.asinh=O,t.atan=P,t.atanh=L,t.atan2=V,t.cbrt=N,t.ceil=B,t.cos=U,t.cosh=F,t.div=z,t.exp=W,t.floor=G,t.hypot=K,t.ln=J,t.log=Y,t.log10=Z,t.log2=Q,t.max=X,t.min=ee,t.mod=te,t.mul=re,t.pow=ne,t.random=oe,t.round=ie,t.sign=ae,t.sin=se,t.sinh=le,t.sqrt=ue,t.sub=ce,t.tan=de,t.tanh=fe,t.trunc=pe,void 0===e&&(e={}),e&&!0!==e.defaults)for(o=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<o.length;)e.hasOwnProperty(n=o[r++])||(e[n]=this[n]);return t.config(e),t}function z(e,t){return new this(e).div(t)}function W(e){return new this(e).exp()}function G(e){return l(e=new this(e),e.e+1,3)}function K(){var e,t,r=new this(0);for(xe=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return xe=!0,new this(1/0);r=t}return xe=!0,r.sqrt()}function $(e){return e instanceof me||e&&"[object Decimal]"===e.name||!1}function J(e){return new this(e).ln()}function Y(e,t){return new this(e).log(t)}function Q(e){return new this(e).log(2)}function Z(e){return new this(e).log(10)}function X(){return v(this,arguments,"lt")}function ee(){return v(this,arguments,"gt")}function te(e,t){return new this(e).mod(t)}function re(e,t){return new this(e).mul(t)}function ne(e,t){return new this(e).pow(t)}function oe(e){var t,r,n,i,a=0,s=new this(1),l=[];if(void 0===e?e=this.precision:o(e,1,ge),n=Math.ceil(e/Le),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)i=t[a],i>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:l[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(Ie);for(t=crypto.randomBytes(n*=4);a<n;)i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24),i>=214e7?crypto.randomBytes(4).copy(t,a):(l.push(i%1e7),a+=4);a=n/4}else for(;a<n;)l[a++]=1e7*Math.random()|0;for(n=l[--a],e%=Le,n&&e&&(i=Te(10,Le-e),l[a]=(n/i|0)*i);0===l[a];a--)l.pop();if(a<0)r=0,l=[0];else{for(r=-1;0===l[0];r-=Le)l.shift();for(n=1,i=l[0];i>=10;i/=10)n++;n<Le&&(r-=Le-n)}return s.e=r,s.d=l,s}function ie(e){return l(e=new this(e),e.e+1,this.rounding)}function ae(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function se(e){return new this(e).sin()}function le(e){return new this(e).sinh()}function ue(e){return new this(e).sqrt()}function ce(e,t){return new this(e).sub(t)}function de(e){
return new this(e).tan()}function fe(e){return new this(e).tanh()}function pe(e){return l(e=new this(e),e.e+1,1)}var me,he,be,ve,_e=9e15,ge=1e9,ye="0123456789abcdef",we="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",je="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ke={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-_e,maxE:_e,crypto:!1},xe=!0,Ee="[DecimalError] ",Se=Ee+"Invalid argument: ",Ce=Ee+"Precision limit exceeded",Ie=Ee+"crypto unavailable",Ae=Math.floor,Te=Math.pow,De=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Me=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Re=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Oe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pe=1e7,Le=7,Ve=we.length-1,Ne=je.length-1,Be={name:"[object Decimal]"};Be.absoluteValue=Be.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),l(e)},Be.ceil=function(){return l(new this.constructor(this),this.e+1,2)},Be.comparedTo=Be.cmp=function(e){var t,r,n,o,i=this,a=i.d,s=(e=new i.constructor(e)).d,l=i.s,u=e.s;if(!a||!s)return l&&u?l!==u?l:a===s?0:!a^l<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?l:s[0]?-u:0;if(l!==u)return l;if(i.e!==e.e)return i.e>e.e^l<0?1:-1;for(n=a.length,o=s.length,t=0,r=n<o?n:o;t<r;++t)if(a[t]!==s[t])return a[t]>s[t]^l<0?1:-1;return n===o?0:n>o^l<0?1:-1},Be.cosine=Be.cos=function(){var e,t,r=this,n=r.constructor;return r.d?r.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Le,n.rounding=1,r=s(n,S(n,r)),n.precision=e,n.rounding=t,l(2==ve||3==ve?r.neg():r,e,t,!0)):new n(1):new n(NaN)},Be.cubeRoot=Be.cbrt=function(){var e,t,r,o,i,a,s,u,c,d,f=this,p=f.constructor;if(!f.isFinite()||f.isZero())return new p(f);for(xe=!1,a=f.s*Te(f.s*f,1/3),a&&Math.abs(a)!=1/0?o=new p(a.toString()):(r=n(f.d),e=f.e,(a=(e-r.length+1)%3)&&(r+=1==a||-2==a?"0":"00"),a=Te(r,1/3),e=Ae((e+1)/3)-(e%3==(e<0?-1:2)),a==1/0?r="5e"+e:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),o=new p(r),o.s=f.s),s=(e=p.precision)+3;;)if(u=o,c=u.times(u).times(u),d=c.plus(f),o=qe(d.plus(f).times(u),d.plus(c),s+2,1),n(u.d).slice(0,s)===(r=n(o.d)).slice(0,s)){if("9999"!=(r=r.slice(s-3,s+1))&&(i||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(l(o,e+1,1),t=!o.times(o).times(o).eq(f));break}if(!i&&(l(u,e+1,0),u.times(u).times(u).eq(f))){o=u;break}s+=4,i=1}return xe=!0,l(o,e,p.rounding,t)},Be.decimalPlaces=Be.dp=function(){var e,t=this.d,r=NaN;if(t){if(e=t.length-1,r=(e-Ae(this.e/Le))*Le,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},Be.dividedBy=Be.div=function(e){return qe(this,new this.constructor(e))},Be.dividedToIntegerBy=Be.divToInt=function(e){var t=this,r=t.constructor;return l(qe(t,new r(e),0,1,1),r.precision,r.rounding)},Be.equals=Be.eq=function(e){return 0===this.cmp(e)},Be.floor=function(){return l(new this.constructor(this),this.e+1,3)},Be.greaterThan=Be.gt=function(e){return this.cmp(e)>0},Be.greaterThanOrEqualTo=Be.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Be.hyperbolicCosine=Be.cosh=function(){var e,t,r,n,o,i=this,a=i.constructor,s=new a(1);if(!i.isFinite())return new a(i.s?1/0:NaN);if(i.isZero())return s;r=a.precision,n=a.rounding,a.precision=r+Math.max(i.e,i.sd())+4,a.rounding=1,o=i.d.length,o<32?(e=Math.ceil(o/3),t=(1/E(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),i=x(a,1,i.times(t),new a(1),!0);for(var u,c=e,d=new a(8);c--;)u=i.times(i),i=s.minus(u.times(d.minus(u.times(d))));return l(i,a.precision=r,a.rounding=n,!0)},Be.hyperbolicSine=Be.sinh=function(){var e,t,r,n,o=this,i=o.constructor;if(!o.isFinite()||o.isZero())return new i(o);if(t=i.precision,r=i.rounding,i.precision=t+Math.max(o.e,o.sd())+4,i.rounding=1,(n=o.d.length)<3)o=x(i,2,o,o,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:0|e,o=o.times(1/E(5,e)),o=x(i,2,o,o,!0);for(var a,s=new i(5),u=new i(16),c=new i(20);e--;)a=o.times(o),o=o.times(s.plus(a.times(u.times(a).plus(c))))}return i.precision=t,i.rounding=r,l(o,t,r,!0)},Be.hyperbolicTangent=Be.tanh=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,qe(r.sinh(),r.cosh(),n.precision=e,n.rounding=t)):new n(r.s)},Be.inverseCosine=Be.acos=function(){var e,t=this,r=t.constructor,n=t.abs().cmp(1),o=r.precision,i=r.rounding;return-1!==n?0===n?t.isNeg()?f(r,o,i):new r(0):new r(NaN):t.isZero()?f(r,o+4,i).times(.5):(r.precision=o+6,r.rounding=1,t=t.asin(),e=f(r,o+4,i).times(.5),r.precision=o,r.rounding=i,e.minus(t))},Be.inverseHyperbolicCosine=Be.acosh=function(){var e,t,r=this,n=r.constructor;return r.lte(1)?new n(r.eq(1)?0:NaN):r.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(r.e),r.sd())+4,n.rounding=1,xe=!1,r=r.times(r).minus(1).sqrt().plus(r),xe=!0,n.precision=e,n.rounding=t,r.ln()):new n(r)},Be.inverseHyperbolicSine=Be.asinh=function(){var e,t,r=this,n=r.constructor;return!r.isFinite()||r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,n.rounding=1,xe=!1,r=r.times(r).plus(1).sqrt().plus(r),xe=!0,n.precision=e,n.rounding=t,r.ln())},Be.inverseHyperbolicTangent=Be.atanh=function(){var e,t,r,n,o=this,i=o.constructor;return o.isFinite()?o.e>=0?new i(o.abs().eq(1)?o.s/0:o.isZero()?o:NaN):(e=i.precision,t=i.rounding,n=o.sd(),Math.max(n,e)<2*-o.e-1?l(new i(o),e,t,!0):(i.precision=r=n-o.e,o=qe(o.plus(1),new i(1).minus(o),r+e,1),i.precision=e+4,i.rounding=1,o=o.ln(),i.precision=e,i.rounding=t,o.times(.5))):new i(NaN)},Be.inverseSine=Be.asin=function(){var e,t,r,n,o=this,i=o.constructor;return o.isZero()?new i(o):(t=o.abs().cmp(1),r=i.precision,n=i.rounding,-1!==t?0===t?(e=f(i,r+4,n).times(.5),e.s=o.s,e):new i(NaN):(i.precision=r+6,i.rounding=1,o=o.div(new i(1).minus(o.times(o)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=n,o.times(2)))},Be.inverseTangent=Be.atan=function(){var e,t,r,n,o,i,a,s,u,c=this,d=c.constructor,p=d.precision,m=d.rounding;if(c.isFinite()){if(c.isZero())return new d(c);if(c.abs().eq(1)&&p+4<=Ne)return a=f(d,p+4,m).times(.25),a.s=c.s,a}else{if(!c.s)return new d(NaN);if(p+4<=Ne)return a=f(d,p+4,m).times(.5),a.s=c.s,a}for(d.precision=s=p+10,d.rounding=1,r=Math.min(28,s/Le+2|0),e=r;e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(xe=!1,t=Math.ceil(s/Le),n=1,u=c.times(c),a=new d(c),o=c;-1!==e;)if(o=o.times(u),i=a.minus(o.div(n+=2)),o=o.times(u),a=i.plus(o.div(n+=2)),void 0!==a.d[t])for(e=t;a.d[e]===i.d[e]&&e--;);return r&&(a=a.times(2<<r-1)),xe=!0,l(a,d.precision=p,d.rounding=m,!0)},Be.isFinite=function(){return!!this.d},Be.isInteger=Be.isInt=function(){return!!this.d&&Ae(this.e/Le)>this.d.length-2},Be.isNaN=function(){return!this.s},Be.isNegative=Be.isNeg=function(){return this.s<0},Be.isPositive=Be.isPos=function(){return this.s>0},Be.isZero=function(){return!!this.d&&0===this.d[0]},Be.lessThan=Be.lt=function(e){return this.cmp(e)<0},Be.lessThanOrEqualTo=Be.lte=function(e){return this.cmp(e)<1},Be.logarithm=Be.log=function(e){var t,r,o,a,s,u,c,f,p=this,m=p.constructor,h=m.precision,b=m.rounding;if(null==e)e=new m(10),t=!0;else{if(e=new m(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new m(NaN);t=e.eq(10)}if(r=p.d,p.s<0||!r||!r[0]||p.eq(1))return new m(r&&!r[0]?-1/0:1!=p.s?NaN:r?0:1/0);if(t)if(r.length>1)s=!0;else{for(a=r[0];a%10==0;)a/=10;s=1!==a}if(xe=!1,c=h+5,u=g(p,c),o=t?d(m,c+10):g(e,c),f=qe(u,o,c,1),i(f.d,a=h,b))do{if(c+=10,u=g(p,c),o=t?d(m,c+10):g(e,c),f=qe(u,o,c,1),!s){+n(f.d).slice(a+1,a+15)+1==1e14&&(f=l(f,h+1,0));break}}while(i(f.d,a+=10,b));return xe=!0,l(f,h,b)},Be.minus=Be.sub=function(e){var t,r,n,o,i,a,s,u,d,f,p,m,h=this,b=h.constructor;if(e=new b(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new b(e.d||h.s!==e.s?h:NaN):e=new b(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(d=h.d,m=e.d,s=b.precision,u=b.rounding,!d[0]||!m[0]){if(m[0])e.s=-e.s;else{if(!d[0])return new b(3===u?-0:0);e=new b(h)}return xe?l(e,s,u):e}if(r=Ae(e.e/Le),f=Ae(h.e/Le),d=d.slice(),i=f-r){for(p=i<0,p?(t=d,i=-i,a=m.length):(t=m,r=f,a=d.length),n=Math.max(Math.ceil(s/Le),a)+2,i>n&&(i=n,t.length=1),t.reverse(),n=i;n--;)t.push(0);t.reverse()}else{for(n=d.length,a=m.length,p=n<a,p&&(a=n),n=0;n<a;n++)if(d[n]!=m[n]){p=d[n]<m[n];break}i=0}for(p&&(t=d,d=m,m=t,e.s=-e.s),a=d.length,n=m.length-a;n>0;--n)d[a++]=0;for(n=m.length;n>i;){if(d[--n]<m[n]){for(o=n;o&&0===d[--o];)d[o]=Pe-1;--d[o],d[n]+=Pe}d[n]-=m[n]}for(;0===d[--a];)d.pop();for(;0===d[0];d.shift())--r;return d[0]?(e.d=d,e.e=c(d,r),xe?l(e,s,u):e):new b(3===u?-0:0)},Be.modulo=Be.mod=function(e){var t,r=this,n=r.constructor;return e=new n(e),!r.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||r.d&&!r.d[0]?l(new n(r),n.precision,n.rounding):(xe=!1,9==n.modulo?(t=qe(r,e.abs(),0,3,1),t.s*=e.s):t=qe(r,e,0,n.modulo,1),t=t.times(e),xe=!0,r.minus(t))},Be.naturalExponential=Be.exp=function(){return _(this)},Be.naturalLogarithm=Be.ln=function(){return g(this)},Be.negated=Be.neg=function(){var e=new this.constructor(this);return e.s=-e.s,l(e)},Be.plus=Be.add=function(e){var t,r,n,o,i,a,s,u,d,f,p=this,m=p.constructor;if(e=new m(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new m(e.d||p.s===e.s?p:NaN)):e=new m(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(d=p.d,f=e.d,s=m.precision,u=m.rounding,!d[0]||!f[0])return f[0]||(e=new m(p)),xe?l(e,s,u):e;if(i=Ae(p.e/Le),n=Ae(e.e/Le),d=d.slice(),o=i-n){for(o<0?(r=d,o=-o,a=f.length):(r=f,n=i,a=d.length),i=Math.ceil(s/Le),a=i>a?i+1:a+1,o>a&&(o=a,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for(a=d.length,o=f.length,a-o<0&&(o=a,r=f,f=d,d=r),t=0;o;)t=(d[--o]=d[o]+f[o]+t)/Pe|0,d[o]%=Pe;for(t&&(d.unshift(t),++n),a=d.length;0==d[--a];)d.pop();return e.d=d,e.e=c(d,n),xe?l(e,s,u):e},Be.precision=Be.sd=function(e){var t,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(Se+e);return r.d?(t=p(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t},Be.round=function(){var e=this,t=e.constructor;return l(new t(e),e.e+1,t.rounding)},Be.sine=Be.sin=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+Math.max(r.e,r.sd())+Le,n.rounding=1,r=k(n,S(n,r)),n.precision=e,n.rounding=t,l(ve>2?r.neg():r,e,t,!0)):new n(NaN)},Be.squareRoot=Be.sqrt=function(){var e,t,r,o,i,a,s=this,u=s.d,c=s.e,d=s.s,f=s.constructor;if(1!==d||!u||!u[0])return new f(!d||d<0&&(!u||u[0])?NaN:u?s:1/0);for(xe=!1,d=Math.sqrt(+s),0==d||d==1/0?(t=n(u),(t.length+c)%2==0&&(t+="0"),d=Math.sqrt(t),c=Ae((c+1)/2)-(c<0||c%2),d==1/0?t="5e"+c:(t=d.toExponential(),t=t.slice(0,t.indexOf("e")+1)+c),o=new f(t)):o=new f(d.toString()),r=(c=f.precision)+3;;)if(a=o,o=a.plus(qe(s,a,r+2,1)).times(.5),n(a.d).slice(0,r)===(t=n(o.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(l(o,c+1,1),e=!o.times(o).eq(s));break}if(!i&&(l(a,c+1,0),a.times(a).eq(s))){o=a;break}r+=4,i=1}return xe=!0,l(o,c,f.rounding,e)},Be.tangent=Be.tan=function(){var e,t,r=this,n=r.constructor;return r.isFinite()?r.isZero()?new n(r):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,r=r.sin(),r.s=1,r=qe(r,new n(1).minus(r.times(r)).sqrt(),e+10,0),n.precision=e,n.rounding=t,l(2==ve||4==ve?r.neg():r,e,t,!0)):new n(NaN)},Be.times=Be.mul=function(e){var t,r,n,o,i,a,s,u,d,f=this,p=f.constructor,m=f.d,h=(e=new p(e)).d;if(e.s*=f.s,!(m&&m[0]&&h&&h[0]))return new p(!e.s||m&&!m[0]&&!h||h&&!h[0]&&!m?NaN:m&&h?0*e.s:e.s/0);for(r=Ae(f.e/Le)+Ae(e.e/Le),u=m.length,d=h.length,u<d&&(i=m,m=h,h=i,a=u,u=d,d=a),i=[],a=u+d,n=a;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,o=u+n;o>n;)s=i[o]+h[n]*m[o-n-1]+t,i[o--]=s%Pe|0,t=s/Pe|0;i[o]=(i[o]+t)%Pe|0}for(;!i[--a];)i.pop();return t?++r:i.shift(),e.d=i,e.e=c(i,r),xe?l(e,p.precision,p.rounding):e},Be.toBinary=function(e,t){return C(this,2,e,t)},Be.toDecimalPlaces=Be.toDP=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(o(e,0,ge),void 0===t?t=n.rounding:o(t,0,8),l(r,e+r.e+1,t))},Be.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=u(n,!0):(o(e,0,ge),void 0===t?t=i.rounding:o(t,0,8),n=l(new i(n),e+1,t),r=u(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},Be.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return void 0===e?r=u(i):(o(e,0,ge),void 0===t?t=a.rounding:o(t,0,8),n=l(new a(i),e+i.e+1,t),r=u(n,!1,e+n.e+1)),i.isNeg()&&!i.isZero()?"-"+r:r},Be.toFraction=function(e){var t,r,o,i,a,s,l,u,c,d,f,m,h=this,b=h.d,v=h.constructor;if(!b)return new v(h);if(c=r=new v(1),o=u=new v(0),t=new v(o),a=t.e=p(b)-h.e-1,s=a%Le,t.d[0]=Te(10,s<0?Le+s:s),null==e)e=a>0?t:c;else{if(l=new v(e),!l.isInt()||l.lt(c))throw Error(Se+l);e=l.gt(t)?a>0?t:c:l}for(xe=!1,l=new v(n(b)),d=v.precision,v.precision=a=b.length*Le*2;f=qe(l,t,0,1,1),i=r.plus(f.times(o)),1!=i.cmp(e);)r=o,o=i,i=c,c=u.plus(f.times(i)),u=i,i=t,t=l.minus(f.times(i)),l=i;return i=qe(e.minus(r),o,0,1,1),u=u.plus(i.times(c)),r=r.plus(i.times(o)),u.s=c.s=h.s,m=qe(c,o,a,1).minus(h).abs().cmp(qe(u,r,a,1).minus(h).abs())<1?[c,o]:[u,r],v.precision=d,xe=!0,m},Be.toHexadecimal=Be.toHex=function(e,t){return C(this,16,e,t)},Be.toNearest=function(e,t){var r=this,n=r.constructor;if(r=new n(r),null==e){if(!r.d)return r;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:o(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(xe=!1,r=qe(r,e,0,t,1).times(e),xe=!0,l(r)):(e.s=r.s,r=e),r},Be.toNumber=function(){return+this},Be.toOctal=function(e,t){return C(this,8,e,t)},Be.toPower=Be.pow=function(e){var t,r,o,a,s,u,c=this,d=c.constructor,f=+(e=new d(e));if(!(c.d&&e.d&&c.d[0]&&e.d[0]))return new d(Te(+c,f));if(c=new d(c),c.eq(1))return c;if(o=d.precision,s=d.rounding,e.eq(1))return l(c,o,s);if((t=Ae(e.e/Le))>=e.d.length-1&&(r=f<0?-f:f)<=9007199254740991)return a=h(d,c,r,o),e.s<0?new d(1).div(a):l(a,o,s);if((u=c.s)<0){if(t<e.d.length-1)return new d(NaN);if(0==(1&e.d[t])&&(u=1),0==c.e&&1==c.d[0]&&1==c.d.length)return c.s=u,c}return r=Te(+c,f),(t=0!=r&&isFinite(r)?new d(r+"").e:Ae(f*(Math.log("0."+n(c.d))/Math.LN10+c.e+1)))>d.maxE+1||t<d.minE-1?new d(t>0?u/0:0):(xe=!1,d.rounding=c.s=1,r=Math.min(12,(t+"").length),a=_(e.times(g(c,o+r)),o),a.d&&(a=l(a,o+5,1),i(a.d,o,s)&&(t=o+10,a=l(_(e.times(g(c,t+r)),t),t+5,1),+n(a.d).slice(o+1,o+15)+1==1e14&&(a=l(a,o+1,0)))),a.s=u,xe=!0,d.rounding=s,l(a,o,s))},Be.toPrecision=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=u(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(o(e,1,ge),void 0===t?t=i.rounding:o(t,0,8),n=l(new i(n),e,t),r=u(n,e<=n.e||n.e<=i.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+r:r},Be.toSignificantDigits=Be.toSD=function(e,t){var r=this,n=r.constructor;return void 0===e?(e=n.precision,t=n.rounding):(o(e,1,ge),void 0===t?t=n.rounding:o(t,0,8)),l(new n(r),e,t)},Be.toString=function(){var e=this,t=e.constructor,r=u(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r},Be.truncated=Be.trunc=function(){return l(new this.constructor(this),this.e+1,1)},Be.valueOf=Be.toJSON=function(){var e=this,t=e.constructor,r=u(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};var qe=function(){function e(e,t,r){var n,o=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+o,e[i]=n%r|0,o=n/r|0;return o&&e.unshift(o),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,o,i,a,s,u){var c,d,f,p,m,h,b,v,_,g,y,w,j,k,x,E,S,C,I,A,T=n.constructor,D=n.s==o.s?1:-1,M=n.d,R=o.d;if(!(M&&M[0]&&R&&R[0]))return new T(n.s&&o.s&&(M?!R||M[0]!=R[0]:R)?M&&0==M[0]||!R?0*D:D/0:NaN);for(u?(m=1,d=n.e-o.e):(u=Pe,m=Le,d=Ae(n.e/m)-Ae(o.e/m)),I=R.length,S=M.length,_=new T(D),g=_.d=[],f=0;R[f]==(M[f]||0);f++);if(R[f]>(M[f]||0)&&d--,null==i?(k=i=T.precision,a=T.rounding):k=s?i+(n.e-o.e)+1:i,k<0)g.push(1),h=!0;else{if(k=k/m+2|0,f=0,1==I){for(p=0,R=R[0],k++;(f<S||p)&&k--;f++)x=p*u+(M[f]||0),g[f]=x/R|0,p=x%R|0;h=p||f<S}else{for(p=u/(R[0]+1)|0,p>1&&(R=e(R,p,u),M=e(M,p,u),I=R.length,S=M.length),E=I,y=M.slice(0,I),w=y.length;w<I;)y[w++]=0;A=R.slice(),A.unshift(0),C=R[0],R[1]>=u/2&&++C;do{p=0,c=t(R,y,I,w),c<0?(j=y[0],I!=w&&(j=j*u+(y[1]||0)),p=j/C|0,p>1?(p>=u&&(p=u-1),b=e(R,p,u),v=b.length,w=y.length,1==(c=t(b,y,v,w))&&(p--,r(b,I<v?A:R,v,u))):(0==p&&(c=p=1),b=R.slice()),v=b.length,v<w&&b.unshift(0),r(y,b,w,u),-1==c&&(w=y.length,(c=t(R,y,I,w))<1&&(p++,r(y,I<w?A:R,w,u))),w=y.length):0===c&&(p++,y=[0]),g[f++]=p,c&&y[0]?y[w++]=M[E]||0:(y=[M[E]],w=1)}while((E++<S||void 0!==y[0])&&k--);h=void 0!==y[0]}g[0]||g.shift()}if(1==m)_.e=d,he=h;else{for(f=1,p=g[0];p>=10;p/=10)f++;_.e=f+d*m-1,l(_,s?i+_.e+1:i,a,h)}return _}}();me=H(ke),me.default=me.Decimal=me,we=new me(we),je=new me(je),"function"==typeof e&&e.amd?e(function(){return me}):void 0!==r&&r.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(Be[Symbol.for("nodejs.util.inspect.custom")]=Be.toString,Be[Symbol.toStringTag]="Decimal"),r.exports=me):(t||(t="undefined"!=typeof self&&self&&self.self==self?self:window),be=t.Decimal,me.noConflict=function(){return t.Decimal=be,me},t.Decimal=me)}(this)},{}],301:[function(e,t,r){"use strict";var n=e("get-intrinsic"),o=n("%Object.getOwnPropertyDescriptor%");if(o)try{o([],"length")}catch(e){o=null}t.exports=o},{"get-intrinsic":312}],302:[function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,r,o,i){var s=(0,a.default)()||!o||"object"!==n(o)?o:!!o.capture;e.addEventListener(t,r,s,i)}function i(e,t,r,o){var i=(0,a.default)()||!o||"object"!==n(o)?o:!!o.capture;e.removeEventListener(t,r,i)}Object.defineProperty(r,"__esModule",{value:!0}),r.addEventListener=o,r.removeEventListener=i;var a=function(e){return e&&e.__esModule?e:{default:e}}(e("./supportsCaptureOption"))},{"./supportsCaptureOption":303}],303:[function(e,t,r){"use strict";function n(){if(null===o){var e=!1;try{var t=Object.defineProperty({},"capture",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}o=e}return o}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=null},{}],304:[function(e,t,r){"use strict";function n(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function i(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function s(e,t,r,o){var s,l,u;if(i(r),l=e._events,void 0===l?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),l=e._events),u=l[t]),void 0===u)u=l[t]=r,++e._eventsCount;else if("function"==typeof u?u=l[t]=o?[r,u]:[u,r]:o?u.unshift(r):u.push(r),(s=a(e))>0&&u.length>s&&!u.warned){u.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=u.length,n(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function c(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?m(o):f(o,o.length)}function d(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function p(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function m(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function h(e,t){return new Promise(function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}v(e,t,i,{once:!0}),"error"!==t&&b(e,o,{once:!0})})}function b(e,t,r){"function"==typeof e.on&&v(e,"error",t,r)}function v(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){n.once&&e.removeEventListener(t,o),r(i)})}}var _,g="object"==typeof Reflect?Reflect:null,y=g&&"function"==typeof g.apply?g.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};_=g&&"function"==typeof g.ownKeys?g.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var w=Number.isNaN||function(e){return e!==e};t.exports=o,t.exports.once=h,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var j=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(e){if("number"!=typeof e||e<0||w(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");j=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||w(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var s=o[e];if(void 0===s)return!1;if("function"==typeof s)y(s,this,t);else for(var l=s.length,u=f(s,l),r=0;r<l;++r)y(u[r],this,t);return!0},o.prototype.addListener=function(e,t){return s(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return s(this,e,t,!0)},o.prototype.once=function(e,t){return i(t),this.on(e,u(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return i(t),this.prependListener(e,u(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,o,a,s;if(i(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){s=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():p(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return c(this,e,!0)},o.prototype.rawListeners=function(e){return c(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?_(this._events):[]}},{}],305:[function(e,t,r){"use strict";function n(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.installGlobally=r.getXMLHttpRequest=void 0;var s=a(e("@babel/runtime/helpers/classCallCheck")),l=a(e("@babel/runtime/helpers/createClass")),u=a(e("@babel/runtime/helpers/defineProperty")),c=a(e("@babel/runtime/helpers/slicedToArray")),d=a(e("lodash/once")),f=e("./moduleId"),p=a(e("./transferrables")),m=(0,d.default)(function(){var e={},t=new MessageChannel,r=t.port1;r.addEventListener("message",function(t){var r=t.data,n=r.id,o=r.type,i=e[n];switch(o){case"COMPLETE":var a=t.data,s=a.headers,l=a.readyState,u=a.status,d=a.statusText,f=a.response,p=a.responseText,m=a.responseURL,h={};s.split("\r\n").forEach(function(e){var t=e.split(":"),r=(0,c.default)(t,2),n=r[0],o=r[1];n&&o&&(h[n.toLowerCase().trim()]=o.trim())}),i._headers=s,i._headersObj=h,i.status=u,i.statusText=d,i.readyState=l,i.response=f,i.responseText=p,i.responseURL=m,delete e[n];for(var b=0,v=["load","loadend","readystatechange"];b<v.length;b++)!function(){var e=v[b],t={name:e,target:i};(Object.prototype.hasOwnProperty.call(i._eventListeners,e)?i._eventListeners[e]:[]).forEach(function(e){return e(t)}),i["on"+e]&&i["on"+e](t)}();break;default:console.error("ext-corb-workaround: Unknown event in content script:",t)}}),r.addEventListener("messageerror",function(e){console.error("ext-corb-workaround: Unknown error in content script:",e)}),r.start(),window.postMessage({type:"ext-corb-workaround_port",moduleId:f.moduleId,port:t.port2},document.location.origin,[t.port2]);var o=0,i=function(){function t(){var i=this;(0,s.default)(this,t),(0,u.default)(this,"UNSENT",0),(0,u.default)(this,"OPENED",1),(0,u.default)(this,"HEADERS_RECEIVED",2),(0,u.default)(this,"LOADING",3),(0,u.default)(this,"DONE",4),(0,u.default)(this,"_id",o++),(0,u.default)(this,"_eventListeners",{}),(0,u.default)(this,"_headersObj",{}),(0,u.default)(this,"status",0),(0,u.default)(this,"statusText",""),(0,u.default)(this,"readyState",0),(0,u.default)(this,"response",""),(0,u.default)(this,"responseText",""),(0,u.default)(this,"responseURL",""),(0,u.default)(this,"_headers",""),(0,u.default)(this,"responseType",void 0),(0,u.default)(this,"withCredentials",void 0),(0,u.default)(this,"setRequestHeader",void 0),(0,u.default)(this,"open",void 0),(0,u.default)(this,"send",void 0),(0,u.default)(this,"abort",void 0);var a=this._id;e[a]=this,r.postMessage({type:"NEW_XHR",id:a});var l,c=n(["responseType","withCredentials"]);try{for(c.s();!(l=c.n()).done;)!function(){var e=l.value,t=void 0;Object.defineProperty(i,e,{get:function(){return t},set:function(n){t=n,r.postMessage({type:"SET",id:a,prop:e,value:n})}})}()}catch(e){c.e(e)}finally{c.f()}var d,f=n(["setRequestHeader","open","send","abort"]);try{for(f.s();!(d=f.n()).done;)!function(){var e=d.value;i[e]=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];r.postMessage({type:"CALL",id:a,method:e,args:n},(0,p.default)(n))}}()}catch(e){f.e(e)}finally{f.f()}}return(0,l.default)(t,[{key:"getAllResponseHeaders",value:function(){return this._headers}},{key:"getResponseHeader",value:function(e){if(e=e.toLowerCase(),Object.prototype.hasOwnProperty.call(this._headersObj,e))return this._headersObj[e]}},{key:"addEventListener",value:function(e,t){Object.prototype.hasOwnProperty.call(this._eventListeners,e)||(this._eventListeners[e]=[]),this._eventListeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){Object.prototype.hasOwnProperty.call(this._eventListeners,e)&&(this._eventListeners[e]=this._eventListeners[e].filter(function(e){return t!==e}))}}]),t}();return(0,u.default)(i,"UNSENT",0),(0,u.default)(i,"OPENED",1),(0,u.default)(i,"HEADERS_RECEIVED",2),(0,u.default)(i,"LOADING",3),(0,u.default)(i,"DONE",4),i});r.getXMLHttpRequest=m;var h=(0,d.default)(function(){window.XMLHttpRequest=m()});r.installGlobally=h},{"./moduleId":306,"./transferrables":307,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/slicedToArray":78,"lodash/once":516}],306:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.moduleId=void 0;r.moduleId="1f24 e53a"},{}],307:[function(e,t,r){"use strict";function n(e){return e.map(function(e){if(e&&"object"===(0,i.default)(e)&&e.__proto__){if("ArrayBuffer"===e.__proto__.constructor.name)return e;if(e.__proto__.__proto__&&"TypedArray"===e.__proto__.__proto__.constructor.name)return e.buffer}}).filter(Boolean)}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime/helpers/typeof"))},{"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/typeof":79}],308:[function(e,t,r){t.exports=function(e,t){function r(e,n){
return e.reduce(function(e,o){return Array.isArray(o)&&n<t?e.concat(r(o,n+1)):e.concat(o)},[])}return t="number"==typeof t?t:1/0,t?r(e,1):Array.isArray(e)?e.map(function(e){return e}):e}},{}],309:[function(e,t,r){var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=function(e,t,r){if("[object Function]"!==o.call(t))throw new TypeError("iterator must be a function");var i=e.length;if(i===+i)for(var a=0;a<i;a++)t.call(r,e[a],a,e);else for(var s in e)n.call(e,s)&&t.call(r,e[s],s,e)}},{}],310:[function(e,t,r){"use strict";var n=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(e){var t=this;if("function"!=typeof t||"[object Function]"!==o.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,i=n.call(arguments,1),a=function(){if(this instanceof r){var o=t.apply(this,i.concat(n.call(arguments)));return Object(o)===o?o:this}return t.apply(e,i.concat(n.call(arguments)))},s=Math.max(0,t.length-i.length),l=[],u=0;u<s;u++)l.push("$"+u);if(r=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),t.prototype){var c=function(){};c.prototype=t.prototype,r.prototype=new c,c.prototype=null}return r}},{}],311:[function(e,t,r){"use strict";var n=e("./implementation");t.exports=Function.prototype.bind||n},{"./implementation":310}],312:[function(e,t,r){"use strict";var n=SyntaxError,o=Function,i=TypeError,a=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},s=Object.getOwnPropertyDescriptor;if(s)try{s({},"")}catch(e){s=null}var l=function(){throw new i},u=s?function(){try{return arguments.callee,l}catch(e){try{return s(arguments,"callee").get}catch(e){return l}}}():l,c=e("has-symbols")(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?void 0:d(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":c?d([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?d(d([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&c?d((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&c?d((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?d(""[Symbol.iterator]()):void 0,"%Symbol%":c?Symbol:void 0,"%SyntaxError%":n,"%ThrowTypeError%":u,"%TypedArray%":p,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},h=function e(t){var r;if("%AsyncFunction%"===t)r=a("async function () {}");else if("%GeneratorFunction%"===t)r=a("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=a("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=d(o.prototype))}return m[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=e("function-bind"),_=e("has"),g=v.call(Function.call,Array.prototype.concat),y=v.call(Function.apply,Array.prototype.splice),w=v.call(Function.call,String.prototype.replace),j=v.call(Function.call,String.prototype.slice),k=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,E=function(e){var t=j(e,0,1),r=j(e,-1);if("%"===t&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var o=[];return w(e,k,function(e,t,r,n){o[o.length]=r?w(n,x,"$1"):t||e}),o},S=function(e,t){var r,o=e;if(_(b,o)&&(r=b[o],o="%"+r[0]+"%"),_(m,o)){var a=m[o];if(a===f&&(a=h(o)),void 0===a&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:a}}throw new n("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new i('"allowMissing" argument must be a boolean');var r=E(e),o=r.length>0?r[0]:"",a=S("%"+o+"%",t),l=a.name,u=a.value,c=!1,d=a.alias;d&&(o=d[0],y(r,g([0,1],d)));for(var f=1,p=!0;f<r.length;f+=1){var h=r[f],b=j(h,0,1),v=j(h,-1);if(('"'===b||"'"===b||"`"===b||'"'===v||"'"===v||"`"===v)&&b!==v)throw new n("property names with quotes must have matching quotes");if("constructor"!==h&&p||(c=!0),o+="."+h,l="%"+o+"%",_(m,l))u=m[l];else if(null!=u){if(!(h in u)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(s&&f+1>=r.length){var w=s(u,h);p=!!w,u=p&&"get"in w&&!("originalValue"in w.get)?w.get:u[h]}else p=_(u,h),u=u[h];p&&!c&&(m[l]=u)}}return u}},{"function-bind":311,has:315,"has-symbols":313}],313:[function(e,t,r){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=e("./shams");t.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}},{"./shams":314}],314:[function(e,t,r){"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;e[t]=42;for(t in e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},{}],315:[function(e,t,r){"use strict";var n=e("function-bind");t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":311}],316:[function(e,t,r){r.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,d=r?o-1:0,f=r?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+d],d+=f,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[t+d],d+=f,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=u}return(p?-1:1)*a*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,m=n?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(t*l-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=m,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+p]=255&a,p+=m,a/=256,u-=8);e[r+p-m]|=128*h}},{}],317:[function(e,t,r){(function(e){(function(){"use strict";function n(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}function o(e,t){if(!e){if(h)throw new Error("Invariant failed");throw new Error(t())}}function i(e){return _.call(e).slice(8,-1)}function a(e){return Array.isArray(e)?g(e.constructor(e.length),e):"Map"===i(e)?new Map(e):"Set"===i(e)?new Set(e):e&&"object"==typeof e?g(Object.create(Object.getPrototypeOf(e)),e):e}function s(e,t,r){o(Array.isArray(e),function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(e)+"."}),l(t[r],r)}function l(e,t){o(Array.isArray(e),function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"})}function u(e,t){o(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+n(e)}),c(t.$splice)}function c(e){o(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"})}function d(e){o("function"==typeof e,function(){return"update(): expected spec of $apply to be a function; got "+n(e)+"."})}function f(e){o(1===Object.keys(e).length,function(){return"Cannot have more than one key in an object with $set"})}function p(e,t){o(t&&"object"==typeof t,function(){return"update(): $merge expects a spec of type 'object'; got "+n(t)}),o(e&&"object"==typeof e,function(){return"update(): $merge expects a target of type 'object'; got "+n(e)})}function m(e,t){var r=i(e);o("Map"===r||"Set"===r,function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(r)})}Object.defineProperty(r,"__esModule",{value:!0});var h="object"==typeof e&&"production"===e.env.NODE_ENV;r.invariant=o;var b=Object.prototype.hasOwnProperty,v=Array.prototype.splice,_=Object.prototype.toString,g=Object.assign||function(e,t){return y(t).forEach(function(r){b.call(t,r)&&(e[r]=t[r])}),e},y="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},w=function(){function e(){this.commands=g({},j),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var r=this,n="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(n)||o(!Array.isArray(n),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),o("object"==typeof n&&null!==n,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(r.commands).join(", ")+"."});var s=e;return y(n).forEach(function(t){if(b.call(r.commands,t)){var o=e===s;s=r.commands[t](n[t],s,n,e),o&&r.isEquals(s,e)&&(s=e)}else{var l="Map"===i(e)?r.update(e.get(t),n[t]):r.update(e[t],n[t]),u="Map"===i(s)?s.get(t):s[t];r.isEquals(l,u)&&(void 0!==l||b.call(e,t))||(s===e&&(s=a(e)),"Map"===i(s)?s.set(t,l):s[t]=l)}}),s},e}();r.Context=w;var j={$push:function(e,t,r){return s(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return s(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,n){return u(t,r),e.forEach(function(e){c(e),t===n&&e.length&&(t=a(n)),v.apply(t,e)}),t},$set:function(e,t,r){return f(r),e},$toggle:function(e,t){l(e,"$toggle");var r=e.length?a(t):t;return e.forEach(function(e){r[e]=!t[e]}),r},$unset:function(e,t,r,n){return l(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=a(n)),delete t[e])}),t},$add:function(e,t,r,n){return m(t,"$add"),l(e,"$add"),"Map"===i(t)?e.forEach(function(e){var r=e[0],o=e[1];t===n&&t.get(r)!==o&&(t=a(n)),t.set(r,o)}):e.forEach(function(e){t!==n||t.has(e)||(t=a(n)),t.add(e)}),t},$remove:function(e,t,r,n){return m(t,"$remove"),l(e,"$remove"),e.forEach(function(e){t===n&&t.has(e)&&(t=a(n)),t.delete(e)}),t},$merge:function(e,t,r,n){return p(t,e),y(e).forEach(function(r){e[r]!==t[r]&&(t===n&&(t=a(n)),t[r]=e[r])}),t},$apply:function(e,t){return d(e),e(t)}},k=new w;r.isEquals=k.update.isEquals,r.extend=k.extend,r.default=k.update,r.default.default=t.exports=g(r.default,r)}).call(this)}).call(this,e("_process"))},{_process:568}],318:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=[];-1!==(r=e.indexOf(t,r+1));)n.push(r);return n}},{}],319:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],320:[function(e,t,r){"use strict";var n=function(e,t,r,n,o,i,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,i,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};t.exports=n},{}],321:[function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=e("call-bind/callBound"),i=o("Object.prototype.toString"),a=function(e){return!(n&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!a(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},l=function(){return a(arguments)}();a.isLegacyArguments=s,t.exports=l?a:s},{"call-bind/callBound":102}],322:[function(e,t,r){"use strict";var n,o=Object.prototype.toString,i=Function.prototype.toString,a=/^\s*(?:function)?\*/,s="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,l=Object.getPrototypeOf,u=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}};t.exports=function(e){if("function"!=typeof e)return!1;if(a.test(i.call(e)))return!0;if(!s){return"[object GeneratorFunction]"===o.call(e)}if(!l)return!1;if(void 0===n){var t=u();n=!!t&&l(t)}return l(e)===n}},{}],323:[function(e,t,r){(function(r){(function(){"use strict";var n=e("foreach"),o=e("available-typed-arrays"),i=e("call-bind/callBound"),a=i("Object.prototype.toString"),s=e("has-symbols")(),l=s&&"symbol"==typeof Symbol.toStringTag,u=o(),c=i("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},d=i("String.prototype.slice"),f={},p=e("es-abstract/helpers/getOwnPropertyDescriptor"),m=Object.getPrototypeOf;l&&p&&m&&n(u,function(e){var t=new r[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var n=m(t),o=p(n,Symbol.toStringTag);if(!o){var i=m(n);o=p(i,Symbol.toStringTag)}f[e]=o.get});var h=function(e){var t=!1;return n(f,function(r,n){if(!t)try{t=r.call(e)===n}catch(e){}}),t};t.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!l){var t=d(a(e),8,-1);return c(u,t)>-1}return!!p&&h(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":90,"call-bind/callBound":102,"es-abstract/helpers/getOwnPropertyDescriptor":301,foreach:309,"has-symbols":313}],324:[function(t,r,n){!function(o,i){"function"==typeof e&&e.amd?e(["kefir"],i):"object"==typeof n?r.exports=i(t("kefir")):o.KefirBus=i(o.Kefir)}(this,function(e){function t(){var t=!1,n=e.pool(),o=null,i=e.stream(function(e){function r(t){e.emitEvent(t)}if(o=e,!t)return n.onAny(r),function(){o=null,n.offAny(r)};e.end()});return i.value=i.emit=function(e){return o&&o.emit(e),i},i.error=function(e){return o&&o.error(e),i},i.event=i.emitEvent=function(e){return"end"===e.type?i.end():o&&o.emitEvent(e),i},i.plug=function(e){return n.plug(e),i},i.unplug=function(e){return n.unplug(e),i},i.end=function(){return t||(t=!0,o&&o.end(),n=r),i},i.setName("bus")}var r={plug:function(){},unplug:function(){}};return t.default=t,t})},{kefir:327}],325:[function(e,t,r){"use strict";function n(e,t){return t&&t.subscribe&&t.subscribeOnNext?e.stream(function(e){var r=t.subscribe(function(t){e.emit(t)},function(t){e.error(t),e.end()},function(){e.end()});return function(){r.dispose()}}):t&&t.onAny&&t.offAny?e.stream(function(e){var r=e.emitEvent;return t.onAny(r),function(){t.offAny(r)}}):t&&t.subscribe&&t.onValue?e.stream(function(e){return t.subscribe(function(t){"function"==typeof t.hasValue?t.hasValue()?e.emit(t.value()):t.isEnd()?e.end():t.isError()?e.error(t.error):console.error("Unknown type of Bacon event",t):t.hasValue?e.emit(t.value):t.isEnd?e.end():t.isError?e.error(t.error):console.error("Unknown type of Bacon event",t)})}):t&&t.subscribe&&t.lift?e.stream(function(e){var r=t.subscribe(function(t){e.emit(t)},function(t){e.error(t),e.end()},function(){e.end()});return function(){r.unsubscribe()}}):e.constant(t)}t.exports=n},{}],326:[function(e,t,r){"use strict";function n(){function e(){n.stopped=!0,t&&(t.emit(null),t.end())}var t=null,r=o.stream(function(r){t=r,n.stopped&&e()}),n=r.toProperty();return n.stopped=!1,n.destroy=e,n}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("kefir");t.exports=r.default,t.exports.default=r.default},{kefir:327}],327:[function(t,r,n){(function(t){(function(){!function(t,o){"object"==typeof n&&void 0!==r?o(n):"function"==typeof e&&e.amd?e(["exports"],o):o(t.Kefir=t.Kefir||{})}(this,function(e){"use strict";function n(e){var t=function(){};return t.prototype=e,new t}function o(e){var t=arguments.length,r=void 0,n=void 0;for(r=1;r<t;r++)for(n in arguments[r])e[n]=arguments[r][n];return e}function i(e,t){var r=arguments.length,i=void 0;for(e.prototype=n(t.prototype),e.prototype.constructor=e,i=2;i<r;i++)o(e.prototype,arguments[i]);return e}function a(e,t){var r=void 0,n=void 0,o=void 0,i=void 0;if(0===e.length)return t;if(0===t.length)return e;for(i=0,r=new Array(e.length+t.length),n=e.length,o=0;o<n;o++,i++)r[i]=e[o];for(n=t.length,o=0;o<n;o++,i++)r[i]=t[o];return r}function s(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)if(e[n]===t)return n;return-1}function l(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)if(t(e[n]))return n;return-1}function u(e){var t=e.length,r=new Array(t),n=void 0;for(n=0;n<t;n++)r[n]=e[n];return r}function c(e,t){var r=e.length,n=void 0,o=void 0,i=void 0;if(t>=0&&t<r){if(1===r)return[];for(n=new Array(r-1),o=0,i=0;o<r;o++)o!==t&&(n[i]=e[o],i++);return n}return e}function d(e,t){var r=e.length,n=new Array(r),o=void 0;for(o=0;o<r;o++)n[o]=t(e[o]);return n}function f(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)t(e[n])}function p(e,t){var r=e.length,n=void 0;for(n=0;n<r;n++)e[n]=t}function m(e,t){return-1!==s(e,t)}function h(e,t,r){var n=Math.min(r,e.length+1),o=e.length-n+1,i=new Array(n),a=void 0;for(a=o;a<n;a++)i[a-o]=e[a];return i[n-1]=t,i}function b(e,t,r){e===ut?t(r):e===r.type&&(e===st||e===lt?t(r.value):t())}function v(){this._items=[],this._spies=[],this._inLoop=0,this._removedItems=null}function _(){this._dispatcher=new v,this._active=!1,this._alive=!0,this._activating=!1,this._logHandlers=null,this._spyHandlers=null}function g(){_.call(this)}function y(){_.call(this),this._currentEvent=null}function w(){return ct}function j(e){function t(e,t){var r=this;g.call(this),this._wait=e,this._intervalId=null,this._$onTick=function(){return r._onTick()},this._init(t)}return i(t,g,{_init:function(){},_free:function(){},_onTick:function(){},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null)},_clear:function(){g.prototype._clear.call(this),this._$onTick=null,this._free()}},e),t}function k(e,t){return new dt(e,{x:t})}function x(e,t){return new ft(e,{x:t})}function E(e,t){return 0===t.length?w():new pt(e,{xs:t})}function S(e,t){return new mt(e,{fn:t})}function C(e){function t(t){return e._emitValue(t),e._active}function r(t){return e._emitError(t),e._active}function n(){return e._emitEnd(),e._active}function o(t){return e._emit(t.type,t.value),e._active}return{value:t,error:r,end:n,event:o,emit:t,emitEvent:o}}function I(e,t){return new ht(e,{fn:t})}function A(e){g.call(this),this._fn=e,this._unsubscribe=null}function T(e){return new A(e)}function D(e){var t=!1;return T(function(r){t||(e(function(e){r.emit(e),r.end()}),t=!0)}).setName("fromCallback")}function M(e){var t=!1;return T(function(r){t||(e(function(e,t){e?r.error(e):r.emit(t),r.end()}),t=!0)}).setName("fromNodeCallback")}function R(e,t){switch(t){case 0:return function(){return e()};case 1:return function(t){return e(t[0])};case 2:return function(t){return e(t[0],t[1])};case 3:return function(t){return e(t[0],t[1],t[2])};case 4:return function(t){return e(t[0],t[1],t[2],t[3])};default:return function(t){return e.apply(null,t)}}}function O(e,t,r){var n=r?r.length:0;if(null==t)switch(n){case 0:return e();case 1:return e(r[0]);case 2:return e(r[0],r[1]);case 3:return e(r[0],r[1],r[2]);case 4:return e(r[0],r[1],r[2],r[3]);default:return e.apply(null,r)}else switch(n){case 0:return e.call(t);default:return e.apply(t,r)}}function P(e,t,r){return T(function(n){var o=r?function(){n.emit(O(r,this,arguments))}:function(e){n.emit(e)};return e(o),function(){return t(o)}}).setName("fromSubUnsub")}function L(e,t,r){for(var n=void 0,o=void 0,i=0;i<bt.length;i++)if("function"==typeof e[bt[i][0]]&&"function"==typeof e[bt[i][1]]){n=bt[i][0],o=bt[i][1];break}if(void 0===n)throw new Error("target don't support any of addEventListener/removeEventListener, addListener/removeListener, on/off method pair");return P(function(r){return e[n](t,r)},function(r){return e[o](t,r)},r).setName("fromEvents")}function V(e){this._currentEvent={type:"value",value:e,current:!0}}function N(e){return new V(e)}function B(e){this._currentEvent={type:"error",value:e,current:!0}}function q(e){return new B(e)}function U(e,t){return function(r,n){var o=this;e.call(this),this._source=r,this._name=r._name+"."+t,this._init(n),this._$handleAny=function(e){return o._handleAny(e)}}}function F(e){return{_init:function(){},_free:function(){},_handleValue:function(e){this._emitValue(e)},_handleError:function(e){this._emitError(e)},_handleEnd:function(){this._emitEnd()},_handleAny:function(e){switch(e.type){case st:return this._handleValue(e.value);case lt:return this._handleError(e.value);case at:return this._handleEnd()}},_onActivation:function(){this._source.onAny(this._$handleAny)},_onDeactivation:function(){this._source.offAny(this._$handleAny)},_clear:function(){e.prototype._clear.call(this),this._source=null,this._$handleAny=null,this._free()}}}function H(e,t){var r=U(g,e);return i(r,g,F(g),t),r}function z(e,t){var r=U(y,e);return i(r,y,F(y),t),r}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==t&&"function"!=typeof t)throw new Error("You should call toProperty() with a function or no arguments.");return new _t(e,{fn:t})}function G(e){return new gt(e)}function K(e){var t=!1;return W(T(function(r){if(!t){var n=function(e){r.emit(e),r.end()},o=function(e){r.error(e),r.end()},i=e.then(n,o);i&&"function"==typeof i.done&&i.done(),t=!0}}),null).setName("fromPromise")}function $(){if("function"==typeof Promise)return Promise;throw new Error("There isn't default Promise, use shim or parameter")}function J(e){var t=e[jt]?e[jt]():e;return T(function(e){var r=t.subscribe({error:function(t){e.error(t),e.end()},next:function(t){e.emit(t)},complete:function(){e.end()}});return r.unsubscribe?function(){r.unsubscribe()}:r}).setName("fromESObservable")}function Y(e){this._observable=e.takeErrors(1)}function Q(){return new Y(this)}function Z(e,t,r){for(var n in e)e.hasOwnProperty(n)&&(t.push(n),r.push(e[n]))}function X(e){for(var t=void 0,r=0;r<e.length;r++)void 0!==e[r]&&(void 0===t||t.index<e[r].index)&&(t=e[r]);return t.error}function ee(e,t,r){var n=this;g.call(this),this._activeCount=e.length,this._sources=a(e,t),this._combinator=r,this._aliveCount=0,this._latestValues=new Array(this._sources.length),this._latestErrors=new Array(this._sources.length),p(this._latestValues,it),this._emitAfterActivation=!1,this._endAfterActivation=!1,this._latestErrorIndex=0,this._$handlers=[];for(var o=0;o<this._sources.length;o++)!function(e){n._$handlers.push(function(t){return n._handleAny(e,t)})}(o)}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2];if(!Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");return r=r?R(r,e.length+t.length):function(e){return e},0===e.length?w():new ee(e,t,r)}function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2];if("object"!=typeof t||Array.isArray(t))throw new Error("Combine can only combine active and passive collections of the same type.");var n=[],o=[],i=[];Z(e,n,o),Z(t,n,i);var a=function(e){for(var t={},o=e.length-1;0<=o;o--)t[n[o]]=e[o];return r?r(t):t};return 0===o.length?w():new ee(o,i,a)}function ne(e,t,r){return"function"==typeof t&&(r=t,t=void 0),Array.isArray(e)?te(e,t,r):re(e,t,r)}function oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:It;return new(e._ofSameType(St,Ct))(e,{fn:t})}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mt;return new(e._ofSameType(Tt,Dt))(e,{fn:t})}function ae(e,t){return new(e._ofSameType(Ot,Pt))(e,{n:t})}function se(e,t){return new(e._ofSameType(Vt,Nt))(e,{n:t})}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ft;return new(e._ofSameType(qt,Ut))(e,{fn:t})}function ue(e){return new(e._ofSameType(zt,Wt))(e)}function ce(e,t){return new(e._ofSameType(Kt,$t))(e,{n:t})}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zt;return new(e._ofSameType(Yt,Qt))(e,{fn:t})}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rr;return new(e._ofSameType(er,tr))(e,{fn:t})}function pe(e,t){return[e,t]}function me(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;return new(e._ofSameType(or,ir))(e,{fn:t||pe,seed:r})}function he(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:it;return new ar(e,{fn:t,seed:r})}function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ur;return new lr(e,{fn:t})}function ve(e,t){return new(e._ofSameType(fr,pr))(e,{wait:t})}function _e(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.leading,o=void 0===n||n,i=r.trailing,a=void 0===i||i;return new(e._ofSameType(br,vr))(e,{wait:t,leading:o,trailing:a})}function ge(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.immediate,o=void 0!==n&&n;return new(e._ofSameType(gr,yr))(e,{wait:t,immediate:o})}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xr;return new(e._ofSameType(jr,kr))(e,{fn:t})}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ir;return new(e._ofSameType(Sr,Cr))(e,{fn:t})}function je(e){return new(e._ofSameType(Tr,Dr))(e)}function ke(e){return new(e._ofSameType(Rr,Or))(e)}function xe(e){return new(e._ofSameType(Lr,Vr))(e)}function Ee(e,t){return new(e._ofSameType(Br,qr))(e,{fn:t})}function Se(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return new(e._ofSameType(Fr,Hr))(e,{min:r,max:t})}function Ce(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.flushOnEnd,o=void 0===n||n;return new(e._ofSameType(Wr,Gr))(e,{fn:t||Kr,flushOnEnd:o})}function Ie(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.flushOnEnd,o=void 0===n||n;return new(e._ofSameType(Jr,Yr))(e,{count:t,flushOnEnd:o})}function Ae(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.flushOnEnd,i=void 0===o||o;return new(e._ofSameType(Zr,Xr))(e,{wait:t,count:r,flushOnEnd:i})}function Te(e){return{"@@transducer/step":function(t,r){
return e._emitValue(r),null},"@@transducer/result":function(){return e._emitEnd(),null}}}function De(e,t){return new(e._ofSameType(tn,rn))(e,{transducer:t})}function Me(e,t){return new(e._ofSameType(on,an))(e,{fn:t})}function Re(e,t){var r=this;g.call(this),this._buffers=d(e,function(e){return sn(e)?u(e):[]}),this._sources=d(e,function(e){return sn(e)?w():e}),this._combinator=t?R(t,this._sources.length):function(e){return e},this._aliveCount=0,this._$handlers=[];for(var n=0;n<this._sources.length;n++)!function(e){r._$handlers.push(function(t){return r._handleAny(e,t)})}(n)}function Oe(e,t){return 0===e.length?w():new Re(e,t)}function Pe(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.queueLim,n=void 0===r?0:r,o=t.concurLim,i=void 0===o?-1:o,a=t.drop,s=void 0===a?"new":a;g.call(this),this._queueLim=n<0?-1:n,this._concurLim=i<0?-1:i,this._drop=s,this._queue=[],this._curSources=[],this._$handleSubAny=function(t){return e._handleSubAny(t)},this._$endHandlers=[],this._currentlyAdding=null,0===this._concurLim&&this._emitEnd()}function Le(e){Pe.call(this),this._addAll(e),this._initialised=!0}function Ve(e){return 0===e.length?w():new Le(e)}function Ne(e){var t=this;g.call(this),this._generator=e,this._source=null,this._inLoop=!1,this._iteration=0,this._$handleAny=function(e){return t._handleAny(e)}}function Be(e){return un(function(t){return e.length>t&&e[t]}).setName("concat")}function qe(){Pe.call(this)}function Ue(e,t,r){var n=this;Pe.call(this,r),this._source=e,this._fn=t,this._mainEnded=!1,this._lastCurrent=null,this._$handleMain=function(e){return n._handleMain(e)}}function Fe(e,t){Ue.call(this,e,t)}function He(e,t){return function(r,n,o){var i=this;e.call(this),this._primary=r,this._secondary=n,this._name=r._name+"."+t,this._lastSecondary=it,this._$handleSecondaryAny=function(e){return i._handleSecondaryAny(e)},this._$handlePrimaryAny=function(e){return i._handlePrimaryAny(e)},this._init(o)}}function ze(e){return{_init:function(){},_free:function(){},_handlePrimaryValue:function(e){this._emitValue(e)},_handlePrimaryError:function(e){this._emitError(e)},_handlePrimaryEnd:function(){this._emitEnd()},_handleSecondaryValue:function(e){this._lastSecondary=e},_handleSecondaryError:function(e){this._emitError(e)},_handleSecondaryEnd:function(){},_handlePrimaryAny:function(e){switch(e.type){case st:return this._handlePrimaryValue(e.value);case lt:return this._handlePrimaryError(e.value);case at:return this._handlePrimaryEnd(e.value)}},_handleSecondaryAny:function(e){switch(e.type){case st:return this._handleSecondaryValue(e.value);case lt:return this._handleSecondaryError(e.value);case at:this._handleSecondaryEnd(e.value),this._removeSecondary()}},_removeSecondary:function(){null!==this._secondary&&(this._secondary.offAny(this._$handleSecondaryAny),this._$handleSecondaryAny=null,this._secondary=null)},_onActivation:function(){null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny),this._active&&this._primary.onAny(this._$handlePrimaryAny)},_onDeactivation:function(){null!==this._secondary&&this._secondary.offAny(this._$handleSecondaryAny),this._primary.offAny(this._$handlePrimaryAny)},_clear:function(){e.prototype._clear.call(this),this._primary=null,this._secondary=null,this._lastSecondary=null,this._$handleSecondaryAny=null,this._$handlePrimaryAny=null,this._free()}}}function We(e,t){var r=He(g,e);return i(r,g,ze(g),t),r}function Ge(e,t){var r=He(y,e);return i(r,y,ze(y),t),r}function Ke(e,t){return new(e._ofSameType(dn,fn))(e,t)}function $e(e,t,r){return ne([t],[e],r?function(e,t){return r(t,e)}:pn).setName(e,"sampledBy")}function Je(e,t){return new(e._ofSameType(hn,bn))(e,t)}function Ye(e,t){return new(e._ofSameType(_n,gn))(e,t)}function Qe(e,t,r){return new(e._ofSameType(wn,jn))(e,t,r)}function Ze(e,t,r){return new(e._ofSameType(xn,En))(e,t,r)}function Xe(e,t){var r=Ve([oe(e,Cn),oe(t,Sn)]);return r=fe(r),r=W(r,Sn),r.setName(e,"awaiting")}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dn;return new(e._ofSameType(An,Tn))(e,{fn:t})}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;return new(e._ofSameType(Rn,On))(e,{fn:t})}function rt(e){return new(e._ofSameType(Vn,Nn))(e)}function nt(){qn=!1}function ot(e){if(qn&&console&&"function"==typeof console.warn){console.warn(e,"\nHere is an Error object for you containing the call stack:",new Error)}}var it=["<nothing>"],at="end",st="value",lt="error",ut="any";o(v.prototype,{add:function(e,t){return this._items=a(this._items,[{type:e,fn:t}]),this._items.length},remove:function(e,t){var r=l(this._items,function(r){return r.type===e&&r.fn===t});return 0!==this._inLoop&&-1!==r&&(null===this._removedItems&&(this._removedItems=[]),this._removedItems.push(this._items[r])),this._items=c(this._items,r),this._items.length},addSpy:function(e){return this._spies=a(this._spies,[e]),this._spies.length},removeSpy:function(e){return this._spies=c(this._spies,this._spies.indexOf(e)),this._spies.length},dispatch:function(e){this._inLoop++;for(var t=0,r=this._spies;null!==this._spies&&t<r.length;t++)r[t](e);for(var n=0,o=this._items;n<o.length&&null!==this._items;n++)null!==this._removedItems&&m(this._removedItems,o[n])||b(o[n].type,o[n].fn,e);0===--this._inLoop&&(this._removedItems=null)},cleanup:function(){this._items=null,this._spies=null}}),o(_.prototype,{_name:"observable",_onActivation:function(){},_onDeactivation:function(){},_setActive:function(e){this._active!==e&&(this._active=e,e?(this._activating=!0,this._onActivation(),this._activating=!1):this._onDeactivation())},_clear:function(){this._setActive(!1),this._dispatcher.cleanup(),this._dispatcher=null,this._logHandlers=null},_emit:function(e,t){switch(e){case st:return this._emitValue(t);case lt:return this._emitError(t);case at:return this._emitEnd()}},_emitValue:function(e){this._alive&&this._dispatcher.dispatch({type:st,value:e})},_emitError:function(e){this._alive&&this._dispatcher.dispatch({type:lt,value:e})},_emitEnd:function(){this._alive&&(this._alive=!1,this._dispatcher.dispatch({type:at}),this._clear())},_on:function(e,t){return this._alive?(this._dispatcher.add(e,t),this._setActive(!0)):b(e,t,{type:at}),this},_off:function(e,t){if(this._alive){0===this._dispatcher.remove(e,t)&&this._setActive(!1)}return this},onValue:function(e){return this._on(st,e)},onError:function(e){return this._on(lt,e)},onEnd:function(e){return this._on(at,e)},onAny:function(e){return this._on(ut,e)},offValue:function(e){return this._off(st,e)},offError:function(e){return this._off(lt,e)},offEnd:function(e){return this._off(at,e)},offAny:function(e){return this._off(ut,e)},observe:function(e,t,r){var n=this,o=!1,i=e&&"function"!=typeof e?e:{value:e,error:t,end:r},a=function(e){e.type===at&&(o=!0),e.type===st&&i.value?i.value(e.value):e.type===lt&&i.error?i.error(e.value):e.type===at&&i.end&&i.end(e.value)};return this.onAny(a),{unsubscribe:function(){o||(n.offAny(a),o=!0)},get closed(){return o}}},_ofSameType:function(e,t){return e.prototype.getType()===this.getType()?e:t},setName:function(e,t){return this._name=t?e._name+"."+t:e,this},log:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=void 0,r=function(r){var n="<"+r.type+(t?":current":"")+">";r.type===at?console.log(e,n):console.log(e,n,r.value)};return this._alive&&(this._logHandlers||(this._logHandlers=[]),this._logHandlers.push({name:e,handler:r})),t=!0,this.onAny(r),t=!1,this},offLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._logHandlers){var t=l(this._logHandlers,function(t){return t.name===e});-1!==t&&(this.offAny(this._logHandlers[t].handler),this._logHandlers.splice(t,1))}return this},spy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString(),t=function(t){var r="<"+t.type+">";t.type===at?console.log(e,r):console.log(e,r,t.value)};return this._alive&&(this._spyHandlers||(this._spyHandlers=[]),this._spyHandlers.push({name:e,handler:t}),this._dispatcher.addSpy(t)),this},offSpy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.toString();if(this._spyHandlers){var t=l(this._spyHandlers,function(t){return t.name===e});-1!==t&&(this._dispatcher.removeSpy(this._spyHandlers[t].handler),this._spyHandlers.splice(t,1))}return this}}),_.prototype.toString=function(){return"["+this._name+"]"},i(g,_,{_name:"stream",getType:function(){return"stream"}}),i(y,_,{_name:"property",_emitValue:function(e){this._alive&&(this._currentEvent={type:st,value:e},this._activating||this._dispatcher.dispatch({type:st,value:e}))},_emitError:function(e){this._alive&&(this._currentEvent={type:lt,value:e},this._activating||this._dispatcher.dispatch({type:lt,value:e}))},_emitEnd:function(){this._alive&&(this._alive=!1,this._activating||this._dispatcher.dispatch({type:at}),this._clear())},_on:function(e,t){return this._alive&&(this._dispatcher.add(e,t),this._setActive(!0)),null!==this._currentEvent&&b(e,t,this._currentEvent),this._alive||b(e,t,{type:at}),this},getType:function(){return"property"}});var ct=new g;ct._emitEnd(),ct._name="never";var dt=j({_name:"later",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x),this._emitEnd()}}),ft=j({_name:"interval",_init:function(e){var t=e.x;this._x=t},_free:function(){this._x=null},_onTick:function(){this._emitValue(this._x)}}),pt=j({_name:"sequentially",_init:function(e){var t=e.xs;this._xs=u(t)},_free:function(){this._xs=null},_onTick:function(){1===this._xs.length?(this._emitValue(this._xs[0]),this._emitEnd()):this._emitValue(this._xs.shift())}}),mt=j({_name:"fromPoll",_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_onTick:function(){var e=this._fn;this._emitValue(e())}}),ht=j({_name:"withInterval",_init:function(e){var t=e.fn;this._fn=t,this._emitter=C(this)},_free:function(){this._fn=null,this._emitter=null},_onTick:function(){(0,this._fn)(this._emitter)}});i(A,g,{_name:"stream",_onActivation:function(){var e=this._fn,t=e(C(this));this._unsubscribe="function"==typeof t?t:null,this._active||this._callUnsubscribe()},_callUnsubscribe:function(){null!==this._unsubscribe&&(this._unsubscribe(),this._unsubscribe=null)},_onDeactivation:function(){this._callUnsubscribe()},_clear:function(){g.prototype._clear.call(this),this._fn=null}});var bt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"]];i(V,y,{_name:"constant",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null}),i(B,y,{_name:"constantError",_active:!1,_activating:!1,_alive:!1,_dispatcher:null,_logHandlers:null});var vt,_t=z("toProperty",{_init:function(e){var t=e.fn;this._getInitialCurrent=t},_onActivation:function(){if(null!==this._getInitialCurrent){var e=this._getInitialCurrent;this._emitValue(e())}this._source.onAny(this._$handleAny)}}),gt=H("changes",{_handleValue:function(e){this._activating||this._emitValue(e)},_handleError:function(e){this._activating||this._emitError(e)}}),yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$(),r=null;return new t(function(t,n){e.onAny(function(e){e.type===at&&null!==r?((r.type===st?t:n)(r.value),r=null):r=e})})};vt="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:void 0!==r?r:Function("return this")();var wt=function(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}(vt),jt=wt.default?wt.default:wt;o(Y.prototype,{subscribe:function(e,t,r){var n=this,o="function"==typeof e?{next:e,error:t,complete:r}:e,i=function(e){e.type===at&&(a=!0),e.type===st&&o.next?o.next(e.value):e.type===lt&&o.error?o.error(e.value):e.type===at&&o.complete&&o.complete(e.value)};this._observable.onAny(i);var a=!1;return{unsubscribe:function(){a=!0,n._observable.offAny(i)},get closed(){return a}}}}),Y.prototype[jt]=function(){return this},i(ee,g,{_name:"combine",_onActivation:function(){this._aliveCount=this._activeCount;for(var e=this._activeCount;e<this._sources.length;e++)this._sources[e].onAny(this._$handlers[e]);for(var t=0;t<this._activeCount;t++)this._sources[t].onAny(this._$handlers[t]);this._emitAfterActivation&&(this._emitAfterActivation=!1,this._emitIfFull()),this._endAfterActivation&&this._emitEnd()},_onDeactivation:function(){var e=this._sources.length,t=void 0;for(t=0;t<e;t++)this._sources[t].offAny(this._$handlers[t])},_emitIfFull:function(){for(var e=!0,t=!1,r=this._latestValues.length,n=new Array(r),o=new Array(r),i=0;i<r;i++)n[i]=this._latestValues[i],o[i]=this._latestErrors[i],n[i]===it&&(e=!1),void 0!==o[i]&&(t=!0);if(e){var a=this._combinator;this._emitValue(a(n))}t&&this._emitError(X(o))},_handleAny:function(e,t){t.type===st||t.type===lt?(t.type===st&&(this._latestValues[e]=t.value,this._latestErrors[e]=void 0),t.type===lt&&(this._latestValues[e]=it,this._latestErrors[e]={index:this._latestErrorIndex++,error:t.value}),e<this._activeCount&&(this._activating?this._emitAfterActivation=!0:this._emitIfFull())):e<this._activeCount&&0===--this._aliveCount&&(this._activating?this._endAfterActivation=!0:this._emitEnd())},_clear:function(){g.prototype._clear.call(this),this._sources=null,this._latestValues=null,this._latestErrors=null,this._combinator=null,this._$handlers=null}});var kt={empty:function(){return w()},concat:function(e,t){return e.merge(t)},of:function(e){return N(e)},map:function(e,t){return t.map(e)},bimap:function(e,t,r){return r.mapErrors(e).map(t)},ap:function(e,t){return ne([e,t],function(e,t){return e(t)})},chain:function(e,t){return t.flatMap(e)}},xt=Object.freeze({Observable:kt}),Et={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;this._emitValue(t(e))}},St=H("map",Et),Ct=z("map",Et),It=function(e){return e},At={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)&&this._emitValue(e)}},Tt=H("filter",At),Dt=z("filter",At),Mt=function(e){return e},Rt={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleValue:function(e){0!==this._n&&(this._n--,this._emitValue(e),0===this._n&&this._emitEnd())}},Ot=H("take",Rt),Pt=z("take",Rt),Lt={_init:function(e){var t=e.n;this._n=t,t<=0&&this._emitEnd()},_handleError:function(e){0!==this._n&&(this._n--,this._emitError(e),0===this._n&&this._emitEnd())}},Vt=H("takeErrors",Lt),Nt=z("takeErrors",Lt),Bt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){(0,this._fn)(e)?this._emitValue(e):this._emitEnd()}},qt=H("takeWhile",Bt),Ut=z("takeWhile",Bt),Ft=function(e){return e},Ht={_init:function(){this._lastValue=it},_free:function(){this._lastValue=null},_handleValue:function(e){this._lastValue=e},_handleEnd:function(){this._lastValue!==it&&this._emitValue(this._lastValue),this._emitEnd()}},zt=H("last",Ht),Wt=z("last",Ht),Gt={_init:function(e){var t=e.n;this._n=Math.max(0,t)},_handleValue:function(e){0===this._n?this._emitValue(e):this._n--}},Kt=H("skip",Gt),$t=z("skip",Gt),Jt={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn;null===this._fn||t(e)||(this._fn=null),null===this._fn&&this._emitValue(e)}},Yt=H("skipWhile",Jt),Qt=z("skipWhile",Jt),Zt=function(e){return e},Xt={_init:function(e){var t=e.fn;this._fn=t,this._prev=it},_free:function(){this._fn=null,this._prev=null},_handleValue:function(e){var t=this._fn;this._prev!==it&&t(this._prev,e)||(this._prev=e,this._emitValue(e))}},er=H("skipDuplicates",Xt),tr=z("skipDuplicates",Xt),rr=function(e,t){return e===t},nr={_init:function(e){var t=e.fn,r=e.seed;this._fn=t,this._prev=r},_free:function(){this._prev=null,this._fn=null},_handleValue:function(e){if(this._prev!==it){var t=this._fn;this._emitValue(t(this._prev,e))}this._prev=e}},or=H("diff",nr),ir=z("diff",nr),ar=z("scan",{_init:function(e){var t=e.fn,r=e.seed;this._fn=t,this._seed=r,r!==it&&this._emitValue(r)},_free:function(){this._fn=null,this._seed=null},_handleValue:function(e){var t=this._fn;null===this._currentEvent||this._currentEvent.type===lt?this._emitValue(this._seed===it?e:t(this._seed,e)):this._emitValue(t(this._currentEvent.value,e))}}),sr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){for(var t=this._fn,r=t(e),n=0;n<r.length;n++)this._emitValue(r[n])}},lr=H("flatten",sr),ur=function(e){return e},cr={},dr={_init:function(e){var t=this,r=e.wait;this._wait=Math.max(0,r),this._buff=[],this._$shiftBuff=function(){var e=t._buff.shift();e===cr?t._emitEnd():t._emitValue(e)}},_free:function(){this._buff=null,this._$shiftBuff=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._buff.push(e),setTimeout(this._$shiftBuff,this._wait))},_handleEnd:function(){this._activating?this._emitEnd():(this._buff.push(cr),setTimeout(this._$shiftBuff,this._wait))}},fr=H("delay",dr),pr=z("delay",dr),mr=Date.now?function(){return Date.now()}:function(){return(new Date).getTime()},hr={_init:function(e){var t=this,r=e.wait,n=e.leading,o=e.trailing;this._wait=Math.max(0,r),this._leading=n,this._trailing=o,this._trailingValue=null,this._timeoutId=null,this._endLater=!1,this._lastCallTime=0,this._$trailingCall=function(){return t._trailingCall()}},_free:function(){this._trailingValue=null,this._$trailingCall=null},_handleValue:function(e){if(this._activating)this._emitValue(e);else{var t=mr();0!==this._lastCallTime||this._leading||(this._lastCallTime=t);var r=this._wait-(t-this._lastCallTime);r<=0?(this._cancelTrailing(),this._lastCallTime=t,this._emitValue(e)):this._trailing&&(this._cancelTrailing(),this._trailingValue=e,this._timeoutId=setTimeout(this._$trailingCall,r))}},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId?this._endLater=!0:this._emitEnd()},_cancelTrailing:function(){null!==this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=null)},_trailingCall:function(){this._emitValue(this._trailingValue),this._timeoutId=null,this._trailingValue=null,this._lastCallTime=this._leading?mr():0,this._endLater&&this._emitEnd()}},br=H("throttle",hr),vr=z("throttle",hr),_r={_init:function(e){var t=this,r=e.wait,n=e.immediate;this._wait=Math.max(0,r),this._immediate=n,this._lastAttempt=0,this._timeoutId=null,this._laterValue=null,this._endLater=!1,this._$later=function(){return t._later()}},_free:function(){this._laterValue=null,this._$later=null},_handleValue:function(e){this._activating?this._emitValue(e):(this._lastAttempt=mr(),this._immediate&&!this._timeoutId&&this._emitValue(e),this._timeoutId||(this._timeoutId=setTimeout(this._$later,this._wait)),this._immediate||(this._laterValue=e))},_handleEnd:function(){this._activating?this._emitEnd():this._timeoutId&&!this._immediate?this._endLater=!0:this._emitEnd()},_later:function(){var e=mr()-this._lastAttempt;if(e<this._wait&&e>=0)this._timeoutId=setTimeout(this._$later,this._wait-e);else{if(this._timeoutId=null,!this._immediate){var t=this._laterValue;this._laterValue=null,this._emitValue(t)}this._endLater&&this._emitEnd()}}},gr=H("debounce",_r),yr=z("debounce",_r),wr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn;this._emitError(t(e))}},jr=H("mapErrors",wr),kr=z("mapErrors",wr),xr=function(e){return e},Er={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){(0,this._fn)(e)&&this._emitError(e)}},Sr=H("filterErrors",Er),Cr=z("filterErrors",Er),Ir=function(e){return e},Ar={_handleValue:function(){}},Tr=H("ignoreValues",Ar),Dr=z("ignoreValues",Ar),Mr={_handleError:function(){}},Rr=H("ignoreErrors",Mr),Or=z("ignoreErrors",Mr),Pr={_handleEnd:function(){}},Lr=H("ignoreEnd",Pr),Vr=z("ignoreEnd",Pr),Nr={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleEnd:function(){var e=this._fn;this._emitValue(e()),this._emitEnd()}},Br=H("beforeEnd",Nr),qr=z("beforeEnd",Nr),Ur={_init:function(e){var t=e.min,r=e.max;this._max=r,this._min=t,this._buff=[]},_free:function(){this._buff=null},_handleValue:function(e){this._buff=h(this._buff,e,this._max),this._buff.length>=this._min&&this._emitValue(this._buff)}},Fr=H("slidingWindow",Ur),Hr=z("slidingWindow",Ur),zr={_init:function(e){var t=e.fn,r=e.flushOnEnd;this._fn=t,this._flushOnEnd=r,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),(0,this._fn)(e)||this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Wr=H("bufferWhile",zr),Gr=z("bufferWhile",zr),Kr=function(e){return e},$r={_init:function(e){var t=e.count,r=e.flushOnEnd;this._count=t,this._flushOnEnd=r,this._buff=[]},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&0!==this._buff.length&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&this._flush()},_handleEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()}},Jr=H("bufferWithCount",$r),Yr=z("bufferWithCount",$r),Qr={_init:function(e){var t=this,r=e.wait,n=e.count,o=e.flushOnEnd;this._wait=r,this._count=n,this._flushOnEnd=o,this._intervalId=null,this._$onTick=function(){return t._flush()},this._buff=[]},_free:function(){this._$onTick=null,this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handleValue:function(e){this._buff.push(e),this._buff.length>=this._count&&(clearInterval(this._intervalId),this._flush(),this._intervalId=setInterval(this._$onTick,this._wait))},_handleEnd:function(){this._flushOnEnd&&0!==this._buff.length&&this._flush(),this._emitEnd()},_onActivation:function(){this._intervalId=setInterval(this._$onTick,this._wait),this._source.onAny(this._$handleAny)},_onDeactivation:function(){null!==this._intervalId&&(clearInterval(this._intervalId),this._intervalId=null),this._source.offAny(this._$handleAny)}},Zr=H("bufferWithTimeOrCount",Qr),Xr=z("bufferWithTimeOrCount",Qr),en={_init:function(e){var t=e.transducer;this._xform=t(Te(this))},_free:function(){this._xform=null},_handleValue:function(e){null!==this._xform["@@transducer/step"](null,e)&&this._xform["@@transducer/result"](null)},_handleEnd:function(){this._xform["@@transducer/result"](null)}},tn=H("transduce",en),rn=z("transduce",en),nn={_init:function(e){var t=e.fn;this._handler=t,this._emitter=C(this)},_free:function(){this._handler=null,this._emitter=null},_handleAny:function(e){this._handler(this._emitter,e)}},on=H("withHandler",nn),an=z("withHandler",nn),sn=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};i(Re,g,{_name:"zip",_onActivation:function(){for(;this._isFull();)this._emit();var e=this._sources.length;this._aliveCount=e;for(var t=0;t<e&&this._active;t++)this._sources[t].onAny(this._$handlers[t])},_onDeactivation:function(){for(var e=0;e<this._sources.length;e++)this._sources[e].offAny(this._$handlers[e])},_emit:function(){for(var e=new Array(this._buffers.length),t=0;t<this._buffers.length;t++)e[t]=this._buffers[t].shift();var r=this._combinator;this._emitValue(r(e))},_isFull:function(){for(var e=0;e<this._buffers.length;e++)if(0===this._buffers[e].length)return!1;return!0},_handleAny:function(e,t){t.type===st&&(this._buffers[e].push(t.value),this._isFull()&&this._emit()),t.type===lt&&this._emitError(t.value),t.type===at&&0===--this._aliveCount&&this._emitEnd()},_clear:function(){g.prototype._clear.call(this),this._sources=null,this._buffers=null,this._combinator=null,this._$handlers=null}});var ln=function(e){return e};i(Pe,g,{_name:"abstractPool",_add:function(e,t){t=t||ln,-1===this._concurLim||this._curSources.length<this._concurLim?this._addToCur(t(e)):-1===this._queueLim||this._queue.length<this._queueLim?this._addToQueue(t(e)):"old"===this._drop&&(this._removeOldest(),this._add(e,t))},_addAll:function(e){var t=this;f(e,function(e){return t._add(e)})},_remove:function(e){-1===this._removeCur(e)&&this._removeQueue(e)},_addToQueue:function(e){this._queue=a(this._queue,[e])},_addToCur:function(e){if(this._active){if(!e._alive)return e._currentEvent&&this._emit(e._currentEvent.type,e._currentEvent.value),void(this._active&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()));this._currentlyAdding=e,e.onAny(this._$handleSubAny),this._currentlyAdding=null,e._alive?(this._curSources=a(this._curSources,[e]),this._active&&this._subToEnd(e)):0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()}else this._curSources=a(this._curSources,[e])},_subToEnd:function(e){var t=this,r=function(){return t._removeCur(e)};this._$endHandlers.push({obs:e,handler:r}),e.onEnd(r)},_subscribe:function(e){e.onAny(this._$handleSubAny),this._active&&this._subToEnd(e)},_unsubscribe:function(e){e.offAny(this._$handleSubAny);var t=l(this._$endHandlers,function(t){return t.obs===e});-1!==t&&(e.offEnd(this._$endHandlers[t].handler),this._$endHandlers.splice(t,1))},_handleSubAny:function(e){e.type===st?this._emitValue(e.value):e.type===lt&&this._emitError(e.value)},_removeQueue:function(e){var t=s(this._queue,e);return this._queue=c(this._queue,t),t},_removeCur:function(e){this._active&&this._unsubscribe(e);var t=s(this._curSources,e);return this._curSources=c(this._curSources,t),-1!==t&&(0!==this._queue.length?this._pullQueue():0===this._curSources.length&&this._onEmpty()),t},_removeOldest:function(){this._removeCur(this._curSources[0])},_pullQueue:function(){0!==this._queue.length&&(this._queue=u(this._queue),this._addToCur(this._queue.shift()))},_onActivation:function(){for(var e=0,t=this._curSources;e<t.length&&this._active;e++)this._subscribe(t[e])},_onDeactivation:function(){for(var e=0,t=this._curSources;e<t.length;e++)this._unsubscribe(t[e]);null!==this._currentlyAdding&&this._unsubscribe(this._currentlyAdding)},_isEmpty:function(){return 0===this._curSources.length},_onEmpty:function(){},_clear:function(){g.prototype._clear.call(this),this._queue=null,this._curSources=null,this._$handleSubAny=null,this._$endHandlers=null}}),i(Le,Pe,{_name:"merge",_onEmpty:function(){this._initialised&&this._emitEnd()}}),i(Ne,g,{_name:"repeat",_handleAny:function(e){e.type===at?(this._source=null,this._getSource()):this._emit(e.type,e.value)},_getSource:function(){if(!this._inLoop){this._inLoop=!0;for(var e=this._generator;null===this._source&&this._alive&&this._active;)this._source=e(this._iteration++),this._source?this._source.onAny(this._$handleAny):this._emitEnd();this._inLoop=!1}},_onActivation:function(){this._source?this._source.onAny(this._$handleAny):this._getSource()},_onDeactivation:function(){this._source&&this._source.offAny(this._$handleAny)},_clear:function(){g.prototype._clear.call(this),this._generator=null,this._source=null,this._$handleAny=null}});var un=function(e){return new Ne(e)};i(qe,Pe,{_name:"pool",plug:function(e){return this._add(e),this},unplug:function(e){return this._remove(e),this}}),i(Ue,Pe,{_onActivation:function(){Pe.prototype._onActivation.call(this),this._active&&this._source.onAny(this._$handleMain)},_onDeactivation:function(){Pe.prototype._onDeactivation.call(this),this._source.offAny(this._$handleMain),this._hadNoEvSinceDeact=!0},_handleMain:function(e){if(e.type===st){this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===lt&&this._emitError(e.value),e.type===at&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)},_onEmpty:function(){this._mainEnded&&this._emitEnd()},_clear:function(){Pe.prototype._clear.call(this),this._source=null,this._lastCurrent=null,this._$handleMain=null}}),i(Fe,Ue,{_handleMain:function(e){if(e.type===lt){this._activating&&this._hadNoEvSinceDeact&&this._lastCurrent===e.value||this._add(e.value,this._fn),this._lastCurrent=e.value,this._hadNoEvSinceDeact=!1}e.type===st&&this._emitValue(e.value),e.type===at&&(this._isEmpty()?this._emitEnd():this._mainEnded=!0)}});var cn={_handlePrimaryValue:function(e){this._lastSecondary!==it&&this._lastSecondary&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary!==it&&this._lastSecondary||this._emitEnd()}},dn=We("filterBy",cn),fn=Ge("filterBy",cn),pn=function(e,t){return t},mn={_handlePrimaryValue:function(e){this._lastSecondary!==it&&this._emitValue(e)},_handleSecondaryEnd:function(){this._lastSecondary===it&&this._emitEnd()}},hn=We("skipUntilBy",mn),bn=Ge("skipUntilBy",mn),vn={_handleSecondaryValue:function(){this._emitEnd()}},_n=We("takeUntilBy",vn),gn=Ge("takeUntilBy",vn),yn={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,r=void 0===t||t;this._buff=[],this._flushOnEnd=r},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_onActivation:function(){this._primary.onAny(this._$handlePrimaryAny),this._alive&&null!==this._secondary&&this._secondary.onAny(this._$handleSecondaryAny)},_handlePrimaryValue:function(e){this._buff.push(e)},_handleSecondaryValue:function(){this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._emitEnd()}},wn=We("bufferBy",yn),jn=Ge("bufferBy",yn),kn={_init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flushOnEnd,r=void 0===t||t,n=e.flushOnChange,o=void 0!==n&&n;this._buff=[],this._flushOnEnd=r,this._flushOnChange=o},_free:function(){this._buff=null},_flush:function(){null!==this._buff&&(this._emitValue(this._buff),this._buff=[])},_handlePrimaryEnd:function(){this._flushOnEnd&&this._flush(),this._emitEnd()},_handlePrimaryValue:function(e){this._buff.push(e),this._lastSecondary===it||this._lastSecondary||this._flush()},_handleSecondaryEnd:function(){this._flushOnEnd||this._lastSecondary!==it&&!this._lastSecondary||this._emitEnd()},_handleSecondaryValue:function(e){this._flushOnChange&&!e&&this._flush(),this._lastSecondary=e}},xn=We("bufferWhileBy",kn),En=Ge("bufferWhileBy",kn),Sn=function(){return!1},Cn=function(){return!0},In={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleValue:function(e){var t=this._fn,r=t(e);r.convert?this._emitError(r.error):this._emitValue(e)}},An=H("valuesToErrors",In),Tn=z("valuesToErrors",In),Dn=function(e){return{convert:!0,error:e}},Mn={_init:function(e){var t=e.fn;this._fn=t},_free:function(){this._fn=null},_handleError:function(e){var t=this._fn,r=t(e);r.convert?this._emitValue(r.value):this._emitError(e)}},Rn=H("errorsToValues",Mn),On=z("errorsToValues",Mn),Pn=function(e){return{convert:!0,value:e}},Ln={_handleError:function(e){this._emitError(e),this._emitEnd()}},Vn=H("endOnError",Ln),Nn=z("endOnError",Ln);_.prototype.toProperty=function(e){return W(this,e)},_.prototype.changes=function(){return G(this)},_.prototype.toPromise=function(e){return yt(this,e)},_.prototype.toESObservable=Q,_.prototype[jt]=Q,_.prototype.map=function(e){return oe(this,e)},_.prototype.filter=function(e){return ie(this,e)},_.prototype.take=function(e){return ae(this,e)},_.prototype.takeErrors=function(e){return se(this,e)},_.prototype.takeWhile=function(e){return le(this,e)},_.prototype.last=function(){return ue(this)},_.prototype.skip=function(e){return ce(this,e)},_.prototype.skipWhile=function(e){return de(this,e)},_.prototype.skipDuplicates=function(e){return fe(this,e)},_.prototype.diff=function(e,t){return me(this,e,t)},_.prototype.scan=function(e,t){return he(this,e,t)},_.prototype.flatten=function(e){return be(this,e)},_.prototype.delay=function(e){return ve(this,e)},_.prototype.throttle=function(e,t){return _e(this,e,t)},_.prototype.debounce=function(e,t){return ge(this,e,t)},_.prototype.mapErrors=function(e){return ye(this,e)},
_.prototype.filterErrors=function(e){return we(this,e)},_.prototype.ignoreValues=function(){return je(this)},_.prototype.ignoreErrors=function(){return ke(this)},_.prototype.ignoreEnd=function(){return xe(this)},_.prototype.beforeEnd=function(e){return Ee(this,e)},_.prototype.slidingWindow=function(e,t){return Se(this,e,t)},_.prototype.bufferWhile=function(e,t){return Ce(this,e,t)},_.prototype.bufferWithCount=function(e,t){return Ie(this,e,t)},_.prototype.bufferWithTimeOrCount=function(e,t,r){return Ae(this,e,t,r)},_.prototype.transduce=function(e){return De(this,e)},_.prototype.withHandler=function(e){return Me(this,e)},_.prototype.thru=function(e){return e(this)},_.prototype.combine=function(e,t){return ne([this,e],t)},_.prototype.zip=function(e,t){return Oe([this,e],t)},_.prototype.merge=function(e){return Ve([this,e])},_.prototype.concat=function(e){return Be([this,e])};var Bn=function(){return new qe};_.prototype.flatMap=function(e){return new Ue(this,e).setName(this,"flatMap")},_.prototype.flatMapLatest=function(e){return new Ue(this,e,{concurLim:1,drop:"old"}).setName(this,"flatMapLatest")},_.prototype.flatMapFirst=function(e){return new Ue(this,e,{concurLim:1}).setName(this,"flatMapFirst")},_.prototype.flatMapConcat=function(e){return new Ue(this,e,{queueLim:-1,concurLim:1}).setName(this,"flatMapConcat")},_.prototype.flatMapConcurLimit=function(e,t){return new Ue(this,e,{queueLim:-1,concurLim:t}).setName(this,"flatMapConcurLimit")},_.prototype.flatMapErrors=function(e){return new Fe(this,e).setName(this,"flatMapErrors")},_.prototype.filterBy=function(e){return Ke(this,e)},_.prototype.sampledBy=function(e,t){return $e(this,e,t)},_.prototype.skipUntilBy=function(e){return Je(this,e)},_.prototype.takeUntilBy=function(e){return Ye(this,e)},_.prototype.bufferBy=function(e,t){return Qe(this,e,t)},_.prototype.bufferWhileBy=function(e,t){return Ze(this,e,t)};var qn=!0;_.prototype.awaiting=function(e){return ot("You are using deprecated .awaiting() method, see https://github.com/kefirjs/kefir/issues/145"),Xe(this,e)},_.prototype.valuesToErrors=function(e){return ot("You are using deprecated .valuesToErrors() method, see https://github.com/kefirjs/kefir/issues/149"),et(this,e)},_.prototype.errorsToValues=function(e){return ot("You are using deprecated .errorsToValues() method, see https://github.com/kefirjs/kefir/issues/149"),tt(this,e)},_.prototype.endOnError=function(){return ot("You are using deprecated .endOnError() method, see https://github.com/kefirjs/kefir/issues/150"),rt(this)};var Un={Observable:_,Stream:g,Property:y,never:w,later:k,interval:x,sequentially:E,fromPoll:S,withInterval:I,fromCallback:D,fromNodeCallback:M,fromEvents:L,stream:T,constant:N,constantError:q,fromPromise:K,fromESObservable:J,combine:ne,zip:Oe,merge:Ve,concat:Be,Pool:qe,pool:Bn,repeat:un,staticLand:xt};Un.Kefir=Un,e.dissableDeprecationWarnings=nt,e.Kefir=Un,e.Observable=_,e.Stream=g,e.Property=y,e.never=w,e.later=k,e.interval=x,e.sequentially=E,e.fromPoll=S,e.withInterval=I,e.fromCallback=D,e.fromNodeCallback=M,e.fromEvents=L,e.stream=T,e.constant=N,e.constantError=q,e.fromPromise=K,e.fromESObservable=J,e.combine=ne,e.zip=Oe,e.merge=Ve,e.concat=Be,e.Pool=qe,e.pool=Bn,e.repeat=un,e.staticLand=xt,e.default=Un,Object.defineProperty(e,"__esModule",{value:!0})})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],328:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("asap")),l=function(){function e(){(0,o.default)(this,e),(0,a.default)(this,"_queue",[]),(0,a.default)(this,"_isFlushing",!1),(0,a.default)(this,"_index",0)}return(0,i.default)(e,[{key:"schedule",value:function(e){var t=this;this._queue.push(function(){try{e()}catch(e){setTimeout(function(){throw e},0)}}),1===this._queue.length&&(0,s.default)(function(){t.flush()})}},{key:"flush",value:function(){if(!this._isFlushing){this._isFlushing=!0;for(var e=this._queue;this._index<e.length;){var t=this._index;if(this._index+=1,e[t].call(),this._index>1024){for(var r=0,n=e.length-this._index;r<n;r++)e[r]=e[r+this._index];e.length-=this._index,this._index=0}}e.length=0,this._index=0,this._isFlushing=!1}}}]),e}();r.default=l,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69,asap:83}],329:[function(e,t,r){"use strict";function n(e,t){return new i.default({scheduler:e.getScheduler(),read:function(){var r=new Set;return e.values().forEach(function(e){t(e)&&r.add(e)}),r},listen:function(r,n){var o=new Set;return e.subscribe({start:function(){var n=new Set;e.values().forEach(function(e){t(e)&&(o.add(e),n.add(e))}),r(n)},next:function(e){e.forEach(function(e){"add"===e.type?t(e.value)&&(o.add(e.value),n.add(e.value)):"remove"===e.type&&o.has(e.value)&&(o.delete(e.value),n.remove(e.value))})},error:function(e){n.error(e)},complete:function(){n.end()}})}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("."));t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69}],330:[function(e,t,r){"use strict";function n(e,t){var r=!1;return new i.default({scheduler:e.getScheduler(),read:function(){if(r)throw new Error("reading inactive recursively-flatMapped stream is not supported");r=!0;var n=new Set;return e.values().forEach(function(e){t(e).values().forEach(function(e){n.add(e)})}),r=!1,n},listen:function(r,n){function o(e){e.isEnded()?e.values().forEach(function(e){n.add(e)}):e.subscribe({start:function(t){s.set(e,t),e.values().forEach(function(e){n.add(e)})},next:function(e){e.forEach(function(e){"add"===e.type?n.add(e.value):"remove"===e.type&&n.remove(e.value)})},error:function(e){n.error(e)},complete:function(){s.delete(e),i&&0===s.size&&n.end()}})}var i=!1,a=!1,s=new Map;r(new Set);var l=new Map,u=e.subscribe({start:function(){e.values().forEach(function(e){var r=t(e);l.set(e,r),o(r)}),a=!0},next:function(e){e.forEach(function(e){if("add"===e.type){var r=t(e.value);l.set(e.value,r),o(r)}else if("remove"===e.type){var i=l.get(e.value);if(!i)throw new Error("removed value not in liveset");i.values().forEach(function(e){n.remove(e)}),l.delete(e.value);var a=s.get(i);a&&(a.unsubscribe(),s.delete(i))}})},error:function(e){n.error(e)},complete:function(){i=!0,a&&0===s.size&&n.end()}});return{unsubscribe:function(){u.unsubscribe(),s.forEach(function(e){e.unsubscribe()}),l.clear(),s.clear()},pullChanges:function(){u.pullChanges(),s.forEach(function(e){e.pullChanges()})}}}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("."));t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69}],331:[function(e,t,r){"use strict";function n(e,t){var r=!1;return new i.default({scheduler:e.getScheduler(),read:function(){if(r)throw new Error("reading inactive recursively-flatMapped stream is not supported");r=!0;var n=new Set;return e.values().forEach(function(e){t(e).values().forEach(function(e){n.add(e)})}),r=!1,n},listen:function(r,n){function o(e){e.isEnded()?e.values().forEach(function(e){n.add(e)}):e.subscribe({start:function(t){l.set(e,t),e.values().forEach(function(e){n.add(e)})},next:function(e){s=!0,e.forEach(function(e){"add"===e.type?n.add(e.value):"remove"===e.type&&n.remove(e.value)})},error:function(e){n.error(e)},complete:function(){l.delete(e),i&&0===l.size&&n.end()}})}var i=!1,a=!1,s=!1,l=new Map;r(new Set);var u=new Map,c=e.subscribe({start:function(){e.values().forEach(function(e){var r=t(e);u.set(e,r),o(r)}),a=!0},next:function(e){s=!0,e.forEach(function(e){if("add"===e.type){var r=t(e.value);u.set(e.value,r),o(r)}else if("remove"===e.type){var i=u.get(e.value);if(!i)throw new Error("removed value not in liveset");i.values().forEach(function(e){n.remove(e)}),u.delete(e.value);var a=l.get(i);a&&(a.unsubscribe(),l.delete(i))}})},error:function(e){n.error(e)},complete:function(){i=!0,a&&0===l.size&&n.end()}}),d=!1;return{unsubscribe:function(){c.unsubscribe(),l.forEach(function(e){e.unsubscribe()}),u.clear(),l.clear()},pullChanges:function(){if(!d){d=!0;do{s=!1,c.pullChanges(),l.forEach(function(e){e.pullChanges()})}while(s);d=!1}}}}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("."));t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69}],332:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("./Scheduler")),l=n(e("symbol-observable")),u=function(){function e(t){(0,o.default)(this,e),(0,a.default)(this,"_init",void 0),(0,a.default)(this,"_scheduler",void 0),(0,a.default)(this,"_values",null),(0,a.default)(this,"_mutableValues",!1),(0,a.default)(this,"_active",null),(0,a.default)(this,"_inSubscriptionStart",!1),(0,a.default)(this,"_ended",!1),(0,a.default)(this,"_endedWithError",!1),(0,a.default)(this,"_error",null),(0,a.default)(this,"_queuedCall",!1),(0,a.default)(this,"_changeQueue",[]),(0,a.default)(this,"_observers",[]),this._init=t,this._scheduler=t.scheduler||e.defaultScheduler}return(0,i.default)(e,[{key:"_queueChange",value:function(e){var t=this;e&&this._changeQueue.push(e),this._queuedCall||(this._queuedCall=!0,this._scheduler.schedule(function(){t._queuedCall=!1;var e=t._changeQueue;t._changeQueue=[];var r,n=t._ended;n?(r=t._observers,t._observers=[]):r=t._observers.slice(),r.forEach(function(r){var o=r.observer,i=r.ignore,a=o.next;if(a)if(0===i)a.call(o,e);else{r.ignore=0;var s=e.slice(i);s.length&&a.call(o,s)}n&&(t._endedWithError?o.error&&o.error(t._error):o.complete&&o.complete())})}))}},{key:"_deactivate",value:function(){if(!this._active)throw new Error("already inactive");var e=this._active.listenHandler;this._active=null,e&&e.unsubscribe()}},{key:"values",value:function(){if(this._values){if(this._active&&!this._inSubscriptionStart){var e=this._active.listenHandler;e.pullChanges&&e.pullChanges()}return this._mutableValues&&(this._mutableValues=!1,this._values),this._values}if(this._active)throw new Error("tried to call values() on liveset during subscription before setValues was called");var t=this._init.read();return t}},{key:"isEnded",value:function(){return this._ended}},{key:"getScheduler",value:function(){return this._scheduler}},{key:"subscribe",value:function(e,t,r){var n,o=this,i=this;if(n="function"==typeof e?{next:e,error:t,complete:r}:e,this._ended){var a={closed:!1,unsubscribe:function(){a.closed=!0},pullChanges:function(){}};return n.start&&n.start(a),a.closed||(this._endedWithError?n.error&&n.error(this._error):n.complete&&n.complete()),a.closed=!0,a}var s={observer:n,ignore:this._changeQueue.length},l=!0,u=!1,c={get closed(){return!l&&i._observers.indexOf(s)<0},unsubscribe:function(){if(l)return void(u=!0);var e=o._observers.indexOf(s);e>=0&&(o._observers.splice(e,1),o._ended||0!==o._observers.length||(o._values=null,o._deactivate()))},pullChanges:function(){o._active&&o._active.listenHandler&&o._active.listenHandler.pullChanges&&o._active.listenHandler.pullChanges();var e=o._changeQueue.length,t=n.next;if(0!==e&&t){var r=o._changeQueue.slice(s.ignore);0!==r.length&&(s.ignore=e,t.call(n,r))}}};if(!this._active){var d={get closed(){return!i._active||i._active.controller!==this},add:function(e){var t=o._values;if(!t)throw new Error("setValue must be called before controller is used");o._ended||t.has(e)||(o._mutableValues||(o._values=t=new Set(t),o._mutableValues=!0),t.add(e),o._queueChange({type:"add",value:e}))},remove:function(e){var t=o._values;if(!t)throw new Error("setValue must be called before controller is used");!o._ended&&t.has(e)&&(o._mutableValues||(o._values=t=new Set(t),o._mutableValues=!0),t.delete(e),o._queueChange({type:"remove",value:e}))},error:function(e){o._ended||(o._ended=!0,o._endedWithError=!0,o._error=e,o._queueChange(),o._deactivate())},end:function(){o._ended||(o._ended=!0,o._queueChange(),o._deactivate())}},f=this._active={controller:d,listenHandler:{unsubscribe:function(){}}},p=function(){throw new Error("setValues must be called once during listen")},m=function(e){m=p,o._values=e,o._mutableValues=!1},h=this._init.listen(function(e){return m(e)},d);if(this._values||p(),"function"==typeof h)f.listenHandler={unsubscribe:h};else if(null!=h&&"function"==typeof h.unsubscribe)f.listenHandler=h;else if(null!=h)throw new TypeError("listen must return object with unsubscribe method, a function, or null");d.closed&&(this._active=f,this._deactivate())}return n.start&&(this._inSubscriptionStart=!0,n.start(c),this._inSubscriptionStart=!1),l=!1,s.ignore=this._changeQueue.length,u||this._observers.push(s),c}}],[{key:"active",value:function(t,r){var n,o=t||new Set,i=new e({scheduler:r?r.scheduler:void 0,read:function(){return o},listen:function(e,t){e(o),n=t}});return i.subscribe({}),{liveSet:i,controller:n}}},{key:"constant",value:function(t,r){var n=function(){throw new Error("Should not happen")},o=new e({scheduler:r?r.scheduler:void 0,read:n,listen:n});return o._ended=!0,o._values=t,o._mutableValues=!1,o}}]),e}();r.default=u,(0,a.default)(u,"defaultScheduler",new s.default),u.prototype[l.default]=function(){return this},t.exports=r.default,t.exports.default=r.default},{"./Scheduler":328,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69,"symbol-observable":618}],333:[function(e,t,r){"use strict";function n(e,t){return new i.default({scheduler:e.getScheduler(),read:function(){throw new Error("mapWithRemoval liveset may not be read while inactive")},listen:function(r,n){var o=new Map,i=e.subscribe({start:function(){var n=new Set;e.values().forEach(function(e){var r,i=new Promise(function(e){r=e}),a=t(e,i);o.set(e,{newValue:a,resolve:r}),n.add(a)}),r(n)},next:function(e){e.forEach(function(e){if("add"===e.type){var r,i=new Promise(function(e){r=e}),a=t(e.value,i);o.set(e.value,{newValue:a,resolve:r}),n.add(a)}else if("remove"===e.type){var s=o.get(e.value);if(!s)throw new Error("removed item not in liveset");var l=s.newValue,u=s.resolve;u(),o.delete(e.value),n.remove(l)}})},error:function(e){n.error(e)},complete:function(){n.end()}});return{unsubscribe:function(){i.unsubscribe(),o.forEach(function(e){(0,e.resolve)()})},pullChanges:function(){i.pullChanges()}}}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("."));t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69}],334:[function(e,t,r){"use strict";function n(e){return new i.default({scheduler:e[0]?e[0].getScheduler():void 0,read:function(){var t=new Set;return e.forEach(function(e){e.values().forEach(function(e){t.add(e)})}),t},listen:function(t,r){var n=new Set,o=new Set,i=!1;return e.forEach(function(e){var t;e.subscribe({start:function(r){t=r,o.add(t),e.values().forEach(function(e){n.add(e)})},next:function(e){e.forEach(function(e){"add"===e.type?r.add(e.value):"remove"===e.type&&r.remove(e.value)})},error:function(e){r.error(e)},complete:function(){o.delete(t),i&&0===o.size&&r.end()}})}),t(n),i=!0,0===o.size&&r.end(),{unsubscribe:function(){o.forEach(function(e){e.unsubscribe()})},pullChanges:function(){o.forEach(function(e){e.pullChanges()})}}}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("."));t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69}],335:[function(e,t,r){"use strict";function n(e){return new i.default(function(t){function r(e){var r,n=new Promise(function(e){r=e});o.set(e,r);var i={value:e,removal:n};t.next(i)}function n(e){var t=o.get(e);if(!t)throw new Error("Resolver not found in map for value");o.delete(e),t()}var o=new Map,i=e.subscribe({start:function(t){var n=!0,o=!1,i=void 0;try{for(var a,s=e.values()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;if(t.closed)break;r(l)}}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}},next:function(e){e.forEach(function(e){"add"===e.type?r(e.value):"remove"===e.type&&n(e.value)})},error:function(e){t.error(e)},complete:function(){t.complete()}});return function(){i.unsubscribe(),o.forEach(function(e){e()})}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=(o(e(".")),o(e("zen-observable")));t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69,"zen-observable":631}],336:[function(e,t,r){"use strict";function n(e,t){function r(e,t){var r,n=!1,o=e["@@transducer/step"]([],t);return o&&o["@@transducer/reduced"]?(r=o["@@transducer/value"],n=!0):r=o,{outputValues:r,addsComplete:n}}function n(){var n=new Map,o=t(a),i=!1,s=new Set(o["@@transducer/init"]()),l=!0,u=!1,c=void 0;try{for(var d,f=e.values()[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,m=r(o,p),h=m.outputValues,b=m.addsComplete;n.set(p,h);for(var v=0,_=h.length;v<_;v++)s.add(h[v]);if(b){i=!0,o["@@transducer/result"]([]).forEach(function(e){s.add(e)});break}}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}return{values:s,inputToOutputValues:n,xform:o,addsComplete:i}}return new i.default({scheduler:e.getScheduler(),read:function(){return n().values},listen:function(t,o){var i,a,s;return e.subscribe({start:function(){var e=n();t(e.values),i=e.inputToOutputValues,a=e.xform,s=e.addsComplete},next:function(e){for(var t=0,n=e.length;t<n;t++){var l=e[t];if("add"===l.type){if(!s){var u=l.value,c=r(a,u),d=c.outputValues,f=c.addsComplete;i.set(u,d);for(var p=0,m=d.length;p<m;p++)o.add(d[p]);f&&(s=!0,a["@@transducer/result"]([]).forEach(function(e){o.add(e)}))}}else if("remove"===l.type){var h=l.value,b=i.get(h);if(!b)throw new Error("value had not been added");b.forEach(function(e){o.remove(e)}),i.delete(h)}}},error:function(e){o.error(e)},complete:function(){o.end()}})}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e(".")),a={"@@transducer/init":function(){return[]},"@@transducer/step":function(e,t){return e.push(t),e},"@@transducer/result":function(e){return e}};t.exports=r.default,t.exports.default=r.default},{".":332,"@babel/runtime/helpers/interopRequireDefault":69}],337:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"DataView");t.exports=i},{"./_getNative":421,"./_root":461}],338:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_hashClear"),i=e("./_hashDelete"),a=e("./_hashGet"),s=e("./_hashHas"),l=e("./_hashSet");n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=l,t.exports=n},{"./_hashClear":427,"./_hashDelete":428,"./_hashGet":429,"./_hashHas":430,"./_hashSet":431}],339:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_listCacheClear"),i=e("./_listCacheDelete"),a=e("./_listCacheGet"),s=e("./_listCacheHas"),l=e("./_listCacheSet");n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=l,t.exports=n},{"./_listCacheClear":440,"./_listCacheDelete":441,"./_listCacheGet":442,"./_listCacheHas":443,"./_listCacheSet":444}],340:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Map");t.exports=i},{"./_getNative":421,"./_root":461}],341:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}var o=e("./_mapCacheClear"),i=e("./_mapCacheDelete"),a=e("./_mapCacheGet"),s=e("./_mapCacheHas"),l=e("./_mapCacheSet");n.prototype.clear=o,n.prototype.delete=i,n.prototype.get=a,n.prototype.has=s,n.prototype.set=l,t.exports=n},{"./_mapCacheClear":445,"./_mapCacheDelete":446,"./_mapCacheGet":447,"./_mapCacheHas":448,"./_mapCacheSet":449}],342:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Promise");t.exports=i},{"./_getNative":421,"./_root":461}],343:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"Set");t.exports=i},{"./_getNative":421,"./_root":461}],344:[function(e,t,r){function n(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new o;++t<r;)this.add(e[t])}var o=e("./_MapCache"),i=e("./_setCacheAdd"),a=e("./_setCacheHas");n.prototype.add=n.prototype.push=i,n.prototype.has=a,t.exports=n},{"./_MapCache":341,"./_setCacheAdd":462,"./_setCacheHas":463}],345:[function(e,t,r){function n(e){var t=this.__data__=new o(e);this.size=t.size}var o=e("./_ListCache"),i=e("./_stackClear"),a=e("./_stackDelete"),s=e("./_stackGet"),l=e("./_stackHas"),u=e("./_stackSet");n.prototype.clear=i,n.prototype.delete=a,n.prototype.get=s,n.prototype.has=l,n.prototype.set=u,t.exports=n},{"./_ListCache":339,"./_stackClear":467,"./_stackDelete":468,"./_stackGet":469,"./_stackHas":470,"./_stackSet":471}],346:[function(e,t,r){var n=e("./_root"),o=n.Symbol;t.exports=o},{"./_root":461}],347:[function(e,t,r){var n=e("./_root"),o=n.Uint8Array;t.exports=o},{"./_root":461}],348:[function(e,t,r){var n=e("./_getNative"),o=e("./_root"),i=n(o,"WeakMap");t.exports=i},{"./_getNative":421,"./_root":461}],349:[function(e,t,r){function n(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}t.exports=n},{}],350:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}t.exports=n},{}],351:[function(e,t,r){function n(e,t){return!!(null==e?0:e.length)&&o(e,t,0)>-1}var o=e("./_baseIndexOf");t.exports=n},{"./_baseIndexOf":369}],352:[function(e,t,r){function n(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}t.exports=n},{}],353:[function(e,t,r){function n(e,t){var r=a(e),n=!r&&i(e),c=!r&&!n&&s(e),f=!r&&!n&&!c&&u(e),p=r||n||c||f,m=p?o(e.length,String):[],h=m.length;for(var b in e)!t&&!d.call(e,b)||p&&("length"==b||c&&("offset"==b||"parent"==b)||f&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||l(b,h))||m.push(b);return m}var o=e("./_baseTimes"),i=e("./isArguments"),a=e("./isArray"),s=e("./isBuffer"),l=e("./_isIndex"),u=e("./isTypedArray"),c=Object.prototype,d=c.hasOwnProperty;t.exports=n},{"./_baseTimes":394,"./_isIndex":433,"./isArguments":496,"./isArray":497,"./isBuffer":500,"./isTypedArray":508}],354:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}t.exports=n},{}],355:[function(e,t,r){function n(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}t.exports=n},{}],356:[function(e,t,r){function n(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}t.exports=n},{}],357:[function(e,t,r){function n(e,t){for(var r=e.length;r--;)if(o(e[r][0],t))return r;return-1}var o=e("./eq");t.exports=n},{"./eq":481}],358:[function(e,t,r){function n(e,t,r){return e===e&&(void 0!==r&&(e=e<=r?e:r),void 0!==t&&(e=e>=t?e:t)),e}t.exports=n},{}],359:[function(e,t,r){function n(e,t,r,n){var d=-1,f=i,p=!0,m=e.length,h=[],b=t.length;if(!m)return h;r&&(t=s(t,l(r))),n?(f=a,p=!1):t.length>=c&&(f=u,p=!1,t=new o(t));e:for(;++d<m;){var v=e[d],_=null==r?v:r(v);if(v=n||0!==v?v:0,p&&_===_){for(var g=b;g--;)if(t[g]===_)continue e;h.push(v)}else f(t,_,n)||h.push(v)}return h}var o=e("./_SetCache"),i=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_arrayMap"),l=e("./_baseUnary"),u=e("./_cacheHas"),c=200;t.exports=n},{"./_SetCache":344,"./_arrayIncludes":351,"./_arrayIncludesWith":352,"./_arrayMap":354,"./_baseUnary":397,"./_cacheHas":401}],360:[function(e,t,r){var n=e("./_baseForOwn"),o=e("./_createBaseEach"),i=o(n);t.exports=i},{"./_baseForOwn":364,"./_createBaseEach":407}],361:[function(e,t,r){function n(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}t.exports=n},{}],362:[function(e,t,r){function n(e,t,r,a,s){var l=-1,u=e.length;for(r||(r=i),s||(s=[]);++l<u;){var c=e[l];t>0&&r(c)?t>1?n(c,t-1,r,a,s):o(s,c):a||(s[s.length]=c)}return s}var o=e("./_arrayPush"),i=e("./_isFlattenable");t.exports=n},{"./_arrayPush":355,"./_isFlattenable":432}],363:[function(e,t,r){var n=e("./_createBaseFor"),o=n();t.exports=o},{"./_createBaseFor":408}],364:[function(e,t,r){function n(e,t){return e&&o(e,t,i)}var o=e("./_baseFor"),i=e("./keys");t.exports=n},{"./_baseFor":363,"./keys":509}],365:[function(e,t,r){function n(e,t){t=o(t,e);for(var r=0,n=t.length;null!=e&&r<n;)e=e[i(t[r++])];return r&&r==n?e:void 0}var o=e("./_castPath"),i=e("./_toKey");t.exports=n},{"./_castPath":403,"./_toKey":474}],366:[function(e,t,r){function n(e,t,r){var n=t(e);return i(e)?n:o(n,r(e))}var o=e("./_arrayPush"),i=e("./isArray");t.exports=n},{"./_arrayPush":355,"./isArray":497}],367:[function(e,t,r){function n(e){return null==e?void 0===e?l:s:u&&u in Object(e)?i(e):a(e)}var o=e("./_Symbol"),i=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",l="[object Undefined]",u=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":346,"./_getRawTag":422,"./_objectToString":457}],368:[function(e,t,r){function n(e,t){return null!=e&&t in Object(e)}t.exports=n},{}],369:[function(e,t,r){function n(e,t,r){return t===t?a(e,t,r):o(e,i,r)}var o=e("./_baseFindIndex"),i=e("./_baseIsNaN"),a=e("./_strictIndexOf");t.exports=n},{"./_baseFindIndex":361,"./_baseIsNaN":376,"./_strictIndexOf":472}],370:[function(e,t,r){function n(e,t,r){for(var n=r?a:i,d=e[0].length,f=e.length,p=f,m=Array(f),h=1/0,b=[];p--;){var v=e[p];p&&t&&(v=s(v,l(t))),h=c(v.length,h),m[p]=!r&&(t||d>=120&&v.length>=120)?new o(p&&v):void 0}v=e[0];var _=-1,g=m[0];e:for(;++_<d&&b.length<h;){var y=v[_],w=t?t(y):y;if(y=r||0!==y?y:0,!(g?u(g,w):n(b,w,r))){for(p=f;--p;){var j=m[p];if(!(j?u(j,w):n(e[p],w,r)))continue e}g&&g.push(w),b.push(y)}}return b}var o=e("./_SetCache"),i=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_arrayMap"),l=e("./_baseUnary"),u=e("./_cacheHas"),c=Math.min;t.exports=n},{"./_SetCache":344,"./_arrayIncludes":351,"./_arrayIncludesWith":352,"./_arrayMap":354,"./_baseUnary":397,"./_cacheHas":401}],371:[function(e,t,r){function n(e,t,r,n){return o(e,function(e,o,i){t(n,r(e),o,i)}),n}var o=e("./_baseForOwn");t.exports=n},{"./_baseForOwn":364}],372:[function(e,t,r){function n(e){return i(e)&&o(e)==a}var o=e("./_baseGetTag"),i=e("./isObjectLike"),a="[object Arguments]";t.exports=n},{"./_baseGetTag":367,"./isObjectLike":505}],373:[function(e,t,r){function n(e,t,r,a,s){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:o(e,t,r,a,n,s))}var o=e("./_baseIsEqualDeep"),i=e("./isObjectLike");t.exports=n},{"./_baseIsEqualDeep":374,"./isObjectLike":505}],374:[function(e,t,r){function n(e,t,r,n,b,_){var g=u(e),y=u(t),w=g?m:l(e),j=y?m:l(t);w=w==p?h:w,j=j==p?h:j;var k=w==h,x=j==h,E=w==j;if(E&&c(e)){if(!c(t))return!1;g=!0,k=!1}if(E&&!k)return _||(_=new o),g||d(e)?i(e,t,r,n,b,_):a(e,t,w,r,n,b,_);if(!(r&f)){var S=k&&v.call(e,"__wrapped__"),C=x&&v.call(t,"__wrapped__");if(S||C){var I=S?e.value():e,A=C?t.value():t;return _||(_=new o),b(I,A,r,n,_)}}return!!E&&(_||(_=new o),s(e,t,r,n,b,_))}var o=e("./_Stack"),i=e("./_equalArrays"),a=e("./_equalByTag"),s=e("./_equalObjects"),l=e("./_getTag"),u=e("./isArray"),c=e("./isBuffer"),d=e("./isTypedArray"),f=1,p="[object Arguments]",m="[object Array]",h="[object Object]",b=Object.prototype,v=b.hasOwnProperty;t.exports=n},{"./_Stack":345,"./_equalArrays":413,"./_equalByTag":414,"./_equalObjects":415,"./_getTag":424,"./isArray":497,"./isBuffer":500,"./isTypedArray":508}],375:[function(e,t,r){function n(e,t,r,n){var l=r.length,u=l,c=!n;if(null==e)return!u;for(e=Object(e);l--;){var d=r[l];if(c&&d[2]?d[1]!==e[d[0]]:!(d[0]in e))return!1}for(;++l<u;){d=r[l];var f=d[0],p=e[f],m=d[1];if(c&&d[2]){if(void 0===p&&!(f in e))return!1}else{var h=new o;if(n)var b=n(p,m,f,e,t,h);if(!(void 0===b?i(m,p,a|s,n,h):b))return!1}}return!0}var o=e("./_Stack"),i=e("./_baseIsEqual"),a=1,s=2;t.exports=n},{"./_Stack":345,"./_baseIsEqual":373}],376:[function(e,t,r){function n(e){return e!==e}t.exports=n},{}],377:[function(e,t,r){function n(e){return!(!a(e)||i(e))&&(o(e)?m:u).test(s(e))}var o=e("./isFunction"),i=e("./_isMasked"),a=e("./isObject"),s=e("./_toSource"),l=/[\\^$.*+?()[\]{}|]/g,u=/^\[object .+?Constructor\]$/,c=Function.prototype,d=Object.prototype,f=c.toString,p=d.hasOwnProperty,m=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=n},{"./_isMasked":437,"./_toSource":475,"./isFunction":502,"./isObject":504}],378:[function(e,t,r){function n(e){return a(e)&&i(e.length)&&!!s[o(e)]}var o=e("./_baseGetTag"),i=e("./isLength"),a=e("./isObjectLike"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=n},{"./_baseGetTag":367,"./isLength":503,"./isObjectLike":505}],379:[function(e,t,r){function n(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?s(e)?i(e[0],e[1]):o(e):l(e)}var o=e("./_baseMatches"),i=e("./_baseMatchesProperty"),a=e("./identity"),s=e("./isArray"),l=e("./property");t.exports=n},{"./_baseMatches":383,"./_baseMatchesProperty":384,"./identity":492,"./isArray":497,"./property":517}],380:[function(e,t,r){function n(e){if(!o(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}var o=e("./_isPrototype"),i=e("./_nativeKeys"),a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_isPrototype":438,"./_nativeKeys":454}],381:[function(e,t,r){function n(e){if(!o(e))return a(e);var t=i(e),r=[];for(var n in e)("constructor"!=n||!t&&l.call(e,n))&&r.push(n);return r}var o=e("./isObject"),i=e("./_isPrototype"),a=e("./_nativeKeysIn"),s=Object.prototype,l=s.hasOwnProperty;t.exports=n},{"./_isPrototype":438,"./_nativeKeysIn":455,"./isObject":504}],382:[function(e,t,r){function n(e,t){var r=-1,n=i(e)?Array(e.length):[];return o(e,function(e,o,i){n[++r]=t(e,o,i)}),n}var o=e("./_baseEach"),i=e("./isArrayLike");t.exports=n},{"./_baseEach":360,"./isArrayLike":498}],383:[function(e,t,r){function n(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||o(r,e,t)}}var o=e("./_baseIsMatch"),i=e("./_getMatchData"),a=e("./_matchesStrictComparable");t.exports=n},{"./_baseIsMatch":375,"./_getMatchData":420,"./_matchesStrictComparable":451}],384:[function(e,t,r){function n(e,t){return s(e)&&l(t)?u(c(e),t):function(r){var n=i(r,e);return void 0===n&&n===t?a(r,e):o(t,n,d|f)}}var o=e("./_baseIsEqual"),i=e("./get"),a=e("./hasIn"),s=e("./_isKey"),l=e("./_isStrictComparable"),u=e("./_matchesStrictComparable"),c=e("./_toKey"),d=1,f=2;t.exports=n},{
"./_baseIsEqual":373,"./_isKey":435,"./_isStrictComparable":439,"./_matchesStrictComparable":451,"./_toKey":474,"./get":490,"./hasIn":491}],385:[function(e,t,r){function n(e,t,r){t=t.length?o(t,function(e){return f(e)?function(t){return i(t,1===e.length?e[0]:e)}:e}):[d];var n=-1;t=o(t,u(a));var p=s(e,function(e,r,i){return{criteria:o(t,function(t){return t(e)}),index:++n,value:e}});return l(p,function(e,t){return c(e,t,r)})}var o=e("./_arrayMap"),i=e("./_baseGet"),a=e("./_baseIteratee"),s=e("./_baseMap"),l=e("./_baseSortBy"),u=e("./_baseUnary"),c=e("./_compareMultiple"),d=e("./identity"),f=e("./isArray");t.exports=n},{"./_arrayMap":354,"./_baseGet":365,"./_baseIteratee":379,"./_baseMap":382,"./_baseSortBy":393,"./_baseUnary":397,"./_compareMultiple":405,"./identity":492,"./isArray":497}],386:[function(e,t,r){function n(e){return function(t){return null==t?void 0:t[e]}}t.exports=n},{}],387:[function(e,t,r){function n(e){return function(t){return o(t,e)}}var o=e("./_baseGet");t.exports=n},{"./_baseGet":365}],388:[function(e,t,r){function n(e){return function(t){return null==e?void 0:e[t]}}t.exports=n},{}],389:[function(e,t,r){function n(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==l){var l=a;i(a)?s.call(e,a,1):o(e,a)}}return e}var o=e("./_baseUnset"),i=e("./_isIndex"),a=Array.prototype,s=a.splice;t.exports=n},{"./_baseUnset":399,"./_isIndex":433}],390:[function(e,t,r){function n(e,t){return a(i(e,t,o),e+"")}var o=e("./identity"),i=e("./_overRest"),a=e("./_setToString");t.exports=n},{"./_overRest":459,"./_setToString":465,"./identity":492}],391:[function(e,t,r){var n=e("./constant"),o=e("./_defineProperty"),i=e("./identity"),a=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i;t.exports=a},{"./_defineProperty":412,"./constant":477,"./identity":492}],392:[function(e,t,r){function n(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}t.exports=n},{}],393:[function(e,t,r){function n(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}t.exports=n},{}],394:[function(e,t,r){function n(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}t.exports=n},{}],395:[function(e,t,r){function n(e){if("string"==typeof e)return e;if(a(e))return i(e,n)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-l?"-0":t}var o=e("./_Symbol"),i=e("./_arrayMap"),a=e("./isArray"),s=e("./isSymbol"),l=1/0,u=o?o.prototype:void 0,c=u?u.toString:void 0;t.exports=n},{"./_Symbol":346,"./_arrayMap":354,"./isArray":497,"./isSymbol":507}],396:[function(e,t,r){function n(e){return e?e.slice(0,o(e)+1).replace(i,""):e}var o=e("./_trimmedEndIndex"),i=/^\s+/;t.exports=n},{"./_trimmedEndIndex":476}],397:[function(e,t,r){function n(e){return function(t){return e(t)}}t.exports=n},{}],398:[function(e,t,r){function n(e,t,r){var n=-1,d=i,f=e.length,p=!0,m=[],h=m;if(r)p=!1,d=a;else if(f>=c){var b=t?null:l(e);if(b)return u(b);p=!1,d=s,h=new o}else h=t?[]:m;e:for(;++n<f;){var v=e[n],_=t?t(v):v;if(v=r||0!==v?v:0,p&&_===_){for(var g=h.length;g--;)if(h[g]===_)continue e;t&&h.push(_),m.push(v)}else d(h,_,r)||(h!==m&&h.push(_),m.push(v))}return m}var o=e("./_SetCache"),i=e("./_arrayIncludes"),a=e("./_arrayIncludesWith"),s=e("./_cacheHas"),l=e("./_createSet"),u=e("./_setToArray"),c=200;t.exports=n},{"./_SetCache":344,"./_arrayIncludes":351,"./_arrayIncludesWith":352,"./_cacheHas":401,"./_createSet":411,"./_setToArray":464}],399:[function(e,t,r){function n(e,t){return t=o(t,e),null==(e=a(e,t))||delete e[s(i(t))]}var o=e("./_castPath"),i=e("./last"),a=e("./_parent"),s=e("./_toKey");t.exports=n},{"./_castPath":403,"./_parent":460,"./_toKey":474,"./last":511}],400:[function(e,t,r){function n(e,t){return o(t,function(t){return e[t]})}var o=e("./_arrayMap");t.exports=n},{"./_arrayMap":354}],401:[function(e,t,r){function n(e,t){return e.has(t)}t.exports=n},{}],402:[function(e,t,r){function n(e){return o(e)?e:[]}var o=e("./isArrayLikeObject");t.exports=n},{"./isArrayLikeObject":499}],403:[function(e,t,r){function n(e,t){return o(e)?e:i(e,t)?[e]:a(s(e))}var o=e("./isArray"),i=e("./_isKey"),a=e("./_stringToPath"),s=e("./toString");t.exports=n},{"./_isKey":435,"./_stringToPath":473,"./isArray":497,"./toString":527}],404:[function(e,t,r){function n(e,t){if(e!==t){var r=void 0!==e,n=null===e,i=e===e,a=o(e),s=void 0!==t,l=null===t,u=t===t,c=o(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||n&&s&&u||!r&&u||!i)return 1;if(!n&&!a&&!c&&e<t||c&&r&&i&&!n&&!a||l&&r&&i||!s&&i||!u)return-1}return 0}var o=e("./isSymbol");t.exports=n},{"./isSymbol":507}],405:[function(e,t,r){function n(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,l=r.length;++n<s;){var u=o(i[n],a[n]);if(u){if(n>=l)return u;return u*("desc"==r[n]?-1:1)}}return e.index-t.index}var o=e("./_compareAscending");t.exports=n},{"./_compareAscending":404}],406:[function(e,t,r){var n=e("./_root"),o=n["__core-js_shared__"];t.exports=o},{"./_root":461}],407:[function(e,t,r){function n(e,t){return function(r,n){if(null==r)return r;if(!o(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Object(r);(t?a--:++a<i)&&!1!==n(s[a],a,s););return r}}var o=e("./isArrayLike");t.exports=n},{"./isArrayLike":498}],408:[function(e,t,r){function n(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var l=a[e?s:++o];if(!1===r(i[l],l,i))break}return t}}t.exports=n},{}],409:[function(e,t,r){function n(e){return function(t,r,n){var s=Object(t);if(!i(t)){var l=o(r,3);t=a(t),r=function(e){return l(s[e],e,s)}}var u=e(t,r,n);return u>-1?s[l?t[u]:u]:void 0}}var o=e("./_baseIteratee"),i=e("./isArrayLike"),a=e("./keys");t.exports=n},{"./_baseIteratee":379,"./isArrayLike":498,"./keys":509}],410:[function(e,t,r){function n(e,t){return function(r,n){return o(r,e,t(n),{})}}var o=e("./_baseInverter");t.exports=n},{"./_baseInverter":371}],411:[function(e,t,r){var n=e("./_Set"),o=e("./noop"),i=e("./_setToArray"),a=n&&1/i(new n([,-0]))[1]==1/0?function(e){return new n(e)}:o;t.exports=a},{"./_Set":343,"./_setToArray":464,"./noop":514}],412:[function(e,t,r){var n=e("./_getNative"),o=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=o},{"./_getNative":421}],413:[function(e,t,r){function n(e,t,r,n,u,c){var d=r&s,f=e.length,p=t.length;if(f!=p&&!(d&&p>f))return!1;var m=c.get(e),h=c.get(t);if(m&&h)return m==t&&h==e;var b=-1,v=!0,_=r&l?new o:void 0;for(c.set(e,t),c.set(t,e);++b<f;){var g=e[b],y=t[b];if(n)var w=d?n(y,g,b,t,e,c):n(g,y,b,e,t,c);if(void 0!==w){if(w)continue;v=!1;break}if(_){if(!i(t,function(e,t){if(!a(_,t)&&(g===e||u(g,e,r,n,c)))return _.push(t)})){v=!1;break}}else if(g!==y&&!u(g,y,r,n,c)){v=!1;break}}return c.delete(e),c.delete(t),v}var o=e("./_SetCache"),i=e("./_arraySome"),a=e("./_cacheHas"),s=1,l=2;t.exports=n},{"./_SetCache":344,"./_arraySome":356,"./_cacheHas":401}],414:[function(e,t,r){function n(e,t,r,n,o,k,E){switch(r){case j:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!k(new i(e),new i(t)));case f:case p:case b:return a(+e,+t);case m:return e.name==t.name&&e.message==t.message;case v:case g:return e==t+"";case h:var S=l;case _:var C=n&c;if(S||(S=u),e.size!=t.size&&!C)return!1;var I=E.get(e);if(I)return I==t;n|=d,E.set(e,t);var A=s(S(e),S(t),n,o,k,E);return E.delete(e),A;case y:if(x)return x.call(e)==x.call(t)}return!1}var o=e("./_Symbol"),i=e("./_Uint8Array"),a=e("./eq"),s=e("./_equalArrays"),l=e("./_mapToArray"),u=e("./_setToArray"),c=1,d=2,f="[object Boolean]",p="[object Date]",m="[object Error]",h="[object Map]",b="[object Number]",v="[object RegExp]",_="[object Set]",g="[object String]",y="[object Symbol]",w="[object ArrayBuffer]",j="[object DataView]",k=o?o.prototype:void 0,x=k?k.valueOf:void 0;t.exports=n},{"./_Symbol":346,"./_Uint8Array":347,"./_equalArrays":413,"./_mapToArray":450,"./_setToArray":464,"./eq":481}],415:[function(e,t,r){function n(e,t,r,n,a,l){var u=r&i,c=o(e),d=c.length;if(d!=o(t).length&&!u)return!1;for(var f=d;f--;){var p=c[f];if(!(u?p in t:s.call(t,p)))return!1}var m=l.get(e),h=l.get(t);if(m&&h)return m==t&&h==e;var b=!0;l.set(e,t),l.set(t,e);for(var v=u;++f<d;){p=c[f];var _=e[p],g=t[p];if(n)var y=u?n(g,_,p,t,e,l):n(_,g,p,e,t,l);if(!(void 0===y?_===g||a(_,g,r,n,l):y)){b=!1;break}v||(v="constructor"==p)}if(b&&!v){var w=e.constructor,j=t.constructor;w!=j&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof j&&j instanceof j)&&(b=!1)}return l.delete(e),l.delete(t),b}var o=e("./_getAllKeys"),i=1,a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_getAllKeys":418}],416:[function(e,t,r){var n=e("./_basePropertyOf"),o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i=n(o);t.exports=i},{"./_basePropertyOf":388}],417:[function(e,t,r){(function(e){(function(){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],418:[function(e,t,r){function n(e){return o(e,a,i)}var o=e("./_baseGetAllKeys"),i=e("./_getSymbols"),a=e("./keys");t.exports=n},{"./_baseGetAllKeys":366,"./_getSymbols":423,"./keys":509}],419:[function(e,t,r){function n(e,t){var r=e.__data__;return o(t)?r["string"==typeof t?"string":"hash"]:r.map}var o=e("./_isKeyable");t.exports=n},{"./_isKeyable":436}],420:[function(e,t,r){function n(e){for(var t=i(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,o(a)]}return t}var o=e("./_isStrictComparable"),i=e("./keys");t.exports=n},{"./_isStrictComparable":439,"./keys":509}],421:[function(e,t,r){function n(e,t){var r=i(e,t);return o(r)?r:void 0}var o=e("./_baseIsNative"),i=e("./_getValue");t.exports=n},{"./_baseIsNative":377,"./_getValue":425}],422:[function(e,t,r){function n(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[l]=r:delete e[l]),o}var o=e("./_Symbol"),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,l=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":346}],423:[function(e,t,r){var n=e("./_arrayFilter"),o=e("./stubArray"),i=Object.prototype,a=i.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(e){return null==e?[]:(e=Object(e),n(s(e),function(t){return a.call(e,t)}))}:o;t.exports=l},{"./_arrayFilter":350,"./stubArray":521}],424:[function(e,t,r){var n=e("./_DataView"),o=e("./_Map"),i=e("./_Promise"),a=e("./_Set"),s=e("./_WeakMap"),l=e("./_baseGetTag"),u=e("./_toSource"),c=u(n),d=u(o),f=u(i),p=u(a),m=u(s),h=l;(n&&"[object DataView]"!=h(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=h(new o)||i&&"[object Promise]"!=h(i.resolve())||a&&"[object Set]"!=h(new a)||s&&"[object WeakMap]"!=h(new s))&&(h=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case c:return"[object DataView]";case d:return"[object Map]";case f:return"[object Promise]";case p:return"[object Set]";case m:return"[object WeakMap]"}return t}),t.exports=h},{"./_DataView":337,"./_Map":340,"./_Promise":342,"./_Set":343,"./_WeakMap":348,"./_baseGetTag":367,"./_toSource":475}],425:[function(e,t,r){function n(e,t){return null==e?void 0:e[t]}t.exports=n},{}],426:[function(e,t,r){function n(e,t,r){t=o(t,e);for(var n=-1,c=t.length,d=!1;++n<c;){var f=u(t[n]);if(!(d=null!=e&&r(e,f)))break;e=e[f]}return d||++n!=c?d:!!(c=null==e?0:e.length)&&l(c)&&s(f,c)&&(a(e)||i(e))}var o=e("./_castPath"),i=e("./isArguments"),a=e("./isArray"),s=e("./_isIndex"),l=e("./isLength"),u=e("./_toKey");t.exports=n},{"./_castPath":403,"./_isIndex":433,"./_toKey":474,"./isArguments":496,"./isArray":497,"./isLength":503}],427:[function(e,t,r){function n(){this.__data__=o?o(null):{},this.size=0}var o=e("./_nativeCreate");t.exports=n},{"./_nativeCreate":453}],428:[function(e,t,r){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n},{}],429:[function(e,t,r){function n(e){var t=this.__data__;if(o){var r=t[e];return r===i?void 0:r}return s.call(t,e)?t[e]:void 0}var o=e("./_nativeCreate"),i="__lodash_hash_undefined__",a=Object.prototype,s=a.hasOwnProperty;t.exports=n},{"./_nativeCreate":453}],430:[function(e,t,r){function n(e){var t=this.__data__;return o?void 0!==t[e]:a.call(t,e)}var o=e("./_nativeCreate"),i=Object.prototype,a=i.hasOwnProperty;t.exports=n},{"./_nativeCreate":453}],431:[function(e,t,r){function n(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=o&&void 0===t?i:t,this}var o=e("./_nativeCreate"),i="__lodash_hash_undefined__";t.exports=n},{"./_nativeCreate":453}],432:[function(e,t,r){function n(e){return a(e)||i(e)||!!(s&&e&&e[s])}var o=e("./_Symbol"),i=e("./isArguments"),a=e("./isArray"),s=o?o.isConcatSpreadable:void 0;t.exports=n},{"./_Symbol":346,"./isArguments":496,"./isArray":497}],433:[function(e,t,r){function n(e,t){var r=typeof e;return!!(t=null==t?o:t)&&("number"==r||"symbol"!=r&&i.test(e))&&e>-1&&e%1==0&&e<t}var o=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=n},{}],434:[function(e,t,r){function n(e,t,r){if(!s(r))return!1;var n=typeof t;return!!("number"==n?i(r)&&a(t,r.length):"string"==n&&t in r)&&o(r[t],e)}var o=e("./eq"),i=e("./isArrayLike"),a=e("./_isIndex"),s=e("./isObject");t.exports=n},{"./_isIndex":433,"./eq":481,"./isArrayLike":498,"./isObject":504}],435:[function(e,t,r){function n(e,t){if(o(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(s.test(e)||!a.test(e)||null!=t&&e in Object(t))}var o=e("./isArray"),i=e("./isSymbol"),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=n},{"./isArray":497,"./isSymbol":507}],436:[function(e,t,r){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=n},{}],437:[function(e,t,r){function n(e){return!!i&&i in e}var o=e("./_coreJsData"),i=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();t.exports=n},{"./_coreJsData":406}],438:[function(e,t,r){function n(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||o)}var o=Object.prototype;t.exports=n},{}],439:[function(e,t,r){function n(e){return e===e&&!o(e)}var o=e("./isObject");t.exports=n},{"./isObject":504}],440:[function(e,t,r){function n(){this.__data__=[],this.size=0}t.exports=n},{}],441:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}var o=e("./_assocIndexOf"),i=Array.prototype,a=i.splice;t.exports=n},{"./_assocIndexOf":357}],442:[function(e,t,r){function n(e){var t=this.__data__,r=o(t,e);return r<0?void 0:t[r][1]}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":357}],443:[function(e,t,r){function n(e){return o(this.__data__,e)>-1}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":357}],444:[function(e,t,r){function n(e,t){var r=this.__data__,n=o(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var o=e("./_assocIndexOf");t.exports=n},{"./_assocIndexOf":357}],445:[function(e,t,r){function n(){this.size=0,this.__data__={hash:new o,map:new(a||i),string:new o}}var o=e("./_Hash"),i=e("./_ListCache"),a=e("./_Map");t.exports=n},{"./_Hash":338,"./_ListCache":339,"./_Map":340}],446:[function(e,t,r){function n(e){var t=o(this,e).delete(e);return this.size-=t?1:0,t}var o=e("./_getMapData");t.exports=n},{"./_getMapData":419}],447:[function(e,t,r){function n(e){return o(this,e).get(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":419}],448:[function(e,t,r){function n(e){return o(this,e).has(e)}var o=e("./_getMapData");t.exports=n},{"./_getMapData":419}],449:[function(e,t,r){function n(e,t){var r=o(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var o=e("./_getMapData");t.exports=n},{"./_getMapData":419}],450:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}t.exports=n},{}],451:[function(e,t,r){function n(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}t.exports=n},{}],452:[function(e,t,r){function n(e){var t=o(e,function(e){return r.size===i&&r.clear(),e}),r=t.cache;return t}var o=e("./memoize"),i=500;t.exports=n},{"./memoize":513}],453:[function(e,t,r){var n=e("./_getNative"),o=n(Object,"create");t.exports=o},{"./_getNative":421}],454:[function(e,t,r){var n=e("./_overArg"),o=n(Object.keys,Object);t.exports=o},{"./_overArg":458}],455:[function(e,t,r){function n(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}t.exports=n},{}],456:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof r&&r&&!r.nodeType&&r,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o,s=a&&n.process,l=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=l},{"./_freeGlobal":417}],457:[function(e,t,r){function n(e){return i.call(e)}var o=Object.prototype,i=o.toString;t.exports=n},{}],458:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],459:[function(e,t,r){function n(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=i(n.length-t,0),l=Array(s);++a<s;)l[a]=n[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=n[a];return u[t]=r(l),o(e,this,u)}}var o=e("./_apply"),i=Math.max;t.exports=n},{"./_apply":349}],460:[function(e,t,r){function n(e,t){return t.length<2?e:o(e,i(t,0,-1))}var o=e("./_baseGet"),i=e("./_baseSlice");t.exports=n},{"./_baseGet":365,"./_baseSlice":392}],461:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},{"./_freeGlobal":417}],462:[function(e,t,r){function n(e){return this.__data__.set(e,o),this}var o="__lodash_hash_undefined__";t.exports=n},{}],463:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],464:[function(e,t,r){function n(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}t.exports=n},{}],465:[function(e,t,r){var n=e("./_baseSetToString"),o=e("./_shortOut"),i=o(n);t.exports=i},{"./_baseSetToString":391,"./_shortOut":466}],466:[function(e,t,r){function n(e){var t=0,r=0;return function(){var n=a(),s=i-(n-r);if(r=n,s>0){if(++t>=o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var o=800,i=16,a=Date.now;t.exports=n},{}],467:[function(e,t,r){function n(){this.__data__=new o,this.size=0}var o=e("./_ListCache");t.exports=n},{"./_ListCache":339}],468:[function(e,t,r){function n(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}t.exports=n},{}],469:[function(e,t,r){function n(e){return this.__data__.get(e)}t.exports=n},{}],470:[function(e,t,r){function n(e){return this.__data__.has(e)}t.exports=n},{}],471:[function(e,t,r){function n(e,t){var r=this.__data__;if(r instanceof o){var n=r.__data__;if(!i||n.length<s-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(n)}return r.set(e,t),this.size=r.size,this}var o=e("./_ListCache"),i=e("./_Map"),a=e("./_MapCache"),s=200;t.exports=n},{"./_ListCache":339,"./_Map":340,"./_MapCache":341}],472:[function(e,t,r){function n(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}t.exports=n},{}],473:[function(e,t,r){var n=e("./_memoizeCapped"),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(o,function(e,r,n,o){t.push(n?o.replace(i,"$1"):r||e)}),t});t.exports=a},{"./_memoizeCapped":452}],474:[function(e,t,r){function n(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}var o=e("./isSymbol"),i=1/0;t.exports=n},{"./isSymbol":507}],475:[function(e,t,r){function n(e){if(null!=e){try{return i.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var o=Function.prototype,i=o.toString;t.exports=n},{}],476:[function(e,t,r){function n(e){for(var t=e.length;t--&&o.test(e.charAt(t)););return t}var o=/\s/;t.exports=n},{}],477:[function(e,t,r){function n(e){return function(){return e}}t.exports=n},{}],478:[function(e,t,r){function n(e,t,r){function n(t){var r=_,n=g;return _=g=void 0,x=t,w=e.apply(n,r)}function c(e){return x=e,j=setTimeout(p,t),E?n(e):w}function d(e){var r=e-k,n=e-x,o=t-r;return S?u(o,y-n):o}function f(e){var r=e-k,n=e-x;return void 0===k||r>=t||r<0||S&&n>=y}function p(){var e=i();if(f(e))return m(e);j=setTimeout(p,d(e))}function m(e){return j=void 0,C&&_?n(e):(_=g=void 0,w)}function h(){void 0!==j&&clearTimeout(j),x=0,_=k=g=j=void 0}function b(){return void 0===j?w:m(i())}function v(){var e=i(),r=f(e);if(_=arguments,g=this,k=e,r){if(void 0===j)return c(k);if(S)return clearTimeout(j),j=setTimeout(p,t),n(k)}return void 0===j&&(j=setTimeout(p,t)),w}var _,g,y,w,j,k,x=0,E=!1,S=!1,C=!0;if("function"!=typeof e)throw new TypeError(s);return t=a(t)||0,o(r)&&(E=!!r.leading,S="maxWait"in r,y=S?l(a(r.maxWait)||0,t):y,C="trailing"in r?!!r.trailing:C),v.cancel=h,v.flush=b,v}var o=e("./isObject"),i=e("./now"),a=e("./toNumber"),s="Expected a function",l=Math.max,u=Math.min;t.exports=n},{"./isObject":504,"./now":515,"./toNumber":526}],479:[function(e,t,r){var n=e("./_baseRest"),o=e("./eq"),i=e("./_isIterateeCall"),a=e("./keysIn"),s=Object.prototype,l=s.hasOwnProperty,u=n(function(e,t){e=Object(e);var r=-1,n=t.length,u=n>2?t[2]:void 0;for(u&&i(t[0],t[1],u)&&(n=1);++r<n;)for(var c=t[r],d=a(c),f=-1,p=d.length;++f<p;){var m=d[f],h=e[m];(void 0===h||o(h,s[m])&&!l.call(e,m))&&(e[m]=c[m])}return e});t.exports=u},{"./_baseRest":390,"./_isIterateeCall":434,"./eq":481,"./keysIn":510}],480:[function(e,t,r){var n=e("./_baseDifference"),o=e("./_baseFlatten"),i=e("./_baseRest"),a=e("./isArrayLikeObject"),s=i(function(e,t){return a(e)?n(e,o(t,1,a,!0)):[]});t.exports=s},{"./_baseDifference":359,"./_baseFlatten":362,"./_baseRest":390,"./isArrayLikeObject":499}],481:[function(e,t,r){function n(e,t){return e===t||e!==e&&t!==t}t.exports=n},{}],482:[function(e,t,r){function n(e){return e=i(e),e&&s.test(e)?e.replace(a,o):e}var o=e("./_escapeHtmlChar"),i=e("./toString"),a=/[&<>"']/g,s=RegExp(a.source);t.exports=n},{"./_escapeHtmlChar":416,"./toString":527}],483:[function(e,t,r){function n(e){return e=o(e),e&&a.test(e)?e.replace(i,"\\$&"):e}var o=e("./toString"),i=/[\\^$.*+?()[\]{}|]/g,a=RegExp(i.source);t.exports=n},{"./toString":527}],484:[function(e,t,r){var n=e("./_createFind"),o=e("./findIndex"),i=n(o);t.exports=i},{"./_createFind":409,"./findIndex":485}],485:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var l=null==r?0:a(r);return l<0&&(l=s(n+l,0)),o(e,i(t,3),l)}var o=e("./_baseFindIndex"),i=e("./_baseIteratee"),a=e("./toInteger"),s=Math.max;t.exports=n},{"./_baseFindIndex":361,"./_baseIteratee":379,"./toInteger":525}],486:[function(e,t,r){function n(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var u=n-1;return void 0!==r&&(u=a(r),u=r<0?s(n+u,0):l(u,n-1)),o(e,i(t,3),u,!0)}var o=e("./_baseFindIndex"),i=e("./_baseIteratee"),a=e("./toInteger"),s=Math.max,l=Math.min;t.exports=n},{"./_baseFindIndex":361,"./_baseIteratee":379,"./toInteger":525}],487:[function(e,t,r){function n(e,t){return o(i(e,t),1)}var o=e("./_baseFlatten"),i=e("./map");t.exports=n},{"./_baseFlatten":362,"./map":512}],488:[function(e,t,r){function n(e){return(null==e?0:e.length)?o(e,1):[]}var o=e("./_baseFlatten");t.exports=n},{"./_baseFlatten":362}],489:[function(e,t,r){function n(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n}t.exports=n},{}],490:[function(e,t,r){function n(e,t,r){var n=null==e?void 0:o(e,t);return void 0===n?r:n}var o=e("./_baseGet");t.exports=n},{"./_baseGet":365}],491:[function(e,t,r){function n(e,t){return null!=e&&i(e,t,o)}var o=e("./_baseHasIn"),i=e("./_hasPath");t.exports=n},{"./_baseHasIn":368,"./_hasPath":426}],492:[function(e,t,r){function n(e){return e}t.exports=n},{}],493:[function(e,t,r){function n(e,t,r,n){e=i(e)?e:l(e),r=r&&!n?s(r):0;var c=e.length;return r<0&&(r=u(c+r,0)),a(e)?r<=c&&e.indexOf(t,r)>-1:!!c&&o(e,t,r)>-1}var o=e("./_baseIndexOf"),i=e("./isArrayLike"),a=e("./isString"),s=e("./toInteger"),l=e("./values"),u=Math.max;t.exports=n},{"./_baseIndexOf":369,"./isArrayLike":498,"./isString":506,"./toInteger":525,"./values":531}],494:[function(e,t,r){var n=e("./_arrayMap"),o=e("./_baseIntersection"),i=e("./_baseRest"),a=e("./_castArrayLikeObject"),s=i(function(e){var t=n(e,a);return t.length&&t[0]===e[0]?o(t):[]});t.exports=s},{"./_arrayMap":354,"./_baseIntersection":370,"./_baseRest":390,"./_castArrayLikeObject":402}],495:[function(e,t,r){var n=e("./_baseIteratee"),o=e("./_createInverter"),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,l=o(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=s.call(t)),a.call(e,t)?e[t].push(r):e[t]=[r]},n);t.exports=l},{"./_baseIteratee":379,"./_createInverter":410}],496:[function(e,t,r){var n=e("./_baseIsArguments"),o=e("./isObjectLike"),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!s.call(e,"callee")};t.exports=l},{"./_baseIsArguments":372,"./isObjectLike":505}],497:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],498:[function(e,t,r){function n(e){return null!=e&&i(e.length)&&!o(e)}var o=e("./isFunction"),i=e("./isLength");t.exports=n},{"./isFunction":502,"./isLength":503}],499:[function(e,t,r){function n(e){return i(e)&&o(e)}var o=e("./isArrayLike"),i=e("./isObjectLike");t.exports=n},{"./isArrayLike":498,"./isObjectLike":505}],500:[function(e,t,r){var n=e("./_root"),o=e("./stubFalse"),i="object"==typeof r&&r&&!r.nodeType&&r,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i,l=s?n.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||o;t.exports=c},{"./_root":461,"./stubFalse":522}],501:[function(e,t,r){function n(e,t){return o(e,t)}var o=e("./_baseIsEqual");t.exports=n},{"./_baseIsEqual":373}],502:[function(e,t,r){function n(e){if(!i(e))return!1;var t=o(e);return t==s||t==l||t==a||t==u}var o=e("./_baseGetTag"),i=e("./isObject"),a="[object AsyncFunction]",s="[object Function]",l="[object GeneratorFunction]",u="[object Proxy]";t.exports=n},{"./_baseGetTag":367,"./isObject":504}],503:[function(e,t,r){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}var o=9007199254740991;t.exports=n},{}],504:[function(e,t,r){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=n},{}],505:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],506:[function(e,t,r){function n(e){return"string"==typeof e||!i(e)&&a(e)&&o(e)==s}var o=e("./_baseGetTag"),i=e("./isArray"),a=e("./isObjectLike"),s="[object String]";t.exports=n},{"./_baseGetTag":367,"./isArray":497,"./isObjectLike":505}],507:[function(e,t,r){function n(e){return"symbol"==typeof e||i(e)&&o(e)==a}var o=e("./_baseGetTag"),i=e("./isObjectLike"),a="[object Symbol]";t.exports=n},{"./_baseGetTag":367,"./isObjectLike":505}],508:[function(e,t,r){var n=e("./_baseIsTypedArray"),o=e("./_baseUnary"),i=e("./_nodeUtil"),a=i&&i.isTypedArray,s=a?o(a):n;t.exports=s},{"./_baseIsTypedArray":378,"./_baseUnary":397,"./_nodeUtil":456}],509:[function(e,t,r){function n(e){return a(e)?o(e):i(e)}var o=e("./_arrayLikeKeys"),i=e("./_baseKeys"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":353,"./_baseKeys":380,"./isArrayLike":498}],510:[function(e,t,r){function n(e){return a(e)?o(e,!0):i(e)}var o=e("./_arrayLikeKeys"),i=e("./_baseKeysIn"),a=e("./isArrayLike");t.exports=n},{"./_arrayLikeKeys":353,"./_baseKeysIn":381,"./isArrayLike":498}],511:[function(e,t,r){function n(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}t.exports=n},{}],512:[function(e,t,r){function n(e,t){return(s(e)?o:a)(e,i(t,3))}var o=e("./_arrayMap"),i=e("./_baseIteratee"),a=e("./_baseMap"),s=e("./isArray");t.exports=n},{"./_arrayMap":354,"./_baseIteratee":379,"./_baseMap":382,"./isArray":497}],513:[function(e,t,r){function n(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(n.Cache||o),r}var o=e("./_MapCache"),i="Expected a function";n.Cache=o,t.exports=n},{"./_MapCache":341}],514:[function(e,t,r){function n(){}t.exports=n},{}],515:[function(e,t,r){var n=e("./_root"),o=function(){return n.Date.now()};t.exports=o},{"./_root":461}],516:[function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new Error("Parameter must be function");var t;return function(){if(e){var r=e;e=void 0,t=r.apply(this,arguments)}return t}}t.exports=n},{}],517:[function(e,t,r){function n(e){return a(e)?o(s(e)):i(e)}var o=e("./_baseProperty"),i=e("./_basePropertyDeep"),a=e("./_isKey"),s=e("./_toKey");t.exports=n},{"./_baseProperty":386,"./_basePropertyDeep":387,"./_isKey":435,"./_toKey":474}],518:[function(e,t,r){function n(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],s=e.length;for(t=o(t,3);++n<s;){var l=e[n];t(l,n,e)&&(r.push(l),a.push(n))}return i(e,a),r}var o=e("./_baseIteratee"),i=e("./_basePullAt");t.exports=n},{"./_baseIteratee":379,"./_basePullAt":389}],519:[function(e,t,r){var n=e("./_baseFlatten"),o=e("./_baseOrderBy"),i=e("./_baseRest"),a=e("./_isIterateeCall"),s=i(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),o(e,n(t,1),[])});t.exports=s},{"./_baseFlatten":362,"./_baseOrderBy":385,"./_baseRest":390,"./_isIterateeCall":434}],520:[function(e,t,r){function n(e,t,r){return e=s(e),r=null==r?0:o(a(r),0,e.length),t=i(t),e.slice(r,r+t.length)==t}var o=e("./_baseClamp"),i=e("./_baseToString"),a=e("./toInteger"),s=e("./toString");t.exports=n},{"./_baseClamp":358,"./_baseToString":395,"./toInteger":525,"./toString":527}],521:[function(e,t,r){function n(){return[]}t.exports=n},{}],522:[function(e,t,r){function n(){return!1}t.exports=n},{}],523:[function(e,t,r){function n(e,t,r){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return i(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),o(e,t,{leading:n,maxWait:t,trailing:s})}var o=e("./debounce"),i=e("./isObject"),a="Expected a function";t.exports=n},{"./debounce":478,"./isObject":504}],524:[function(e,t,r){function n(e){if(!e)return 0===e?e:0;if((e=o(e))===i||e===-i){return(e<0?-1:1)*a}return e===e?e:0}var o=e("./toNumber"),i=1/0,a=1.7976931348623157e308;t.exports=n},{"./toNumber":526}],525:[function(e,t,r){function n(e){var t=o(e),r=t%1;return t===t?r?t-r:t:0}var o=e("./toFinite");t.exports=n},{"./toFinite":524}],526:[function(e,t,r){function n(e){if("number"==typeof e)return e;if(a(e))return s;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=o(e);var r=u.test(e);return r||c.test(e)?d(e.slice(2),r?2:8):l.test(e)?s:+e}var o=e("./_baseTrim"),i=e("./isObject"),a=e("./isSymbol"),s=NaN,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;t.exports=n},{"./_baseTrim":396,"./isObject":504,"./isSymbol":507}],527:[function(e,t,r){function n(e){return null==e?"":o(e)}var o=e("./_baseToString");t.exports=n},{"./_baseToString":395}],528:[function(e,t,r){function n(e){return e&&e.length?o(e):[]}var o=e("./_baseUniq");t.exports=n},{"./_baseUniq":398}],529:[function(e,t,r){function n(e,t){return e&&e.length?i(e,o(t,2)):[]}var o=e("./_baseIteratee"),i=e("./_baseUniq");t.exports=n},{"./_baseIteratee":379,"./_baseUniq":398}],530:[function(e,t,r){function n(e){if(!e||!e.length)return[];var t=0;return e=o(e,function(e){if(l(e))return t=u(e.length,t),!0}),s(t,function(t){return i(e,a(t))})}var o=e("./_arrayFilter"),i=e("./_arrayMap"),a=e("./_baseProperty"),s=e("./_baseTimes"),l=e("./isArrayLikeObject"),u=Math.max;t.exports=n},{"./_arrayFilter":350,"./_arrayMap":354,"./_baseProperty":386,"./_baseTimes":394,"./isArrayLikeObject":499}],531:[function(e,t,r){function n(e){return null==e?[]:o(e,i(e))}
var o=e("./_baseValues"),i=e("./keys");t.exports=n},{"./_baseValues":400,"./keys":509}],532:[function(e,t,r){var n=e("./_baseRest"),o=e("./unzip"),i=n(o);t.exports=i},{"./_baseRest":390,"./unzip":530}],533:[function(e,t,r){"use strict";function n(e){return function(t){return new s(e,t)}}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("@babel/runtime/helpers/classCallCheck")),a=o(e("@babel/runtime/helpers/createClass")),s=function(){function e(t,r){(0,i.default)(this,e),this.f=t,this.xform=r,this.i=-1}return(0,a.default)(e,[{key:"@@transducer/init",value:function(){return this.xform["@@transducer/init"]()}},{key:"@@transducer/result",value:function(e){return this.xform["@@transducer/result"](e)}},{key:"@@transducer/step",value:function(e,t){return this.i++,this.xform["@@transducer/step"](e,this.f(t,this.i))}}]),e}();t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/interopRequireDefault":69}],534:[function(e,t,r){(function(e){(function(){"use strict";function n(e,t){if(i)return i.call(e,t);var r=e.parentNode;if(r&&"function"==typeof r.querySelectorAll)for(var n=r.querySelectorAll(t),o=0;o<n.length;o++)if(n[o]===e)return!0;return!1}r.__esModule=!0,r.default=n;var o=e.Element&&e.Element.prototype,i=o&&(o.matches||o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector);t.exports=r.default,t.exports.default=r.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],535:[function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,l=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var c in r)i.call(r,c)&&(l[c]=r[c]);if(o){s=o(r);for(var d=0;d<s.length;d++)a.call(r,s[d])&&(l[s[d]]=r[s[d]])}}return l}},{}],536:[function(e,t,r){(function(e){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e.Object.freeze||function(e){return e};r.default=n,t.exports=r.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],537:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,m.default)(e.groupId)+":"+(0,m.default)(e.id)}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/helpers/extends"),a=n(i),s=e("babel-runtime/core-js/object/keys"),l=n(s),u=e("babel-runtime/helpers/classCallCheck"),c=n(u),d=e("babel-runtime/helpers/createClass"),f=n(d),p=e("babel-runtime/core-js/json/stringify"),m=n(p),h=e("immutability-helper"),b=n(h),v=e("lodash/findIndex"),_=n(v),g=e("lodash/findLastIndex"),y=n(g),w=e("lodash/invertBy"),j=n(w),k=e("lodash/sortBy"),x=n(k),E=e("./freeze"),S=n(E),C=function(){function e(t){(0,c.default)(this,e),this._items=(0,S.default)([]),this._needsSort=!1,this._get=t.get,this._set=t.set,this._maxLimit=t.maxLimit||200}return(0,f.default)(e,[{key:"_read",value:function(){var e=this._get();return null==e?{order:[]}:e}},{key:"_save",value:function(e){if(e.order.length>this._maxLimit){var t=e.order.map(function(e,t){return{item:e,index:t}}),r=(0,x.default)(t,function(e){return e.item.lastUse}).slice(0,e.order.length-this._maxLimit).map(function(e){return e.index}),n=(0,x.default)(r,function(e){return-e});e=(0,b.default)(e,{order:{$splice:n.map(function(e){return[e,1]})}})}this._set(e)}},{key:"_updatePersistedDataWithItem",value:function(e){var t=this._read(),r=(0,_.default)(t.order,function(t){return t.groupId===e.groupId&&t.id===e.id});if(-1!==r&&t.order[r].orderHint!==e.orderHint&&(t=(0,b.default)(t,{order:{$splice:[[r,1]]}}),r=-1),-1!==r)t=(0,b.default)(t,{order:{$splice:[[r,1,{groupId:e.groupId,id:e.id,orderHint:e.orderHint,lastUse:Date.now()}]]}});else{var n=void 0,o=(0,y.default)(t.order,function(t){return t.groupId===e.groupId&&t.orderHint<=e.orderHint});if(-1!==o)n=o+1;else{var i=(0,_.default)(t.order,function(t){return t.groupId===e.groupId});if(-1!==i)n=i;else{var a=(0,j.default)(t.order,function(e){return e.groupId}),s=(0,l.default)(a),u=Math.floor(Math.random()*(s.length+1));n=u===s.length?t.order.length:a[s[u]][0]}}t=(0,b.default)(t,{order:{$splice:[[n,0,{groupId:e.groupId,id:e.id,orderHint:e.orderHint,lastUse:Date.now()}]]}})}return this._save(t),t}},{key:"_sortItemsIfNecessary",value:function(e){if(this._needsSort){e||(e=this._read());var t=(0,j.default)(e.order,o);this._items=(0,S.default)((0,x.default)(this._items,function(e){var r=o(e);return Object.prototype.hasOwnProperty.call(t,r)?Number(t[r][0]):0})),this._needsSort=!1}}},{key:"addItem",value:function(e){this._updatePersistedDataWithItem(e),this._needsSort=!0,this._items=this._items.concat([(0,S.default)({groupId:e.groupId,id:e.id,orderHint:e.orderHint,value:e.value})])}},{key:"updateItemValue",value:function(e,t,r){this._items=(0,S.default)(this._items.map(function(n){return n.groupId===e&&n.id===t?(0,S.default)((0,a.default)({},n,{value:r})):n}))}},{key:"updateItemValueByIndex",value:function(e,t){this._sortItemsIfNecessary(),this._items=(0,S.default)((0,b.default)(this._items,{$splice:[[e,1,(0,S.default)((0,a.default)({},this._items[e],{value:t}))]]}))}},{key:"removeItem",value:function(e,t){this._items=(0,S.default)(this._items.filter(function(r){return r.groupId!==e||r.id!==t}))}},{key:"removeItemByIndex",value:function(e){this._sortItemsIfNecessary(),this._items=(0,S.default)((0,b.default)(this._items,{$splice:[[e,1]]}))}},{key:"moveItem",value:function(e,t){var r=this._read();this._sortItemsIfNecessary(r);var n=this._items[e],o=this._items[t],i=(0,_.default)(r.order,function(e){return e.groupId===n.groupId&&e.id===n.id}),a=(0,_.default)(r.order,function(e){return e.groupId===o.groupId&&e.id===o.id});r=(0,b.default)(r,{order:{$splice:[[i,1],[a,0,r.order[i]]]}}),this._save(r),this._needsSort=!0}},{key:"getOrderedItems",value:function(){return this._sortItemsIfNecessary(),this._items}},{key:"reload",value:function(){this._needsSort=!0}}]),e}();r.default=C,t.exports=r.default},{"./freeze":536,"babel-runtime/core-js/json/stringify":91,"babel-runtime/core-js/object/keys":94,"babel-runtime/helpers/classCallCheck":95,"babel-runtime/helpers/createClass":96,"babel-runtime/helpers/extends":97,"immutability-helper":538,"lodash/findIndex":485,"lodash/findLastIndex":486,"lodash/invertBy":495,"lodash/sortBy":519}],538:[function(e,t,r){function n(e){if(Array.isArray(e))return _(e.constructor(e.length),e);if("Map"===v(e))return new Map(e);if("Set"===v(e))return new Set(e);if(e&&"object"==typeof e){var t=Object.getPrototypeOf(e);return _(Object.create(t),e)}return e}function o(){function e(r,o){"function"==typeof o&&(o={$apply:o}),Array.isArray(r)&&Array.isArray(o)||p(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),p("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(t).join(", "));var i=r;return g(o).forEach(function(a){if(m.call(t,a)){var s=r===i;i=t[a](o[a],i,o,r),s&&e.isEquals(i,r)&&(i=r)}else{var l="Map"===v(r)?e(r.get(a),o[a]):e(r[a],o[a]),u="Map"===v(i)?i.get(a):i[a];e.isEquals(l,u)&&(void 0!==l||m.call(r,a))||(i===r&&(i=n(r)),"Map"===v(i)?i.set(a,l):i[a]=l)}}),i}var t=_({},y);return e.extend=function(e,r){t[e]=r},e.isEquals=function(e,t){return e===t},e}function i(e,t,r){p(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",r,e),a(t[r],r)}function a(e,t){p(Array.isArray(e),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",t,e)}function s(e,t){p(Array.isArray(e),"Expected $splice target to be an array; got %s",e),l(t.$splice)}function l(e){p(Array.isArray(e),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",e)}function u(e){p("function"==typeof e,"update(): expected spec of $apply to be a function; got %s.",e)}function c(e){p(1===Object.keys(e).length,"Cannot have more than one key in an object with $set")}function d(e,t){p(t&&"object"==typeof t,"update(): $merge expects a spec of type 'object'; got %s",t),p(e&&"object"==typeof e,"update(): $merge expects a target of type 'object'; got %s",e)}function f(e,t){var r=v(e);p("Map"===r||"Set"===r,"update(): %s expects a target of type Set or Map; got %s",t,r)}var p=e("invariant"),m=Object.prototype.hasOwnProperty,h=Array.prototype.splice,b=Object.prototype.toString,v=function(e){return b.call(e).slice(8,-1)},_=Object.assign||function(e,t){return g(t).forEach(function(r){m.call(t,r)&&(e[r]=t[r])}),e},g="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)},y={$push:function(e,t,r){return i(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return i(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,o){return s(t,r),e.forEach(function(e){l(e),t===o&&e.length&&(t=n(o)),h.apply(t,e)}),t},$set:function(e,t,r){return c(r),e},$toggle:function(e,t){a(e,"$toggle");var r=e.length?n(t):t;return e.forEach(function(e){r[e]=!t[e]}),r},$unset:function(e,t,r,o){return a(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===o&&(t=n(o)),delete t[e])}),t},$add:function(e,t,r,o){return f(t,"$add"),a(e,"$add"),"Map"===v(t)?e.forEach(function(e){var r=e[0],i=e[1];t===o&&t.get(r)!==i&&(t=n(o)),t.set(r,i)}):e.forEach(function(e){t!==o||t.has(e)||(t=n(o)),t.add(e)}),t},$remove:function(e,t,r,o){return f(t,"$remove"),a(e,"$remove"),e.forEach(function(e){t===o&&t.has(e)&&(t=n(o)),t.delete(e)}),t},$merge:function(e,t,r,o){return d(t,e),g(e).forEach(function(r){e[r]!==t[r]&&(t===o&&(t=n(o)),t[r]=e[r])}),t},$apply:function(e,t){return u(e),e(t)}},w=o();t.exports=w,t.exports.default=w,t.exports.newContext=o},{invariant:320}],539:[function(e,t,r){"use strict";function n(e){return function(t){return(0,i.default)(t,e)}}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("matches-selector-ng"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":69,"matches-selector-ng":534}],540:[function(e,t,r){"use strict";function n(e,t){return t.map(function(t){if("string"==typeof t){var r=(0,u.default)(t);return function(e){return(0,d.default)(e,r)}}if(t.$or){var o=t.$or.map(function(t){return n(e,t)});return function(e){return(0,l.default)(o.map(function(t){return t(e)}))}}if(t.$watch){var f=t.$watch,p=f.attributeFilter,m=f.cond,h="function"==typeof m?m:(0,u.default)(m);return function(e){return(0,c.default)(e,p,h)}}if(t.$log){var b=t.$log,v=function(e){return console.log(b,e.el),!0};return function(e){return(0,s.default)(e,v)}}if(t.$filter){var _=t.$filter,g=function(e){var t=e.el;return _(t)};return function(e){return(0,s.default)(e,g)}}if(t.$map){var y=t.$map,w=i.default.compose(i.default.map(function(e){return{el:y(e.el),parents:e.parents}}),i.default.filter(function(e){return null!=e.el}));return function(e){return(0,a.default)(e,w)}}throw new Error("Invalid selector item: ".concat(JSON.stringify(t)))}).reduce(function(e,t){return function(r){return t(e(r))}},function(e){return e})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("transducers.js")),a=o(e("live-set/transduce")),s=o(e("live-set/filter")),l=o(e("live-set/merge")),u=o(e("./createCssFn")),c=o(e("./watchMutations")),d=o(e("./watchFilteredChildren"));t.exports=r.default,t.exports.default=r.default},{"./createCssFn":539,"./watchFilteredChildren":541,"./watchMutations":542,"@babel/runtime/helpers/interopRequireDefault":69,"live-set/filter":329,"live-set/merge":334,"live-set/transduce":336,"transducers.js":623}],541:[function(e,t,r){"use strict";function n(e,t){return new i.default({scheduler:e.getScheduler(),read:function(){throw new Error},listen:function(r,n){function o(e){function r(r){if(1===r.nodeType&&t(r)){var o={el:r,parents:e.parents};s.set(r,o),n.add(o)}}function o(e){if(1===e.nodeType){var t=s.get(e);t&&(s.delete(e),n.remove(t))}}function i(e){if(e.length>1){var t=new Set,n=[];e.forEach(function(e){for(var r=e.addedNodes,o=e.removedNodes,i=0,a=o.length;i<a;i++){1===o[i].nodeType&&t.add(o[i])}for(var s=0,l=r.length;s<l;s++){var u=r[s];1===u.nodeType&&(t.has(u)?t.delete(u):n.push(u))}}),n.forEach(r),t.forEach(o)}else e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,r),Array.prototype.forEach.call(e.removedNodes,o)})}Array.prototype.forEach.call(e.el.children,r);var l=new MutationObserver(i);l.observe(e.el,{childList:!0}),a.set(e,{observer:l,removedNode:o})}function i(e){var t=a.get(e);if(!t)throw new Error("Should not happen: Unseen ElementContext removed");t.observer.takeRecords().forEach(function(e){Array.prototype.forEach.call(e.removedNodes,t.removedNode)}),t.observer.disconnect(),Array.prototype.forEach.call(e.el.children,t.removedNode),a.delete(e)}r(new Set);var a=new Map,s=new Map,l=e.subscribe({start:function(){e.values().forEach(o)},next:function(e){e.forEach(function(e){"add"===e.type?o(e.value):"remove"===e.type&&i(e.value)})}});return{unsubscribe:function(){l.unsubscribe(),a.forEach(function(e){e.observer.disconnect()})},pullChanges:function(){l.pullChanges()}}}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("live-set"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":69,"live-set":332}],542:[function(e,t,r){"use strict";function n(e,t,r){return new i.default({scheduler:e.getScheduler(),read:function(){throw new Error},listen:function(n,o){function i(e){var n=new MutationObserver(function(t){0!==t.length&&(r(e.el)?i.passed||(i.passed=!0,o.add(e)):i.passed&&(i.passed=!1,o.remove(e)))}),i={mo:n,passed:!1};r(e.el)&&(i.passed=!0,o.add(e)),n.observe(e.el,{attributes:!0,attributeFilter:t}),s.set(e,i)}function a(e){var t=s.get(e);if(!t)throw new Error("Should not happen: Unseen ElementContext removed");t.mo.disconnect(),t.passed&&o.remove(e),s.delete(e)}n(new Set);var s=new Map,l=e.subscribe({start:function(){e.values().forEach(i)},next:function(e){e.forEach(function(e){"add"===e.type?i(e.value):"remove"===e.type&&a(e.value)})}});return{unsubscribe:function(){l.unsubscribe(),s.forEach(function(e){e.mo.disconnect()})},pullChanges:function(){l.pullChanges()}}}})}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var i=o(e("live-set"));t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/interopRequireDefault":69,"live-set":332}],543:[function(e,t,r){"use strict";function n(e){var t=new Map,r=[];return Object.keys(e.tags).forEach(function(n){var o=e.tags[n],i=o.ownedBy;r.push({tag:n,ownedBy:i}),t.set(n,o)}),Object.keys(e.finders).concat(e.watchers.map(function(e){return e.tag})).forEach(function(e){t.has(e)||(t.set(e,{ownedBy:[]}),r.push({tag:e}))}),{map:t,list:r}}var o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime/helpers/classCallCheck")),a=o(e("@babel/runtime/helpers/createClass")),s=o(e("@babel/runtime/helpers/defineProperty")),l=o(e("live-set")),u=o(e("live-set/merge")),c=o(e("live-set/flatMapR")),d=o(e("live-set/Scheduler")),f=e("tag-tree"),p=o(e("./watcherFinderMerger")),m=o(e("./createTransformer")),h=function(){function e(t,r){var o=this;(0,i.default)(this,e),(0,s.default)(this,"tree",void 0),(0,s.default)(this,"_scheduler",new d.default),(0,s.default)(this,"_treeController",void 0),(0,s.default)(this,"_rootMatchedSet",void 0),(0,s.default)(this,"_ecSources",void 0),(0,s.default)(this,"_logError",void 0),(0,s.default)(this,"_options",void 0),(0,s.default)(this,"_tagOptions",void 0),(0,s.default)(this,"_tagsList",void 0),(0,s.default)(this,"_subscriptions",[]);var a;if(t.nodeType===Node.DOCUMENT_NODE){if(!(a=t.documentElement))throw new Error("missing documentElement")}else a=t;this._options=r,this._logError=r.logError||function(e){setTimeout(function(){throw e},0)};var u=n(this._options),c=u.map,p=u.list;this._tagOptions=c,this._tagsList=p,this.tree=new f.TagTree({root:a,tags:p,executor:function(e){o._treeController=e}}),this._rootMatchedSet=l.default.constant(new Set([{el:this.tree.getValue(),parents:[{tag:null,node:this.tree}]}]),{scheduler:this._scheduler}),this._setupWatchersAndFinders()}return(0,a.default)(e,[{key:"_setupWatchersAndFinders",value:function(){var e=this,t=new Set;this._options.watchers.forEach(function(e){t.add(e.tag)}),this._ecSources=new Map(this._tagsList.map(function(r){function n(e){for(var t,r=e.length-1;r>=0;r--)if(null==e[r].tag||a.has(e[r].tag)){t=e[r].node;break}if(!t)throw new Error;return t}var o=r.tag,i=e._tagOptions.get(o);if(!i)throw new Error;var a=new Set(i.ownedBy||[]),s=l.default.active(null,{scheduler:e._scheduler}),u=s.liveSet,d=s.controller,f=t.has(o)?(0,c.default)(u,function(e){return e}):null,m=e._options.finders[o],h=m?(0,p.default)(e._scheduler,e.tree,o,i,f,m,e._logError):f||l.default.constant(new Set,{scheduler:e._scheduler}),b=new Map,v=new l.default({scheduler:e._scheduler,read:function(){throw new Error},listen:function(t,r){var i=new Map,a=function(t){var r=t.el,i=t.parents,a=n(i),s=e._treeController.addTaggedValue(a,o,r);return b.has(r)&&e._logError(new Error("PageParserTree(".concat(o,") watcher received element twice")),r),b.set(r,s),{el:r,parents:t.parents.concat([{tag:o,node:s}])}};return h.subscribe({start:function(){var e=new Set;h.values().forEach(function(t){var r=a(t);i.set(t,r),e.add(r)}),t(e)},next:function(t){var n=new Set;t.length>1&&t.forEach(function(e){"remove"===e.type&&n.add(e.value)}),t.forEach(function(t){if("add"===t.type){if(n.has(t.value))return;var s=a(t.value);i.set(t.value,s),r.add(s)}else if("remove"===t.type){var l=i.get(t.value);if(!l)return;i.delete(t.value),r.remove(l);var u=b.get(l.el);if(!u)throw new Error("Should not happen: received removal of unseen element");b.delete(l.el);var c=u.getParent();c&&c.ownsNode(u)&&e._treeController.removeTaggedNode(c,o,u)}})},error:function(e){r.error(e)},complete:function(){r.end()}})}});return e._subscriptions.push(v.subscribe({})),[o,{liveSet:u,controller:d,ecSet:v}]})),this._options.watchers.forEach(function(t){var r=t.sources,n=t.selectors,o=t.tag,i=r.map(function(t){if(!t)return e._rootMatchedSet;var r=e._ecSources.get(t);if(!r)throw new Error("Unknown source: "+t);return r.ecSet}),a=1===i.length?i[0]:(0,u.default)(i),s=(0,m.default)(e._scheduler,n),l=e._ecSources.get(o);if(!l)throw new Error;l.controller.add(s(a))}),this._scheduler.flush()}},{key:"_dumpWithoutEnd",value:function(){var e=this;this._subscriptions.forEach(function(e){e.unsubscribe()}),this._subscriptions.length=0,this.tree.getOwned().forEach(function(t,r){t.values().forEach(function(t){e._treeController.removeTaggedNode(e.tree,r,t)})})}},{key:"dump",value:function(){this._dumpWithoutEnd(),this._treeController.end()}},{key:"replaceOptions",value:function(e){var t="replaceOptions does not support tag changes",r=n(e),o=r.map;if(this._tagOptions.size!==o.size)throw new Error(t);this._tagOptions.forEach(function(e,r){var n=o.get(r);if(!n)throw new Error(t);var i=e.ownedBy||[],a=new Set(n.ownedBy||[]);if(i.length!==a.size)throw new Error(t);i.forEach(function(e){if(!a.has(e))throw new Error(t)})}),this._dumpWithoutEnd(),this._options=e,this._setupWatchersAndFinders()}}]),e}();r.default=h,t.exports=r.default,t.exports.default=r.default},{"./createTransformer":540,"./watcherFinderMerger":544,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69,"live-set":332,"live-set/Scheduler":328,"live-set/flatMapR":331,"live-set/merge":334,"tag-tree":622}],544:[function(e,t,r){(function(n){(function(){"use strict";function o(e,t,r,n,o,s,l){return new u.default({scheduler:e,read:function(){throw new Error("Should not happen")},listen:function(u,c){var d=new Set,f=new Set,p=new Set,m=new Set,h=null;o?h=o.subscribe({start:function(){if(!o)throw new Error;var e=o.values();u(e),e.forEach(function(e){p.add(e.el),d.add(e.el),f.add(e)})},next:function(e){e.forEach(function(e){if("add"===e.type){var t=e.value.el;p.add(t),d.has(t)?l(new Error("PageParserTree(".concat(r,") watcher found element already found by finder")),t):(d.add(t),f.add(e.value),c.add(e.value))}else if("remove"===e.type){var n=e.value.el;p.delete(n),m.delete(n),f.has(e.value)&&(d.delete(n),f.delete(e.value),c.remove(e.value))}})},error:function(e){c.error(e)},complete:function(){c.end()}}):u(new Set);var b=null;if(s){var v=s.fn,_=s.interval,g=n.ownedBy||[];b=i(_,d,function(){for(var n=new Set,i=v(t.getValue()),s=0,u=i.length;s<u;s++){var b=i[s];if(n.add(b),!d.has(b)){d.add(b);var _=a(b,t,g);f.add(_),c.add(_),o&&(l(new Error("PageParserTree(".concat(r,") finder found element missed by watcher")),b),h&&h.pullChanges())}}f.forEach(function(e){var t=e.el;n.has(t)||(p.has(t)?m.has(t)||(m.add(t),l(new Error("PageParserTree(".concat(r,") watcher found element missed by finder")),t)):(f.delete(e),d.delete(t),c.remove(e),h&&h.pullChanges()))}),e.flush()})}return{unsubscribe:function(){null!=b&&b.dispose(),h&&h.unsubscribe()},pullChanges:function(){h&&h.pullChanges()}}}})}function i(e,t,r){var o=Date.now(),i=null,a=null,s=function(){a=null,r(),u()},u=function(){var r;if(null==e)r=5e3+1e3*Math.random();else if("number"==typeof e)r=e;else{if("function"!=typeof e)throw new Error("interval has wrong type: ".concat((0,l.default)(e)));r=e(t.size,Date.now()-o)}r!==1/0&&(i=setTimeout(function(){i=null,n.requestIdleCallback&&n.cancelIdleCallback?a=n.requestIdleCallback(s,{timeout:r}):s()},r))};return u(),{dispose:function(){null!=i&&clearTimeout(i),null!=a&&n.cancelIdleCallback(a)}}}function a(e,t,r){var n=null;return{el:e,get parents(){if(!n){for(var o=t.getValue(),i=[],a=e.parentElement;a;){for(var s=t.getNodesForValue(a),l=0,u=s.length;l<u;l++){var c=s[l],d=c.getTag();if(null==d||r.indexOf(d)>=0){i.push({tag:d,node:c});break}}if(a===o)break;a=a.parentElement}i.reverse(),n=i}return n}}}var s=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=o;var l=s(e("@babel/runtime/helpers/typeof")),u=s(e("live-set"));t.exports=r.default,t.exports.default=r.default}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/typeof":79,"live-set":332}],545:[function(e,t,r){"use strict";function n(e,t){return new Promise(function(r){setTimeout(function(){r(t)},e)})}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],546:[function(e,t,r){(function(e){(function(){(function(){var r,n,o;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-o)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},o=r()):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:568}],547:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0;var o=e("./processor"),i=n(o),a=e("./selectors/attribute"),s=n(a),l=e("./selectors/className"),u=n(l),c=e("./selectors/combinator"),d=n(c),f=e("./selectors/comment"),p=n(f),m=e("./selectors/id"),h=n(m),b=e("./selectors/nesting"),v=n(b),_=e("./selectors/pseudo"),g=n(_),y=e("./selectors/root"),w=n(y),j=e("./selectors/selector"),k=n(j),x=e("./selectors/string"),E=n(x),S=e("./selectors/tag"),C=n(S),I=e("./selectors/universal"),A=n(I),T=e("./selectors/types"),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(T),M=function(e){return new i.default(e)};M.attribute=function(e){return new s.default(e)},M.className=function(e){return new u.default(e)},M.combinator=function(e){return new d.default(e)},M.comment=function(e){return new p.default(e)},M.id=function(e){return new h.default(e)},M.nesting=function(e){return new v.default(e)},M.pseudo=function(e){return new g.default(e)},M.root=function(e){return new w.default(e)},M.selector=function(e){return new k.default(e)},M.string=function(e){return new E.default(e)},M.tag=function(e){return new C.default(e)},M.universal=function(e){return new A.default(e)},Object.keys(D).forEach(function(e){"__esModule"!==e&&(M[e]=D[e])}),r.default=M,t.exports=r.default},{"./processor":549,"./selectors/attribute":550,"./selectors/className":551,"./selectors/combinator":552,"./selectors/comment":553,"./selectors/id":555,"./selectors/nesting":557,"./selectors/pseudo":559,"./selectors/root":560,"./selectors/selector":561,"./selectors/string":562,"./selectors/tag":563,"./selectors/types":564,"./selectors/universal":565}],548:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("flatten"),s=n(a),l=e("indexes-of"),u=n(l),c=e("uniq"),d=n(c),f=e("./selectors/root"),p=n(f),m=e("./selectors/selector"),h=n(m),b=e("./selectors/className"),v=n(b),_=e("./selectors/comment"),g=n(_),y=e("./selectors/id"),w=n(y),j=e("./selectors/tag"),k=n(j),x=e("./selectors/string"),E=n(x),S=e("./selectors/pseudo"),C=n(S),I=e("./selectors/attribute"),A=n(I),T=e("./selectors/universal"),D=n(T),M=e("./selectors/combinator"),R=n(M),O=e("./selectors/nesting"),P=n(O),L=e("./sortAscending"),V=n(L),N=e("./tokenize"),B=n(N),q=e("./selectors/types"),U=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(q),F=function(){function e(t){o(this,e),this.input=t,this.lossy=!1===t.options.lossless,this.position=0,this.root=new p.default;var r=new h.default;return this.root.append(r),this.current=r,this.lossy?this.tokens=(0,B.default)({safe:t.safe,css:t.css.trim()}):this.tokens=(0,B.default)(t),this.loop()}return e.prototype.attribute=function(){var e="",t=void 0,r=this.currToken;for(this.position++;this.position<this.tokens.length&&"]"!==this.currToken[0];)e+=this.tokens[this.position][1],this.position++;this.position!==this.tokens.length||~e.indexOf("]")||this.error("Expected a closing square bracket.");var n=e.split(/((?:[*~^$|]?=))([^]*)/),o=n[0].split(/(\|)/g),i={operator:n[1],value:n[2],source:{start:{line:r[2],column:r[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:r[4]};if(o.length>1?(""===o[0]&&(o[0]=!0),i.attribute=this.parseValue(o[2]),i.namespace=this.parseNamespace(o[0])):i.attribute=this.parseValue(n[0]),t=new A.default(i),n[2]){var a=n[2].split(/(\s+i\s*?)$/),s=a[0].trim();t.value=this.lossy?s:a[0],a[1]&&(t.insensitive=!0,this.lossy||(t.raws.insensitive=a[1])),t.quoted="'"===s[0]||'"'===s[0],t.raws.unquoted=t.quoted?s.slice(1,-1):s}this.newNode(t),this.position++},e.prototype.combinator=function(){if("|"===this.currToken[1])return this.namespace();for(var e=new R.default({value:"",source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]});this.position<this.tokens.length&&this.currToken&&("space"===this.currToken[0]||"combinator"===this.currToken[0]);)this.nextToken&&"combinator"===this.nextToken[0]?(e.spaces.before=this.parseSpace(this.currToken[1]),e.source.start.line=this.nextToken[2],e.source.start.column=this.nextToken[3],e.source.end.column=this.nextToken[3],e.source.end.line=this.nextToken[2],e.sourceIndex=this.nextToken[4]):this.prevToken&&"combinator"===this.prevToken[0]?e.spaces.after=this.parseSpace(this.currToken[1]):"combinator"===this.currToken[0]?e.value=this.currToken[1]:"space"===this.currToken[0]&&(e.value=this.parseSpace(this.currToken[1]," ")),this.position++;return this.newNode(e)},e.prototype.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;var e=new h.default;this.current.parent.append(e),this.current=e,this.position++},e.prototype.comment=function(){var e=new g.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[4],column:this.currToken[5]}},sourceIndex:this.currToken[6]});this.newNode(e),this.position++},e.prototype.error=function(e){throw new this.input.error(e)},e.prototype.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.")},e.prototype.missingParenthesis=function(){return this.error("Expected opening parenthesis.")},e.prototype.missingSquareBracket=function(){return this.error("Expected opening square bracket.")},e.prototype.namespace=function(){var e=this.prevToken&&this.prevToken[1]||!0;return"word"===this.nextToken[0]?(this.position++,this.word(e)):"*"===this.nextToken[0]?(this.position++,this.universal(e)):void 0},e.prototype.nesting=function(){this.newNode(new P.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]})),this.position++},e.prototype.parentheses=function(){var e=this.current.last;if(e&&e.type===U.PSEUDO){var t=new h.default,r=this.current;e.append(t),this.current=t;var n=1;for(this.position++;this.position<this.tokens.length&&n;)"("===this.currToken[0]&&n++,")"===this.currToken[0]&&n--,n?this.parse():(t.parent.source.end.line=this.currToken[2],t.parent.source.end.column=this.currToken[3],this.position++);n&&this.error("Expected closing parenthesis."),this.current=r}else{var o=1;for(this.position++,e.value+="(";this.position<this.tokens.length&&o;)"("===this.currToken[0]&&o++,")"===this.currToken[0]&&o--,e.value+=this.parseParenthesisToken(this.currToken),this.position++;o&&this.error("Expected closing parenthesis.")}},e.prototype.pseudo=function(){for(var e=this,t="",r=this.currToken;this.currToken&&":"===this.currToken[0];)t+=this.currToken[1],this.position++;if(!this.currToken)return this.error("Expected pseudo-class or pseudo-element");if("word"===this.currToken[0]){var n=void 0;this.splitWord(!1,function(o,i){t+=o,n=new C.default({value:t,source:{start:{line:r[2],column:r[3]},end:{line:e.currToken[4],column:e.currToken[5]}},sourceIndex:r[4]}),
e.newNode(n),i>1&&e.nextToken&&"("===e.nextToken[0]&&e.error("Misplaced parenthesis.")})}else this.error('Unexpected "'+this.currToken[0]+'" found.')},e.prototype.space=function(){var e=this.currToken;0===this.position||","===this.prevToken[0]||"("===this.prevToken[0]?(this.spaces=this.parseSpace(e[1]),this.position++):this.position===this.tokens.length-1||","===this.nextToken[0]||")"===this.nextToken[0]?(this.current.last.spaces.after=this.parseSpace(e[1]),this.position++):this.combinator()},e.prototype.string=function(){var e=this.currToken;this.newNode(new E.default({value:this.currToken[1],source:{start:{line:e[2],column:e[3]},end:{line:e[4],column:e[5]}},sourceIndex:e[6]})),this.position++},e.prototype.universal=function(e){var t=this.nextToken;if(t&&"|"===t[1])return this.position++,this.namespace();this.newNode(new D.default({value:this.currToken[1],source:{start:{line:this.currToken[2],column:this.currToken[3]},end:{line:this.currToken[2],column:this.currToken[3]}},sourceIndex:this.currToken[4]}),e),this.position++},e.prototype.splitWord=function(e,t){for(var r=this,n=this.nextToken,o=this.currToken[1];n&&"word"===n[0];){this.position++;var i=this.currToken[1];if(o+=i,i.lastIndexOf("\\")===i.length-1){var a=this.nextToken;a&&"space"===a[0]&&(o+=this.parseSpace(a[1]," "),this.position++)}n=this.nextToken}var l=(0,u.default)(o,"."),c=(0,u.default)(o,"#"),f=(0,u.default)(o,"#{");f.length&&(c=c.filter(function(e){return!~f.indexOf(e)}));var p=(0,V.default)((0,d.default)((0,s.default)([[0],l,c])));p.forEach(function(n,i){var a=p[i+1]||o.length,s=o.slice(n,a);if(0===i&&t)return t.call(r,s,p.length);var u=void 0;u=~l.indexOf(n)?new v.default({value:s.slice(1),source:{start:{line:r.currToken[2],column:r.currToken[3]+n},end:{line:r.currToken[4],column:r.currToken[3]+(a-1)}},sourceIndex:r.currToken[6]+p[i]}):~c.indexOf(n)?new w.default({value:s.slice(1),source:{start:{line:r.currToken[2],column:r.currToken[3]+n},end:{line:r.currToken[4],column:r.currToken[3]+(a-1)}},sourceIndex:r.currToken[6]+p[i]}):new k.default({value:s,source:{start:{line:r.currToken[2],column:r.currToken[3]+n},end:{line:r.currToken[4],column:r.currToken[3]+(a-1)}},sourceIndex:r.currToken[6]+p[i]}),r.newNode(u,e)}),this.position++},e.prototype.word=function(e){var t=this.nextToken;return t&&"|"===t[1]?(this.position++,this.namespace()):this.splitWord(e)},e.prototype.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.root},e.prototype.parse=function(e){switch(this.currToken[0]){case"space":this.space();break;case"comment":this.comment();break;case"(":this.parentheses();break;case")":e&&this.missingParenthesis();break;case"[":this.attribute();break;case"]":this.missingSquareBracket();break;case"at-word":case"word":this.word();break;case":":this.pseudo();break;case";":this.missingBackslash();break;case",":this.comma();break;case"*":this.universal();break;case"&":this.nesting();break;case"combinator":this.combinator();break;case"string":this.string()}},e.prototype.parseNamespace=function(e){if(this.lossy&&"string"==typeof e){var t=e.trim();return!t.length||t}return e},e.prototype.parseSpace=function(e,t){return this.lossy?t||"":e},e.prototype.parseValue=function(e){return this.lossy&&e&&"string"==typeof e?e.trim():e},e.prototype.parseParenthesisToken=function(e){return this.lossy?"space"===e[0]?this.parseSpace(e[1]," "):this.parseValue(e[1]):e[1]},e.prototype.newNode=function(e,t){return t&&(e.namespace=this.parseNamespace(t)),this.spaces&&(e.spaces.before=this.spaces,this.spaces=""),this.current.append(e)},i(e,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),e}();r.default=F,t.exports=r.default},{"./selectors/attribute":550,"./selectors/className":551,"./selectors/combinator":552,"./selectors/comment":553,"./selectors/id":555,"./selectors/nesting":557,"./selectors/pseudo":559,"./selectors/root":560,"./selectors/selector":561,"./selectors/string":562,"./selectors/tag":563,"./selectors/types":564,"./selectors/universal":565,"./sortAscending":566,"./tokenize":567,flatten:308,"indexes-of":318,uniq:626}],549:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("./parser"),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=function(){function e(t){return n(this,e),this.func=t||function(){},this}return e.prototype.process=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new a.default({css:e,error:function(e){throw new Error(e)},options:t});return this.res=r,this.func(r),this},o(e,[{key:"result",get:function(){return String(this.res)}}]),e}();r.default=s,t.exports=r.default},{"./parser":548}],550:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.ATTRIBUTE,i.raws={},i}return i(t,e),t.prototype.toString=function(){var e=[this.spaces.before,"[",this.ns,this.attribute];return this.operator&&e.push(this.operator),this.value&&e.push(this.value),this.raws.insensitive?e.push(this.raws.insensitive):this.insensitive&&e.push(" i"),e.push("]"),e.concat(this.spaces.after).join("")},t}(s.default);r.default=u,t.exports=r.default},{"./namespace":556,"./types":564}],551:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.CLASS,i}return i(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String("."+this.value),this.spaces.after].join("")},t}(s.default);r.default=u,t.exports=r.default},{"./namespace":556,"./types":564}],552:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.COMBINATOR,i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":558,"./types":564}],553:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.COMMENT,i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":558,"./types":564}],554:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./node"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=e("./types"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),d=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.nodes||(i.nodes=[]),i}return i(t,e),t.prototype.append=function(e){return e.parent=this,this.nodes.push(e),this},t.prototype.prepend=function(e){return e.parent=this,this.nodes.unshift(e),this},t.prototype.at=function(e){return this.nodes[e]},t.prototype.index=function(e){return"number"==typeof e?e:this.nodes.indexOf(e)},t.prototype.removeChild=function(e){e=this.index(e),this.at(e).parent=void 0,this.nodes.splice(e,1);var t=void 0;for(var r in this.indexes)(t=this.indexes[r])>=e&&(this.indexes[r]=t-1);return this},t.prototype.removeAll=function(){for(var e=this.nodes,t=Array.isArray(e),r=0,e=t?e:e[Symbol.iterator]();;){var n;if(t){if(r>=e.length)break;n=e[r++]}else{if(r=e.next(),r.done)break;n=r.value}n.parent=void 0}return this.nodes=[],this},t.prototype.empty=function(){return this.removeAll()},t.prototype.insertAfter=function(e,t){var r=this.index(e);this.nodes.splice(r+1,0,t);var n=void 0;for(var o in this.indexes)n=this.indexes[o],r<=n&&(this.indexes[o]=n+this.nodes.length);return this},t.prototype.insertBefore=function(e,t){var r=this.index(e);this.nodes.splice(r,0,t);var n=void 0;for(var o in this.indexes)n=this.indexes[o],r<=n&&(this.indexes[o]=n+this.nodes.length);return this},t.prototype.each=function(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var t=this.lastEach;if(this.indexes[t]=0,this.length){for(var r=void 0,n=void 0;this.indexes[t]<this.length&&(r=this.indexes[t],!1!==(n=e(this.at(r),r)));)this.indexes[t]+=1;return delete this.indexes[t],!1!==n&&void 0}},t.prototype.walk=function(e){return this.each(function(t,r){var n=e(t,r);if(!1!==n&&t.length&&(n=t.walk(e)),!1===n)return!1})},t.prototype.walkAttributes=function(e){var t=this;return this.walk(function(r){if(r.type===c.ATTRIBUTE)return e.call(t,r)})},t.prototype.walkClasses=function(e){var t=this;return this.walk(function(r){if(r.type===c.CLASS)return e.call(t,r)})},t.prototype.walkCombinators=function(e){var t=this;return this.walk(function(r){if(r.type===c.COMBINATOR)return e.call(t,r)})},t.prototype.walkComments=function(e){var t=this;return this.walk(function(r){if(r.type===c.COMMENT)return e.call(t,r)})},t.prototype.walkIds=function(e){var t=this;return this.walk(function(r){if(r.type===c.ID)return e.call(t,r)})},t.prototype.walkNesting=function(e){var t=this;return this.walk(function(r){if(r.type===c.NESTING)return e.call(t,r)})},t.prototype.walkPseudos=function(e){var t=this;return this.walk(function(r){if(r.type===c.PSEUDO)return e.call(t,r)})},t.prototype.walkTags=function(e){var t=this;return this.walk(function(r){if(r.type===c.TAG)return e.call(t,r)})},t.prototype.walkUniversals=function(e){var t=this;return this.walk(function(r){if(r.type===c.UNIVERSAL)return e.call(t,r)})},t.prototype.split=function(e){var t=this,r=[];return this.reduce(function(n,o,i){var a=e.call(t,o);return r.push(o),a?(n.push(r),r=[]):i===t.length-1&&n.push(r),n},[])},t.prototype.map=function(e){return this.nodes.map(e)},t.prototype.reduce=function(e,t){return this.nodes.reduce(e,t)},t.prototype.every=function(e){return this.nodes.every(e)},t.prototype.some=function(e){return this.nodes.some(e)},t.prototype.filter=function(e){return this.nodes.filter(e)},t.prototype.sort=function(e){return this.nodes.sort(e)},t.prototype.toString=function(){return this.map(String).join("")},a(t,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),t}(l.default);r.default=d,t.exports=r.default},{"./node":558,"./types":564}],555:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.ID,i}return i(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String("#"+this.value),this.spaces.after].join("")},t}(s.default);r.default=u,t.exports=r.default},{"./namespace":556,"./types":564}],556:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("./node"),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=function(e){function t(){return n(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.prototype.toString=function(){return[this.spaces.before,this.ns,String(this.value),this.spaces.after].join("")},a(t,[{key:"ns",get:function(){var e=this.namespace;return e?("string"==typeof e?e:"")+"|":""}}]),t}(l.default);r.default=u,t.exports=r.default},{"./node":558}],557:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.NESTING,i.value="&",i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":558,"./types":564}],558:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function e(t,r){if("object"!==(void 0===t?"undefined":o(t)))return t;var n=new t.constructor;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i],s=void 0===a?"undefined":o(a);"parent"===i&&"object"===s?r&&(n[i]=r):a instanceof Array?n[i]=a.map(function(t){return e(t,n)}):n[i]=e(a,n)}return n},a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e);for(var r in t)this[r]=t[r];var o=t.spaces;o=void 0===o?{}:o;var i=o.before,a=void 0===i?"":i,s=o.after,l=void 0===s?"":s;this.spaces={before:a,after:l}}return e.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},e.prototype.replaceWith=function(){if(this.parent){for(var e in arguments)this.parent.insertBefore(this,arguments[e]);this.remove()}return this},e.prototype.next=function(){return this.parent.at(this.parent.index(this)+1)},e.prototype.prev=function(){return this.parent.at(this.parent.index(this)-1)},e.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=i(this);for(var r in e)t[r]=e[r];return t},e.prototype.toString=function(){return[this.spaces.before,String(this.value),this.spaces.after].join("")},e}();r.default=a,t.exports=r.default},{}],559:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./container"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.PSEUDO,i}return i(t,e),t.prototype.toString=function(){var e=this.length?"("+this.map(String).join(",")+")":"";return[this.spaces.before,String(this.value),e,this.spaces.after].join("")},t}(s.default);r.default=u,t.exports=r.default},{"./container":554,"./types":564}],560:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./container"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.ROOT,i}return i(t,e),t.prototype.toString=function(){var e=this.reduce(function(e,t){var r=String(t);return r?e+r+",":""},"").slice(0,-1);return this.trailingComma?e+",":e},t}(s.default);r.default=u,t.exports=r.default},{"./container":554,"./types":564}],561:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./container"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.SELECTOR,i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./container":554,"./types":564}],562:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./node"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.STRING,i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./node":558,"./types":564}],563:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.TAG,i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./namespace":556,"./types":564}],564:[function(e,t,r){"use strict";r.__esModule=!0;r.TAG="tag",r.STRING="string",r.SELECTOR="selector",r.ROOT="root",r.PSEUDO="pseudo",r.NESTING="nesting",r.ID="id",r.COMMENT="comment",r.COMBINATOR="combinator",r.CLASS="class",r.ATTRIBUTE="attribute",r.UNIVERSAL="universal"},{}],565:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=e("./namespace"),s=function(e){return e&&e.__esModule?e:{default:e}}(a),l=e("./types"),u=function(e){function t(r){n(this,t);var i=o(this,e.call(this,r));return i.type=l.UNIVERSAL,i.value="*",i}return i(t,e),t}(s.default);r.default=u,t.exports=r.default},{"./namespace":556,"./types":564}],566:[function(e,t,r){"use strict";function n(e){return e.sort(function(e,t){return e-t})}r.__esModule=!0,r.default=n,t.exports=r.default},{}],567:[function(e,t,r){"use strict";function n(e){for(var t=[],r=e.css.valueOf(),n=void 0,A=void 0,T=void 0,D=void 0,M=void 0,R=void 0,O=void 0,P=void 0,L=void 0,V=void 0,N=void 0,B=r.length,q=-1,U=1,F=0,H=function(t,n){if(!e.safe)throw e.error("Unclosed "+t,U,F-q,F);r+=n,A=r.length-1};F<B;){switch(n=r.charCodeAt(F),n===l&&(q=F,U+=1),n){case l:case u:case d:case f:case c:A=F;do{A+=1,(n=r.charCodeAt(A))===l&&(q=A,U+=1)}while(n===u||n===l||n===d||n===f||n===c);t.push(["space",r.slice(F,A),U,F-q,F]),F=A-1;break;case p:case m:case h:case b:A=F;do{A+=1,n=r.charCodeAt(A)}while(n===p||n===m||n===h||n===b);t.push(["combinator",r.slice(F,A),U,F-q,F]),F=A-1;break;case k:t.push(["*","*",U,F-q,F]);break;case E:t.push(["&","&",U,F-q,F]);break;case v:t.push([",",",",U,F-q,F]);break;case y:t.push(["[","[",U,F-q,F]);break;case w:t.push(["]","]",U,F-q,F]);break;case x:t.push([":",":",U,F-q,F]);break;case j:t.push([";",";",U,F-q,F]);break;case _:t.push(["(","(",U,F-q,F]);break;case g:t.push([")",")",U,F-q,F]);break;case o:case i:T=n===o?"'":'"',A=F;do{for(V=!1,A=r.indexOf(T,A+1),-1===A&&H("quote",T),N=A;r.charCodeAt(N-1)===a;)N-=1,V=!V}while(V);t.push(["string",r.slice(F,A+1),U,F-q,U,A-q,F]),F=A;break;case S:C.lastIndex=F+1,C.test(r),A=0===C.lastIndex?r.length-1:C.lastIndex-2,t.push(["at-word",r.slice(F,A+1),U,F-q,U,A-q,F]),F=A;break;case a:for(A=F,O=!0;r.charCodeAt(A+1)===a;)A+=1,O=!O;n=r.charCodeAt(A+1),O&&n!==s&&n!==u&&n!==l&&n!==d&&n!==f&&n!==c&&(A+=1),t.push(["word",r.slice(F,A+1),U,F-q,U,A-q,F]),F=A;break;default:n===s&&r.charCodeAt(F+1)===k?(A=r.indexOf("*/",F+2)+1,0===A&&H("comment","*/"),R=r.slice(F,A+1),D=R.split("\n"),M=D.length-1,M>0?(P=U+M,L=A-D[M].length):(P=U,L=q),t.push(["comment",R,U,F-q,P,A-L,F]),q=L,U=P,F=A):(I.lastIndex=F+1,I.test(r),A=0===I.lastIndex?r.length-1:I.lastIndex-2,t.push(["word",r.slice(F,A+1),U,F-q,U,A-q,F]),F=A)}F++}return t}r.__esModule=!0,r.default=n;var o=39,i=34,a=92,s=47,l=10,u=32,c=12,d=9,f=13,p=43,m=62,h=126,b=124,v=44,_=40,g=41,y=91,w=93,j=59,k=42,x=58,E=38,S=64,C=/[ \n\t\r\{\(\)'"\\;/]/g,I=/[ \n\t\r\(\)\*:;@!&'"\+\|~>,\[\]\\]|\/(?=\*)/g;t.exports=r.default},{}],568:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){b&&m&&(b=!1,m.length?h=m.concat(h):v=-1,h.length&&l())}function l(){if(!b){var e=i(s);b=!0;for(var t=h.length;t;){for(m=h,h=[];++v<t;)m&&m[v].run();v=-1,t=h.length}m=null,b=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var m,h=[],b=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new u(e,t)),1!==h.length||b||i(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],569:[function(e,t,r){"use strict";function n(e,t,r,n,o){}n.resetWarningCache=function(){},t.exports=n},{"./lib/ReactPropTypesSecret":573}],570:[function(e,t,r){"use strict";function n(){}function o(){}var i=e("./lib/ReactPropTypesSecret");o.resetWarningCache=n,t.exports=function(){function e(e,t,r,n,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:n};return r.PropTypes=r,r}},{"./lib/ReactPropTypesSecret":573}],571:[function(e,t,r){"use strict";function n(){return null}var o=e("react-is"),i=e("object-assign"),a=e("./lib/ReactPropTypesSecret"),s=e("./checkPropTypes"),l=Function.call.bind(Object.prototype.hasOwnProperty),u=function(){};t.exports=function(e,t){function r(e){var t=e&&(C&&e[C]||e[I]);if("function"==typeof t)return t}function c(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function d(e){this.message=e,this.stack=""}function f(e){function r(r,n,o,i,s,l,u){if(i=i||A,l=l||o,u!==a){if(t){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}return null==n[o]?r?new d(null===n[o]?"The "+s+" `"+l+"` is marked as required in `"+i+"`, but its value is `null`.":"The "+s+" `"+l+"` is marked as required in `"+i+"`, but its value is `undefined`."):null:e(n,o,i,s,l)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function p(e){function t(t,r,n,o,i,a){var s=t[r];if(k(s)!==e)return new d("Invalid "+o+" `"+i+"` of type `"+x(s)+"` supplied to `"+n+"`, expected `"+e+"`.");return null}return f(t)}function m(e){function t(t,r,n,o,i){if("function"!=typeof e)return new d("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var s=t[r];if(!Array.isArray(s)){return new d("Invalid "+o+" `"+i+"` of type `"+k(s)+"` supplied to `"+n+"`, expected an array.")}for(var l=0;l<s.length;l++){var u=e(s,l,n,o,i+"["+l+"]",a);if(u instanceof Error)return u}return null}return f(t)}function h(e){function t(t,r,n,o,i){if(!(t[r]instanceof e)){var a=e.name||A;return new d("Invalid "+o+" `"+i+"` of type `"+S(t[r])+"` supplied to `"+n+"`, expected instance of `"+a+"`.")}return null}return f(t)}function b(e){function t(t,r,n,o,i){for(var a=t[r],s=0;s<e.length;s++)if(c(a,e[s]))return null;var l=JSON.stringify(e,function(e,t){return"symbol"===x(t)?String(t):t});return new d("Invalid "+o+" `"+i+"` of value `"+String(a)+"` supplied to `"+n+"`, expected one of "+l+".")}return Array.isArray(e)?f(t):n}function v(e){function t(t,r,n,o,i){if("function"!=typeof e)return new d("Property `"+i+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var s=t[r],u=k(s);if("object"!==u)return new d("Invalid "+o+" `"+i+"` of type `"+u+"` supplied to `"+n+"`, expected an object.");for(var c in s)if(l(s,c)){var f=e(s,c,n,o,i+"."+c,a)
;if(f instanceof Error)return f}return null}return f(t)}function _(e){function t(t,r,n,o,i){for(var s=0;s<e.length;s++){if(null==(0,e[s])(t,r,n,o,i,a))return null}return new d("Invalid "+o+" `"+i+"` supplied to `"+n+"`.")}if(!Array.isArray(e))return n;for(var r=0;r<e.length;r++){var o=e[r];if("function"!=typeof o)return u("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+E(o)+" at index "+r+"."),n}return f(t)}function g(e){function t(t,r,n,o,i){var s=t[r],l=k(s);if("object"!==l)return new d("Invalid "+o+" `"+i+"` of type `"+l+"` supplied to `"+n+"`, expected `object`.");for(var u in e){var c=e[u];if(c){var f=c(s,u,n,o,i+"."+u,a);if(f)return f}}return null}return f(t)}function y(e){function t(t,r,n,o,s){var l=t[r],u=k(l);if("object"!==u)return new d("Invalid "+o+" `"+s+"` of type `"+u+"` supplied to `"+n+"`, expected `object`.");var c=i({},t[r],e);for(var f in c){var p=e[f];if(!p)return new d("Invalid "+o+" `"+s+"` key `"+f+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(t[r],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=p(l,f,n,o,s+"."+f,a);if(m)return m}return null}return f(t)}function w(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(w);if(null===t||e(t))return!0;var n=r(t);if(!n)return!1;var o,i=n.call(t);if(n!==t.entries){for(;!(o=i.next()).done;)if(!w(o.value))return!1}else for(;!(o=i.next()).done;){var a=o.value;if(a&&!w(a[1]))return!1}return!0;default:return!1}}function j(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function k(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":j(t,e)?"symbol":t}function x(e){if(void 0===e||null===e)return""+e;var t=k(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function E(e){var t=x(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function S(e){return e.constructor&&e.constructor.name?e.constructor.name:A}var C="function"==typeof Symbol&&Symbol.iterator,I="@@iterator",A="<<anonymous>>",T={array:p("array"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:function(){return f(n)}(),arrayOf:m,element:function(){function t(t,r,n,o,i){var a=t[r];if(!e(a)){return new d("Invalid "+o+" `"+i+"` of type `"+k(a)+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return f(t)}(),elementType:function(){function e(e,t,r,n,i){var a=e[t];if(!o.isValidElementType(a)){return new d("Invalid "+n+" `"+i+"` of type `"+k(a)+"` supplied to `"+r+"`, expected a single ReactElement type.")}return null}return f(e)}(),instanceOf:h,node:function(){function e(e,t,r,n,o){return w(e[t])?null:new d("Invalid "+n+" `"+o+"` supplied to `"+r+"`, expected a ReactNode.")}return f(e)}(),objectOf:v,oneOf:b,oneOfType:_,shape:g,exact:y};return d.prototype=Error.prototype,T.checkPropTypes=s,T.resetWarningCache=s.resetWarningCache,T.PropTypes=T,T}},{"./checkPropTypes":569,"./lib/ReactPropTypesSecret":573,"object-assign":535,"react-is":576}],572:[function(e,t,r){t.exports=e("./factoryWithThrowingShims")()},{"./factoryWithThrowingShims":570,"./factoryWithTypeCheckers":571,"react-is":576}],573:[function(e,t,r){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],574:[function(e,t,r){(function(e){(function(){"use strict";"production"!==e.env.NODE_ENV&&function(){function e(e){return"string"==typeof e||"function"==typeof e||e===g||e===E||e===w||e===y||e===C||e===I||"object"==typeof e&&null!==e&&(e.$$typeof===T||e.$$typeof===A||e.$$typeof===j||e.$$typeof===k||e.$$typeof===S||e.$$typeof===M||e.$$typeof===R||e.$$typeof===O||e.$$typeof===D)}function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case v:var r=e.type;switch(r){case x:case E:case g:case w:case y:case C:return r;default:var n=r&&r.$$typeof;switch(n){case k:case S:case T:case A:case j:return n;default:return t}}case _:return t}}}function n(e){return $||($=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),o(e)||t(e)===x}function o(e){return t(e)===E}function i(e){return t(e)===k}function a(e){return t(e)===j}function s(e){return"object"==typeof e&&null!==e&&e.$$typeof===v}function l(e){return t(e)===S}function u(e){return t(e)===g}function c(e){return t(e)===T}function d(e){return t(e)===A}function f(e){return t(e)===_}function p(e){return t(e)===w}function m(e){return t(e)===y}function h(e){return t(e)===C}var b="function"==typeof Symbol&&Symbol.for,v=b?Symbol.for("react.element"):60103,_=b?Symbol.for("react.portal"):60106,g=b?Symbol.for("react.fragment"):60107,y=b?Symbol.for("react.strict_mode"):60108,w=b?Symbol.for("react.profiler"):60114,j=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,x=b?Symbol.for("react.async_mode"):60111,E=b?Symbol.for("react.concurrent_mode"):60111,S=b?Symbol.for("react.forward_ref"):60112,C=b?Symbol.for("react.suspense"):60113,I=b?Symbol.for("react.suspense_list"):60120,A=b?Symbol.for("react.memo"):60115,T=b?Symbol.for("react.lazy"):60116,D=b?Symbol.for("react.block"):60121,M=b?Symbol.for("react.fundamental"):60117,R=b?Symbol.for("react.responder"):60118,O=b?Symbol.for("react.scope"):60119,P=x,L=E,V=k,N=j,B=v,q=S,U=g,F=T,H=A,z=_,W=w,G=y,K=C,$=!1;r.AsyncMode=P,r.ConcurrentMode=L,r.ContextConsumer=V,r.ContextProvider=N,r.Element=B,r.ForwardRef=q,r.Fragment=U,r.Lazy=F,r.Memo=H,r.Portal=z,r.Profiler=W,r.StrictMode=G,r.Suspense=K,r.isAsyncMode=n,r.isConcurrentMode=o,r.isContextConsumer=i,r.isContextProvider=a,r.isElement=s,r.isForwardRef=l,r.isFragment=u,r.isLazy=c,r.isMemo=d,r.isPortal=f,r.isProfiler=p,r.isStrictMode=m,r.isSuspense=h,r.isValidElementType=e,r.typeOf=t}()}).call(this)}).call(this,e("_process"))},{_process:568}],575:[function(e,t,r){"use strict";function n(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case p:case m:case l:case c:case u:case b:return e;default:switch(e=e&&e.$$typeof){case f:case h:case g:case _:case d:return e;default:return t}}case s:return t}}}function o(e){return n(e)===m}var i="function"==typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,l=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,p=i?Symbol.for("react.async_mode"):60111,m=i?Symbol.for("react.concurrent_mode"):60111,h=i?Symbol.for("react.forward_ref"):60112,b=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.suspense_list"):60120,_=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,y=i?Symbol.for("react.block"):60121,w=i?Symbol.for("react.fundamental"):60117,j=i?Symbol.for("react.responder"):60118,k=i?Symbol.for("react.scope"):60119;r.AsyncMode=p,r.ConcurrentMode=m,r.ContextConsumer=f,r.ContextProvider=d,r.Element=a,r.ForwardRef=h,r.Fragment=l,r.Lazy=g,r.Memo=_,r.Portal=s,r.Profiler=c,r.StrictMode=u,r.Suspense=b,r.isAsyncMode=function(e){return o(e)||n(e)===p},r.isConcurrentMode=o,r.isContextConsumer=function(e){return n(e)===f},r.isContextProvider=function(e){return n(e)===d},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},r.isForwardRef=function(e){return n(e)===h},r.isFragment=function(e){return n(e)===l},r.isLazy=function(e){return n(e)===g},r.isMemo=function(e){return n(e)===_},r.isPortal=function(e){return n(e)===s},r.isProfiler=function(e){return n(e)===c},r.isStrictMode=function(e){return n(e)===u},r.isSuspense=function(e){return n(e)===b},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===l||e===m||e===c||e===u||e===b||e===v||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===_||e.$$typeof===d||e.$$typeof===f||e.$$typeof===h||e.$$typeof===w||e.$$typeof===j||e.$$typeof===k||e.$$typeof===y)},r.typeOf=n},{}],576:[function(e,t,r){(function(r){(function(){"use strict";"production"===r.env.NODE_ENV?t.exports=e("./cjs/react-is.production.min.js"):t.exports=e("./cjs/react-is.development.js")}).call(this)}).call(this,e("_process"))},{"./cjs/react-is.development.js":574,"./cjs/react-is.production.min.js":575,_process:568}],577:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;i&&"number"==typeof i.maxKeys&&(l=i.maxKeys);var u=e.length;l>0&&u>l&&(u=l);for(var c=0;c<u;++c){var d,f,p,m,h=e[c].replace(s,"%20"),b=h.indexOf(r);b>=0?(d=h.substr(0,b),f=h.substr(b+1)):(d=h,f=""),p=decodeURIComponent(d),m=decodeURIComponent(f),n(a,p)?o(a[p])?a[p].push(m):a[p]=[a[p],m]:a[p]=m}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],578:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(o(a))+r;return i(e[a])?n(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],579:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":577,"./encode":578}],580:[function(e,t,r){(function(r){(function(){for(var n=e("performance-now"),o="undefined"==typeof window?r:window,i=["moz","webkit"],a="AnimationFrame",s=o["request"+a],l=o["cancel"+a]||o["cancelRequest"+a],u=0;!s&&u<i.length;u++)s=o[i[u]+"Request"+a],l=o[i[u]+"Cancel"+a]||o[i[u]+"CancelRequest"+a];if(!s||!l){var c=0,d=0,f=[];s=function(e){if(0===f.length){var t=n(),r=Math.max(0,1e3/60-(t-c));c=r+t,setTimeout(function(){var e=f.slice(0);f.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(c)}catch(e){setTimeout(function(){throw e},0)}},Math.round(r))}return f.push({handle:++d,callback:e,cancelled:!1}),d},l=function(e){for(var t=0;t<f.length;t++)f[t].handle===e&&(f[t].cancelled=!0)}}t.exports=function(e){return s.call(o,e)},t.exports.cancel=function(){l.apply(o,arguments)},t.exports.polyfill=function(e){e||(e=o),e.requestAnimationFrame=s,e.cancelAnimationFrame=l}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":581}],581:[function(e,t,r){(function(e){(function(){(function(){var r,n,o,i,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:void 0!==e&&null!==e&&e.hrtime?(t.exports=function(){return(r()-a)/1e6},n=e.hrtime,r=function(){var e;return e=n(),1e9*e[0]+e[1]},i=r(),s=1e9*e.uptime(),a=i-s):Date.now?(t.exports=function(){return Date.now()-o},o=Date.now()):(t.exports=function(){return(new Date).getTime()-o},o=(new Date).getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:568}],582:[function(e,t,r){"use strict"},{"object-assign":535,react:606,scheduler:613,"scheduler/tracing":614}],583:[function(e,t,r){"use strict";function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e,t){i(e,t),i(e+"Capture",t)}function i(e,t){for(Jo[e]=t,e=0;e<t.length;e++)$o.add(t[e])}function a(e){return!!Zo.call(ei,e)||!Zo.call(Xo,e)&&(Qo.test(e)?ei[e]=!0:(Xo[e]=!0,!1))}function s(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function l(e,t,r,n){if(null===t||void 0===t||s(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function u(e,t,r,n,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}function c(e){return e[1].toUpperCase()}function d(e,t,r,n){var o=ti.hasOwnProperty(t)?ti[t]:null;(null!==o?0===o.type:!n&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(l(t,r,o,n)&&(r=null),n||null===o?a(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(o=o.type,r=3===o||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}function f(e){return null===e||"object"!=typeof e?null:(e=xi&&e[xi]||e["@@iterator"],"function"==typeof e?e:null)}function p(e){if(void 0===ji)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);ji=t&&t[1]||""}return"\n"+ji+e}function m(e,t){if(!e||Ei)return"";Ei=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var n=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){n=e}e.call(t.prototype)}else{try{throw Error()}catch(e){n=e}e()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),i=n.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s])return"\n"+o[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{Ei=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?p(e):""}function h(e){switch(e.tag){case 5:return p(e.type);case 16:return p("Lazy");case 13:return p("Suspense");case 19:return p("SuspenseList");case 0:case 2:case 15:return e=m(e.type,!1);case 11:return e=m(e.type.render,!1);case 22:return e=m(e.type._render,!1);case 1:return e=m(e.type,!0);default:return""}}function b(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ai:return"Fragment";case ii:return"Portal";case li:return"Profiler";case si:return"StrictMode";case fi:return"Suspense";case pi:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case ci:return(e.displayName||"Context")+".Consumer";case ui:return(e._context.displayName||"Context")+".Provider";case di:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case mi:return b(e.type);case bi:return b(e._render);case hi:t=e._payload,e=e._init;try{return b(e(t))}catch(e){}}return null}function v(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function g(e){var t=_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==r&&"function"==typeof r.get&&"function"==typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function y(e){e._valueTracker||(e._valueTracker=g(e))}function w(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=_(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function j(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function k(e,t){var r=t.checked;return Go({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function x(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=v(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function E(e,t){null!=(t=t.checked)&&d(e,"checked",t,!1)}function S(e,t){E(e,t);var r=v(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?I(e,t.type,r):t.hasOwnProperty("defaultValue")&&I(e,t.type,v(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function C(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,""!==r&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function I(e,t,r){"number"===t&&j(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function A(e){var t="";return Wo.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}function T(e,t){return e=Go({children:void 0},t),(t=A(t.children))&&(e.children=t),e}function D(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+v(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function M(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return Go({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function R(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(n(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(n(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:v(r)}}function O(e,t){var r=v(t.value),n=v(t.defaultValue);null!=r&&(r=""+r,r!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function P(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function L(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?L(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function N(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}function B(e,t,r){return null==t||"boolean"==typeof t||""===t?"":r||"number"!=typeof t||0===t||Ii.hasOwnProperty(e)&&Ii[e]?(""+t).trim():t+"px"}function q(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=B(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}function U(e,t){if(t){if(Ti[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(n(62))}}function F(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function H(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function z(e){if(e=Tt(e)){if("function"!=typeof Di)throw Error(n(280));var t=e.stateNode;t&&(t=Mt(t),Di(e.stateNode,e.type,t))}}function W(e){Mi?Ri?Ri.push(e):Ri=[e]:Mi=e}function G(){if(Mi){var e=Mi,t=Ri;if(Ri=Mi=null,z(e),t)for(e=0;e<t.length;e++)z(t[e])}}function K(e,t){return e(t)}function $(e,t,r,n,o){return e(t,r,n,o)}function J(){}function Y(){null===Mi&&null===Ri||(J(),G())}function Q(e,t,r){if(Li)return e(t,r);Li=!0;try{return Oi(e,t,r)}finally{Li=!1,Y()}}function Z(e,t){var r=e.stateNode;if(null===r)return null;var o=Mt(r);if(null===o)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!o;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}function X(e,t,r,n,o,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(e){this.onError(e)}}function ee(e,t,r,n,o,i,a,s,l){Hi=!1,zi=null,X.apply(Ki,arguments)}function te(e,t,r,o,i,a,s,l,u){if(ee.apply(this,arguments),Hi){if(!Hi)throw Error(n(198));var c=zi;Hi=!1,zi=null,Wi||(Wi=!0,Gi=c)}}function re(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{t=e,0!=(1026&t.flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function ne(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function oe(e){if(re(e)!==e)throw Error(n(188))}function ie(e){var t=e.alternate;if(!t){if(null===(t=re(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,o=t;;){var i=r.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(o=i.return)){r=o;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return oe(i),e;if(a===o)return oe(i),t;a=a.sibling}throw Error(n(188))}if(r.return!==o.return)r=i,o=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,o=a;break}if(l===o){s=!0,o=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,o=i;break}if(l===o){s=!0,o=a,r=i;break}l=l.sibling}if(!s)throw Error(n(189))}}if(r.alternate!==o)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}function ae(e){if(!(e=ie(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function se(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}function le(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:o,targetContainers:[n]}}function ue(e,t){switch(e){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Zi=null;break;case"pointerover":case"pointerout":Xi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(t.pointerId)}}function ce(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e=le(t,r,n,o,i),null!==t&&null!==(t=Tt(t))&&qi(t),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function de(e,t,r,n,o){switch(t){case"focusin":return Yi=ce(Yi,e,t,r,n,o),!0;case"dragenter":return Qi=ce(Qi,e,t,r,n,o),!0;case"mouseover":return Zi=ce(Zi,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return Xi.set(i,ce(Xi.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,ea.set(i,ce(ea.get(i)||null,e,t,r,n,o)),!0}return!1}function fe(e){var t=At(e.target);if(null!==t){var r=re(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=ne(r)))return e.blockedOn=t,void Fi(e.lanePriority,function(){Ko.unstable_runWithPriority(e.priority,function(){Ui(r)})})}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function pe(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Oe(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return t=Tt(r),null!==t&&qi(t),e.blockedOn=r,!1;t.shift()}return!0}function me(e,t,r){pe(e)&&r.delete(t)}function he(){for($i=!1;0<Ji.length;){var e=Ji[0];if(null!==e.blockedOn){e=Tt(e.blockedOn),null!==e&&Bi(e);break}for(var t=e.targetContainers;0<t.length;){var r=Oe(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&Ji.shift()}null!==Yi&&pe(Yi)&&(Yi=null),null!==Qi&&pe(Qi)&&(Qi=null),null!==Zi&&pe(Zi)&&(Zi=null),Xi.forEach(me),ea.forEach(me)}function be(e,t){e.blockedOn===t&&(e.blockedOn=null,$i||($i=!0,Ko.unstable_scheduleCallback(Ko.unstable_NormalPriority,he)))}function ve(e){function t(t){return be(t,e)}if(0<Ji.length){be(Ji[0],e);for(var r=1;r<Ji.length;r++){var n=Ji[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Yi&&be(Yi,e),null!==Qi&&be(Qi,e),null!==Zi&&be(Zi,e),Xi.forEach(t),ea.forEach(t),r=0;r<ta.length;r++)n=ta[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ta.length&&(r=ta[0],null===r.blockedOn);)fe(r),null===r.blockedOn&&ta.shift()}function _e(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}function ge(e){if(oa[e])return oa[e];if(!na[e])return e;var t,r=na[e];for(t in r)if(r.hasOwnProperty(t)&&t in ia)return oa[e]=r[t];return e}function ye(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),da.set(n,t),ca.set(n,i),o(i,[n])}}function we(e){if(0!=(1&e))return ba=15,1;if(0!=(2&e))return ba=14,2;if(0!=(4&e))return ba=13,4;var t=24&e;return 0!==t?(ba=12,t):0!=(32&e)?(ba=11,32):0!==(t=192&e)?(ba=10,t):0!=(256&e)?(ba=9,256):0!==(t=3584&e)?(ba=8,t):0!=(4096&e)?(ba=7,4096):0!==(t=4186112&e)?(ba=6,t):0!==(t=62914560&e)?(ba=5,t):67108864&e?(ba=4,67108864):0!=(134217728&e)?(ba=3,134217728):0!==(t=805306368&e)?(ba=2,t):0!=(1073741824&e)?(ba=1,1073741824):(ba=8,e)}function je(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function ke(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(n(358,e))}}function xe(e,t){var r=e.pendingLanes;if(0===r)return ba=0;var n=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==i)n=i,o=ba=15;else if(0!==(i=134217727&r)){var l=i&~a;0!==l?(n=we(l),o=ba):0!==(s&=i)&&(n=we(s),o=ba)}else i=r&~a,0!==i?(n=we(i),o=ba):0!==s&&(n=we(s),o=ba);if(0===n)return 0;if(n=31-va(n),n=r&((0>n?0:1<<n)<<1)-1,0!==t&&t!==n&&0==(t&a)){if(we(t),o<=ba)return t;ba=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)r=31-va(t),o=1<<r,n|=e[r],t&=~o;return n}function Ee(e){return e=-1073741825&e.pendingLanes,0!==e?e:1073741824&e?1073741824:0}function Se(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Ce(24&~t),0===e?Se(10,t):e;case 10:return e=Ce(192&~t),0===e?Se(8,t):e;case 8:return e=Ce(3584&~t),0===e&&0===(e=Ce(4186112&~t))&&(e=512),e;case 2:return t=Ce(805306368&~t),0===t&&(t=268435456),t}throw Error(n(358,e))}function Ce(e){return e&-e}function Ie(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ae(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-va(t),e[t]=r}function Te(e){return 0===e?32:31-(_a(e)/ga|0)|0}function De(e,t,r,n){Pi||J();var o=Re,i=Pi;Pi=!0;try{$(o,e,t,r,n)}finally{(Pi=i)||Y()}}function Me(e,t,r,n){wa(ya,Re.bind(null,e,t,r,n))}function Re(e,t,r,n){if(ja){var o;if((o=0==(4&t))&&0<Ji.length&&-1<ra.indexOf(e))e=le(null,e,t,r,n),Ji.push(e);else{var i=Oe(e,t,r,n);if(null===i)o&&ue(e,n);else{if(o){if(-1<ra.indexOf(e))return e=le(i,e,t,r,n),void Ji.push(e);if(de(i,e,t,r,n))return;ue(e,n)}vt(e,t,n,null,r)}}}}function Oe(e,t,r,n){var o=H(n);if(null!==(o=At(o))){var i=re(o);if(null===i)o=null;else{var a=i.tag;if(13===a){if(null!==(o=ne(i)))return o;o=null}else if(3===a){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return vt(e,t,n,o,r),null}function Pe(){if(Ea)return Ea;var e,t,r=xa,n=r.length,o="value"in ka?ka.value:ka.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===o[i-t];t++);return Ea=o.slice(e,1<t?1-t:void 0)}function Le(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ve(){return!0}function Ne(){return!1}function Be(e){function t(t,r,n,o,i){this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Ve:Ne,this.isPropagationStopped=Ne,this}return Go(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ve)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ve)},persist:function(){},isPersistent:Ve}),t}function qe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=za[e])&&!!t[e]}function Ue(){return qe}function Fe(e,t){switch(e){case"keyup":return-1!==ts.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function He(e){return e=e.detail,"object"==typeof e&&"data"in e?e.data:null}function ze(e,t){switch(e){case"compositionend":return He(t);case"keypress":return 32!==t.which?null:(ss=!0,as);case"textInput":return e=t.data,e===as&&ss?null:e;default:return null}}function We(e,t){if(ls)return"compositionend"===e||!rs&&Fe(e,t)?(e=Pe(),Ea=xa=ka=null,ls=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return is&&"ko"!==t.locale?null:t.data;default:return null}}function Ge(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!us[e.type]:"textarea"===t}function Ke(e,t,r,n){W(n),t=gt(t,"onChange"),0<t.length&&(r=new Ca("onChange","change",null,r,n),e.push({event:r,listeners:t}))}function $e(e){ft(e,0)}function Je(e){if(w(Dt(e)))return e}function Ye(e,t){if("change"===e)return t}function Qe(){cs&&(cs.detachEvent("onpropertychange",Ze),ds=cs=null)}function Ze(e){if("value"===e.propertyName&&Je(ds)){var t=[];if(Ke(t,ds,e,H(e)),e=$e,Pi)e(t);else{Pi=!0;try{K(e,t)}finally{Pi=!1,Y()}}}}function Xe(e,t,r){"focusin"===e?(Qe(),cs=t,ds=r,cs.attachEvent("onpropertychange",Ze)):"focusout"===e&&Qe()}function et(e){
if("selectionchange"===e||"keyup"===e||"keydown"===e)return Je(ds)}function tt(e,t){if("click"===e)return Je(t)}function rt(e,t){if("input"===e||"change"===e)return Je(t)}function nt(e,t){return e===t&&(0!==e||1/e==1/t)||e!==e&&t!==t}function ot(e,t){if(bs(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!vs.call(t,r[n])||!bs(e[r[n]],t[r[n]]))return!1;return!0}function it(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function at(e,t){var r=it(e);e=0;for(var n;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=it(r)}}function st(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?st(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lt(){for(var e=window,t=j();t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(e){r=!1}if(!r)break;e=t.contentWindow,t=j(e.document)}return t}function ut(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ct(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;js||null==gs||gs!==j(n)||(n=gs,"selectionStart"in n&&ut(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ws&&ot(ws,n)||(ws=n,n=gt(ys,"onSelect"),0<n.length&&(t=new Ca("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gs)))}function dt(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,te(n,t,void 0,e),e.currentTarget=null}function ft(e,t){t=0!=(4&t);for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;dt(o,s,u),i=l}else for(a=0;a<n.length;a++){if(s=n[a],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;dt(o,s,u),i=l}}}if(Wi)throw e=Gi,Wi=!1,Gi=null,e}function pt(e,t){var r=Rt(t),n=e+"__bubble";r.has(n)||(bt(t,e,2,!1),r.add(n))}function mt(e){e[Ds]||(e[Ds]=!0,$o.forEach(function(t){Ts.has(t)||ht(t,!1,e,null),ht(t,!0,e,null)}))}function ht(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=r;if("selectionchange"===e&&9!==r.nodeType&&(i=r.ownerDocument),null!==n&&!t&&Ts.has(e)){if("scroll"!==e)return;o|=2,i=n}var a=Rt(i),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(o|=4),bt(i,e,o,t),a.add(s))}function bt(e,t,r,n){var o=da.get(t);switch(void 0===o?2:o){case 0:o=De;break;case 1:o=Me;break;default:o=Re}r=o.bind(null,t,r,e),o=void 0,!Vi||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function vt(e,t,r,n,o){var i=n;if(0==(1&t)&&0==(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=n.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=At(s)))return;if(5===(l=a.tag)||6===l){n=i=a;continue e}s=s.parentNode}}n=n.return}Q(function(){var n=i,o=H(r),a=[];e:{var s=ca.get(e);if(void 0!==s){var l=Ca,u=e;switch(e){case"keypress":if(0===Le(r))break e;case"keydown":case"keyup":l=Ga;break;case"focusin":u="focus",l=Pa;break;case"focusout":u="blur",l=Pa;break;case"beforeblur":case"afterblur":l=Pa;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=Da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ya;break;case aa:case sa:case la:l=Va;break;case ua:l=Za;break;case"scroll":l=Aa;break;case"wheel":l=es;break;case"copy":case"cut":case"paste":l=Ba;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=$a}var c=0!=(4&t),d=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var p,m=n;null!==m;){p=m;var h=p.stateNode;if(5===p.tag&&null!==h&&(p=h,null!==f&&null!=(h=Z(m,f))&&c.push(_t(m,h,p))),d)break;m=m.return}0<c.length&&(s=new l(s,u,null,r,o),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(s="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,(!s||0!=(16&t)||!(u=r.relatedTarget||r.fromElement)||!At(u)&&!u[qs])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(u=r.relatedTarget||r.toElement,l=n,null!==(u=u?At(u):null)&&(d=re(u),u!==d||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(c=Da,h="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=$a,h="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==l?s:Dt(l),p=null==u?s:Dt(u),s=new c(h,m+"leave",l,r,o),s.target=d,s.relatedTarget=p,h=null,At(o)===n&&(c=new c(f,m+"enter",u,r,o),c.target=p,c.relatedTarget=d,h=c),d=h,l&&u)e:{for(c=l,f=u,m=0,p=c;p;p=yt(p))m++;for(p=0,h=f;h;h=yt(h))p++;for(;0<m-p;)c=yt(c),m--;for(;0<p-m;)f=yt(f),p--;for(;m--;){if(c===f||null!==f&&c===f.alternate)break e;c=yt(c),f=yt(f)}c=null}else c=null;null!==l&&wt(a,s,l,c,!1),null!==u&&null!==d&&wt(a,d,u,c,!0)}if(s=n?Dt(n):window,"select"===(l=s.nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var b=Ye;else if(Ge(s))if(fs)b=rt;else{b=et;var v=Xe}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(b=tt);switch(b&&(b=b(e,n))?Ke(a,b,r,o):(v&&v(e,s,n),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&I(s,"number",s.value)),v=n?Dt(n):window,e){case"focusin":(Ge(v)||"true"===v.contentEditable)&&(gs=v,ys=n,ws=null);break;case"focusout":ws=ys=gs=null;break;case"mousedown":js=!0;break;case"contextmenu":case"mouseup":case"dragend":js=!1,ct(a,r,o);break;case"selectionchange":if(_s)break;case"keydown":case"keyup":ct(a,r,o)}var _;if(rs)e:{switch(e){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else ls?Fe(e,r)&&(g="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(g="onCompositionStart");g&&(is&&"ko"!==r.locale&&(ls||"onCompositionStart"!==g?"onCompositionEnd"===g&&ls&&(_=Pe()):(ka=o,xa="value"in ka?ka.value:ka.textContent,ls=!0)),v=gt(n,g),0<v.length&&(g=new Ua(g,e,null,r,o),a.push({event:g,listeners:v}),_?g.data=_:null!==(_=He(r))&&(g.data=_))),(_=os?ze(e,r):We(e,r))&&(n=gt(n,"onBeforeInput"),0<n.length&&(o=new Ua("onBeforeInput","beforeinput",null,r,o),a.push({event:o,listeners:n}),o.data=_))}ft(a,t)})}function _t(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gt(e,t){for(var r=t+"Capture",n=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,i=Z(e,r),null!=i&&n.unshift(_t(e,i,o)),null!=(i=Z(e,t))&&n.push(_t(e,i,o))),e=e.return}return n}function yt(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function wt(e,t,r,n,o){for(var i=t._reactName,a=[];null!==r&&r!==n;){var s=r,l=s.alternate,u=s.stateNode;if(null!==l&&l===n)break;5===s.tag&&null!==u&&(s=u,o?null!=(l=Z(r,i))&&a.unshift(_t(r,l,s)):o||null!=(l=Z(r,i))&&a.push(_t(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}function jt(){}function kt(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function xt(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Et(e){1===e.nodeType?e.textContent="":9===e.nodeType&&null!=(e=e.body)&&(e.textContent="")}function St(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Ct(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}function It(e){return{$$typeof:vi,toString:e,valueOf:e}}function At(e){var t=e[Ns];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qs]||r[Ns]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=Ct(e);null!==e;){if(r=e[Ns])return r;e=Ct(e)}return t}e=r,r=e.parentNode}return null}function Tt(e){return e=e[Ns]||e[qs],!e||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Dt(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function Mt(e){return e[Bs]||null}function Rt(e){var t=e[Us];return void 0===t&&(t=e[Us]=new Set),t}function Ot(e){return{current:e}}function Pt(e){0>Hs||(e.current=Fs[Hs],Fs[Hs]=null,Hs--)}function Lt(e,t){Hs++,Fs[Hs]=e.current,e.current=t}function Vt(e,t){var r=e.type.contextTypes;if(!r)return zs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Bt(){Pt(Gs),Pt(Ws)}function qt(e,t,r){if(Ws.current!==zs)throw Error(n(168));Lt(Ws,t),Lt(Gs,r)}function Ut(e,t,r){var o=e.stateNode;if(e=t.childContextTypes,"function"!=typeof o.getChildContext)return r;o=o.getChildContext();for(var i in o)if(!(i in e))throw Error(n(108,b(t)||"Unknown",i));return Go({},r,o)}function Ft(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||zs,Ks=Ws.current,Lt(Ws,e),Lt(Gs,Gs.current),!0}function Ht(e,t,r){var o=e.stateNode;if(!o)throw Error(n(169));r?(e=Ut(e,t,Ks),o.__reactInternalMemoizedMergedChildContext=e,Pt(Gs),Pt(Ws),Lt(Ws,e)):Pt(Gs),Lt(Gs,r)}function zt(){switch(rl()){case nl:return 99;case ol:return 98;case il:return 97;case al:return 96;case sl:return 95;default:throw Error(n(332))}}function Wt(e){switch(e){case 99:return nl;case 98:return ol;case 97:return il;case 96:return al;case 95:return sl;default:throw Error(n(332))}}function Gt(e,t){return e=Wt(e),Ys(e,t)}function Kt(e,t,r){return e=Wt(e),Qs(e,t,r)}function $t(){if(null!==dl){var e=dl;dl=null,Zs(e)}Jt()}function Jt(){if(!fl&&null!==cl){fl=!0;var e=0;try{var t=cl;Gt(99,function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}}),cl=null}catch(t){throw null!==cl&&(cl=cl.slice(e+1)),Qs(nl,$t),t}finally{fl=!1}}}function Yt(e,t){if(e&&e.defaultProps){t=Go({},t),e=e.defaultProps;for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}return t}function Qt(){gl=_l=vl=null}function Zt(e){var t=bl.current;Pt(bl),e.type._context._currentValue=t}function Xt(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function er(e,t){vl=e,gl=_l=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&($l=!0),e.firstContext=null)}function tr(e,t){if(gl!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(gl=e,t=1073741823),t={context:e,observedBits:t,next:null},null===_l){if(null===vl)throw Error(n(308));_l=t,vl.dependencies={lanes:0,firstContext:t,responders:null}}else _l=_l.next=t;return e._currentValue}function rr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function nr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ir(e,t){if(null!==(e=e.updateQueue)){e=e.shared;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ar(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&(n=n.updateQueue,r===n)){var o=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?o=i=a:i=i.next=a,r=r.next}while(null!==r);null===i?o=i=t:i=i.next=t}else o=i=t;return r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}e=r.lastBaseUpdate,null===e?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function sr(e,t,r,n){var o=e.updateQueue;yl=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?i=u:a.next=u,a=l;var c=e.alternate;if(null!==c){c=c.updateQueue;var d=c.lastBaseUpdate;d!==a&&(null===d?c.firstBaseUpdate=u:d.next=u,c.lastBaseUpdate=l)}}if(null!==i){for(d=o.baseState,a=0,c=u=l=null;;){s=i.lane;var f=i.eventTime;if((n&s)===s){null!==c&&(c=c.next={eventTime:f,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var p=e,m=i;switch(s=t,f=r,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,s);break e}d=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(p=m.payload,null===(s="function"==typeof p?p.call(f,d,s):p)||void 0===s)break e;d=Go({},d,s);break e;case 2:yl=!0}}null!==i.callback&&(e.flags|=32,s=o.effects,null===s?o.effects=[i]:s.push(i))}else f={eventTime:f,lane:s,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,a|=s;if(null===(i=i.next)){if(null===(s=o.shared.pending))break;i=s.next,s.next=null,o.lastBaseUpdate=s,o.shared.pending=null}}null===c&&(l=d),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,du|=a,e.lanes=a,e.memoizedState=d}}function lr(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var o=e[t],i=o.callback;if(null!==i){if(o.callback=null,o=r,"function"!=typeof i)throw Error(n(191,i));i.call(o)}}}function ur(e,t,r,n){t=e.memoizedState,r=r(n,t),r=null===r||void 0===r?t:Go({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}function cr(e,t,r,n,o,i,a){return e=e.stateNode,"function"==typeof e.shouldComponentUpdate?e.shouldComponentUpdate(n,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!ot(r,n)||!ot(o,i))}function dr(e,t,r){var n=!1,o=zs,i=t.contextType;return"object"==typeof i&&null!==i?i=tr(i):(o=Nt(t)?Ks:Ws.current,n=t.contextTypes,i=(n=null!==n&&void 0!==n)?Vt(e,o):zs),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=jl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function fr(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&jl.enqueueReplaceState(t,t.state,null)}function pr(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=wl,rr(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=tr(i):(i=Nt(t)?Ks:Ws.current,o.context=Vt(e,i)),sr(e,r,o,n),o.state=e.memoizedState,i=t.getDerivedStateFromProps,"function"==typeof i&&(ur(e,t,i,r),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&jl.enqueueReplaceState(o,o.state,null),sr(e,r,o,n),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}function mr(e,t,r){if(null!==(e=r.ref)&&"function"!=typeof e&&"object"!=typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(n(309));var o=r.stateNode}if(!o)throw Error(n(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=o.refs;t===wl&&(t=o.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!=typeof e)throw Error(n(284));if(!r._owner)throw Error(n(290,e))}return e}function hr(e,t){if("textarea"!==e.type)throw Error(n(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function br(e){function t(t,r){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function o(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return e=Co(e,t),e.index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index,n<r?(t.flags=2,r):n):(t.flags=2,r):r}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,r,n){return null===t||6!==t.tag?(t=Do(r,e.mode,n),t.return=e,t):(t=i(t,r),t.return=e,t)}function u(e,t,r,n){return null!==t&&t.elementType===r.type?(n=i(t,r.props),n.ref=mr(e,t,r),n.return=e,n):(n=Io(r.type,r.key,r.props,null,e.mode,n),n.ref=mr(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=Mo(r,e.mode,n),t.return=e,t):(t=i(t,r.children||[]),t.return=e,t)}function d(e,t,r,n,o){return null===t||7!==t.tag?(t=Ao(r,e.mode,n,o),t.return=e,t):(t=i(t,r),t.return=e,t)}function p(e,t,r){if("string"==typeof t||"number"==typeof t)return t=Do(""+t,e.mode,r),t.return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case oi:return r=Io(t.type,t.key,t.props,null,e.mode,r),r.ref=mr(e,null,t),r.return=e,r;case ii:return t=Mo(t,e.mode,r),t.return=e,t}if(kl(t)||f(t))return t=Ao(t,e.mode,r,null),t.return=e,t;hr(e,t)}return null}function m(e,t,r,n){var o=null!==t?t.key:null;if("string"==typeof r||"number"==typeof r)return null!==o?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case oi:return r.key===o?r.type===ai?d(e,t,r.props.children,n,o):u(e,t,r,n):null;case ii:return r.key===o?c(e,t,r,n):null}if(kl(r)||f(r))return null!==o?null:d(e,t,r,n,null);hr(e,r)}return null}function h(e,t,r,n,o){if("string"==typeof n||"number"==typeof n)return e=e.get(r)||null,l(t,e,""+n,o);if("object"==typeof n&&null!==n){switch(n.$$typeof){case oi:return e=e.get(null===n.key?r:n.key)||null,n.type===ai?d(t,e,n.props.children,o,n.key):u(t,e,n,o);case ii:return e=e.get(null===n.key?r:n.key)||null,c(t,e,n,o)}if(kl(n)||f(n))return e=e.get(r)||null,d(t,e,n,o,null);hr(t,n)}return null}function v(n,i,s,l){for(var u=null,c=null,d=i,f=i=0,b=null;null!==d&&f<s.length;f++){d.index>f?(b=d,d=null):b=d.sibling;var v=m(n,d,s[f],l);if(null===v){null===d&&(d=b);break}e&&d&&null===v.alternate&&t(n,d),i=a(v,i,f),null===c?u=v:c.sibling=v,c=v,d=b}if(f===s.length)return r(n,d),u;if(null===d){for(;f<s.length;f++)null!==(d=p(n,s[f],l))&&(i=a(d,i,f),null===c?u=d:c.sibling=d,c=d);return u}for(d=o(n,d);f<s.length;f++)null!==(b=h(d,n,f,s[f],l))&&(e&&null!==b.alternate&&d.delete(null===b.key?f:b.key),i=a(b,i,f),null===c?u=b:c.sibling=b,c=b);return e&&d.forEach(function(e){return t(n,e)}),u}function _(i,s,l,u){var c=f(l);if("function"!=typeof c)throw Error(n(150));if(null==(l=c.call(l)))throw Error(n(151));for(var d=c=null,b=s,v=s=0,_=null,g=l.next();null!==b&&!g.done;v++,g=l.next()){b.index>v?(_=b,b=null):_=b.sibling;var y=m(i,b,g.value,u);if(null===y){null===b&&(b=_);break}e&&b&&null===y.alternate&&t(i,b),s=a(y,s,v),null===d?c=y:d.sibling=y,d=y,b=_}if(g.done)return r(i,b),c;if(null===b){for(;!g.done;v++,g=l.next())null!==(g=p(i,g.value,u))&&(s=a(g,s,v),null===d?c=g:d.sibling=g,d=g);return c}for(b=o(i,b);!g.done;v++,g=l.next())null!==(g=h(b,i,v,g.value,u))&&(e&&null!==g.alternate&&b.delete(null===g.key?v:g.key),s=a(g,s,v),null===d?c=g:d.sibling=g,d=g);return e&&b.forEach(function(e){return t(i,e)}),c}return function(e,o,a,l){var u="object"==typeof a&&null!==a&&a.type===ai&&null===a.key;u&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case oi:e:{for(c=a.key,u=o;null!==u;){if(u.key===c){switch(u.tag){case 7:if(a.type===ai){r(e,u.sibling),o=i(u,a.props.children),o.return=e,e=o;break e}break;default:if(u.elementType===a.type){r(e,u.sibling),o=i(u,a.props),o.ref=mr(e,u,a),o.return=e,e=o;break e}}r(e,u);break}t(e,u),u=u.sibling}a.type===ai?(o=Ao(a.props.children,e.mode,l,a.key),o.return=e,e=o):(l=Io(a.type,a.key,a.props,null,e.mode,l),l.ref=mr(e,o,a),l.return=e,e=l)}return s(e);case ii:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(e,o.sibling),o=i(o,a.children||[]),o.return=e,e=o;break e}r(e,o);break}t(e,o),o=o.sibling}o=Mo(a,e.mode,l),o.return=e,e=o}return s(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==o&&6===o.tag?(r(e,o.sibling),o=i(o,a),o.return=e,e=o):(r(e,o),o=Do(a,e.mode,l),o.return=e,e=o),s(e);if(kl(a))return v(e,o,a,l);if(f(a))return _(e,o,a,l);if(c&&hr(e,a),void 0===a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(n(152,b(e.type)||"Component"))}return r(e,o)}}function vr(e){if(e===Sl)throw Error(n(174));return e}function _r(e,t){switch(Lt(Al,t),Lt(Il,e),Lt(Cl,Sl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:V(null,"");break;default:e=8===e?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=V(t,e)}Pt(Cl),Lt(Cl,t)}function gr(){Pt(Cl),Pt(Il),Pt(Al)}function yr(e){vr(Al.current);var t=vr(Cl.current),r=V(t,e.type);t!==r&&(Lt(Il,e),Lt(Cl,r))}function wr(e){Il.current===e&&(Pt(Cl),Pt(Il))}function jr(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function kr(e,t){var r=xo(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function xr(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Er(e){if(Rl){var t=Ml;if(t){var r=t;if(!xr(e,t)){if(!(t=St(r.nextSibling))||!xr(e,t))return e.flags=-1025&e.flags|2,Rl=!1,void(Dl=e);kr(Dl,r)}Dl=e,Ml=St(t.firstChild)}else e.flags=-1025&e.flags|2,Rl=!1,Dl=e}}function Sr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Dl=e}function Cr(e){if(e!==Dl)return!1;if(!Rl)return Sr(e),Rl=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!xt(t,e.memoizedProps))for(t=Ml;t;)kr(e,t),t=St(t.nextSibling);if(Sr(e),13===e.tag){if(e=e.memoizedState,!(e=null!==e?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){Ml=St(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}Ml=null}}else Ml=Dl?St(e.stateNode.nextSibling):null;return!0}function Ir(){Ml=Dl=null,Rl=!1}function Ar(){for(var e=0;e<Ol.length;e++)Ol[e]._workInProgressVersionPrimary=null;Ol.length=0}function Tr(){throw Error(n(321))}function Dr(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!bs(e[r],t[r]))return!1;return!0}function Mr(e,t,r,o,i,a){if(Vl=a,Nl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pl.current=null===e||null===e.memoizedState?zl:Wl,e=r(o,i),Fl){a=0;do{if(Fl=!1,!(25>a))throw Error(n(301));a+=1,ql=Bl=null,t.updateQueue=null,Pl.current=Gl,e=r(o,i)}while(Fl)}if(Pl.current=Hl,t=null!==Bl&&null!==Bl.next,Vl=0,ql=Bl=Nl=null,Ul=!1,t)throw Error(n(300));return e}function Rr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ql?Nl.memoizedState=ql=e:ql=ql.next=e,ql}function Or(){if(null===Bl){var e=Nl.alternate;e=null!==e?e.memoizedState:null}else e=Bl.next;var t=null===ql?Nl.memoizedState:ql.next;if(null!==t)ql=t,Bl=e;else{if(null===e)throw Error(n(310));Bl=e,e={memoizedState:Bl.memoizedState,baseState:Bl.baseState,baseQueue:Bl.baseQueue,queue:Bl.queue,next:null},null===ql?Nl.memoizedState=ql=e:ql=ql.next=e}return ql}function Pr(e,t){return"function"==typeof t?t(e):t}function Lr(e){var t=Or(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var o=Bl,i=o.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}o.baseQueue=i=a,r.pending=null}if(null!==i){i=i.next,o=o.baseState;var l=s=a=null,u=i;do{var c=u.lane;if((Vl&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),o=u.eagerReducer===e?u.eagerState:e(o,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,a=o):l=l.next=d,Nl.lanes|=c,du|=c}u=u.next}while(null!==u&&u!==i);null===l?a=o:l.next=s,bs(o,t.memoizedState)||($l=!0),t.memoizedState=o,t.baseState=a,t.baseQueue=l,r.lastRenderedState=o}return[t.memoizedState,r.dispatch]}function Vr(e){var t=Or(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var o=r.dispatch,i=r.pending,a=t.memoizedState;if(null!==i){r.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);bs(a,t.memoizedState)||($l=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,o]}function Nr(e,t,r){var o=t._getVersion;o=o(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===o:(e=e.mutableReadLanes,(e=(Vl&e)===e)&&(t._workInProgressVersionPrimary=o,Ol.push(t))),e)return r(t._source);throw Ol.push(t),Error(n(350))}function Br(e,t,r,o){var i=nu;if(null===i)throw Error(n(349));var a=t._getVersion,s=a(t._source),l=Pl.current,u=l.useState(function(){return Nr(i,t,r)}),c=u[1],d=u[0];u=ql;var f=e.memoizedState,p=f.refs,m=p.getSnapshot,h=f.source;f=f.subscribe;var b=Nl;return e.memoizedState={refs:p,source:t,subscribe:o},l.useEffect(function(){p.getSnapshot=r,p.setSnapshot=c;var e=a(t._source);if(!bs(s,e)){e=r(t._source),bs(d,e)||(c(e),e=Wn(b),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var n=i.entanglements,o=e;0<o;){var l=31-va(o),u=1<<l;n[l]|=e,o&=~u}}},[r,t,o]),l.useEffect(function(){return o(t._source,function(){var e=p.getSnapshot,r=p.setSnapshot;try{r(e(t._source));var n=Wn(b);i.mutableReadLanes|=n&i.pendingLanes}catch(e){r(function(){throw e})}})},[t,o]),bs(m,r)&&bs(h,t)&&bs(f,o)||(e={pending:null,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:d},e.dispatch=c=rn.bind(null,Nl,e),u.queue=e,u.baseQueue=null,d=Nr(i,t,r),u.memoizedState=u.baseState=d),d}function qr(e,t,r){return Br(Or(),e,t,r)}function Ur(e){var t=Rr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Pr,lastRenderedState:e},e=e.dispatch=rn.bind(null,Nl,e),[t.memoizedState,e]}function Fr(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Nl.updateQueue,null===t?(t={lastEffect:null},Nl.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,null===r?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Hr(e){var t=Rr();return e={current:e},t.memoizedState=e}function zr(){return Or().memoizedState}function Wr(e,t,r,n){var o=Rr();Nl.flags|=e,o.memoizedState=Fr(1|t,r,void 0,void 0===n?null:n)}function Gr(e,t,r,n){var o=Or();n=void 0===n?null:n;var i=void 0;if(null!==Bl){var a=Bl.memoizedState;if(i=a.destroy,null!==n&&Dr(n,a.deps))return void Fr(t,r,i,n)}Nl.flags|=e,o.memoizedState=Fr(1|t,r,i,n)}function Kr(e,t){return Wr(516,4,e,t)}function $r(e,t){return Gr(516,4,e,t)}function Jr(e,t){return Gr(4,2,e,t)}function Yr(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qr(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Gr(4,2,Yr.bind(null,t,e),r)}function Zr(){}function Xr(e,t){var r=Or();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Dr(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function en(e,t){var r=Or();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&Dr(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function tn(e,t){var r=zt();Gt(98>r?98:r,function(){e(!0)}),Gt(97<r?97:r,function(){var r=Ll.transition;Ll.transition=1;try{e(!1),t()}finally{Ll.transition=r}})}function rn(e,t,r){var n=zn(),o=Wn(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Nl||null!==a&&a===Nl)Fl=Ul=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=a(s,r);if(i.eagerReducer=a,i.eagerState=l,bs(l,s))return}catch(e){}Gn(e,o,n)}}function nn(e,t,r,n){t.child=null===e?El(t,null,r,n):xl(t,e.child,r,n)}function on(e,t,r,n,o){r=r.render;var i=t.ref;return er(t,o),n=Mr(e,t,r,n,i,o),null===e||$l?(t.flags|=1,nn(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,wn(e,t,o))}function an(e,t,r,n,o,i){if(null===e){var a=r.type;return"function"!=typeof a||Eo(a)||void 0!==a.defaultProps||null!==r.compare||void 0!==r.defaultProps?(e=Io(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,sn(e,t,a,n,o,i))}return a=e.child,0==(o&i)&&(o=a.memoizedProps,r=r.compare,(r=null!==r?r:ot)(o,n)&&e.ref===t.ref)?wn(e,t,i):(t.flags|=1,e=Co(a,n),e.ref=t.ref,e.return=t,t.child=e)}function sn(e,t,r,n,o,i){if(null!==e&&ot(e.memoizedProps,n)&&e.ref===t.ref){if($l=!1,0==(i&o))return t.lanes=e.lanes,wn(e,t,i);0!=(16384&e.flags)&&($l=!0)}return cn(e,t,r,n,i)}function ln(e,t,r){var n=t.pendingProps,o=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode||"unstable-defer-without-hiding"===n.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},to(t,r);else{if(0==(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},to(t,e),null;t.memoizedState={baseLanes:0},to(t,null!==i?i.baseLanes:r)}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,to(t,n);return nn(e,t,o,r),t.child}function un(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function cn(e,t,r,n,o){var i=Nt(r)?Ks:Ws.current;return i=Vt(t,i),er(t,o),r=Mr(e,t,r,n,i,o),null===e||$l?(t.flags|=1,nn(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,wn(e,t,o))}function dn(e,t,r,n,o){if(Nt(r)){var i=!0;Ft(t)}else i=!1;if(er(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),dr(t,r,n),pr(t,r,n,o),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=r.contextType;"object"==typeof u&&null!==u?u=tr(u):(u=Nt(r)?Ks:Ws.current,u=Vt(t,u));var c=r.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==n||l!==u)&&fr(t,a,n,u),yl=!1;var f=t.memoizedState;a.state=f,sr(t,n,a,o),l=t.memoizedState,
s!==n||f!==l||Gs.current||yl?("function"==typeof c&&(ur(t,r,c,n),l=t.memoizedState),(s=yl||cr(t,r,s,n,f,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=l),a.props=n,a.state=l,a.context=u,n=s):("function"==typeof a.componentDidMount&&(t.flags|=4),n=!1)}else{a=t.stateNode,nr(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:Yt(t.type,s),a.props=u,d=t.pendingProps,f=a.context,l=r.contextType,"object"==typeof l&&null!==l?l=tr(l):(l=Nt(r)?Ks:Ws.current,l=Vt(t,l));var p=r.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||f!==l)&&fr(t,a,n,l),yl=!1,f=t.memoizedState,a.state=f,sr(t,n,a,o);var m=t.memoizedState;s!==d||f!==m||Gs.current||yl?("function"==typeof p&&(ur(t,r,p,n),m=t.memoizedState),(u=yl||cr(t,r,u,n,f,m,l))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,m,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,m,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=l,n=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),n=!1)}return fn(e,t,r,n,i,o)}function fn(e,t,r,n,o,i){un(e,t);var a=0!=(64&t.flags);if(!n&&!a)return o&&Ht(t,r,!1),wn(e,t,i);n=t.stateNode,Kl.current=t;var s=a&&"function"!=typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=xl(t,e.child,null,i),t.child=xl(t,null,s,i)):nn(e,t,s,i),t.memoizedState=n.state,o&&Ht(t,r,!0),t.child}function pn(e){var t=e.stateNode;t.pendingContext?qt(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qt(e,t.context,!1),_r(e,t.containerInfo)}function mn(e,t,r){var n,o=t.pendingProps,i=Tl.current,a=!1;return(n=0!=(64&t.flags))||(n=(null===e||null!==e.memoizedState)&&0!=(2&i)),n?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(i|=1),Lt(Tl,1&i),null===e?(void 0!==o.fallback&&Er(t),e=o.children,i=o.fallback,a?(e=hn(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Jl,e):"number"==typeof o.unstable_expectedLoadTime?(e=hn(t,e,i,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Jl,t.lanes=33554432,e):(r=To({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):(e.memoizedState,a?(o=vn(e,t,o.children,o.fallback,r),a=t.child,i=e.child.memoizedState,a.memoizedState=null===i?{baseLanes:r}:{baseLanes:i.baseLanes|r},a.childLanes=e.childLanes&~r,t.memoizedState=Jl,o):(r=bn(e,t,o.children,r),t.memoizedState=null,r))}function hn(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=To(t,o,0,null),r=Ao(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function bn(e,t,r,n){var o=e.child;return e=o.sibling,r=Co(o,{mode:"visible",children:r}),0==(2&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function vn(e,t,r,n,o){var i=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:r};return 0==(2&i)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=s,a=r.lastEffect,null!==a?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Co(a,s),null!==e?n=Co(e,n):(n=Ao(n,i,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function _n(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xt(e.return,t)}function gn(e,t,r,n,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o,a.lastEffect=i)}function yn(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(nn(e,t,n.children,r),0!=(2&(n=Tl.current)))n=1&n|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_n(e,r);else if(19===e.tag)_n(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Lt(Tl,n),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)e=r.alternate,null!==e&&null===jr(e)&&(o=r),r=r.sibling;r=o,null===r?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),gn(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===jr(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}gn(t,!0,r,null,i,t.lastEffect);break;case"together":gn(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function wn(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),du|=t.lanes,0!=(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(e=t.child,r=Co(e,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,r=r.sibling=Co(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}function jn(e,t){if(!Rl)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function kn(e,t,r){var o=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Nt(t.type)&&Bt(),null;case 3:return gr(),Pt(Gs),Pt(Ws),Ar(),o=t.stateNode,o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),null!==e&&null!==e.child||(Cr(t)?t.flags|=4:o.hydrate||(t.flags|=256)),Ss(t),null;case 5:wr(t);var i=vr(Al.current);if(r=t.type,null!==e&&null!=t.stateNode)Cs(e,t,r,o,i),e.ref!==t.ref&&(t.flags|=128);else{if(!o){if(null===t.stateNode)throw Error(n(166));return null}if(e=vr(Cl.current),Cr(t)){o=t.stateNode,r=t.type;var a=t.memoizedProps;switch(o[Ns]=t,o[Bs]=a,r){case"dialog":pt("cancel",o),pt("close",o);break;case"iframe":case"object":case"embed":pt("load",o);break;case"video":case"audio":for(e=0;e<As.length;e++)pt(As[e],o);break;case"source":pt("error",o);break;case"img":case"image":case"link":pt("error",o),pt("load",o);break;case"details":pt("toggle",o);break;case"input":x(o,a),pt("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!a.multiple},pt("invalid",o);break;case"textarea":R(o,a),pt("invalid",o)}U(r,a),e=null;for(var s in a)a.hasOwnProperty(s)&&(i=a[s],"children"===s?"string"==typeof i?o.textContent!==i&&(e=["children",i]):"number"==typeof i&&o.textContent!==""+i&&(e=["children",""+i]):Jo.hasOwnProperty(s)&&null!=i&&"onScroll"===s&&pt("scroll",o));switch(r){case"input":y(o),C(o,a,!0);break;case"textarea":y(o),P(o);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(o.onclick=jt)}o=e,t.updateQueue=o,null!==o&&(t.flags|=4)}else{switch(s=9===i.nodeType?i:i.ownerDocument,e===Si.html&&(e=L(r)),e===Si.html?"script"===r?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof o.is?e=s.createElement(r,{is:o.is}):(e=s.createElement(r),"select"===r&&(s=e,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):e=s.createElementNS(e,r),e[Ns]=t,e[Bs]=o,Es(e,t,!1,!1),t.stateNode=e,s=F(r,o),r){case"dialog":pt("cancel",e),pt("close",e),i=o;break;case"iframe":case"object":case"embed":pt("load",e),i=o;break;case"video":case"audio":for(i=0;i<As.length;i++)pt(As[i],e);i=o;break;case"source":pt("error",e),i=o;break;case"img":case"image":case"link":pt("error",e),pt("load",e),i=o;break;case"details":pt("toggle",e),i=o;break;case"input":x(e,o),i=k(e,o),pt("invalid",e);break;case"option":i=T(e,o);break;case"select":e._wrapperState={wasMultiple:!!o.multiple},i=Go({},o,{value:void 0}),pt("invalid",e);break;case"textarea":R(e,o),i=M(e,o),pt("invalid",e);break;default:i=o}U(r,i);var l=i;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?q(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&Ci(e,u):"children"===a?"string"==typeof u?("textarea"!==r||""!==u)&&N(e,u):"number"==typeof u&&N(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(Jo.hasOwnProperty(a)?null!=u&&"onScroll"===a&&pt("scroll",e):null!=u&&d(e,a,u,s))}switch(r){case"input":y(e),C(e,o,!1);break;case"textarea":y(e),P(e);break;case"option":null!=o.value&&e.setAttribute("value",""+v(o.value));break;case"select":e.multiple=!!o.multiple,a=o.value,null!=a?D(e,!!o.multiple,a,!1):null!=o.defaultValue&&D(e,!!o.multiple,o.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=jt)}kt(r,o)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Is(e,t,e.memoizedProps,o);else{if("string"!=typeof o&&null===t.stateNode)throw Error(n(166));r=vr(Al.current),vr(Cl.current),Cr(t)?(o=t.stateNode,r=t.memoizedProps,o[Ns]=t,o.nodeValue!==r&&(t.flags|=4)):(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o),o[Ns]=t,t.stateNode=o)}return null;case 13:return Pt(Tl),(o=t.memoizedState,0!=(64&t.flags))?(t.lanes=r,t):(o=null!==o,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Cr(t):r=null!==e.memoizedState,o&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Tl.current)?0===lu&&(lu=3):(0!==lu&&3!==lu||(lu=4),null===nu||0==(134217727&du)&&0==(134217727&fu)||Yn(nu,iu))),(o||r)&&(t.flags|=4),null);case 4:return gr(),Ss(t),null===e&&mt(t.stateNode.containerInfo),null;case 10:return Zt(t),null;case 17:return Nt(t.type)&&Bt(),null;case 19:if(Pt(Tl),null===(o=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(s=o.rendering))if(a)jn(o,!1);else{if(0!==lu||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(s=jr(e))){for(t.flags|=64,jn(o,!1),a=s.updateQueue,null!==a&&(t.updateQueue=a,t.flags|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,r=t.child;null!==r;)a=r,e=o,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,s=a.alternate,null===s?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Lt(Tl,1&Tl.current|2),t.child}e=e.sibling}null!==o.tail&&ml()>bu&&(t.flags|=64,a=!0,jn(o,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=jr(s))){if(t.flags|=64,a=!0,r=e.updateQueue,null!==r&&(t.updateQueue=r,t.flags|=4),jn(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Rl)return t=t.lastEffect=o.lastEffect,null!==t&&(t.nextEffect=null),null}else 2*ml()-o.renderingStartTime>bu&&1073741824!==r&&(t.flags|=64,a=!0,jn(o,!1),t.lanes=33554432);o.isBackwards?(s.sibling=t.child,t.child=s):(r=o.last,null!==r?r.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,o.renderingStartTime=ml(),r.sibling=null,t=Tl.current,Lt(Tl,a?1&t|2:1&t),r):null;case 23:case 24:return ro(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==o.mode&&(t.flags|=4),null}throw Error(n(156,t.tag))}function xn(e){switch(e.tag){case 1:Nt(e.type)&&Bt();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(gr(),Pt(Gs),Pt(Ws),Ar(),0!=(64&(t=e.flags)))throw Error(n(285));return e.flags=-4097&t|64,e;case 5:return wr(e),null;case 13:return Pt(Tl),t=e.flags,4096&t?(e.flags=-4097&t|64,e):null;case 19:return Pt(Tl),null;case 4:return gr(),null;case 10:return Zt(e),null;case 23:case 24:return ro(),null;default:return null}}function En(e,t){try{var r="",n=t;do{r+=h(n),n=n.return}while(n);var o=r}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function Sn(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}function Cn(e,t,r){r=or(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){_u||(_u=!0,gu=n),Sn(e,t)},r}function In(e,t,r){r=or(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var o=t.value;r.payload=function(){return Sn(e,t),n(o)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(r.callback=function(){"function"!=typeof n&&(null===yu?yu=new Set([this]):yu.add(this),Sn(e,t));var r=t.stack;this.componentDidCatch(t.value,{componentStack:null!==r?r:""})}),r}function An(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){yo(e,t)}else t.current=null}function Tn(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,o=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Yt(t.type,r),o),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Et(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(n(163))}function Dn(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,null!==(t=null!==t?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var o=e.create;e.destroy=o()}e=e.next}while(e!==t)}if(t=r.updateQueue,null!==(t=null!==t?t.lastEffect:null)){e=t=t.next;do{var i=e;o=i.next,i=i.tag,0!=(4&i)&&0!=(1&i)&&(vo(r,e),bo(r,e)),e=o}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(o=r.elementType===r.type?t.memoizedProps:Yt(r.type,t.memoizedProps),e.componentDidUpdate(o,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&lr(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}lr(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&kt(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&null!==(r=r.alternate)&&null!==(r=r.memoizedState)&&null!==(r=r.dehydrated)&&ve(r));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(n(163))}function Mn(e,t){for(var r=e;;){if(5===r.tag){var n=r.stateNode;if(t)n=n.style,"function"==typeof n.setProperty?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=void 0!==o&&null!==o&&o.hasOwnProperty("display")?o.display:null,n.style.display=B("display",o)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function Rn(e,t){if(Js&&"function"==typeof Js.onCommitFiberUnmount)try{Js.onCommitFiberUnmount($s,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,void 0!==o)if(0!=(4&n))vo(t,r);else{n=t;try{o()}catch(e){yo(n,e)}}r=r.next}while(r!==e)}break;case 1:if(An(t),e=t.stateNode,"function"==typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){yo(t,e)}break;case 5:An(t);break;case 4:Bn(e,t)}}function On(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Pn(e){return 5===e.tag||3===e.tag||4===e.tag}function Ln(e){e:{for(var t=e.return;null!==t;){if(Pn(t))break e;t=t.return}throw Error(n(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var o=!1;break;case 3:case 4:t=t.containerInfo,o=!0;break;default:throw Error(n(161))}16&r.flags&&(N(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||Pn(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}o?Vn(e,r,t):Nn(e,r,t)}function Vn(e,t,r){var n=e.tag,o=5===n||6===n;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=jt));else if(4!==n&&null!==(e=e.child))for(Vn(e,t,r),e=e.sibling;null!==e;)Vn(e,t,r),e=e.sibling}function Nn(e,t,r){var n=e.tag,o=5===n||6===n;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(Nn(e,t,r),e=e.sibling;null!==e;)Nn(e,t,r),e=e.sibling}function Bn(e,t){for(var r,o,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(n(160));switch(r=a.stateNode,a.tag){case 5:o=!1;break e;case 3:case 4:r=r.containerInfo,o=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,l=i,u=l;;)if(Rn(s,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===l)break e;for(;null===u.sibling;){if(null===u.return||u.return===l)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}o?(s=r,l=i.stateNode,8===s.nodeType?s.parentNode.removeChild(l):s.removeChild(l)):r.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){r=i.stateNode.containerInfo,o=!0,i.child.return=i,i=i.child;continue}}else if(Rn(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return,4===i.tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function qn(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{3==(3&o.tag)&&(e=o.destroy,o.destroy=void 0,void 0!==e&&e()),o=o.next}while(o!==r)}return;case 1:return;case 5:if(null!=(r=t.stateNode)){o=t.memoizedProps;var i=null!==e?e.memoizedProps:o;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(r[Bs]=o,"input"===e&&"radio"===o.type&&null!=o.name&&E(r,o),F(e,i),t=F(e,o),i=0;i<a.length;i+=2){var s=a[i],l=a[i+1];"style"===s?q(r,l):"dangerouslySetInnerHTML"===s?Ci(r,l):"children"===s?N(r,l):d(r,s,l,t)}switch(e){case"input":S(r,o);break;case"textarea":O(r,o);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!o.multiple,a=o.value,null!=a?D(r,!!o.multiple,a,!1):e!==!!o.multiple&&(null!=o.defaultValue?D(r,!!o.multiple,o.defaultValue,!0):D(r,!!o.multiple,o.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(n(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return r=t.stateNode,void(r.hydrate&&(r.hydrate=!1,ve(r.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(hu=ml(),Mn(t.child,!0)),void Un(t);case 19:return void Un(t);case 17:return;case 23:case 24:return void Mn(t,null!==t.memoizedState)}throw Error(n(163))}function Un(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zl),t.forEach(function(t){var n=jo.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function Fn(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}function Hn(){bu=ml()+500}function zn(){return 0!=(48&ru)?ml():-1!==Au?Au:Au=ml()}function Wn(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===zt()?1:2;if(0===Tu&&(Tu=cu),0!==hl.transition){0!==Du&&(Du=null!==mu?mu.pendingLanes:0),e=Tu;var t=4186112&~Du;return t&=-t,0===t&&(e=4186112&~e,0===(t=e&-e)&&(t=8192)),t}return e=zt(),0!=(4&ru)&&98===e?e=Se(12,Tu):(e=je(e),e=Se(e,Tu)),e}function Gn(e,t,r){if(50<Cu)throw Cu=0,Iu=null,Error(n(185));if(null===(e=Kn(e,t)))return null;Ae(e,t,r),e===nu&&(fu|=t,4===lu&&Yn(e,iu));var o=zt();1===t?0!=(8&ru)&&0==(48&ru)?Qn(e):($n(e,r),0===ru&&(Hn(),$t())):(0==(4&ru)||98!==o&&99!==o||(null===Su?Su=new Set([e]):Su.add(e)),$n(e,r)),mu=e}function Kn(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,r=e.alternate,null!==r&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function $n(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-va(a),l=1<<s,u=i[s];if(-1===u){if(0==(l&n)||0!=(l&o)){u=t,we(l);var c=ba;i[s]=10<=c?u+250:6<=c?u+5e3:-1}}else u<=t&&(e.expiredLanes|=l);a&=~l}if(n=xe(e,e===nu?iu:0),t=ba,0===n)null!==r&&(r!==ll&&Zs(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==ll&&Zs(r)}15===t?(r=Qn.bind(null,e),null===cl?(cl=[r],dl=Qs(nl,Jt)):cl.push(r),r=ll):14===t?r=Kt(99,Qn.bind(null,e)):(r=ke(t),r=Kt(r,Jn.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function Jn(e){if(Au=-1,Du=Tu=0,0!=(48&ru))throw Error(n(327));var t=e.callbackNode;if(ho()&&e.callbackNode!==t)return null;var r=xe(e,e===nu?iu:0);if(0===r)return null;var o=r,i=ru;ru|=16;var a=io();for(nu===e&&iu===o||(Hn(),no(e,o));;)try{lo();break}catch(t){oo(e,t)}if(Qt(),eu.current=a,ru=i,null!==ou?o=0:(nu=null,iu=0,o=lu),0!=(cu&fu))no(e,0);else if(0!==o){if(2===o&&(ru|=64,e.hydrate&&(e.hydrate=!1,Et(e.containerInfo)),0!==(r=Ee(e))&&(o=ao(e,r))),1===o)throw t=uu,no(e,0),Yn(e,r),$n(e,ml()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,o){case 0:case 1:throw Error(n(345));case 2:fo(e);break;case 3:if(Yn(e,r),(62914560&r)===r&&10<(o=hu+500-ml())){if(0!==xe(e,0))break;if(((i=e.suspendedLanes)&r)!==r){zn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Os(fo.bind(null,e),o);break}fo(e);break;case 4:if(Yn(e,r),(4186112&r)===r)break;for(o=e.eventTimes,i=-1;0<r;){var s=31-va(r);a=1<<s,s=o[s],s>i&&(i=s),r&=~a}if(r=i,r=ml()-r,10<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Xl(r/1960))-r)){e.timeoutHandle=Os(fo.bind(null,e),r);break}fo(e);break;case 5:fo(e);break;default:throw Error(n(329))}}return $n(e,ml()),e.callbackNode===t?Jn.bind(null,e):null}function Yn(e,t){for(t&=~pu,t&=~fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-va(t),n=1<<r;e[r]=-1,t&=~n}}function Qn(e){if(0!=(48&ru))throw Error(n(327));if(ho(),e===nu&&0!=(e.expiredLanes&iu)){var t=iu,r=ao(e,t);0!=(cu&fu)&&(t=xe(e,t),r=ao(e,t))}else t=xe(e,0),r=ao(e,t);if(0!==e.tag&&2===r&&(ru|=64,e.hydrate&&(e.hydrate=!1,Et(e.containerInfo)),0!==(t=Ee(e))&&(r=ao(e,t))),1===r)throw r=uu,no(e,0),Yn(e,t),$n(e,ml()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,fo(e),$n(e,ml()),null}function Zn(){if(null!==Su){var e=Su;Su=null,e.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,$n(e,ml())})}$t()}function Xn(e,t){var r=ru;ru|=1;try{return e(t)}finally{0===(ru=r)&&(Hn(),$t())}}function eo(e,t){var r=ru;ru&=-2,ru|=8;try{return e(t)}finally{0===(ru=r)&&(Hn(),$t())}}function to(e,t){Lt(su,au),au|=t,cu|=t}function ro(){au=su.current,Pt(su)}function no(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,Ps(r)),null!==ou)for(r=ou.return;null!==r;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,null!==n&&void 0!==n&&Bt();break;case 3:gr(),Pt(Gs),Pt(Ws),Ar();break;case 5:wr(n);break;case 4:gr();break;case 13:case 19:Pt(Tl);break;case 10:Zt(n);break;case 23:case 24:ro()}r=r.return}nu=e,ou=Co(e.current,null),iu=au=cu=t,lu=0,uu=null,pu=fu=du=0}function oo(e,t){for(;;){var r=ou;try{if(Qt(),Pl.current=Hl,Ul){for(var n=Nl.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}Ul=!1}if(Vl=0,ql=Bl=Nl=null,Fl=!1,tu.current=null,null===r||null===r.return){lu=1,uu=t,ou=null;break}e:{var i=e,a=r.return,s=r,l=t;if(t=iu,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!=(1&Tl.current),f=a;do{var p;if(p=13===f.tag){var m=f.memoizedState;if(null!==m)p=null!==m.dehydrated;else{var h=f.memoizedProps;p=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!d)}}if(p){var v=f.updateQueue;if(null===v){var _=new Set;_.add(u),f.updateQueue=_}else v.add(u);if(0==(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=or(-1,1);g.tag=2,ir(s,g)}s.lanes|=1;break e}l=void 0,s=t;var y=i.pingCache;if(null===y?(y=i.pingCache=new Ql,l=new Set,y.set(u,l)):void 0===(l=y.get(u))&&(l=new Set,y.set(u,l)),!l.has(s)){l.add(s);var w=wo.bind(null,i,u,s);u.then(w,w)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);l=Error((b(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==lu&&(lu=2),l=En(l,s),f=a;do{switch(f.tag){case 3:i=l,f.flags|=4096,t&=-t,f.lanes|=t;ar(f,Cn(f,i,t));break e;case 1:i=l;var j=f.type,k=f.stateNode;if(0==(64&f.flags)&&("function"==typeof j.getDerivedStateFromError||null!==k&&"function"==typeof k.componentDidCatch&&(null===yu||!yu.has(k)))){f.flags|=4096,t&=-t,f.lanes|=t;ar(f,In(f,i,t));break e}}f=f.return}while(null!==f)}co(r)}catch(e){t=e,ou===r&&null!==r&&(ou=r=r.return);continue}break}}function io(){var e=eu.current;return eu.current=Hl,null===e?Hl:e}function ao(e,t){var r=ru;ru|=16;var o=io();for(nu===e&&iu===t||no(e,t);;)try{so();break}catch(t){oo(e,t)}if(Qt(),ru=r,eu.current=o,null!==ou)throw Error(n(261));return nu=null,iu=0,lu}function so(){for(;null!==ou;)uo(ou)}function lo(){for(;null!==ou&&!Xs();)uo(ou)}function uo(e){var t=Yl(e.alternate,e,au);e.memoizedProps=e.pendingProps,null===t?co(e):ou=t,tu.current=null}function co(e){var t=e;do{var r=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(r=kn(r,t,au)))return void(ou=r);if(r=t,24!==r.tag&&23!==r.tag||null===r.memoizedState||0!=(1073741824&au)||0==(4&r.mode)){for(var n=0,o=r.child;null!==o;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=xn(t)))return r.flags&=2047,void(ou=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===lu&&(lu=5)}function fo(e){var t=zt();return Gt(99,po.bind(null,e,t)),null}function po(e,t){do{ho()}while(null!==ju);if(0!=(48&ru))throw Error(n(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(n(177));e.callbackNode=null;var o=r.lanes|r.childLanes,i=o,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<a;){var u=31-va(a),c=1<<u;i[u]=0,s[u]=-1,l[u]=-1,a&=~c}if(null!==Su&&0==(24&o)&&Su.has(e)&&Su.delete(e),e===nu&&(ou=nu=null,iu=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,o=r.firstEffect):o=r:o=r.firstEffect,null!==o){if(i=ru,ru|=32,tu.current=null,Ms=ja,s=lt(),ut(s)){if("selectionStart"in s)l={start:s.selectionStart,end:s.selectionEnd};else e:if(l=(l=s.ownerDocument)&&l.defaultView||window,(c=l.getSelection&&l.getSelection())&&0!==c.rangeCount){l=c.anchorNode,a=c.anchorOffset,u=c.focusNode,c=c.focusOffset;try{l.nodeType,u.nodeType}catch(e){l=null;break e}var d=0,f=-1,p=-1,m=0,h=0,b=s,v=null;t:for(;;){for(var _;b!==l||0!==a&&3!==b.nodeType||(f=d+a),b!==u||0!==c&&3!==b.nodeType||(p=d+c),3===b.nodeType&&(d+=b.nodeValue.length),null!==(_=b.firstChild);)v=b,b=_;for(;;){if(b===s)break t;if(v===l&&++m===a&&(f=d),v===u&&++h===c&&(p=d),null!==(_=b.nextSibling))break;b=v,v=b.parentNode}b=_}l=-1===f||-1===p?null:{start:f,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Rs={focusedElem:s,selectionRange:l},ja=!1,Mu=null,Ru=!1,vu=o;do{try{mo()}catch(e){if(null===vu)throw Error(n(330));yo(vu,e),vu=vu.nextEffect}}while(null!==vu);Mu=null,vu=o;do{try{for(s=e;null!==vu;){var g=vu.flags;if(16&g&&N(vu.stateNode,""),128&g){var y=vu.alternate;if(null!==y){var w=y.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&g){case 2:Ln(vu),vu.flags&=-3;break;case 6:Ln(vu),vu.flags&=-3,qn(vu.alternate,vu);break;case 1024:vu.flags&=-1025;break;case 1028:vu.flags&=-1025,qn(vu.alternate,vu);break;case 4:qn(vu.alternate,vu);break;case 8:l=vu,Bn(s,l);var j=l.alternate;On(l),null!==j&&On(j)}vu=vu.nextEffect}}catch(e){if(null===vu)throw Error(n(330));yo(vu,e),vu=vu.nextEffect}}while(null!==vu);if(w=Rs,y=lt(),g=w.focusedElem,s=w.selectionRange,y!==g&&g&&g.ownerDocument&&st(g.ownerDocument.documentElement,g)){null!==s&&ut(g)&&(y=s.start,w=s.end,void 0===w&&(w=y),"selectionStart"in g?(g.selectionStart=y,g.selectionEnd=Math.min(w,g.value.length)):(w=(y=g.ownerDocument||document)&&y.defaultView||window,w.getSelection&&(w=w.getSelection(),l=g.textContent.length,j=Math.min(s.start,l),s=void 0===s.end?j:Math.min(s.end,l),!w.extend&&j>s&&(l=s,s=j,j=l),l=at(g,j),a=at(g,s),l&&a&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&(y=y.createRange(),y.setStart(l.node,l.offset),w.removeAllRanges(),j>s?(w.addRange(y),w.extend(a.node,a.offset)):(y.setEnd(a.node,a.offset),w.addRange(y)))))),y=[];for(w=g;w=w.parentNode;)1===w.nodeType&&y.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof g.focus&&g.focus(),g=0;g<y.length;g++)w=y[g],w.element.scrollLeft=w.left,w.element.scrollTop=w.top}ja=!!Ms,Rs=Ms=null,e.current=r,vu=o;do{try{for(g=e;null!==vu;){var k=vu.flags;if(36&k&&Dn(g,vu.alternate,vu),128&k){y=void 0;var x=vu.ref;if(null!==x){var E=vu.stateNode;switch(vu.tag){case 5:y=E;break;default:y=E}"function"==typeof x?x(y):x.current=y}}vu=vu.nextEffect}}catch(e){if(null===vu)throw Error(n(330));yo(vu,e),vu=vu.nextEffect}}while(null!==vu);vu=null,ul(),ru=i}else e.current=r;if(wu)wu=!1,ju=e,ku=t;else for(vu=o;null!==vu;)t=vu.nextEffect,vu.nextEffect=null,8&vu.flags&&(k=vu,k.sibling=null,k.stateNode=null),vu=t;if(o=e.pendingLanes,0===o&&(yu=null),1===o?e===Iu?Cu++:(Cu=0,Iu=e):Cu=0,r=r.stateNode,Js&&"function"==typeof Js.onCommitFiberRoot)try{Js.onCommitFiberRoot($s,r,void 0,64==(64&r.current.flags))}catch(e){}if($n(e,ml()),_u)throw _u=!1,e=gu,gu=null,e;return 0!=(8&ru)?null:($t(),null)}function mo(){for(;null!==vu;){var e=vu.alternate;Ru||null===Mu||(0!=(8&vu.flags)?se(vu,Mu)&&(Ru=!0):13===vu.tag&&Fn(e,vu)&&se(vu,Mu)&&(Ru=!0));var t=vu.flags;0!=(256&t)&&Tn(e,vu),0==(512&t)||wu||(wu=!0,Kt(97,function(){return ho(),null})),vu=vu.nextEffect}}function ho(){if(90!==ku){var e=97<ku?97:ku;return ku=90,Gt(e,_o)}return!1}function bo(e,t){xu.push(t,e),wu||(wu=!0,Kt(97,function(){return ho(),null
}))}function vo(e,t){Eu.push(t,e),wu||(wu=!0,Kt(97,function(){return ho(),null}))}function _o(){if(null===ju)return!1;var e=ju;if(ju=null,0!=(48&ru))throw Error(n(331));var t=ru;ru|=32;var r=Eu;Eu=[];for(var o=0;o<r.length;o+=2){var i=r[o],a=r[o+1],s=i.destroy;if(i.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===a)throw Error(n(330));yo(a,e)}}for(r=xu,xu=[],o=0;o<r.length;o+=2){i=r[o],a=r[o+1];try{var l=i.create;i.destroy=l()}catch(e){if(null===a)throw Error(n(330));yo(a,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return ru=t,$t(),!0}function go(e,t,r){t=En(r,t),t=Cn(e,t,1),ir(e,t),t=zn(),null!==(e=Kn(e,1))&&(Ae(e,1,t),$n(e,t))}function yo(e,t){if(3===e.tag)go(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){go(r,e,t);break}if(1===r.tag){var n=r.stateNode;if("function"==typeof r.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===yu||!yu.has(n))){e=En(t,e);var o=In(r,e,1);if(ir(r,o),o=zn(),null!==(r=Kn(r,1)))Ae(r,1,o),$n(r,o);else if("function"==typeof n.componentDidCatch&&(null===yu||!yu.has(n)))try{n.componentDidCatch(t,e)}catch(e){}break}}r=r.return}}function wo(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=zn(),e.pingedLanes|=e.suspendedLanes&r,nu===e&&(iu&r)===r&&(4===lu||3===lu&&(62914560&iu)===iu&&500>ml()-hu?no(e,0):pu|=r),$n(e,t)}function jo(e,t){var r=e.stateNode;null!==r&&r.delete(t),t=0,0===t&&(t=e.mode,0==(2&t)?t=1:0==(4&t)?t=99===zt()?1:2:(0===Tu&&(Tu=cu),0===(t=Ce(62914560&~Tu))&&(t=4194304))),r=zn(),null!==(e=Kn(e,t))&&(Ae(e,t,r),$n(e,r))}function ko(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function xo(e,t,r,n){return new ko(e,t,r,n)}function Eo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function So(e){if("function"==typeof e)return Eo(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===di)return 11;if(e===mi)return 14}return 2}function Co(e,t){var r=e.alternate;return null===r?(r=xo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Io(e,t,r,o,i,a){var s=2;if(o=e,"function"==typeof e)Eo(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case ai:return Ao(r.children,i,a,t);case _i:s=8,i|=16;break;case si:s=8,i|=1;break;case li:return e=xo(12,r,t,8|i),e.elementType=li,e.type=li,e.lanes=a,e;case fi:return e=xo(13,r,t,i),e.type=fi,e.elementType=fi,e.lanes=a,e;case pi:return e=xo(19,r,t,i),e.elementType=pi,e.lanes=a,e;case gi:return To(r,i,a,t);case yi:return e=xo(24,r,t,i),e.elementType=yi,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case ui:s=10;break e;case ci:s=9;break e;case di:s=11;break e;case mi:s=14;break e;case hi:s=16,o=null;break e;case bi:s=22;break e}throw Error(n(130,null==e?e:typeof e,""))}return t=xo(s,r,t,i),t.elementType=e,t.type=o,t.lanes=a,t}function Ao(e,t,r,n){return e=xo(7,e,n,t),e.lanes=r,e}function To(e,t,r,n){return e=xo(23,e,n,t),e.elementType=gi,e.lanes=r,e}function Do(e,t,r){return e=xo(6,e,null,t),e.lanes=r,e}function Mo(e,t,r){return t=xo(4,null!==e.children?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ro(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ie(0),this.expirationTimes=Ie(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.mutableSourceEagerHydrationData=null}function Oo(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:ii,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}function Po(e,t,r,o){var i=t.current,a=zn(),s=Wn(i);e:if(r){r=r._reactInternals;t:{if(re(r)!==r||1!==r.tag)throw Error(n(170));var l=r;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Nt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(n(171))}if(1===r.tag){var u=r.type;if(Nt(u)){r=Ut(r,u,l);break e}}r=l}else r=zs;return null===t.context?t.context=r:t.pendingContext=r,t=or(a,s),t.payload={element:e},o=void 0===o?null:o,null!==o&&(t.callback=o),ir(i,t),Gn(i,s,a),s}function Lo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Vo(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function No(e,t){Vo(e,t),(e=e.alternate)&&Vo(e,t)}function Bo(){return null}function qo(e,t,r){var n=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Ro(e,t,null!=r&&!0===r.hydrate),t=xo(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,rr(t),e[qs]=r.current,mt(8===e.nodeType?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var o=t._getVersion;o=o(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}function Uo(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Fo(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new qo(e,0,t?{hydrate:!0}:void 0)}function Ho(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i._internalRoot;if("function"==typeof o){var s=o;o=function(){var e=Lo(a);s.call(e)}}Po(t,a,e,o)}else{if(i=r._reactRootContainer=Fo(r,n),a=i._internalRoot,"function"==typeof o){var l=o;o=function(){var e=Lo(a);l.call(e)}}eo(function(){Po(t,a,e,o)})}return Lo(a)}function zo(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Uo(t))throw Error(n(200));return Oo(e,t,null,r)}var Wo=e("react"),Go=e("object-assign"),Ko=e("scheduler");if(!Wo)throw Error(n(227));var $o=new Set,Jo={},Yo=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Qo=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zo=Object.prototype.hasOwnProperty,Xo={},ei={},ti={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ti[e]=new u(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ti[t]=new u(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ti[e]=new u(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ti[e]=new u(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ti[e]=new u(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ti[e]=new u(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){ti[e]=new u(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){ti[e]=new u(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){ti[e]=new u(e,5,!1,e.toLowerCase(),null,!1,!1)});var ri=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ri,c);ti[t]=new u(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ri,c);ti[t]=new u(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ri,c);ti[t]=new u(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){ti[e]=new u(e,1,!1,e.toLowerCase(),null,!1,!1)}),ti.xlinkHref=new u("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){ti[e]=new u(e,1,!1,e.toLowerCase(),null,!0,!0)});var ni=Wo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oi=60103,ii=60106,ai=60107,si=60108,li=60114,ui=60109,ci=60110,di=60112,fi=60113,pi=60120,mi=60115,hi=60116,bi=60121,vi=60128,_i=60129,gi=60130,yi=60131;if("function"==typeof Symbol&&Symbol.for){var wi=Symbol.for;oi=wi("react.element"),ii=wi("react.portal"),ai=wi("react.fragment"),si=wi("react.strict_mode"),li=wi("react.profiler"),ui=wi("react.provider"),ci=wi("react.context"),di=wi("react.forward_ref"),fi=wi("react.suspense"),pi=wi("react.suspense_list"),mi=wi("react.memo"),hi=wi("react.lazy"),bi=wi("react.block"),wi("react.scope"),vi=wi("react.opaque.id"),_i=wi("react.debug_trace_mode"),gi=wi("react.offscreen"),yi=wi("react.legacy_hidden")}var ji,ki,xi="function"==typeof Symbol&&Symbol.iterator,Ei=!1,Si={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Ci=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r)})}:e}(function(e,t){if(e.namespaceURI!==Si.svg||"innerHTML"in e)e.innerHTML=t;else{for(ki=ki||document.createElement("div"),ki.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ki.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),Ii={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ai=["Webkit","ms","Moz","O"];Object.keys(Ii).forEach(function(e){Ai.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ii[t]=Ii[e]})});var Ti=Go({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Di=null,Mi=null,Ri=null,Oi=K,Pi=!1,Li=!1,Vi=!1;if(Yo)try{var Ni={};Object.defineProperty(Ni,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",Ni,Ni),window.removeEventListener("test",Ni,Ni)}catch(e){Vi=!1}var Bi,qi,Ui,Fi,Hi=!1,zi=null,Wi=!1,Gi=null,Ki={onError:function(e){Hi=!0,zi=e}},$i=!1,Ji=[],Yi=null,Qi=null,Zi=null,Xi=new Map,ea=new Map,ta=[],ra="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),na={animationend:_e("Animation","AnimationEnd"),animationiteration:_e("Animation","AnimationIteration"),animationstart:_e("Animation","AnimationStart"),transitionend:_e("Transition","TransitionEnd")},oa={},ia={};Yo&&(ia=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);var aa=ge("animationend"),sa=ge("animationiteration"),la=ge("animationstart"),ua=ge("transitionend"),ca=new Map,da=new Map,fa=["abort","abort",aa,"animationEnd",sa,"animationIteration",la,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ua,"transitionEnd","waiting","waiting"];(0,Ko.unstable_now)();var pa,ma,ha,ba=8,va=Math.clz32?Math.clz32:Te,_a=Math.log,ga=Math.LN2,ya=Ko.unstable_UserBlockingPriority,wa=Ko.unstable_runWithPriority,ja=!0,ka=null,xa=null,Ea=null,Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Be(Sa),Ia=Go({},Sa,{view:0,detail:0}),Aa=Be(Ia),Ta=Go({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ue,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ha&&(ha&&"mousemove"===e.type?(pa=e.screenX-ha.screenX,ma=e.screenY-ha.screenY):ma=pa=0,ha=e),pa)},movementY:function(e){return"movementY"in e?e.movementY:ma}}),Da=Be(Ta),Ma=Go({},Ta,{dataTransfer:0}),Ra=Be(Ma),Oa=Go({},Ia,{relatedTarget:0}),Pa=Be(Oa),La=Go({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Be(La),Na=Go({},Sa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ba=Be(Na),qa=Go({},Sa,{data:0}),Ua=Be(qa),Fa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Wa=Go({},Ia,{key:function(e){if(e.key){var t=Fa[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Le(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Ha[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ue,charCode:function(e){return"keypress"===e.type?Le(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Le(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ga=Be(Wa),Ka=Go({},Ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Be(Ka),Ja=Go({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ue}),Ya=Be(Ja),Qa=Go({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Za=Be(Qa),Xa=Go({},Ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),es=Be(Xa),ts=[9,13,27,32],rs=Yo&&"CompositionEvent"in window,ns=null;Yo&&"documentMode"in document&&(ns=document.documentMode);var os=Yo&&"TextEvent"in window&&!ns,is=Yo&&(!rs||ns&&8<ns&&11>=ns),as=String.fromCharCode(32),ss=!1,ls=!1,us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},cs=null,ds=null,fs=!1;if(Yo){var ps;if(Yo){var ms="oninput"in document;if(!ms){var hs=document.createElement("div");hs.setAttribute("oninput","return;"),ms="function"==typeof hs.oninput}ps=ms}else ps=!1;fs=ps&&(!document.documentMode||9<document.documentMode)}var bs="function"==typeof Object.is?Object.is:nt,vs=Object.prototype.hasOwnProperty,_s=Yo&&"documentMode"in document&&11>=document.documentMode,gs=null,ys=null,ws=null,js=!1;ye("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),ye("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),ye(fa,2);for(var ks="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xs=0;xs<ks.length;xs++)da.set(ks[xs],0);i("onMouseEnter",["mouseout","mouseover"]),i("onMouseLeave",["mouseout","mouseover"]),i("onPointerEnter",["pointerout","pointerover"]),i("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Es,Ss,Cs,Is,As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ts=new Set("cancel close invalid load scroll toggle".split(" ").concat(As)),Ds="_reactListening"+Math.random().toString(36).slice(2),Ms=null,Rs=null,Os="function"==typeof setTimeout?setTimeout:void 0,Ps="function"==typeof clearTimeout?clearTimeout:void 0,Ls=0,Vs=Math.random().toString(36).slice(2),Ns="__reactFiber$"+Vs,Bs="__reactProps$"+Vs,qs="__reactContainer$"+Vs,Us="__reactEvents$"+Vs,Fs=[],Hs=-1,zs={},Ws=Ot(zs),Gs=Ot(!1),Ks=zs,$s=null,Js=null,Ys=Ko.unstable_runWithPriority,Qs=Ko.unstable_scheduleCallback,Zs=Ko.unstable_cancelCallback,Xs=Ko.unstable_shouldYield,el=Ko.unstable_requestPaint,tl=Ko.unstable_now,rl=Ko.unstable_getCurrentPriorityLevel,nl=Ko.unstable_ImmediatePriority,ol=Ko.unstable_UserBlockingPriority,il=Ko.unstable_NormalPriority,al=Ko.unstable_LowPriority,sl=Ko.unstable_IdlePriority,ll={},ul=void 0!==el?el:function(){},cl=null,dl=null,fl=!1,pl=tl(),ml=1e4>pl?tl:function(){return tl()-pl},hl=ni.ReactCurrentBatchConfig,bl=Ot(null),vl=null,_l=null,gl=null,yl=!1,wl=(new Wo.Component).refs,jl={isMounted:function(e){return!!(e=e._reactInternals)&&re(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=zn(),o=Wn(e),i=or(n,o);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),ir(e,i),Gn(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=zn(),o=Wn(e),i=or(n,o);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),ir(e,i),Gn(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=zn(),n=Wn(e),o=or(r,n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),ir(e,o),Gn(e,n,r)}},kl=Array.isArray,xl=br(!0),El=br(!1),Sl={},Cl=Ot(Sl),Il=Ot(Sl),Al=Ot(Sl),Tl=Ot(0),Dl=null,Ml=null,Rl=!1,Ol=[],Pl=ni.ReactCurrentDispatcher,Ll=ni.ReactCurrentBatchConfig,Vl=0,Nl=null,Bl=null,ql=null,Ul=!1,Fl=!1,Hl={readContext:tr,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useOpaqueIdentifier:Tr,unstable_isNewReconciler:!1},zl={readContext:tr,useCallback:function(e,t){return Rr().memoizedState=[e,void 0===t?null:t],e},useContext:tr,useEffect:Kr,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Wr(4,2,Yr.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Wr(4,2,e,t)},useMemo:function(e,t){var r=Rr();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rr();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=rn.bind(null,Nl,e),[n.memoizedState,e]},useRef:Hr,useState:Ur,useDebugValue:Zr,useDeferredValue:function(e){var t=Ur(e),r=t[0],n=t[1];return Kr(function(){var t=Ll.transition;Ll.transition=1;try{n(e)}finally{Ll.transition=t}},[e]),r},useTransition:function(){var e=Ur(!1),t=e[0];return e=tn.bind(null,e[1]),Hr(e),[e,t]},useMutableSource:function(e,t,r){var n=Rr();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},Br(n,e,t,r)},useOpaqueIdentifier:function(){if(Rl){var e=!1,t=It(function(){throw e||(e=!0,r("r:"+(Ls++).toString(36))),Error(n(355))}),r=Ur(t)[1];return 0==(2&Nl.mode)&&(Nl.flags|=516,Fr(5,function(){r("r:"+(Ls++).toString(36))},void 0,null)),t}return t="r:"+(Ls++).toString(36),Ur(t),t},unstable_isNewReconciler:!1},Wl={readContext:tr,useCallback:Xr,useContext:tr,useEffect:$r,useImperativeHandle:Qr,useLayoutEffect:Jr,useMemo:en,useReducer:Lr,useRef:zr,useState:function(){return Lr(Pr)},useDebugValue:Zr,useDeferredValue:function(e){var t=Lr(Pr),r=t[0],n=t[1];return $r(function(){var t=Ll.transition;Ll.transition=1;try{n(e)}finally{Ll.transition=t}},[e]),r},useTransition:function(){var e=Lr(Pr)[0];return[zr().current,e]},useMutableSource:qr,useOpaqueIdentifier:function(){return Lr(Pr)[0]},unstable_isNewReconciler:!1},Gl={readContext:tr,useCallback:Xr,useContext:tr,useEffect:$r,useImperativeHandle:Qr,useLayoutEffect:Jr,useMemo:en,useReducer:Vr,useRef:zr,useState:function(){return Vr(Pr)},useDebugValue:Zr,useDeferredValue:function(e){var t=Vr(Pr),r=t[0],n=t[1];return $r(function(){var t=Ll.transition;Ll.transition=1;try{n(e)}finally{Ll.transition=t}},[e]),r},useTransition:function(){var e=Vr(Pr)[0];return[zr().current,e]},useMutableSource:qr,useOpaqueIdentifier:function(){return Vr(Pr)[0]},unstable_isNewReconciler:!1},Kl=ni.ReactCurrentOwner,$l=!1,Jl={dehydrated:null,retryLane:0};Es=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ss=function(){},Cs=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,vr(Cl.current);var i=null;switch(r){case"input":o=k(e,o),n=k(e,n),i=[];break;case"option":o=T(e,o),n=T(e,n),i=[];break;case"select":o=Go({},o,{value:void 0}),n=Go({},n,{value:void 0}),i=[];break;case"textarea":o=M(e,o),n=M(e,n),i=[];break;default:"function"!=typeof o.onClick&&"function"==typeof n.onClick&&(e.onclick=jt)}U(r,n);var a;r=null;for(u in o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var s=o[u];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(Jo.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(s=null!=o?o[u]:void 0,n.hasOwnProperty(u)&&l!==s&&(null!=l||null!=s))if("style"===u)if(s){for(a in s)!s.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&s[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(u,r)),r=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(i=i||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(i=i||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(Jo.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&pt("scroll",e),i||s===l||(i=[])):"object"==typeof l&&null!==l&&l.$$typeof===vi?l.toString():(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}},Is=function(e,t,r,n){r!==n&&(t.flags|=4)};var Yl,Ql="function"==typeof WeakMap?WeakMap:Map,Zl="function"==typeof WeakSet?WeakSet:Set,Xl=Math.ceil,eu=ni.ReactCurrentDispatcher,tu=ni.ReactCurrentOwner,ru=0,nu=null,ou=null,iu=0,au=0,su=Ot(0),lu=0,uu=null,cu=0,du=0,fu=0,pu=0,mu=null,hu=0,bu=1/0,vu=null,_u=!1,gu=null,yu=null,wu=!1,ju=null,ku=90,xu=[],Eu=[],Su=null,Cu=0,Iu=null,Au=-1,Tu=0,Du=0,Mu=null,Ru=!1;Yl=function(e,t,r){var o=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||Gs.current)$l=!0;else{if(0==(r&o)){switch($l=!1,t.tag){case 3:pn(t),Ir();break;case 5:yr(t);break;case 1:Nt(t.type)&&Ft(t);break;case 4:_r(t,t.stateNode.containerInfo);break;case 10:o=t.memoizedProps.value;var i=t.type._context;Lt(bl,i._currentValue),i._currentValue=o;break;case 13:if(null!==t.memoizedState)return 0!=(r&t.child.childLanes)?mn(e,t,r):(Lt(Tl,1&Tl.current),t=wn(e,t,r),null!==t?t.sibling:null);Lt(Tl,1&Tl.current);break;case 19:if(o=0!=(r&t.childLanes),0!=(64&e.flags)){if(o)return yn(e,t,r);t.flags|=64}if(i=t.memoizedState,null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),Lt(Tl,Tl.current),o)break;return null;case 23:case 24:return t.lanes=0,ln(e,t,r)}return wn(e,t,r)}$l=0!=(16384&e.flags)}else $l=!1;switch(t.lanes=0,t.tag){case 2:if(o=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Vt(t,Ws.current),er(t,r),i=Mr(null,t,o,e,i,r),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nt(o)){var a=!0;Ft(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,rr(t);var s=o.getDerivedStateFromProps;"function"==typeof s&&ur(t,o,s,e),i.updater=jl,t.stateNode=i,i._reactInternals=t,pr(t,o,e,r),t=fn(null,t,o,!0,a,r)}else t.tag=0,nn(null,t,i,r),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=So(i),e=Yt(i,e),a){case 0:t=cn(null,t,i,e,r);break e;case 1:t=dn(null,t,i,e,r);break e;case 11:t=on(null,t,i,e,r);break e;case 14:t=an(null,t,i,Yt(i.type,e),o,r);break e}throw Error(n(306,i,""))}return t;case 0:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Yt(o,i),cn(e,t,o,i,r);case 1:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Yt(o,i),dn(e,t,o,i,r);case 3:if(pn(t),o=t.updateQueue,null===e||null===o)throw Error(n(282));if(o=t.pendingProps,i=t.memoizedState,i=null!==i?i.element:null,nr(e,t),sr(t,o,null,r),(o=t.memoizedState.element)===i)Ir(),t=wn(e,t,r);else{if(i=t.stateNode,(a=i.hydrate)&&(Ml=St(t.stateNode.containerInfo.firstChild),Dl=t,a=Rl=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)a=e[i],a._workInProgressVersionPrimary=e[i+1],Ol.push(a);for(r=El(t,null,o,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else nn(e,t,o,r),Ir();t=t.child}return t;case 5:return yr(t),null===e&&Er(t),o=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,xt(o,i)?s=null:null!==a&&xt(o,a)&&(t.flags|=16),un(e,t),nn(e,t,s,r),t.child;case 6:return null===e&&Er(t),null;case 13:return mn(e,t,r);case 4:return _r(t,t.stateNode.containerInfo),o=t.pendingProps,null===e?t.child=xl(t,null,o,r):nn(e,t,o,r),t.child;case 11:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Yt(o,i),on(e,t,o,i,r);case 7:return nn(e,t,t.pendingProps,r),t.child;case 8:case 12:return nn(e,t,t.pendingProps.children,r),t.child;case 10:e:{o=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var l=t.type._context;if(Lt(bl,l._currentValue),l._currentValue=a,null!==s)if(l=s.value,0===(a=bs(l,a)?0:0|("function"==typeof o._calculateChangedBits?o._calculateChangedBits(l,a):1073741823))){if(s.children===i.children&&!Gs.current){t=wn(e,t,r);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===o&&0!=(c.observedBits&a)){1===l.tag&&(c=or(-1,r&-r),c.tag=2,ir(l,c)),l.lanes|=r,c=l.alternate,null!==c&&(c.lanes|=r),Xt(l.return,r),u.lanes|=r;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}nn(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,a=t.pendingProps,o=a.children,er(t,r),i=tr(i,a.unstable_observedBits),o=o(i),t.flags|=1,nn(e,t,o,r),t.child;case 14:return i=t.type,a=Yt(i,t.pendingProps),a=Yt(i.type,a),an(e,t,i,a,o,r);case 15:return sn(e,t,t.type,t.pendingProps,o,r);case 17:return o=t.type,i=t.pendingProps,i=t.elementType===o?i:Yt(o,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Nt(o)?(e=!0,Ft(t)):e=!1,er(t,r),dr(t,o,i),pr(t,o,i,r),fn(null,t,o,!0,e,r);case 19:return yn(e,t,r);case 23:case 24:return ln(e,t,r)}throw Error(n(156,t.tag))},qo.prototype.render=function(e){Po(e,this._internalRoot,null,null)},qo.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Po(null,e,null,function(){t[qs]=null})},Bi=function(e){if(13===e.tag){Gn(e,4,zn()),No(e,4)}},qi=function(e){if(13===e.tag){Gn(e,67108864,zn()),No(e,67108864)}},Ui=function(e){if(13===e.tag){var t=zn(),r=Wn(e);Gn(e,r,t),No(e,r)}},Fi=function(e,t){return t()},Di=function(e,t,r){switch(t){case"input":if(S(e,r),t=r.name,
"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var i=Mt(o);if(!i)throw Error(n(90));w(o),S(o,i)}}}break;case"textarea":O(e,r);break;case"select":null!=(t=r.value)&&D(e,!!r.multiple,t,!1)}},K=Xn,$=function(e,t,r,n,o){var i=ru;ru|=4;try{return Gt(98,e.bind(null,t,r,n,o))}finally{0===(ru=i)&&(Hn(),$t())}},J=function(){0==(49&ru)&&(Zn(),ho())},Oi=function(e,t){var r=ru;ru|=2;try{return e(t)}finally{0===(ru=r)&&(Hn(),$t())}};var Ou={Events:[Tt,Dt,Mt,W,G,ho,{current:!1}]},Pu={findFiberByHostInstance:At,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Lu={bundleType:Pu.bundleType,version:Pu.version,rendererPackageName:Pu.rendererPackageName,rendererConfig:Pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ae(e),null===e?null:e.stateNode},findFiberByHostInstance:Pu.findFiberByHostInstance||Bo,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{$s=Vu.inject(Lu),Js=Vu}catch(e){}}r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ou,r.createPortal=zo,r.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw Error(n(268,Object.keys(e)))}return e=ae(t),e=null===e?null:e.stateNode},r.flushSync=function(e,t){var r=ru;if(0!=(48&r))return e(t);ru|=1;try{if(e)return Gt(99,e.bind(null,t))}finally{ru=r,$t()}},r.hydrate=function(e,t,r){if(!Uo(t))throw Error(n(200));return Ho(null,e,t,!0,r)},r.render=function(e,t,r){if(!Uo(t))throw Error(n(200));return Ho(null,e,t,!1,r)},r.unmountComponentAtNode=function(e){if(!Uo(e))throw Error(n(40));return!!e._reactRootContainer&&(eo(function(){Ho(null,null,e,!1,function(){e._reactRootContainer=null,e[qs]=null})}),!0)},r.unstable_batchedUpdates=Xn,r.unstable_createPortal=function(e,t){return zo(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},r.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!Uo(r))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Ho(e,t,r,!1,o)},r.version="17.0.2"},{"object-assign":535,react:606,scheduler:613}],584:[function(e,t,r){"use strict";function n(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}n(),t.exports=e("./cjs/react-dom.production.min.js")},{"./cjs/react-dom.development.js":582,"./cjs/react-dom.production.min.js":583}],585:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("react")),f=n(e("./TemplateContainer")),p=function(e){function t(){var e,r;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return r=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(i))),(0,c.default)((0,l.default)(r),"_templateContainer",void 0),(0,c.default)((0,l.default)(r),"_templateContainerSetter",function(e){e&&(r._templateContainer=e)}),(0,c.default)((0,l.default)(r),"_el",void 0),(0,c.default)((0,l.default)(r),"_elSetter",function(e){e&&(r._el=e)}),(0,c.default)((0,l.default)(r),"_dragHandleProps",r.props.makeDragHandleProps(function(){return r.props.y})),r}return(0,u.default)(t,e),(0,i.default)(t,[{key:"getDOMNode",value:function(){return this._el}},{key:"getTemplate",value:function(){return this._templateContainer.getTemplate()}},{key:"shouldComponentUpdate",value:function(e){return this.props.anySelected!==e.anySelected||this.props.itemSelected!==e.itemSelected||this.props.item!==e.item||this.props.template!==e.template||this.props.y!==e.y||this.props.height!==e.height||this.props.zIndex!==e.zIndex||this.props.commonProps!==e.commonProps}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.y,n=e.padding,o=e.itemSelected,i=e.anySelected,a=e.height,s=e.zIndex,l=e.template,u=e.commonProps;return d.default.createElement("div",{ref:this._elSetter,style:{position:null==r?"relative":"absolute",boxSizing:"border-box",left:"0px",right:"0px",top:null==r?"0px":"".concat(r,"px"),marginBottom:"".concat(n,"px"),height:null==r?"auto":"".concat(i*(a.drag-a.natural)+a.natural,"px"),zIndex:s}},d.default.createElement(f.default,{ref:this._templateContainerSetter,item:t,template:l,itemSelected:o,anySelected:i,dragHandleProps:this._dragHandleProps,commonProps:u}))}}]),t}(d.default.Component);r.default=p,t.exports=r.default,t.exports.default=r.default},{"./TemplateContainer":587,"@babel/runtime/helpers/assertThisInitialized":62,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/getPrototypeOf":67,"@babel/runtime/helpers/inherits":68,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/possibleConstructorReturn":76,react:606}],586:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("react")),c=function(e){function t(){return(0,o.default)(this,t),(0,a.default)(this,(0,s.default)(t).apply(this,arguments))}return(0,l.default)(t,e),(0,i.default)(t,[{key:"componentDidUpdate",value:function(){this.props.cb()}},{key:"render",value:function(){return null}}]),t}(u.default.Component);r.default=c,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/getPrototypeOf":67,"@babel/runtime/helpers/inherits":68,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/possibleConstructorReturn":76,react:606}],587:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/assertThisInitialized")),u=n(e("@babel/runtime/helpers/inherits")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("react")),f=function(e){function t(){var e,r;(0,o.default)(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return r=(0,a.default)(this,(e=(0,s.default)(t)).call.apply(e,[this].concat(i))),(0,c.default)((0,l.default)(r),"_template",void 0),(0,c.default)((0,l.default)(r),"_templateSetter",function(e){e&&(r._template=e)}),r}return(0,u.default)(t,e),(0,i.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.props.anySelected!==e.anySelected||this.props.itemSelected!==e.itemSelected||this.props.item!==e.item||this.props.template!==e.template||this.props.commonProps!==e.commonProps}},{key:"getTemplate",value:function(){return this._template}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.itemSelected,n=e.anySelected,o=e.dragHandleProps,i=e.commonProps,a=this.props.template;return d.default.createElement(a,{ref:this._templateSetter,item:t,itemSelected:r,anySelected:n,dragHandleProps:o,commonProps:i})}}]),t}(d.default.Component);r.default=f,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/assertThisInitialized":62,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/getPrototypeOf":67,"@babel/runtime/helpers/inherits":68,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/possibleConstructorReturn":76,react:606}],588:[function(e,t,r){"use strict";function n(e,t,r){return Math.round(t-t/r*e)}var o=e("@babel/runtime/helpers/interopRequireWildcard"),i=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime/helpers/objectSpread")),s=i(e("@babel/runtime/helpers/classCallCheck")),l=i(e("@babel/runtime/helpers/createClass")),u=i(e("@babel/runtime/helpers/possibleConstructorReturn")),c=i(e("@babel/runtime/helpers/getPrototypeOf")),d=i(e("@babel/runtime/helpers/assertThisInitialized")),f=i(e("@babel/runtime/helpers/inherits")),p=i(e("@babel/runtime/helpers/defineProperty")),m=o(e("react")),h=i(e("prop-types")),b=e("react-motion"),v=i(e("immutability-helper")),_=i(e("react-multi-ref")),g=i(e("./OnUpdate")),y=i(e("./MoveContainer")),w={natural:200,drag:30},j=function(e){function t(e){var r;return(0,s.default)(this,t),r=(0,u.default)(this,(0,c.default)(t).call(this,e)),(0,p.default)((0,d.default)(r),"_itemRefs",new _.default),(0,p.default)((0,d.default)(r),"_autoScrollerTimer",void 0),(0,p.default)((0,d.default)(r),"_listRef",m.createRef()),(0,p.default)((0,d.default)(r),"_handleTouchMove",function(e){e.preventDefault(),r._handleMouseMove(e.touches[0])}),(0,p.default)((0,d.default)(r),"_handleMouseMove",function(e){var t=e.pageY,o=e.clientY,i=r.props,s=i.list,l=i.autoScrollMaxSpeed,u=i.autoScrollRegionSize,c=r.state,d=c.dragging,f=c.lastDrag;if(d&&f){var p=r._getContainer(),m=r._getDragVisualIndex(),h=r._getKeyFn();if(clearInterval(r._autoScrollerTimer),0!==m&&m!==s.length-1){var b=0,v=p&&p!==document.body&&p.getBoundingClientRect?p.getBoundingClientRect():{top:0,bottom:1/0},_=Math.max(0,v.top),g=o-_;if(g>0&&g<u)b=-1*n(g,l,u);else{var y=Math.min(window.innerHeight,v.bottom),w=y-o;w>0&&w<u&&(b=n(w,l,u))}0!==b&&(r._scrollContainer(b),r._autoScrollerTimer=setTimeout(function(){r._handleMouseMove({pageY:t+(p===document.body?b:0),clientY:o})},16))}var j=p&&p!==document.body?p.scrollTop:0,k=t-f.mouseOffset+j;if(r.props.constrainDrag){var x=r._getVisualListDuringDrag();k=Math.max(k,r._getDistanceFromTopDuringDrag(f,h(x[0]),x)),k=Math.min(k,r._getDistanceFromTopDuringDrag(f,h(x[x.length-1]),x))}r.setState({lastDrag:(0,a.default)({},f,{mouseY:k})})}}),(0,p.default)((0,d.default)(r),"_handleMouseUp",function(){clearInterval(r._autoScrollerTimer),window.removeEventListener("mouseup",r._handleMouseUp),window.removeEventListener("touchend",r._handleMouseUp),window.removeEventListener("touchmove",r._handleTouchMove),window.removeEventListener("mousemove",r._handleMouseMove),document.documentElement&&(document.documentElement.style.cursor=""),r._lastScrollDelta=0;var e=r.props,t=e.list,n=e.onMoveEnd,o=r.state,i=o.dragging,a=o.lastDrag;if(i&&a&&n){var s=r._getDragListIndex(),l=r._getDragVisualIndex();if(s!==l){n(r._getVisualListDuringDrag(),t[s],s,l)}r.setState({dragging:!1})}}),(0,p.default)((0,d.default)(r),"_lastScrollDelta",0),r.state={useAbsolutePositioning:!1,dragging:!1,lastDrag:null,heights:null},r}return(0,f.default)(t,e),(0,l.default)(t,[{key:"getItemInstance",value:function(e){var t=this._itemRefs.map.get(e);if(!t)throw new Error("key not found");return t.getTemplate()}},{key:"componentWillUnmount",value:function(){this._handleMouseUp()}},{key:"_handleTouchStart",value:function(e,t,r){r.stopPropagation(),this._handleStartDrag(e,t,r.touches[0].pageY)}},{key:"_handleMouseDown",value:function(e,t,r){r.preventDefault(),this._handleStartDrag(e,t,r.pageY)}},{key:"_handleStartDrag",value:function(e,t,r){var n=this;document.documentElement&&(document.documentElement.style.cursor="move"),window.addEventListener("mouseup",this._handleMouseUp),window.addEventListener("touchend",this._handleMouseUp),window.addEventListener("touchmove",this._handleTouchMove),window.addEventListener("mousemove",this._handleMouseMove);var o=this._listRef.current;if(!o)throw new Error("Should not happen");o.contains&&document.activeElement&&o.contains(document.activeElement)&&document.activeElement.blur();var i=this._getKeyFn(),a=null;if(null==this.state.heights){var s=Object.create(null);this.props.list.forEach(function(e){var t=i(e),r=n._itemRefs.map.get(t),o=r?r.getDOMNode().firstElementChild:null,a=r?r.getTemplate():null,l=o instanceof HTMLElement?o.offsetHeight:w.natural,u=a&&"function"==typeof a.getDragHeight&&a.getDragHeight()||l;s[t]={natural:l,drag:u}}),a=s}var l=function(){var o=n.props.list.map(i).indexOf(e),a=null==t?n._getDistance(0,o,!1):t,s=n._getContainer(),l=s&&s!==document.body?s.scrollTop:0;n.setState({useAbsolutePositioning:!0,dragging:!0,lastDrag:{itemKey:e,startY:a,mouseY:a,mouseOffset:r-a+l}})};a?this.setState({heights:a},l):l()}},{key:"_scrollContainer",value:function(e){var t=this._getContainer();t&&(window.scrollBy&&t===document.body?window.scrollBy(0,e):t.scrollTop+=e)}},{key:"_adjustScrollAtEnd",value:function(e){var t=Math.round(e-this._lastScrollDelta);this._scrollContainer(t),this._lastScrollDelta+=t}},{key:"_getDragListIndex",value:function(){var e=this.props.list,r=this.state.lastDrag;if(!r)throw new Error("No drag happened");var n=this._getKeyFn();return t._getIndexOfItemWithKey(n,e,r.itemKey)}},{key:"_getDragVisualIndex",value:function(){var e=this.props,t=e.list,r=e.padding,n=this.state,o=n.dragging,i=n.lastDrag;if(!o||!i)throw new Error("Should not happen");var a=this._getDragListIndex(),s=i.mouseY,l=i.startY,u=s-l,c=u>0?1:u<0?-1:0,d=a;if(0!==c)for(var f=this._getKeyFn(),p=Math.abs(u),m=a+c;m<t.length&&m>=0;m+=c){var h=this._getItemHeight(f(t[m])).drag;if(p<h/2+r)break;p-=h+r,d=m}return d}},{key:"_getVisualListDuringDrag",value:function(){var e=this.props.list,t=this.state,r=t.dragging,n=t.lastDrag;if(!r||!n)throw new Error("Should not happen: _getVisualListDuringDrag called outside of drag");var o=this._getDragListIndex(),i=this._getDragVisualIndex();return(0,v.default)(e,{$splice:[[o,1],[i,0,e[o]]]})}},{key:"_getItemHeight",value:function(e){return null!=this.state.heights&&e in this.state.heights?this.state.heights[e]:w}},{key:"_getDistance",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.props.list;if(t<e)return-this._getDistance(t,e,r,n);for(var o=this.props.padding,i=this._getKeyFn(),a=0,s=e;s<t;s++){var l=this._getItemHeight(i(n[s]));a+=(r?l.drag:l.natural)+o}return a}},{key:"_getDistanceFromTopDuringDrag",value:function(e,r,n){var o=this._getKeyFn(),i=t._getIndexOfItemWithKey(o,n,r),a=this._getDragListIndex(),s=t._getIndexOfItemWithKey(o,n,e.itemKey),l=0;if(s<a){var u=this._getItemHeight(e.itemKey),c=this._getItemHeight(o(n[a]));l=u.drag-c.drag}return e.startY+l+this._getDistance(a,i,!0,n)}},{key:"_getContainer",value:function(){var e=this.props.container;return e?e():null}},{key:"_getKeyFn",value:function(){return t._getKeyFn(this.props.itemKey)}},{key:"render",value:function(){var e=this,t=this.props,r=t.list,n=t.springConfig,o=t.container,i=t.padding,s=t.template,l=t.unsetZIndex,u=t.commonProps,c=this.state,d=c.dragging,f=c.lastDrag,p=c.useAbsolutePositioning,h=this._getKeyFn(),v=(0,b.spring)(d?1:0,n),_=d?this._getVisualListDuringDrag():r,w=r.map(function(t,o){var c=h(t),g=d&&f&&f.itemKey===c?{itemSelected:(0,b.spring)(1,n),y:f.mouseY}:{itemSelected:(0,b.spring)(0,n),y:(p?b.spring:function(e,t){return e})(d&&f?e._getDistanceFromTopDuringDrag(f,c,_):e._getDistance(0,o,!1),n)},w=(0,a.default)({anySelected:v},g),j=function(t){return{onMouseDown:function(r){return e._handleMouseDown(c,t(),r)},onTouchStart:function(r){return e._handleTouchStart(c,t(),r)}}},k=e._getItemHeight(c);return m.createElement(b.Motion,{style:w,key:c,children:function(n){var a=n.itemSelected,d=n.anySelected,h=n.y;return m.createElement(y.default,{ref:e._itemRefs.ref(c),y:p?h:null,template:s,padding:i,item:t,itemSelected:a,anySelected:d,height:k,zIndex:l&&!p?"auto":f&&f.itemKey===c?r.length:o,makeDragHandleProps:j,commonProps:u})}})}),j=0;if(!d&&f&&p){var k=this._getDragListIndex();j=(0,b.spring)(this._getDistance(0,k,!1)-f.mouseY,n)}var x=0,E=0;return r.length&&(E=i,p&&(x=this._getDistance(0,r.length,!1)-i)),m.createElement("div",{style:{position:"relative"},ref:this._listRef},m.createElement(b.Motion,{style:{adjustScroll:j,anySelected:v},onRest:function(){d||e.setState({heights:null,useAbsolutePositioning:!1})},children:function(t){var r=t.adjustScroll;return m.createElement("div",{style:{display:p?"block":"none",height:"".concat(x,"px"),marginBottom:"".concat(E,"px")}},o&&m.createElement(g.default,{cb:function(){!d&&f&&p&&e._adjustScrollAtEnd(r)}}))}}),w)}}],[{key:"getDerivedStateFromProps",value:function(e,r){var n=e.list,o=r.lastDrag;if(o){var i=t._getKeyFn(e.itemKey);try{t._getIndexOfItemWithKey(i,n,o.itemKey)}catch(e){return{dragging:!1,lastDrag:null}}}return null}},{key:"_getIndexOfItemWithKey",value:function(e,t,r){for(var n=0,o=t.length;n<o;n++)if(e(t[n])===r)return n;throw new Error("Failed to find drag index")}},{key:"_getKeyFn",value:function(e){return"function"==typeof e?e:function(t){return t[e]}}}]),t}(m.Component);r.default=j,(0,p.default)(j,"propTypes",{itemKey:h.default.oneOfType([h.default.string,h.default.func]).isRequired,template:h.default.func,list:h.default.array.isRequired,onMoveEnd:h.default.func,container:h.default.func,springConfig:h.default.object,constrainDrag:h.default.bool,padding:h.default.number,unsetZIndex:h.default.bool,autoScrollMaxSpeed:h.default.number.isRequired,autoScrollRegionSize:h.default.number.isRequired,commonProps:h.default.object}),(0,p.default)(j,"defaultProps",{springConfig:{stiffness:300,damping:50},padding:10,unsetZIndex:!1,constrainDrag:!1,autoScrollMaxSpeed:15,autoScrollRegionSize:30}),t.exports=r.default,t.exports.default=r.default},{"./MoveContainer":585,"./OnUpdate":586,"@babel/runtime/helpers/assertThisInitialized":62,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/getPrototypeOf":67,"@babel/runtime/helpers/inherits":68,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/interopRequireWildcard":70,"@babel/runtime/helpers/objectSpread":73,"@babel/runtime/helpers/possibleConstructorReturn":76,"immutability-helper":317,"prop-types":572,react:606,"react-motion":595,"react-multi-ref":601}],589:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}r.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./mapToZero"),u=n(l),c=e("./stripStyle"),d=n(c),f=e("./stepper"),p=n(f),m=e("performance-now"),h=n(m),b=e("raf"),v=n(b),_=e("./shouldStopAnimation"),g=n(_),y=e("react"),w=n(y),j=e("prop-types"),k=n(j),x=1e3/60,E=function(e){function t(r){var n=this;o(this,t),e.call(this,r),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,r=n.state,o=r.currentStyle,i=r.currentVelocity,s=r.lastIdealStyle,l=r.lastIdealVelocity;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var c=e[u];"number"==typeof c&&(t||(t=!0,o=a({},o),i=a({},i),s=a({},s),l=a({},l)),o[u]=c,i[u]=0,s[u]=c,l[u]=0)}t&&n.setState({currentStyle:o,currentVelocity:i,lastIdealStyle:s,lastIdealVelocity:l})},this.startAnimationIfNecessary=function(){n.animationID=v.default(function(e){var t=n.props.style;if(g.default(n.state.currentStyle,t,n.state.currentVelocity))return n.wasAnimating&&n.props.onRest&&n.props.onRest(),n.animationID=null,n.wasAnimating=!1,void(n.accumulatedTime=0);n.wasAnimating=!0;var r=e||h.default(),o=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+o,n.accumulatedTime>10*x&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();var i=(n.accumulatedTime-Math.floor(n.accumulatedTime/x)*x)/x,a=Math.floor(n.accumulatedTime/x),s={},l={},u={},c={};for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d)){var f=t[d];if("number"==typeof f)u[d]=f,c[d]=0,s[d]=f,l[d]=0;else{for(var m=n.state.lastIdealStyle[d],b=n.state.lastIdealVelocity[d],v=0;v<a;v++){var _=p.default(x/1e3,m,b,f.val,f.stiffness,f.damping,f.precision);m=_[0],b=_[1]}var y=p.default(x/1e3,m,b,f.val,f.stiffness,f.damping,f.precision),w=y[0],j=y[1];u[d]=m+(w-m)*i,c[d]=b+(j-b)*i,s[d]=m,l[d]=b}}n.animationID=null,n.accumulatedTime-=a*x,n.setState({currentStyle:u,currentVelocity:c,lastIdealStyle:s,lastIdealVelocity:l}),n.unreadPropStyle=null,n.startAnimationIfNecessary()})},this.state=this.defaultState()}return i(t,e),s(t,null,[{key:"propTypes",value:{defaultStyle:k.default.objectOf(k.default.number),style:k.default.objectOf(k.default.oneOfType([k.default.number,k.default.object])).isRequired,children:k.default.func.isRequired,onRest:k.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,r=e.style,n=t||d.default(r),o=u.default(n);return{currentStyle:n,currentVelocity:o,lastIdealStyle:n,lastIdealVelocity:o}},t.prototype.componentDidMount=function(){this.prevTime=h.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=h.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(v.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&w.default.Children.only(e)},t}(w.default.Component);r.default=E,t.exports=r.default},{"./mapToZero":592,"./shouldStopAnimation":597,"./stepper":599,"./stripStyle":600,"performance-now":546,"prop-types":572,raf:580,react:606}],590:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){for(var n=0;n<e.length;n++)if(!y.default(e[n],t[n],r[n]))return!1;return!0}r.__esModule=!0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./mapToZero"),c=n(u),d=e("./stripStyle"),f=n(d),p=e("./stepper"),m=n(p),h=e("performance-now"),b=n(h),v=e("raf"),_=n(v),g=e("./shouldStopAnimation"),y=n(g),w=e("react"),j=n(w),k=e("prop-types"),x=n(k),E=1e3/60,S=function(e){function t(r){var n=this;o(this,t),e.call(this,r),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=n.state,r=t.currentStyles,o=t.currentVelocities,i=t.lastIdealStyles,a=t.lastIdealVelocities,l=!1,u=0;u<e.length;u++){var c=e[u],d=!1;for(var f in c)if(Object.prototype.hasOwnProperty.call(c,f)){var p=c[f];"number"==typeof p&&(d||(d=!0,l=!0,r[u]=s({},r[u]),o[u]=s({},o[u]),i[u]=s({},i[u]),a[u]=s({},a[u])),r[u][f]=p,o[u][f]=0,i[u][f]=p,a[u][f]=0)}}l&&n.setState({currentStyles:r,currentVelocities:o,lastIdealStyles:i,lastIdealVelocities:a})},this.startAnimationIfNecessary=function(){n.animationID=_.default(function(e){var t=n.props.styles(n.state.lastIdealStyles);if(a(n.state.currentStyles,t,n.state.currentVelocities))return n.animationID=null,void(n.accumulatedTime=0);var r=e||b.default(),o=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+o,n.accumulatedTime>10*E&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var i=(n.accumulatedTime-Math.floor(n.accumulatedTime/E)*E)/E,s=Math.floor(n.accumulatedTime/E),l=[],u=[],c=[],d=[],f=0;f<t.length;f++){var p=t[f],h={},v={},_={},g={};for(var y in p)if(Object.prototype.hasOwnProperty.call(p,y)){var w=p[y];if("number"==typeof w)h[y]=w,v[y]=0,_[y]=w,g[y]=0;else{for(var j=n.state.lastIdealStyles[f][y],k=n.state.lastIdealVelocities[f][y],x=0;x<s;x++){var S=m.default(E/1e3,j,k,w.val,w.stiffness,w.damping,w.precision);j=S[0],k=S[1]}var C=m.default(E/1e3,j,k,w.val,w.stiffness,w.damping,w.precision),I=C[0],A=C[1];h[y]=j+(I-j)*i,v[y]=k+(A-k)*i,_[y]=j,g[y]=k}}c[f]=h,d[f]=v,l[f]=_,u[f]=g}n.animationID=null,n.accumulatedTime-=s*E,n.setState({currentStyles:c,currentVelocities:d,lastIdealStyles:l,lastIdealVelocities:u}),n.unreadPropStyles=null,n.startAnimationIfNecessary()})},this.state=this.defaultState()}return i(t,e),l(t,null,[{key:"propTypes",value:{defaultStyles:x.default.arrayOf(x.default.objectOf(x.default.number)),styles:x.default.func.isRequired,children:x.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,n=t||r().map(f.default),o=n.map(function(e){return c.default(e)});return{currentStyles:n,currentVelocities:o,lastIdealStyles:n,lastIdealVelocities:o}},t.prototype.componentDidMount=function(){this.prevTime=b.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=b.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(_.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&j.default.Children.only(e)},t}(j.default.Component);r.default=S,t.exports=r.default},{"./mapToZero":592,"./shouldStopAnimation":597,"./stepper":599,"./stripStyle":600,"performance-now":546,"prop-types":572,raf:580,react:606}],591:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r){var n=t;return null==n?e.map(function(e,t){return{key:e.key,data:e.data,style:r[t]}}):e.map(function(e,t){for(var o=0;o<n.length;o++)if(n[o].key===e.key)return{key:n[o].key,data:n[o].data,style:r[t]};return{key:e.key,data:e.data,style:r[t]}})}function s(e,t,r,n){if(n.length!==t.length)return!1;for(var o=0;o<n.length;o++)if(n[o].key!==t[o].key)return!1;for(var o=0;o<n.length;o++)if(!x.default(e[o],t[o].style,r[o]))return!1;return!0}function l(e,t,r,n,o,i,a,s,l){for(var u=_.default(n,o,function(e,n){var o=t(n);return null==o?(r({key:n.key,data:n.data}),null):x.default(i[e],o,a[e])?(r({key:n.key,data:n.data}),null):{key:n.key,data:n.data,style:o}}),c=[],d=[],p=[],m=[],h=0;h<u.length;h++){for(var b=u[h],v=null,g=0;g<n.length;g++)if(n[g].key===b.key){v=g;break}if(null==v){var y=e(b);c[h]=y,p[h]=y;var w=f.default(b.style);d[h]=w,m[h]=w}else c[h]=i[v],p[h]=s[v],d[h]=a[v],m[h]=l[v]}return[u,c,d,p,m]}r.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),d=e("./mapToZero"),f=n(d),p=e("./stripStyle"),m=n(p),h=e("./stepper"),b=n(h),v=e("./mergeDiff"),_=n(v),g=e("performance-now"),y=n(g),w=e("raf"),j=n(w),k=e("./shouldStopAnimation"),x=n(k),E=e("react"),S=n(E),C=e("prop-types"),I=n(C),A=1e3/60,T=function(e){function t(r){var n=this;o(this,t),e.call(this,r),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=l(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,e,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=0;c<e.length;c++){var d=e[c].style,f=!1;for(var p in d)if(Object.prototype.hasOwnProperty.call(d,p)){var m=d[p];"number"==typeof m&&(f||(f=!0,o[c]=u({},o[c]),i[c]=u({},i[c]),a[c]=u({},a[c]),s[c]=u({},s[c]),r[c]={key:r[c].key,data:r[c].data,style:u({},r[c].style)}),o[c][p]=m,i[c][p]=0,a[c][p]=m,s[c][p]=0,r[c].style[p]=m)}}n.setState({currentStyles:o,currentVelocities:i,mergedPropsStyles:r,lastIdealStyles:a,lastIdealVelocities:s})},this.startAnimationIfNecessary=function(){n.unmounting||(n.animationID=j.default(function(e){if(!n.unmounting){var t=n.props.styles,r="function"==typeof t?t(a(n.state.mergedPropsStyles,n.unreadPropStyles,n.state.lastIdealStyles)):t;if(s(n.state.currentStyles,r,n.state.currentVelocities,n.state.mergedPropsStyles))return n.animationID=null,void(n.accumulatedTime=0);var o=e||y.default(),i=o-n.prevTime;if(n.prevTime=o,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*A&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var u=(n.accumulatedTime-Math.floor(n.accumulatedTime/A)*A)/A,c=Math.floor(n.accumulatedTime/A),d=l(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,r,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),f=d[0],p=d[1],m=d[2],h=d[3],v=d[4],_=0;_<f.length;_++){var g=f[_].style,w={},j={},k={},x={};for(var E in g)if(Object.prototype.hasOwnProperty.call(g,E)){var S=g[E];if("number"==typeof S)w[E]=S,j[E]=0,k[E]=S,x[E]=0;else{for(var C=h[_][E],I=v[_][E],T=0;T<c;T++){var D=b.default(A/1e3,C,I,S.val,S.stiffness,S.damping,S.precision);C=D[0],I=D[1]}var M=b.default(A/1e3,C,I,S.val,S.stiffness,S.damping,S.precision),R=M[0],O=M[1];w[E]=C+(R-C)*u,j[E]=I+(O-I)*u,k[E]=C,x[E]=I}}h[_]=k,v[_]=x,p[_]=w,
m[_]=j}n.animationID=null,n.accumulatedTime-=c*A,n.setState({currentStyles:p,currentVelocities:m,lastIdealStyles:h,lastIdealVelocities:v,mergedPropsStyles:f}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}}))},this.state=this.defaultState()}return i(t,e),c(t,null,[{key:"propTypes",value:{defaultStyles:I.default.arrayOf(I.default.shape({key:I.default.string.isRequired,data:I.default.any,style:I.default.objectOf(I.default.number).isRequired})),styles:I.default.oneOfType([I.default.func,I.default.arrayOf(I.default.shape({key:I.default.string.isRequired,data:I.default.any,style:I.default.objectOf(I.default.oneOfType([I.default.number,I.default.object])).isRequired}))]).isRequired,children:I.default.func.isRequired,willEnter:I.default.func,willLeave:I.default.func,didLeave:I.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return m.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,n=e.willEnter,o=e.willLeave,i=e.didLeave,a="function"==typeof r?r(t):r,s=void 0;s=null==t?a:t.map(function(e){for(var t=0;t<a.length;t++)if(a[t].key===e.key)return a[t];return e});var u=null==t?a.map(function(e){return m.default(e.style)}):t.map(function(e){return m.default(e.style)}),c=null==t?a.map(function(e){return f.default(e.style)}):t.map(function(e){return f.default(e.style)}),d=l(n,o,i,s,a,u,c,u,c),p=d[0];return{currentStyles:d[1],currentVelocities:d[2],lastIdealStyles:d[3],lastIdealVelocities:d[4],mergedPropsStyles:p}},t.prototype.componentDidMount=function(){this.prevTime=y.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"==typeof t?t(a(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=y.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(j.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=a(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&S.default.Children.only(t)},t}(S.default.Component);r.default=T,t.exports=r.default},{"./mapToZero":592,"./mergeDiff":593,"./shouldStopAnimation":597,"./stepper":599,"./stripStyle":600,"performance-now":546,"prop-types":572,raf:580,react:606}],592:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=0);return t}r.__esModule=!0,r.default=n,t.exports=r.default},{}],593:[function(e,t,r){"use strict";function n(e,t,r){for(var n={},o=0;o<e.length;o++)n[e[o].key]=o;for(var i={},o=0;o<t.length;o++)i[t[o].key]=o;for(var a=[],o=0;o<t.length;o++)a[o]=t[o];for(var o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(i,e[o].key)){var s=r(o,e[o]);null!=s&&a.push(s)}return a.sort(function(e,r){var o=i[e.key],a=i[r.key],s=n[e.key],l=n[r.key];if(null!=o&&null!=a)return i[e.key]-i[r.key];if(null!=s&&null!=l)return n[e.key]-n[r.key];if(null!=o){for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(n,c)){if(o<i[c]&&l>n[c])return-1;if(o>i[c]&&l<n[c])return 1}}return 1}for(var u=0;u<t.length;u++){var c=t[u].key;if(Object.prototype.hasOwnProperty.call(n,c)){if(a<i[c]&&s>n[c])return 1;if(a>i[c]&&s<n[c])return-1}}return-1})}r.__esModule=!0,r.default=n,t.exports=r.default},{}],594:[function(e,t,r){"use strict";r.__esModule=!0,r.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},t.exports=r.default},{}],595:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e.default:e}r.__esModule=!0;var o=e("./Motion");r.Motion=n(o);var i=e("./StaggeredMotion");r.StaggeredMotion=n(i);var a=e("./TransitionMotion");r.TransitionMotion=n(a);var s=e("./spring");r.spring=n(s);var l=e("./presets");r.presets=n(l);var u=e("./stripStyle");r.stripStyle=n(u);var c=e("./reorderKeys");r.reorderKeys=n(c)},{"./Motion":589,"./StaggeredMotion":590,"./TransitionMotion":591,"./presets":594,"./reorderKeys":596,"./spring":598,"./stripStyle":600}],596:[function(e,t,r){(function(e){(function(){"use strict";function n(){"development"===e.env.NODE_ENV&&(o||(o=!0,console.error("`reorderKeys` has been removed, since it is no longer needed for TransitionMotion's new styles array API.")))}r.__esModule=!0,r.default=n;var o=!1;t.exports=r.default}).call(this)}).call(this,e("_process"))},{_process:568}],597:[function(e,t,r){"use strict";function n(e,t,r){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(0!==r[n])return!1;var o="number"==typeof t[n]?t[n]:t[n].val;if(e[n]!==o)return!1}return!0}r.__esModule=!0,r.default=n,t.exports=r.default},{}],598:[function(e,t,r){"use strict";function n(e,t){return o({},s,t,{val:e})}r.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.default=n;var i=e("./presets"),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=o({},a.default.noWobble,{precision:.01});t.exports=r.default},{"./presets":594}],599:[function(e,t,r){"use strict";function n(e,t,r,n,i,a,s){var l=-i*(t-n),u=-a*r,c=l+u,d=r+c*e,f=t+d*e;return Math.abs(d)<s&&Math.abs(f-n)<s?(o[0]=n,o[1]=0,o):(o[0]=f,o[1]=d,o)}r.__esModule=!0,r.default=n;var o=[0,0];t.exports=r.default},{}],600:[function(e,t,r){"use strict";function n(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]="number"==typeof e[r]?e[r]:e[r].val);return t}r.__esModule=!0,r.default=n,t.exports=r.default},{}],601:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=function(){function e(){(0,o.default)(this,e),(0,a.default)(this,"map",new Map),(0,a.default)(this,"_refFns",new Map)}return(0,i.default)(e,[{key:"ref",value:function(e){var t=this,r=this._refFns.get(e);return r||(r=function(r){null==r?(t._refFns.delete(e),t.map.delete(e)):t.map.set(e,r)},this._refFns.set(e,r)),r}}]),e}();r.default=s},{"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69}],602:[function(e,t,r){"use strict";function n(e){var t=/(\d+(?:\.\d+)?|\.\d+)(m?s)\b/i.exec(e);if(!t)throw new Error("Could not parse time from transition value");return Number(t[1])*(1===t[2].length?1e3:1)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],603:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireWildcard"),o=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime/helpers/extends")),a=o(e("@babel/runtime/helpers/objectWithoutProperties")),s=o(e("@babel/runtime/helpers/classCallCheck")),l=o(e("@babel/runtime/helpers/createClass")),u=o(e("@babel/runtime/helpers/possibleConstructorReturn")),c=o(e("@babel/runtime/helpers/getPrototypeOf")),d=o(e("@babel/runtime/helpers/assertThisInitialized")),f=o(e("@babel/runtime/helpers/inherits")),p=o(e("@babel/runtime/helpers/defineProperty")),m=n(e("react")),h=o(e("prop-types")),b=o(e("./getTransitionTimeMs")),v=function(e){function t(e){var r;return(0,s.default)(this,t),r=(0,u.default)(this,(0,c.default)(t).call(this,e)),(0,p.default)((0,d.default)(r),"_removeTransitionEndListener",function(){}),(0,p.default)((0,d.default)(r),"_main",m.createRef()),(0,p.default)((0,d.default)(r),"_inner",m.createRef()),(0,p.default)((0,d.default)(r),"_onNextTransitionEnd",function(e,t){r._removeTransitionEndListener();var n,o=function(){r._removeTransitionEndListener(),t()};r._removeTransitionEndListener=function(){r._removeTransitionEndListener=function(){},clearTimeout(n),e.removeEventListener("transitionend",o)},e.addEventListener("transitionend",o);var i=1.1*(0,b.default)(r.props.heightTransition)+500;n=setTimeout(o,i)}),r.state={renderInner:e.expanded||t._visibleWhenClosed(e),closing:!1,fullyClosed:!e.expanded,height:e.expanded?"auto":e.collapsedHeight},r}return(0,f.default)(t,e),(0,l.default)(t,[{key:"componentWillUnmount",value:function(){this._removeTransitionEndListener()}},{key:"componentDidUpdate",value:function(e,t){var r=this;if(!e.expanded&&this.props.expanded){this._removeTransitionEndListener();var n=this._main.current,o=this._inner.current;if(!n||!o)throw new Error("Should not happen");var i="".concat(o.clientHeight,"px");this.setState({height:i}),this._onNextTransitionEnd(n,function(){r.setState({height:"auto"},function(){r.props.onChangeEnd&&r.props.onChangeEnd()})})}else if(e.expanded&&!this.props.expanded){if(this._removeTransitionEndListener(),!this._inner.current)throw new Error("Should not happen");this.setState({height:"".concat(this._inner.current.clientHeight,"px")},function(){var e=r._main.current;if(!e)throw new Error("Should not happen");e.clientHeight,r.setState({height:r.props.collapsedHeight,closing:!0}),r._onNextTransitionEnd(e,function(){r.setState({closing:!1,fullyClosed:!0}),r.props.onChangeEnd&&r.props.onChangeEnd()})})}}},{key:"render",value:function(){var e=t._visibleWhenClosed(this.props),r=this.props,n=r.allowOverflowWhenOpen,o=r.children,s=(r.collapsedHeight,r.eagerRender,r.expanded,r.heightTransition),l=(r.onChangeEnd,(0,a.default)(r,["allowOverflowWhenOpen","children","collapsedHeight","eagerRender","expanded","heightTransition","onChangeEnd"])),u=this.state,c=u.height,d=u.fullyClosed,f=u.renderInner,p=f?m.createElement("div",{ref:this._inner,style:{overflow:n&&"auto"===c?"visible":"hidden"}},o):null;return m.createElement("div",(0,i.default)({},l,{ref:this._main,style:{height:c,overflow:n&&"auto"===c?"visible":"hidden",display:d&&!e?"none":null,transition:"height ".concat(s)}}),p)}}],[{key:"_visibleWhenClosed",value:function(e){return e.eagerRender||0!==parseFloat(e.collapsedHeight)}},{key:"getDerivedStateFromProps",value:function(e,r){return e.expanded&&(r.closing||r.fullyClosed)?{closing:!1,fullyClosed:!1,renderInner:!0}:e.expanded||!r.closing&&!r.fullyClosed||r.height===e.collapsedHeight?null:{height:e.collapsedHeight,renderInner:r.renderInner||t._visibleWhenClosed(e)}}}]),t}(m.Component);r.default=v,(0,p.default)(v,"propTypes",{expanded:h.default.bool.isRequired,onChangeEnd:h.default.func,collapsedHeight:h.default.string,heightTransition:h.default.string,className:h.default.string,allowOverflowWhenOpen:h.default.bool,eagerRender:h.default.bool}),(0,p.default)(v,"defaultProps",{collapsedHeight:"0",heightTransition:".25s ease",className:"",allowOverflowWhenOpen:!1,eagerRender:!1})},{"./getTransitionTimeMs":602,"@babel/runtime/helpers/assertThisInitialized":62,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/extends":66,"@babel/runtime/helpers/getPrototypeOf":67,"@babel/runtime/helpers/inherits":68,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/interopRequireWildcard":70,"@babel/runtime/helpers/objectWithoutProperties":74,"@babel/runtime/helpers/possibleConstructorReturn":76,"prop-types":572,react:606}],604:[function(e,t,r){"use strict"},{"object-assign":535}],605:[function(e,t,r){"use strict";function n(e){return null===e||"object"!=typeof e?null:(e=S&&e[S]||e["@@iterator"],"function"==typeof e?e:null)}function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e,t,r){this.props=e,this.context=t,this.refs=I,this.updater=r||C}function a(){}function s(e,t,r){this.props=e,this.context=t,this.refs=I,this.updater=r||C}function l(e,t,r){var n,o={},i=null,a=null;if(null!=t)for(n in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)D.call(t,n)&&!M.hasOwnProperty(n)&&(o[n]=t[n]);var s=arguments.length-2;if(1===s)o.children=r;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(n in s=e.defaultProps)void 0===o[n]&&(o[n]=s[n]);return{$$typeof:_,type:e,key:i,ref:a,props:o,_owner:T.current}}function u(e,t){return{$$typeof:_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c(e){return"object"==typeof e&&null!==e&&e.$$typeof===_}function d(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}function f(e,t){return"object"==typeof e&&null!==e&&null!=e.key?d(""+e.key):t.toString(36)}function p(e,t,r,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case _:case g:l=!0}}if(l)return l=e,a=a(l),e=""===i?"."+f(l,0):i,Array.isArray(a)?(r="",null!=e&&(r=e.replace(R,"$&/")+"/"),p(a,t,r,"",function(e){return e})):null!=a&&(c(a)&&(a=u(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(R,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=""===i?".":i+":",Array.isArray(e))for(var d=0;d<e.length;d++){s=e[d];var m=i+f(s,d);l+=p(s,t,r,m,a)}else if("function"==typeof(m=n(e)))for(e=m.call(e),d=0;!(s=e.next()).done;)s=s.value,m=i+f(s,d++),l+=p(s,t,r,m,a);else if("object"===s)throw t=""+e,Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function m(e,t,r){if(null==e)return e;var n=[],o=0;return p(e,n,"","",function(e){return t.call(r,e,o++)}),n}function h(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}if(1===e._status)return e._result;throw e._result}function b(){var e=O.current;if(null===e)throw Error(o(321));return e}var v=e("object-assign"),_=60103,g=60106;r.Fragment=60107,r.StrictMode=60108,r.Profiler=60114;var y=60109,w=60110,j=60112;r.Suspense=60113;var k=60115,x=60116;if("function"==typeof Symbol&&Symbol.for){var E=Symbol.for;_=E("react.element"),g=E("react.portal"),r.Fragment=E("react.fragment"),r.StrictMode=E("react.strict_mode"),r.Profiler=E("react.profiler"),y=E("react.provider"),w=E("react.context"),j=E("react.forward_ref"),r.Suspense=E("react.suspense"),k=E("react.memo"),x=E("react.lazy")}var S="function"==typeof Symbol&&Symbol.iterator,C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I={};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(o(85));this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=i.prototype;var A=s.prototype=new a;A.constructor=s,v(A,i.prototype),A.isPureReactComponent=!0;var T={current:null},D=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0},R=/\/+/g,O={current:null},P={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:T,IsSomeRendererActing:{current:!1},assign:v};r.Children={map:m,forEach:function(e,t,r){m(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return m(e,function(){t++}),t},toArray:function(e){return m(e,function(e){return e})||[]},only:function(e){if(!c(e))throw Error(o(143));return e}},r.Component=i,r.PureComponent=s,r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,r.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(o(267,e));var n=v({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)D.call(t,u)&&!M.hasOwnProperty(u)&&(n[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:_,type:e.type,key:i,ref:a,props:n,_owner:s}},r.createContext=function(e,t){return void 0===t&&(t=null),e={$$typeof:w,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:y,_context:e},e.Consumer=e},r.createElement=l,r.createFactory=function(e){var t=l.bind(null,e);return t.type=e,t},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:j,render:e}},r.isValidElement=c,r.lazy=function(e){return{$$typeof:x,_payload:{_status:-1,_result:e},_init:h}},r.memo=function(e,t){return{$$typeof:k,type:e,compare:void 0===t?null:t}},r.useCallback=function(e,t){return b().useCallback(e,t)},r.useContext=function(e,t){return b().useContext(e,t)},r.useDebugValue=function(){},r.useEffect=function(e,t){return b().useEffect(e,t)},r.useImperativeHandle=function(e,t,r){return b().useImperativeHandle(e,t,r)},r.useLayoutEffect=function(e,t){return b().useLayoutEffect(e,t)},r.useMemo=function(e,t){return b().useMemo(e,t)},r.useReducer=function(e,t,r){return b().useReducer(e,t,r)},r.useRef=function(e){return b().useRef(e)},r.useState=function(e){return b().useState(e)},r.version="17.0.2"},{"object-assign":535}],606:[function(e,t,r){"use strict";t.exports=e("./cjs/react.production.min.js")},{"./cjs/react.development.js":604,"./cjs/react.production.min.js":605}],607:[function(e,t,r){!function(e){"use strict";function t(e,t,r,o){var i=t&&t.prototype instanceof n?t:n,a=Object.create(i.prototype),s=new f(o||[]);return a._invoke=l(e,r,s),a}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function n(){}function o(){}function i(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){function t(n,o,i,a){var s=r(e[n],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==typeof u&&v.call(u,"__await")?Promise.resolve(u.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(u).then(function(e){l.value=e,i(l)},function(e){return t("throw",e,i,a)})}a(s.arg)}function n(e,r){function n(){return new Promise(function(n,o){t(e,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=n}function l(e,t,n){var o=j;return function(i,a){if(o===x)throw new Error("Generator is already running");if(o===E){if("throw"===i)throw a;return m()}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=u(s,n);if(l){if(l===S)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===j)throw o=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=x;var c=r(e,t,n);if("normal"===c.type){if(o=n.done?E:k,c.arg===S)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=E,n.method="throw",n.arg=c.arg)}}}function u(e,t){var n=e.iterator[t.method];if(n===h){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=h,u(e,t),"throw"===t.method))return S;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,S;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=h),t.delegate=null,S):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,S)}function c(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(c,this),this.reset(!0)}function p(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=h,t.done=!0,t};return n.next=n}}return{next:m}}function m(){return{value:h,done:!0}}var h,b=Object.prototype,v=b.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},g=_.iterator||"@@iterator",y=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag";e.wrap=t;var j="suspendedStart",k="suspendedYield",x="executing",E="completed",S={},C={};C[g]=function(){return this};var I=Object.getPrototypeOf,A=I&&I(I(p([])));A&&A!==b&&v.call(A,g)&&(C=A);var T=i.prototype=n.prototype=Object.create(C);o.prototype=T.constructor=i,i.constructor=o,i[w]=o.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},a(s.prototype),s.prototype[y]=function(){return this},e.AsyncIterator=s,e.async=function(r,n,o,i){var a=new s(t(r,n,o,i));return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(T),T[w]="Generator",T[g]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=p,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,n&&(r.method="next",r.arg=h),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=v.call(o,"catchLoc"),s=v.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,S):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),S},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),S}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;d(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=h),S}}}("object"==typeof t?t.exports:{})},{}],608:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}var i=e("buffer"),a=i.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(n(i,r),r.Buffer=o),o.prototype=Object.create(a.prototype),n(a,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:101}],609:[function(e,t,r){"use strict"},{}],610:[function(e,t,r){"use strict";var n=0;r.__interactionsRef=null,r.__subscriberRef=null,r.unstable_clear=function(e){return e()},r.unstable_getCurrent=function(){return null},r.unstable_getThreadID=function(){return++n},r.unstable_subscribe=function(){},r.unstable_trace=function(e,t,r){return r()},r.unstable_unsubscribe=function(){},r.unstable_wrap=function(e){return e}},{}],611:[function(e,t,r){"use strict"},{}],612:[function(e,t,r){"use strict";function n(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(!(void 0!==o&&0<a(o,t)))break e;e[n]=t,e[r]=o,r=n}}function o(e){return e=e[0],void 0===e?null:e}function i(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,s=e[i],l=i+1,u=e[l];if(void 0!==s&&0>a(s,r))void 0!==u&&0>a(u,s)?(e[n]=u,e[l]=r,n=l):(e[n]=s,e[i]=r,n=i);else{if(!(void 0!==u&&0>a(u,r)))break e;e[n]=u,e[l]=r,n=l}}}return t}return null}function a(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}function s(e){for(var t=o(D);null!==t;){if(null===t.callback)i(D);else{if(!(t.startTime<=e))break;i(D),t.sortIndex=t.expirationTime,n(T,t)}t=o(D)}}function l(e){if(V=!1,s(e),!L)if(null!==o(T))L=!0,c(u);else{var t=o(D);null!==t&&d(l,t.startTime-e)}}function u(e,t){L=!1,V&&(V=!1,f()),P=!0;var n=O;try{for(s(t),R=o(T);null!==R&&(!(R.expirationTime>t)||e&&!r.unstable_shouldYield());){var a=R.callback;if("function"==typeof a){R.callback=null,O=R.priorityLevel;var u=a(R.expirationTime<=t);t=r.unstable_now(),"function"==typeof u?R.callback=u:R===o(T)&&i(T),s(t)}else i(T);R=o(T)}if(null!==R)var c=!0;else{var p=o(D);null!==p&&d(l,p.startTime-t),c=!1}return c}finally{R=null,O=n,P=!1}}var c,d,f,p;if("object"==typeof performance&&"function"==typeof performance.now){var m=performance;r.unstable_now=function(){return m.now()}}else{var h=Date,b=h.now();r.unstable_now=function(){return h.now()-b}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var v=null,_=null,g=function(){if(null!==v)try{var e=r.unstable_now();v(!0,e),v=null}catch(e){throw setTimeout(g,0),e}};c=function(e){null!==v?setTimeout(c,0,e):(v=e,setTimeout(g,0))},d=function(e,t){_=setTimeout(e,t)},f=function(){clearTimeout(_)},r.unstable_shouldYield=function(){return!1},p=r.unstable_forceFrameRate=function(){}}else{var y=window.setTimeout,w=window.clearTimeout;if("undefined"!=typeof console){var j=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof j&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var k=!1,x=null,E=-1,S=5,C=0;r.unstable_shouldYield=function(){return r.unstable_now()>=C},p=function(){},r.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5};var I=new MessageChannel,A=I.port2;I.port1.onmessage=function(){if(null!==x){var e=r.unstable_now();C=e+S;try{x(!0,e)?A.postMessage(null):(k=!1,x=null)}catch(e){throw A.postMessage(null),e}}else k=!1},c=function(e){x=e,k||(k=!0,A.postMessage(null))},d=function(e,t){E=y(function(){e(r.unstable_now())},t)},f=function(){w(E),E=-1}}var T=[],D=[],M=1,R=null,O=3,P=!1,L=!1,V=!1,N=p;r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(e){e.callback=null},r.unstable_continueExecution=function(){L||P||(L=!0,c(u))},r.unstable_getCurrentPriorityLevel=function(){return O},r.unstable_getFirstCallbackNode=function(){return o(T)},r.unstable_next=function(e){switch(O){case 1:case 2:case 3:var t=3;break;default:t=O}var r=O;O=t;try{return e()}finally{O=r}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=N,r.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=O;O=e;try{return t()}finally{O=r}},r.unstable_scheduleCallback=function(e,t,i){var a=r.unstable_now();switch("object"==typeof i&&null!==i?(i=i.delay,i="number"==typeof i&&0<i?a+i:a):i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return s=i+s,e={id:M++,callback:t,priorityLevel:e,startTime:i,expirationTime:s,sortIndex:-1},i>a?(e.sortIndex=i,n(D,e),null===o(T)&&e===o(D)&&(V?f():V=!0,d(l,i-a))):(e.sortIndex=s,n(T,e),L||P||(L=!0,c(u))),e},r.unstable_wrapCallback=function(e){var t=O;return function(){var r=O;O=t;try{return e.apply(this,arguments)}finally{O=r}}}},{}],613:[function(e,t,r){"use strict";t.exports=e("./cjs/scheduler.production.min.js")},{"./cjs/scheduler.development.js":611,"./cjs/scheduler.production.min.js":612}],614:[function(e,t,r){"use strict";t.exports=e("./cjs/scheduler-tracing.production.min.js")},{"./cjs/scheduler-tracing.development.js":609,"./cjs/scheduler-tracing.production.min.js":610}],615:[function(e,t,r){function n(e,t){this._block=o.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}var o=e("safe-buffer").Buffer;n.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=o.from(e,t));for(var r=this._block,n=this._blockSize,i=e.length,a=this._len,s=0;s<i;){for(var l=a%n,u=Math.min(i-s,n-l),c=0;c<u;c++)r[l+c]=e[s+c];a+=u,s+=u,a%n==0&&this._update(r)}return this._len+=i,this},n.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=n},{"safe-buffer":608}],616:[function(e,t,r){function n(){this.init(),this._w=f,u.call(this,64,56)}function o(e){return e<<1|e>>>31}function i(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function s(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}var l=e("inherits"),u=e("./hash"),c=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],f=new Array(80);l(n,u),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,l=0|this._c,u=0|this._d,c=0|this._e,f=0;f<16;++f)t[f]=e.readInt32BE(4*f);for(;f<80;++f)t[f]=o(t[f-3]^t[f-8]^t[f-14]^t[f-16]);for(var p=0;p<80;++p){var m=~~(p/20),h=i(r)+s(m,n,l,u)+c+t[p]+d[m]|0;c=u,u=l,l=a(n),n=r,r=h}this._a=r+this._a|0,this._b=n+this._b|0,this._c=l+this._c|0,this._d=u+this._d|0,this._e=c+this._e|0},n.prototype._hash=function(){var e=c.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),
e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=n},{"./hash":615,inherits:319,"safe-buffer":608}],617:[function(e,t,r){function n(){this.init(),this._w=m,d.call(this,64,56)}function o(e,t,r){return r^e&(t^r)}function i(e,t,r){return e&t|r&(e|t)}function a(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function s(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function l(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function u(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}var c=e("inherits"),d=e("./hash"),f=e("safe-buffer").Buffer,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=new Array(64);c(n,d),n.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},n.prototype._update=function(e){for(var t=this._w,r=0|this._a,n=0|this._b,c=0|this._c,d=0|this._d,f=0|this._e,m=0|this._f,h=0|this._g,b=0|this._h,v=0;v<16;++v)t[v]=e.readInt32BE(4*v);for(;v<64;++v)t[v]=u(t[v-2])+t[v-7]+l(t[v-15])+t[v-16]|0;for(var _=0;_<64;++_){var g=b+s(f)+o(f,m,h)+p[_]+t[_]|0,y=a(r)+i(r,n,c)|0;b=h,h=m,m=f,f=d+g|0,d=c,c=n,n=r,r=g+y|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=c+this._c|0,this._d=d+this._d|0,this._e=f+this._e|0,this._f=m+this._f|0,this._g=h+this._g|0,this._h=b+this._h|0},n.prototype._hash=function(){var e=f.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=n},{"./hash":615,inherits:319,"safe-buffer":608}],618:[function(e,t,r){(function(n){(function(){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,i=e("./ponyfill.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(i);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==t?t:Function("return this")();var s=(0,a.default)(o);r.default=s}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":619}],619:[function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],620:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/possibleConstructorReturn")),s=n(e("@babel/runtime/helpers/getPrototypeOf")),l=n(e("@babel/runtime/helpers/inherits")),u=n(e("@babel/runtime/helpers/assertThisInitialized")),c=n(e("@babel/runtime/helpers/defineProperty")),d=n(e("live-set")),f=n(e("./TagTreeNode")),p=Object.freeze([]),m=function(e){function t(e){var r;(0,o.default)(this,t);var n;if(r=(0,a.default)(this,(0,s.default)(t).call(this,{value:e.root,parent:null,ownedTags:new Set(e.tags.map(function(e){return e.tag})),executor:function(e){n=e}})),(0,c.default)((0,u.default)((0,u.default)(r)),"_nodeControllers",new Map),(0,c.default)((0,u.default)((0,u.default)(r)),"_lookupTable",void 0),(0,c.default)((0,u.default)((0,u.default)(r)),"_allByTag",void 0),!n)throw new Error;r._nodeControllers.set((0,u.default)((0,u.default)(r)),n),r._lookupTable=new Map([[e.root,[(0,u.default)((0,u.default)(r))]]]),r._allByTag=new Map,e.tags.forEach(function(e){var t=e.tag,n=d.default.active(),o=n.liveSet,i=n.controller;if(r._allByTag.has(t))throw new Error("Tag specified twice: "+t);r._allByTag.set(t,{ownedTags:new Set,liveSet:o,controller:i})}),e.tags.forEach(function(e){var t=e.tag,n=e.ownedBy;n&&n.forEach(function(e){var n=r._allByTag.get(e);if(!n)throw new Error("unknown ownedBy value for ".concat(t,": ").concat(e));n.ownedTags.add(t)})});var i={tree:(0,u.default)((0,u.default)(r)),addTaggedValue:function(e,t,n){var o=r._allByTag.get(t);if(!o)throw new Error("unknown tag: ".concat(t));var i,a=new f.default({value:n,parent:e,ownedTags:o.ownedTags,executor:function(e){i=e}});if(!i)throw new Error;r._nodeControllers.set(a,i),o.controller.add(a);var s=r._lookupTable.get(n);s?s.push(a):r._lookupTable.set(n,[a]);var l=r._nodeControllers.get(e);if(!l)throw new Error("parent is not part of TagTree");return l.addOwnedNode(t,a),a},removeTaggedNode:function(e,t,n){var o=r._allByTag.get(t);if(!o)throw new Error("unknown tag: ".concat(t));var a=r._nodeControllers.get(e);if(!a)throw new Error("parent is not part of TagTree");var s=n.getValue(),l=r._lookupTable.get(s);if(!l)throw new Error("node was missing from lookup table before removal");if(l.length>1){var u=l.indexOf(n);if(u<0)throw new Error("node was missing from list in lookup table before removal");l.splice(u,1)}else r._lookupTable.delete(s);n.getOwned().forEach(function(e,t){e.values().forEach(function(e){i.removeTaggedNode(n,t,e)})}),o.controller.remove(n),a.removeOwnedNode(t,n),r._nodeControllers.delete(n)},end:function(){r._nodeControllers.forEach(function(e){e.end()}),r._allByTag.forEach(function(e){e.controller.end()})}};return e.executor(i),e.executor=function(){},r}return(0,l.default)(t,e),(0,i.default)(t,[{key:"getNodesForValue",value:function(e){var t=this._lookupTable.get(e);return t?Object.freeze(t.slice()):p}},{key:"getAllByTag",value:function(e){var t=this._allByTag.get(e);if(!t)throw new Error("tag does not exist in TagTree: ".concat(e));return t.liveSet}},{key:"getAll",value:function(){var e=new Map;return this._allByTag.forEach(function(t,r){var n=t.liveSet;e.set(r,n)}),e}}]),t}(f.default);r.default=m,t.exports=r.default,t.exports.default=r.default},{"./TagTreeNode":621,"@babel/runtime/helpers/assertThisInitialized":62,"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/getPrototypeOf":67,"@babel/runtime/helpers/inherits":68,"@babel/runtime/helpers/interopRequireDefault":69,"@babel/runtime/helpers/possibleConstructorReturn":76,"live-set":332}],621:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=n(e("@babel/runtime/helpers/defineProperty")),s=n(e("live-set")),l=function(){function e(t){var r=this;(0,o.default)(this,e),(0,a.default)(this,"_init",void 0),(0,a.default)(this,"_ownedNodes",new Map),(0,a.default)(this,"_ownedByTag",new Map),this._init=t,this._init.executor({node:this,addOwnedNode:function(e,t){r._ownedNodes.set(t,e);var n=r._ownedByTag.get(e);n||(n=r._createTagEntry(),r._ownedByTag.set(e,n)),n.controller.add(t)},removeOwnedNode:function(e,t){r._ownedNodes.delete(t);var n=r._ownedByTag.get(e);if(!n)throw new Error("tag not owned");n.controller.remove(t)},end:function(){r._ownedByTag.forEach(function(e){e.controller.end()})}}),this._init.executor=function(){}}return(0,i.default)(e,[{key:"_createTagEntry",value:function(){return s.default.active()}},{key:"getValue",value:function(){return this._init.value}},{key:"getParent",value:function(){return this._init.parent||null}},{key:"getOwnedByTag",value:function(e){var t=this._ownedByTag.get(e);if(!t){if(!this._init.ownedTags.has(e))throw new Error("tag not owned: ".concat(e));t=this._createTagEntry(),this._ownedByTag.set(e,t)}return t.liveSet}},{key:"getOwned",value:function(){var e=new Map;return this._ownedByTag.forEach(function(t,r){var n=t.liveSet;e.set(r,n)}),e}},{key:"getTag",value:function(){var e=this._init.parent;return e?e.getTagOfOwnedNode(this):null}},{key:"ownsNode",value:function(e){return this._ownedNodes.has(e)}},{key:"getTagOfOwnedNode",value:function(e){var t=this._ownedNodes.get(e);if(null==t)throw new Error("node not owned");return t}}]),e}();r.default=l,t.exports=r.default,t.exports.default=r.default},{"@babel/runtime/helpers/classCallCheck":63,"@babel/runtime/helpers/createClass":64,"@babel/runtime/helpers/defineProperty":65,"@babel/runtime/helpers/interopRequireDefault":69,"live-set":332}],622:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"TagTree",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"TagTreeNode",{enumerable:!0,get:function(){return i.default}});var o=n(e("./TagTree")),i=n(e("./TagTreeNode"))},{"./TagTree":620,"./TagTreeNode":621,"@babel/runtime/helpers/interopRequireDefault":69}],623:[function(e,t,r){function n(e,t){throw new Error("don't know how to "+e+" collection: "+t)}function o(e,t){return"iterator"===t?e[ce.iterator]||e.next:e[ce[t]]}function i(e,t){return e[ce[t]]}function a(e){var t=i(e,"iterator");return t?t.call(e):e.next?e:fe(e)?new s(e):c(e)?new l(e):void 0}function s(e){this.arr=e,this.index=0}function l(e){this.obj=e,this.keys=Object.keys(e),this.index=0}function u(e){return"function"==typeof e}function c(e){return e instanceof Object&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})}function d(e){return"number"==typeof e}function f(e){this["@@transducer/reduced"]=!0,this["@@transducer/value"]=e}function p(e){return e instanceof f||e&&e["@@transducer/reduced"]}function m(e){return e["@@transducer/value"]}function h(e){return p(e)?e:new f(e)}function b(e){return p(e)?m(e):e}function v(e,t,r){if(fe(e)){for(var i=r,s=-1,l=e.length;++s<l;)if(i=t["@@transducer/step"](i,e[s]),p(i)){i=m(i);break}return t["@@transducer/result"](i)}if(c(e)||o(e,"iterator")){for(var i=r,u=a(e),d=u.next();!d.done;){if(i=t["@@transducer/step"](i,d.value),p(i)){i=m(i);break}d=u.next()}return t["@@transducer/result"](i)}n("iterate",e)}function _(e,t,r,n){return t=t(r),void 0===n&&(n=t["@@transducer/init"]()),v(e,t,n)}function g(){var e=Array.prototype.slice.call(arguments);return function(t){for(var r=t,n=e.length-1;n>=0;n--)r=e[n](r);return r}}function y(e){var t={};return t["@@transducer/init"]=function(){throw new Error("init value unavailable")},t["@@transducer/result"]=function(e){return e},t["@@transducer/step"]=e,t}function w(e,t,r){if(r=null!=r?r:1,!t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};default:return e.bind(t)}}function j(e,t,r){var n=-1,o=e.length,i=Array(o);for(t=w(t,r,2);++n<o;)i[n]=t(e[n],n);return i}function k(e,t,r){var n=e.length,o=[];t=w(t,r,2);for(var i=0;i<n;i++)t(e[i],i)&&o.push(e[i]);return o}function x(e,t){this.xform=t,this.f=e}function E(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?fe(e)?j(e,t,r):oe(e,E(t)):function(e){return new x(t,e)}}function S(e,t){this.xform=t,this.f=e}function C(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?fe(e)?k(e,t,r):oe(e,C(t)):function(e){return new S(t,e)}}function I(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),C(e,function(e){return!t(e)})}function A(e){return C(e,function(e){return null!=e})}function T(e){this.xform=e,this.last=void 0}function D(e){return e?oe(e,D()):function(e){return new T(e)}}function M(e,t){this.xform=t,this.f=e}function R(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?oe(e,R(t)):function(e){return new M(t,e)}}function O(e,t){this.n=e,this.i=0,this.xform=t}function P(e,t){return d(e)&&(t=e,e=null),e?oe(e,P(t)):function(e){return new O(t,e)}}function L(e,t){this.n=e,this.i=0,this.xform=t}function V(e,t){return d(e)&&(t=e,e=null),e?oe(e,V(t)):function(e){return new L(t,e)}}function N(e,t){this.xform=t,this.f=e,this.dropping=!0}function B(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?oe(e,B(t)):function(e){return new N(t,e)}}function q(e,t){this.n=e,this.i=0,this.xform=t,this.part=new Array(e)}function U(e,t){return d(e)&&(t=e,e=null),e?oe(e,U(t)):function(e){return new q(t,e)}}function F(e,t){this.f=e,this.xform=t,this.part=[],this.last=pe}function H(e,t,r){return u(e)&&(r=t,t=e,e=null),t=w(t,r),e?oe(e,H(t)):function(e){return new F(t,e)}}function z(e,t){this.sep=e,this.xform=t,this.started=!1}function W(e,t){return 1===arguments.length?(t=e,function(e){return new z(t,e)}):oe(e,W(t))}function G(e,t){this.xform=t,this.n=e}function K(e,t){return 1===arguments.length?(t=e,function(e){return new G(t,e)}):oe(e,K(t))}function $(e,t){this.xform=t,this.n=e,this.i=-1}function J(e,t){return 1===arguments.length?(t=e,function(e){return new $(t,e)}):oe(e,J(t))}function Y(e){this.xform=e}function Q(e){return new Y(e)}function Z(e,t){return e=w(e,t),g(E(e),Q)}function X(e,t){return e.push(t),e}function ee(e,t){if(fe(t)&&2===t.length)e[t[0]]=t[1];else for(var r=Object.keys(t),n=r.length,o=0;o<n;o++)e[r[o]]=t[r[o]];return e}function te(e,t){return t?_(e,t,me,[]):v(e,me,[])}function re(e,t){return t?_(e,t,he,{}):v(e,he,{})}function ne(e,t){return t?new se(t,e):a(e)}function oe(e,t){if(fe(e))return _(e,t,me,[]);if(c(e))return _(e,t,he,{});if(e["@@transducer/step"]){var r;return r=e["@@transducer/init"]?e["@@transducer/init"]():new e.constructor,_(e,t,e,r)}if(o(e,"iterator"))return new se(t,e);n("sequence",e)}function ie(e,t,r){return fe(e)?_(r,t,me,e):c(e)?_(r,t,he,e):e["@@transducer/step"]?_(r,t,e,e):void n("into",e)}function ae(e,t){this.xform=e(be),this.iter=t}function se(e,t){this.iter=a(t),this.items=[],this.stepper=new ae(e,a(t))}function le(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=r;return t}var ue="undefined"!=typeof Symbol,ce={iterator:ue?Symbol.iterator:"@@iterator"};s.prototype.next=function(){return this.index<this.arr.length?{value:this.arr[this.index++],done:!1}:{done:!0}},l.prototype.next=function(){if(this.index<this.keys.length){var e=this.keys[this.index++];return{value:[e,this.obj[e]],done:!1}}return{done:!0}};var de=Object.prototype.toString,fe="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"==de.call(e)};x.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},x.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},x.prototype["@@transducer/step"]=function(e,t){return this.xform["@@transducer/step"](e,this.f(t))},S.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},S.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},S.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):e},T.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},T.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},T.prototype["@@transducer/step"]=function(e,t){return t!==this.last?(this.last=t,this.xform["@@transducer/step"](e,t)):e},M.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},M.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},M.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):new f(e)},O.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},O.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},O.prototype["@@transducer/step"]=function(e,t){return this.i<this.n&&(e=this.xform["@@transducer/step"](e,t),this.i+1>=this.n&&(e=h(e))),this.i++,e},L.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},L.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},L.prototype["@@transducer/step"]=function(e,t){return this.i++<this.n?e:this.xform["@@transducer/step"](e,t)},N.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},N.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},N.prototype["@@transducer/step"]=function(e,t){if(this.dropping){if(this.f(t))return e;this.dropping=!1}return this.xform["@@transducer/step"](e,t)},q.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},q.prototype["@@transducer/result"]=function(e){return this.i>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,this.i))):this.xform["@@transducer/result"](e)},q.prototype["@@transducer/step"]=function(e,t){if(this.part[this.i]=t,this.i+=1,this.i===this.n){var r=this.part.slice(0,this.n);return this.part=new Array(this.n),this.i=0,this.xform["@@transducer/step"](e,r)}return e};var pe={};F.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},F.prototype["@@transducer/result"]=function(e){var t=this.part.length;return t>0?b(this.xform["@@transducer/step"](e,this.part.slice(0,t))):this.xform["@@transducer/result"](e)},F.prototype["@@transducer/step"]=function(e,t){var r=this.f(t);return r===this.last||this.last===pe?this.part.push(t):(e=this.xform["@@transducer/step"](e,this.part),this.part=[t]),this.last=r,e},z.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},z.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},z.prototype["@@transducer/step"]=function(e,t){if(this.started){var r=this.xform["@@transducer/step"](e,this.sep);return p(r)?r:this.xform["@@transducer/step"](r,t)}return this.started=!0,this.xform["@@transducer/step"](e,t)},G.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},G.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},G.prototype["@@transducer/step"]=function(e,t){for(var r=this.n,n=e,o=0;o<r&&(n=this.xform["@@transducer/step"](n,t),!p(n));o++);return n},$.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},$.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},$.prototype["@@transducer/step"]=function(e,t){return this.i+=1,this.i%this.n==0?this.xform["@@transducer/step"](e,t):e},Y.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},Y.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},Y.prototype["@@transducer/step"]=function(e,t){var r=this.xform,n={};return n["@@transducer/init"]=function(){return r["@@transducer/init"]()},n["@@transducer/result"]=function(e){return e},n["@@transducer/step"]=function(e,t){var n=r["@@transducer/step"](e,t);return p(n)?m(n):n},v(t,n,e)};var me={};me["@@transducer/init"]=function(){return[]},me["@@transducer/result"]=function(e){return e},me["@@transducer/step"]=X;var he={};he["@@transducer/init"]=function(){return{}},he["@@transducer/result"]=function(e){return e},he["@@transducer/step"]=ee;var be={};be["@@transducer/result"]=function(e){return p(e)?m(e):e},be["@@transducer/step"]=function(e,t){return e.items.push(t),e.rest},ae.prototype["@@transducer/step"]=function(e){for(var t=e.items.length;e.items.length===t;){var r=this.iter.next();if(r.done||p(r.value)){this.xform["@@transducer/result"](this);break}this.xform["@@transducer/step"](e,r.value)}},se.prototype[ce.iterator]=function(){return this},se.prototype.next=function(){return this["@@transducer/step"](),this.items.length?{value:this.items.pop(),done:!1}:{done:!0}},se.prototype["@@transducer/step"]=function(){this.items.length||this.stepper["@@transducer/step"](this)},t.exports={reduce:v,transformer:y,Reduced:f,isReduced:p,iterator:a,push:X,merge:ee,transduce:_,seq:oe,toArray:te,toObj:re,toIter:ne,into:ie,compose:g,map:E,filter:C,remove:I,cat:Q,mapcat:Z,keep:A,dedupe:D,take:P,takeWhile:R,takeNth:J,drop:V,dropWhile:B,partition:U,partitionBy:H,interpose:W,repeat:K,range:le,LazyTransformer:se}},{}],624:[function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=(0,o.defonce)(e,function(){var e,t=i.stream(function(t){e=t}),r=t.toProperty();if(r.onValue(function(){}),!e)throw new Error("Should not happen, emitter was not set");var n=e;return{property:r,emit:function(e){n.emit(e)}}},"--udkefir-"+r);return n.emit(t),n.property}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var o=e("ud"),i=e("kefir");t.exports=r.default,t.exports.default=r.default},{kefir:327,ud:625}],625:[function(e,t,r){"use strict";function n(e){e.hot&&e.hot.accept()}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n(e);var o=_.get(e);if(o||(o=new m.default,_.set(e,o)),o.has(r))throw new Error("ud functions can only be used once per module with a given key");o.add(r);var i=!1,a=void 0;return e.hot&&(e.hot.data&&e.hot.data.__ud__&&Object.prototype.hasOwnProperty.call(e.hot.data.__ud__,r)&&(a=e.hot.data.__ud__[r],i=!0),e.hot.dispose(function(e){e.__ud__||(e.__ud__={}),e.__ud__[r]=a})),i||(a=t()),a}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=o(e,function(){return t},"--defobj-"+r);return n!==t&&a(n,t),n}function a(e,t){(0,p.default)(e).filter(function(e){return!Object.prototype.hasOwnProperty.call(t,e)}).forEach(function(t){delete e[t]});var r=(0,p.default)(t);return(0,f.default)(e,v(r,r.map(function(e){return(0,d.default)(t,e)}).filter(Boolean).map(function(e){return{value:e.value,enumerable:e.enumerable,writable:!0,configurable:!0}}))),e}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=o(e,function(){if(!e.hot)return{fn:null,wrapper:t};var r={fn:null,wrapper:null},n=b(t.length).map(function(e){return"a"+e}).join(",");return r.wrapper=new Function("shared","\n      'use strict';\n      return function ".concat(t.name,"__ud_wrapper(").concat(n,") {\n        if (new.target) {\n          return Reflect.construct(shared.fn, arguments, new.target);\n        } else {\n          return shared.fn.apply(this, arguments);\n        }\n      };\n      "))(r),t.prototype?(r.wrapper.prototype=(0,c.default)(t.prototype),r.wrapper.prototype.constructor=r.wrapper):r.wrapper.prototype=t.prototype,r},"--defn-shared-"+r);return n.fn=t,e.hot&&(t.prototype&&n.wrapper.prototype&&(0,u.default)(n.wrapper.prototype)!==t.prototype&&Object.setPrototypeOf(n.wrapper.prototype,t.prototype),Object.setPrototypeOf(n.wrapper,t)),n.wrapper}var l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.markReloadable=n,r.defonce=o,r.defobj=i,r.defn=s;var u=l(e("@babel/runtime-corejs2/core-js/object/get-prototype-of")),c=l(e("@babel/runtime-corejs2/core-js/object/create")),d=l(e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor")),f=l(e("@babel/runtime-corejs2/core-js/object/define-properties")),p=l(e("@babel/runtime-corejs2/core-js/object/get-own-property-names")),m=l(e("@babel/runtime-corejs2/core-js/set")),h=l(e("@babel/runtime-corejs2/core-js/weak-map")),b=e("array-range"),v=e("zip-object"),_=new h.default},{"@babel/runtime-corejs2/core-js/object/create":10,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-names":16,"@babel/runtime-corejs2/core-js/object/get-prototype-of":18,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"array-range":82,"zip-object":633}],626:[function(e,t,r){"use strict";function n(e,t){for(var r=1,n=e.length,o=e[0],i=e[0],a=1;a<n;++a)if(i=o,o=e[a],t(o,i)){if(a===r){r++;continue}e[r++]=o}return e.length=r,e}function o(e){for(var t=1,r=e.length,n=e[0],o=e[0],i=1;i<r;++i,o=n)if(o=n,(n=e[i])!==o){if(i===t){t++;continue}e[t++]=n}return e.length=t,e}function i(e,t,r){return 0===e.length?e:t?(r||e.sort(t),n(e,t)):(r||e.sort(),o(e))}t.exports=i},{}],627:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{dup:87}],628:[function(e,t,r){"use strict";function n(e){return e.call.bind(e)}function o(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function i(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):K(e)||A(e)}function s(e){return"Uint8Array"===G(e)}function l(e){return"Uint8ClampedArray"===G(e)}function u(e){return"Uint16Array"===G(e)}function c(e){return"Uint32Array"===G(e)}function d(e){return"Int8Array"===G(e)}function f(e){return"Int16Array"===G(e)}function p(e){return"Int32Array"===G(e)}function m(e){return"Float32Array"===G(e)}function h(e){return"Float64Array"===G(e)}function b(e){return"BigInt64Array"===G(e)}function v(e){return"BigUint64Array"===G(e)}function _(e){return"[object Map]"===Y(e)}function g(e){return"undefined"!=typeof Map&&(_.working?_(e):e instanceof Map)}function y(e){return"[object Set]"===Y(e)}function w(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)}function j(e){return"[object WeakMap]"===Y(e)}function k(e){return"undefined"!=typeof WeakMap&&(j.working?j(e):e instanceof WeakMap)}function x(e){return"[object WeakSet]"===Y(e)}function E(e){return x(e)}function S(e){return"[object ArrayBuffer]"===Y(e)}function C(e){return"undefined"!=typeof ArrayBuffer&&(S.working?S(e):e instanceof ArrayBuffer)}function I(e){return"[object DataView]"===Y(e)}function A(e){return"undefined"!=typeof DataView&&(I.working?I(e):e instanceof DataView)}function T(e){return"[object SharedArrayBuffer]"===Y(e)}function D(e){return void 0!==re&&(void 0===T.working&&(T.working=T(new re)),T.working?T(e):e instanceof re)}function M(e){return"[object AsyncFunction]"===Y(e)}function R(e){return"[object Map Iterator]"===Y(e)}function O(e){return"[object Set Iterator]"===Y(e)}function P(e){return"[object Generator]"===Y(e)}function L(e){return"[object WebAssembly.Module]"===Y(e)}function V(e){return o(e,Q)}function N(e){return o(e,Z)}function B(e){return o(e,X)}function q(e){return $&&o(e,ee)}function U(e){return J&&o(e,te)}function F(e){return V(e)||N(e)||B(e)||q(e)||U(e)}function H(e){return"undefined"!=typeof Uint8Array&&(C(e)||D(e))}var z=e("is-arguments"),W=e("is-generator-function"),G=e("which-typed-array"),K=e("is-typed-array"),$="undefined"!=typeof BigInt,J="undefined"!=typeof Symbol,Y=n(Object.prototype.toString),Q=n(Number.prototype.valueOf),Z=n(String.prototype.valueOf),X=n(Boolean.prototype.valueOf);if($)var ee=n(BigInt.prototype.valueOf);if(J)var te=n(Symbol.prototype.valueOf);r.isArgumentsObject=z,r.isGeneratorFunction=W,r.isTypedArray=K,r.isPromise=i,r.isArrayBufferView=a,r.isUint8Array=s,r.isUint8ClampedArray=l,r.isUint16Array=u,r.isUint32Array=c,r.isInt8Array=d,r.isInt16Array=f,r.isInt32Array=p,r.isFloat32Array=m,r.isFloat64Array=h,r.isBigInt64Array=b,r.isBigUint64Array=v,_.working="undefined"!=typeof Map&&_(new Map),r.isMap=g,y.working="undefined"!=typeof Set&&y(new Set),r.isSet=w,j.working="undefined"!=typeof WeakMap&&j(new WeakMap),r.isWeakMap=k,x.working="undefined"!=typeof WeakSet&&x(new WeakSet),r.isWeakSet=E,S.working="undefined"!=typeof ArrayBuffer&&S(new ArrayBuffer),r.isArrayBuffer=C,I.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&I(new DataView(new ArrayBuffer(1),0,1)),r.isDataView=A;var re="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;r.isSharedArrayBuffer=D,r.isAsyncFunction=M,r.isMapIterator=R,r.isSetIterator=O,r.isGeneratorObject=P,r.isWebAssemblyCompiledModule=L,r.isNumberObject=V,r.isStringObject=N,r.isBooleanObject=B,r.isBigIntObject=q,r.isSymbolObject=U,r.isBoxedPrimitive=F,r.isAnyArrayBuffer=H,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(e){Object.defineProperty(r,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})})},{"is-arguments":321,"is-generator-function":322,"is-typed-array":323,"which-typed-array":630}],629:[function(e,t,r){(function(t){(function(){function n(e,t){var n={seen:[],stylize:i};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),s(n,e,n.depth)}function o(e,t){var r=n.styles[t];return r?"["+n.colors[r][0]+"m"+e+"["+n.colors[r][1]+"m":e}function i(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function s(e,t,n){if(e.customInspect&&t&&E(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(n,e);return _(o)||(o=s(e,o,n)),o}var i=l(e,t);if(i)return i;var m=Object.keys(t),h=a(m);if(e.showHidden&&(m=Object.getOwnPropertyNames(t)),x(t)&&(m.indexOf("message")>=0||m.indexOf("description")>=0))return u(t);if(0===m.length){if(E(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(x(t))return u(t)}var v="",g=!1,y=["{","}"];if(p(t)&&(g=!0,y=["[","]"]),E(t)){v=" [Function"+(t.name?": "+t.name:"")+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),k(t)&&(v=" "+Date.prototype.toUTCString.call(t)),x(t)&&(v=" "+u(t)),0===m.length&&(!g||0==t.length))return y[0]+v+y[1];if(n<0)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var j;return j=g?c(e,t,n,h,m):m.map(function(r){return d(e,t,n,h,r,g)}),e.seen.pop(),f(j,v,y)}function l(e,t){if(y(t))return e.stylize("undefined","undefined");if(_(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return v(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):h(t)?e.stylize("null","null"):void 0}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,r,n,o){for(var i=[],a=0,s=t.length;a<s;++a)T(t,String(a))?i.push(d(e,t,r,n,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))}),i}function d(e,t,r,n,o,i){var a,l,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?l=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(l=e.stylize("[Setter]","special")),T(n,o)||(a="["+o+"]"),l||(e.seen.indexOf(u.value)<0?(l=h(r)?s(e,u.value,null):s(e,u.value,r-1),l.indexOf("\n")>-1&&(l=i?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),y(a)){if(i&&o.match(/^\d+$/))return l;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+l}function f(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function h(e){return null===e}function b(e){return null==e}function v(e){return"number"==typeof e}function _(e){return"string"==typeof e}function g(e){
return"symbol"==typeof e}function y(e){return void 0===e}function w(e){return j(e)&&"[object RegExp]"===C(e)}function j(e){return"object"==typeof e&&null!==e}function k(e){return j(e)&&"[object Date]"===C(e)}function x(e){return j(e)&&("[object Error]"===C(e)||e instanceof Error)}function E(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function C(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function M(e){function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var o=r.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,r).then(function(e){t.nextTick(a.bind(null,null,e))},function(e){t.nextTick(D.bind(null,e,a))})}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,R(e)),r}var R=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},O=/%[sdj%]/g;r.format=function(e){if(!_(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,o=arguments,i=o.length,a=String(e).replace(O,function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(o[r++]);case"%d":return Number(o[r++]);case"%j":try{return JSON.stringify(o[r++])}catch(e){return"[Circular]"}default:return e}}),s=o[r];r<i;s=o[++r])h(s)||!j(s)?a+=" "+s:a+=" "+n(s);return a},r.deprecate=function(e,n){function o(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}if(void 0!==t&&!0===t.noDeprecation)return e;if(void 0===t)return function(){return r.deprecate(e,n).apply(this,arguments)};var i=!1;return o};var P={},L=/^$/;if(t.env.NODE_DEBUG){var V=t.env.NODE_DEBUG;V=V.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),L=new RegExp("^"+V+"$","i")}r.debuglog=function(e){if(e=e.toUpperCase(),!P[e])if(L.test(e)){var n=t.pid;P[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else P[e]=function(){};return P[e]},r.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.types=e("./support/types"),r.isArray=p,r.isBoolean=m,r.isNull=h,r.isNullOrUndefined=b,r.isNumber=v,r.isString=_,r.isSymbol=g,r.isUndefined=y,r.isRegExp=w,r.types.isRegExp=w,r.isObject=j,r.isDate=k,r.types.isDate=k,r.isError=x,r.types.isNativeError=x,r.isFunction=E,r.isPrimitive=S,r.isBuffer=e("./support/isBuffer");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var B="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;r.promisify=function(e){function t(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(e){r(e)}return n}if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(B&&e[B]){var t=e[B];if("function"!=typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),B&&Object.defineProperty(t,B,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,R(e))},r.promisify.custom=B,r.callbackify=M}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":627,"./support/types":628,_process:568,inherits:319}],630:[function(e,t,r){(function(r){(function(){"use strict";var n=e("foreach"),o=e("available-typed-arrays"),i=e("call-bind/callBound"),a=i("Object.prototype.toString"),s=e("has-symbols")(),l=s&&"symbol"==typeof Symbol.toStringTag,u=o(),c=i("String.prototype.slice"),d={},f=e("es-abstract/helpers/getOwnPropertyDescriptor"),p=Object.getPrototypeOf;l&&f&&p&&n(u,function(e){if("function"==typeof r[e]){var t=new r[e];if(!(Symbol.toStringTag in t))throw new EvalError("this engine has support for Symbol.toStringTag, but "+e+" does not have the property! Please report this.");var n=p(t),o=f(n,Symbol.toStringTag);if(!o){var i=p(n);o=f(i,Symbol.toStringTag)}d[e]=o.get}});var m=function(e){var t=!1;return n(d,function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(e){}}),t},h=e("is-typed-array");t.exports=function(e){return!!h(e)&&(l?m(e):c(a(e),8,-1))}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"available-typed-arrays":90,"call-bind/callBound":102,"es-abstract/helpers/getOwnPropertyDescriptor":301,foreach:309,"has-symbols":313,"is-typed-array":323}],631:[function(e,t,r){t.exports=e("./lib/Observable.js").Observable},{"./lib/Observable.js":632}],632:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function a(e,t){var r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(r+" is not a function");return r}}function s(e){var t=e.constructor;return void 0!==t&&null===(t=t[w])&&(t=void 0),void 0!==t?t:x}function l(e){return e instanceof x}function u(e){u.log?u.log(e):setTimeout(function(){throw e})}function c(e){Promise.resolve().then(function(){try{e()}catch(e){u(e)}})}function d(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var r=a(t,"unsubscribe");r&&r.call(t)}}catch(e){u(e)}}function f(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function p(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var r=0;r<t.length&&(m(e,t[r].type,t[r].value),"closed"!==e._state);++r);}}function m(e,t,r){e._state="running";var n=e._observer;try{var o=a(n,t);switch(t){case"next":o&&o.call(n,r);break;case"error":if(f(e),!o)throw r;o.call(n,r);break;case"complete":f(e),o&&o.call(n)}}catch(e){u(e)}"closed"===e._state?d(e):"running"===e._state&&(e._state="ready")}function h(e,t,r){if("closed"!==e._state)return"buffering"===e._state?void e._queue.push({type:t,value:r}):"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:r}],void c(function(){return p(e)})):void m(e,t,r)}Object.defineProperty(r,"__esModule",{value:!0}),r.Observable=void 0;var b=function(){return"function"==typeof Symbol},v=function(e){return b()&&Boolean(Symbol[e])},_=function(e){return v(e)?Symbol[e]:"@@"+e};b()&&!v("observable")&&(Symbol.observable=Symbol("observable"));var g=_("iterator"),y=_("observable"),w=_("species"),j=function(){function e(t,r){n(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var o=new k(this);try{this._cleanup=r.call(void 0,o)}catch(e){o.error(e)}"initializing"===this._state&&(this._state="ready")}return i(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(f(this),d(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),k=function(){function e(t){n(this,e),this._subscription=t}return i(e,[{key:"next",value:function(e){h(this._subscription,"next",e)}},{key:"error",value:function(e){h(this._subscription,"error",e)}},{key:"complete",value:function(){h(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),x=function(){function e(t){if(n(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return i(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new j(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise(function(r,n){function o(){i.unsubscribe(),r()}if("function"!=typeof e)return void n(new TypeError(e+" is not a function"));var i=t.subscribe({next:function(t){try{e(t,o)}catch(e){n(e),i.unsubscribe()}},error:n,complete:r})})}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))(function(r){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(s(this))(function(r){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return r.error(e)}r.next(t)},error:function(e){r.error(e)},complete:function(){r.complete()}})})}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=s(this),n=arguments.length>1,o=!1,i=arguments[1],a=i;return new r(function(r){return t.subscribe({next:function(t){var i=!o;if(o=!0,!i||n)try{a=e(a,t)}catch(e){return r.error(e)}else a=t},error:function(e){r.error(e)},complete:function(){if(!o&&!n)return r.error(new TypeError("Cannot reduce an empty sequence"));r.next(a),r.complete()}})})}},{key:"concat",value:function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=s(this);return new o(function(t){function n(e){i=e.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){a===r.length?(i=void 0,t.complete()):n(o.from(r[a++]))}})}var i,a=0;return n(e),function(){i&&(i.unsubscribe(),i=void 0)}})}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var r=s(this);return new r(function(n){function o(){a.closed&&0===i.length&&n.complete()}var i=[],a=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return n.error(e)}var a=r.from(t).subscribe({next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=i.indexOf(a);e>=0&&i.splice(e,1),o()}});i.push(a)},error:function(e){n.error(e)},complete:function(){o()}});return function(){i.forEach(function(e){return e.unsubscribe()}),a.unsubscribe()}})}},{key:y,value:function(){return this}}],[{key:"from",value:function(t){var r="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var n=a(t,y);if(n){var o=n.call(t);if(Object(o)!==o)throw new TypeError(o+" is not an object");return l(o)&&o.constructor===r?o:new r(function(e){return o.subscribe(e)})}if(v("iterator")&&(n=a(t,g)))return new r(function(e){c(function(){if(!e.closed){var r=!0,o=!1,i=void 0;try{for(var a,s=n.call(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value;if(e.next(l),e.closed)return}}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}e.complete()}})});if(Array.isArray(t))return new r(function(e){c(function(){if(!e.closed){for(var r=0;r<t.length;++r)if(e.next(t[r]),e.closed)return;e.complete()}})});throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new("function"==typeof this?this:e)(function(e){c(function(){if(!e.closed){for(var t=0;t<r.length;++t)if(e.next(r[t]),e.closed)return;e.complete()}})})}},{key:w,get:function(){return this}}]),e}();r.Observable=x,b()&&Object.defineProperty(x,Symbol("extensions"),{value:{symbol:y,hostReportError:u},configurable:!0})},{}],633:[function(e,t,r){var n=function(e,t){1==arguments.length&&(t=e[1],e=e[0]);var r={},n=0;for(n;n<e.length;n+=1)r[e[n]]=t[n];return r};t.exports=n},{}],634:[function(e,t,r){"use strict";function n(e){if(!e||"string"!=typeof e.url)throw new Error("URL must be given");return new s.default(function(t,r){var n=e.method?e.method:"GET",i=e.url,a=null;e.data&&(a="string"==typeof e.data?e.data:c.default.stringify(e.data),"GET"!==n&&"HEAD"!==n||(i+=(/\?/.test(i)?"&":"?")+a,a=null));var s=null!=e.canRetry?e.canRetry:"GET"===n||"HEAD"===n,d=i.match(/(?:(?:[a-z]+:)?\/\/)?([^/]*)\//);if(!d)throw new Error("Failed to match url");var p=d[1];if(Object.prototype.hasOwnProperty.call(h,p))return void r(new Error("Server at ".concat(i," has told us to stop connecting")));e.cachebust&&(i=(0,f.default)(i));var b=e.XMLHttpRequest||window.XMLHttpRequest,v=new b;if((0,l.default)(v,e.xhrFields),v.onerror=function(n){if((e.retryNum||0)<m&&(502===v.status||(0===v.status||v.status>=500)&&s))return void t(o(e));var a=(0,l.default)(new Error("Failed to load ".concat(i)),{event:n,xhr:v,status:v.status});490==v.status&&(h[p]=!0),r(a)},v.onload=function(e){200===v.status?t({xhr:v,text:v.responseText}):v.onerror(e)},v.open(n,i,!0),e.headers){var _=e.headers;(0,u.default)(_).forEach(function(e){var t=_[e];v.setRequestHeader(e,t)})}v.send(a)})}function o(e){var t=(e.retryNum||0)+1,r=Math.min(1e3*Math.pow(2,t),p);return(0,d.default)(r).then(function(){return n((0,l.default)({},e,{retryNum:t}))})}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/core-js/promise")),l=a(e("@babel/runtime-corejs2/core-js/object/assign")),u=a(e("@babel/runtime-corejs2/core-js/object/keys")),c=a(e("querystring")),d=a(e("pdelay")),f=a(e("./cachebust-url")),p=64e3,m=5,h={}},{"./cachebust-url":635,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,pdelay:545,querystring:579}],635:[function(e,t,r){"use strict";function n(e){return s.test(e)?e.replace(s,"$1_="+l++):e+(/\?/.test(e)?"&":"?")+"_="+l++}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/date/now")),s=/([?&])_=[^&]*/,l=(0,a.default)()+Math.floor(Math.random()*Math.pow(2,32))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],636:[function(e,t,r){"use strict";function n(e){return e.replace(/(^|>)([^<]+)/g,function(e,t,r){return t+(r.trim().length?"...":"")}).replace(/\s([^\s=]+)\s*=\s*"[^"]+"/g,function(e,t){return s.has(t)?e:" ".concat(t,'="..."')})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n,r.ATTRIBUTE_WHITELIST=void 0;var a=i(e("@babel/runtime-corejs2/core-js/set")),s=new a.default(["class","rel","target","type","tabindex","id","style","role","contenteditable","aria-expanded","aria-hidden","aria-disabled","aria-haspopup","aria-labelledby","aria-busy","aria-multiselectable","name","data-action-data","data-item-id","data-msg-id","data-map-id","g_editable","jsnamespace","jsaction"]);r.ATTRIBUTE_WHITELIST=s},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],637:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e){for(var t=[],r=[],n=e,o=0;n;){var i=(0,m.default)(n.attributes).map(function(e){var t=e.name,r=e.value;return(0,h.default)(c||(c=(0,p.default)([" ",'="','"'])),t,b.ATTRIBUTE_WHITELIST.has(t)?r:"...")}).join(""),a=o,s=n.children.length-1-o,l=e!==n&&a?"[".concat(a,"]"):"",u=e!==n&&s?"[".concat(s,"]"):"";t.push((0,h.default)(d||(d=(0,p.default)(["<","",">",""])),n.nodeName.toLowerCase(),{__html:i},l)),r.push((0,h.default)(f||(f=(0,p.default)(["","</",">"])),u,n.nodeName.toLowerCase())),n.parentElement&&(o=(0,m.default)(n.parentElement.children).indexOf(n)),n=n.parentElement}return t.reverse().join("")+(0,b.default)(e.innerHTML)+r.join("")}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=o;var c,d,f,p=u(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),m=u(e("@babel/runtime-corejs2/core-js/array/from")),h=u(e("auto-html")),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("./censorHTMLstring"))},{"./censorHTMLstring":636,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/helpers/typeof":57,"auto-html":89}],638:[function(e,t,r){"use strict";function n(e){return new s.default(function(t){var r=document.createElement("img");r.onload=function(){t(!0)},r.addEventListener("loadend",function(){t(!1)}),r.onerror=function(){t(!1)},r.src=(0,l.default)(e)})}function o(){return s.default.all(c.map(function(e){return n(e).then(function(t){return[e,t]})})).then(function(e){return(0,u.default)(e)})}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=o;var s=a(e("@babel/runtime-corejs2/core-js/promise")),l=a(e("./cachebust-url")),u=a(e("lodash/fromPairs")),c=["https://www.inboxsdk.com/images/logo-red.png"]},{"./cachebust-url":635,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/fromPairs":489}],639:[function(e,t,r){"use strict";function n(){var e=void 0,t=void 0,r=new a.default(function(r,n){e=r,t=n});return{resolve:e,reject:t,promise:r}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],640:[function(e,t,r){"use strict";function n(e,t){for(var r=e.parentElement;r;){if(t(r))return r;r=r.parentElement}return null}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],641:[function(e,t,r){(function(t){(function(){"use strict";function n(){var e=t.chrome;return e&&e.extension&&e.extension.getURL?e.extension.getURL(""):null}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime-corejs2/core-js/object/define-property":12}],642:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,t){var r=e.get(t);if(void 0===r)throw new Error("Key not found in map");return r},o=n;r.default=o},{"@babel/runtime-corejs2/core-js/object/define-property":12}],643:[function(e,t,r){"use strict";function n(){var e="undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-session-id");if("string"==typeof e)return e;var t=(0,a.default)()+"-"+Math.random();return"undefined"!=typeof document&&document.documentElement.setAttribute("data-inboxsdk-session-id",t),t}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/date/now"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],644:[function(e,t,r){"use strict";function n(){return(""+new Error("Stack saver").stack).replace(/^([^\n]*\n){2}/,"")}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],645:[function(e,t,r){"use strict";function n(e){var t=document.createElement("div");return t.innerHTML=e.replace(/<[^>]*>?/g,""),t.textContent}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],646:[function(e,t,r){"use strict";function n(e){return e.offsetWidth>0||e.offsetHeight>0}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],647:[function(e,t,r){(function(t){(function(){"use strict";function n(e,t){var r=document.createElement("script");r.type="text/javascript",t&&(r.crossOrigin="anonymous");var n=new s.default(function(t,n){r.addEventListener("error",function(t){n(t.error||new Error(t.message||"Load failure: "+e,t.filename,t.lineno,t.column))},!1),r.addEventListener("load",function(){setTimeout(t,1)},!1)});if(r.src=e,!document.head)throw new Error("missing head");return document.head.appendChild(r),n}function o(e,r){var o;if(p()){o=function n(o,i){if(o>3)throw i||new Error("Ran out of loadScript attempts for unknown reason");return(0,d.default)({url:e,cachebust:o>0,XMLHttpRequest:r?r.XMLHttpRequest:void 0}).then(function(i){var a=i.text,s=eval,l=[];r&&r.disableSourceMappingURL?l.push(a.replace(/\/\/# sourceMappingURL=(?!data:)[^\n]*\n?$/,"")):l.push(a),r&&r.nowrap||(l.unshift("(function(){"),l.push("\n});")),l.push("\n//# sourceURL="+e+"\n");var u,d=l.join("");try{u=s(d)}catch(t){if(t&&"SyntaxError"===t.name)return(0,c.default)(t,{retryNum:o,caughtSyntaxError:!0,url:e,message:"SyntaxError in loading ".concat(e,". Did we not load it fully? Trying again...")},{}),(0,f.default)(5e3).then(function(){return n(o+1,t)});throw t}r&&r.nowrap||u.call(t)})}(0,null)}else o=n(e,!0).catch(function(){return n(e,!1).then(function(){console.warn("Script "+e+" included without CORS headers. Error logs might be censored by the browser.")})});return o.catch(function(t){return(0,u.default)().then(function(r){(0,c.default)(t,{url:e,connectivityTestResults:r,status:t&&t.status,response:t&&t.xhr?t.xhr.responseText:null,message:"Failed to load script"},{})})}),o}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=o;var s=a(e("@babel/runtime-corejs2/core-js/promise")),l=a(e("lodash/once")),u=a(e("./connectivity-test")),c=a(e("./log-error")),d=a(e("./ajax")),f=a(e("pdelay")),p=(0,l.default)(function(){return!(!t.chrome||!t.chrome.extension)||!(!t.safari||!t.safari.extension)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":634,"./connectivity-test":638,"./log-error":648,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/once":516,pdelay:545}],648:[function(e,t,r){(function(t){(function(){"use strict";function n(e,t,r){if("undefined"==typeof document)throw e;try{var n;if(o(e))return;i(e),e instanceof Error||(console.warn("First parameter to Logger.error was not an error object:",e),e=new Error("Logger.error called with non-error: "+e),i(e));var s=r.appIds,l=r.implVersion,f=r.isUsingSyncAPI,p=r.userEmailHash,m=r.loaderVersion||g.BUILD_VERSION,h=!!r.sentByApp,_={};for(var y in e)if(Object.prototype.hasOwnProperty.call(e,y))try{var j=e[y];(0,u.default)(j),_[y]=j}catch(e){}(0,c.default)(_).length>0&&(t={errorProperties:_,details:t});var x=(0,b.default)(),E=["Error logged:",e];e&&e.stack&&E.push("\n\nOriginal error stack:\n"+e.stack),E.push("\n\nError logged from:\n"+x),t&&E.push("\n\nError details:",t),E.push("\n\nExtension App Ids:",(0,u.default)(s,null,2)),E.push("\nSent by App:",h),E.push("\nSession Id:",w),E.push("\nExtension Id:",(0,v.default)()),E.push("\nInboxSDK Loader Version:",m),E.push("\nInboxSDK Implementation Version:",l),E.push("\nIs Using Sync API:",f),(n=console).error.apply(n,E);var S={message:e&&e.message||e,stack:e&&e.stack,loggedFrom:x,details:t,appIds:s,sentByApp:h,sessionId:w,emailHash:p,extensionId:(0,v.default)(),loaderVersion:m,implementationVersion:l,isUsingSyncAPI:f,origin:document.location.origin,timestamp:1e3*(0,d.default)()};k(S),"true"===document.documentElement.getAttribute("inboxsdk-emit-error-event")&&document.documentElement.dispatchEvent(new CustomEvent("inboxSDKerror",{bubbles:!1,cancelable:!1,detail:{message:e&&e.message||e,stack:e&&e.stack,loggedFrom:x,details:t,sentByApp:h}}))}catch(n){a(n,[e,t,r])}}function o(e){return!!(0,y.default)(e)&&j.has(e)}function i(e){(0,y.default)(e)&&j.add(e)}function a(e,t){console.error("ERROR REPORTING ERROR",e),console.error("ORIGINAL ERROR",t)}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=n;var u=l(e("@babel/runtime-corejs2/core-js/json/stringify")),c=l(e("@babel/runtime-corejs2/core-js/object/keys")),d=l(e("@babel/runtime-corejs2/core-js/date/now")),f=l(e("@babel/runtime-corejs2/core-js/weak-map")),p=l(e("@babel/runtime-corejs2/core-js/object/define-property")),m=l(e("./ajax")),h=l(e("./rate-limit")),b=l(e("./get-stack-trace")),v=l(e("./get-extension-id")),_=l(e("./get-session-id")),g=e("./version"),y=l(e("lodash/isObject")),w=(0,_.default)(),j=function(){return!t.__inboxsdk_extensionSeenErrors&&f.default&&(0,p.default)(t,"__inboxsdk_extensionSeenErrors",{value:new f.default}),{has:function(e){if(t.__inboxsdk_extensionSeenErrors)return t.__inboxsdk_extensionSeenErrors.has(e);try{return!!e.__inboxsdk_extensionHasSeenError}catch(e){return console.error(e),!1}},add:function(e){if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.set)t.__inboxsdk_extensionSeenErrors.set(e,!0);else if(t.__inboxsdk_extensionSeenErrors&&t.__inboxsdk_extensionSeenErrors.add)t.__inboxsdk_extensionSeenErrors.add(e);else try{(0,p.default)(e,"__inboxsdk_extensionHasSeenError",{value:!0})}catch(e){console.error(e)}}}}(),k=(0,h.default)(function(e){try{(0,m.default)({url:"https://www.inboxsdk.com/api/v2/errors",method:"POST",headers:{"Content-Type":"application/json"},data:(0,u.default)(e)}).catch(function(t){a(t,[e])})}catch(t){a(t,[e])}},6e4,10)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ajax":634,"./get-extension-id":641,"./get-session-id":643,"./get-stack-trace":644,"./rate-limit":650,"./version":651,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/isObject":504}],649:[function(e,t,r){"use strict";function n(e,t,r){function n(){u.shift()(),u.length?o():c=!1}function o(){c=!0;var e=i();e>0?setTimeout(n,e):n()}function i(){var e=(0,a.default)(),n=e-t;return l=l.filter(function(e){return e>n}),l.length>=r?l[0]-n:-1}var l=[],u=[],c=!1;return function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var d,f=new s.default(function(r,o){d=function(){l.push((0,a.default)());try{r(e.apply(t,n))}catch(e){o(e)}}});if(!d)throw new Error("Should not happen");return u.push(d),c||o(),f}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/date/now")),s=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],650:[function(e,t,r){"use strict";function n(e,t,r){var n=[];return function(){var o=(0,a.default)();if(n=n.filter(function(e){return e>o-t}),n.length>=r)throw new Error("Function rate limit exceeded");n.push(o);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e.apply(this,s)}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/date/now"))},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],651:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.BUILD_VERSION=void 0;r.BUILD_VERSION="0.7.25-1649726491454-25b977bc25c716c2",t.hot&&t.hot.accept()},{"@babel/runtime-corejs2/core-js/object/define-property":12}],652:[function(e,t,r){"use strict";function n(e){if(!e.TEMPORARY_INTERNAL_skipWeakMapRequirement&&!a.default)throw new Error("Browser does not support WeakMap")}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/weak-map"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],653:[function(e,t,r){"use strict";e("./loading/platform-implementation-loader").default._loadScript=e("./loading/load-platform-implementation-DEV")(500),t.exports=e("./inboxsdk")},{"./inboxsdk":654,"./loading/load-platform-implementation-DEV":655,"./loading/platform-implementation-loader":656}],654:[function(e,t,r){(function(t){(function(){"use strict";function t(e,t,r){return r=(0,i.default)({globalErrorLogging:!0},r,{VERSION:c,REQUESTED_API_VERSION:e}),(0,s.default)(r),a.default.load(t,r)}var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),
r.load=t,r.loadScript=r.LOADER_VERSION=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/assign")),a=(o(e("../common/log-error")),o(e("./loading/platform-implementation-loader"))),s=o(e("./check-requirements")),l=e("../common/version"),u=o(e("../common/load-script")),c=l.BUILD_VERSION;r.LOADER_VERSION=c;var d=u.default;r.loadScript=d,-1!=["https://mail.google.com","https://inbox.google.com"].indexOf(document.location.origin)&&a.default.preload()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/load-script":647,"../common/log-error":648,"../common/version":651,"./check-requirements":652,"./loading/platform-implementation-loader":656,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],655:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/helpers/interopRequireDefault"),o=n(e("@babel/runtime-corejs2/core-js/promise")),i=n(e("lodash/once"));t.exports=function(t){return(0,i.default)(function(){return new o.default(function(r,n){setTimeout(function(){try{e("../../platform-implementation-js/main"),r()}catch(e){n(e)}},t)})})}},{"../../platform-implementation-js/main":905,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/once":516}],656:[function(e,t,r){(function(t){(function(){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/promise")),a=o(e("lodash/once")),s=o(e("../../common/load-script")),l={load:function(e,r){return i.default.resolve().then(function(){if(!t.__InboxSDKImpLoader)return l._loadScript().then(function(){if(!t.__InboxSDKImpLoader)throw new Error("Implementation file did not load correctly")})}).then(function(){return t.__InboxSDKImpLoader.load("0.1",e,r)})},_loadScript:(0,a.default)(function(){var e=!0;if(window.localStorage)try{e="true"!==localStorage.getItem("inboxsdk__enable_sourcemap")}catch(e){console.error(e)}return(0,s.default)("https://www.inboxsdk.com/build/platform-implementation.js",{nowrap:!0,disableSourceMappingURL:e})}),preload:function(){l._loadScript()}},u=l;r.default=u}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../common/load-script":647,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/once":516}],657:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/freeze")),a=(0,i.default)({NAVIGATION:"NAVIGATION",LINK:"LINK",GROUPER:"GROUPER",MANAGE:"MANAGE"}),s=a;r.default=s},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],658:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.ROUTE_TYPES=r.NATIVE_LIST_ROUTE_IDS=r.NATIVE_ROUTE_IDS=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/freeze")),a=(0,i.default)({INBOX:"inbox/:page",ALL_MAIL:"all/:page",SENT:"sent/:page",STARRED:"starred/:page",DRAFTS:"drafts/:page",SNOOZED:"snoozed/:page",DONE:"done",REMINDERS:"reminders",LABEL:"label/:labelName/:page",TRASH:"trash/:page",SPAM:"spam/:page",IMPORTANT:"imp/:page",SEARCH:"search/:query/:page",THREAD:"inbox/:threadID",CHATS:"chats/:page",CHAT:"chats/:chatID",CONTACTS:"contacts/:page",CONTACT:"contacts/:contactID",SETTINGS:"settings/:section",ANY_LIST:"*"});r.NATIVE_ROUTE_IDS=a;var s=(0,i.default)({INBOX:a.INBOX,ALL_MAIL:a.ALL_MAIL,SENT:a.SENT,STARRED:a.STARRED,DRAFTS:a.DRAFTS,SNOOZED:a.SNOOZED,DONE:a.DONE,REMINDERS:a.REMINDERS,LABEL:a.LABEL,TRASH:a.TRASH,SPAM:a.SPAM,IMPORTANT:a.IMPORTANT,SEARCH:a.SEARCH,ANY_LIST:a.ANY_LIST});r.NATIVE_LIST_ROUTE_IDS=s;var l=(0,i.default)({LIST:"LIST",THREAD:"THREAD",SETTINGS:"SETTINGS",CHAT:"CHAT",CUSTOM:"CUSTOM",UNKNOWN:"UNKNOWN"});r.ROUTE_TYPES=l},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],659:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.SECTION_NAMES=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/freeze")),a=(0,i.default)({INBOX_STATE:"INBOX_STATE",METADATA_STATE:"METADATA_STATE",OTHER:"OTHER"});r.SECTION_NAMES=a},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],660:[function(e,t,r){"use strict";function n(){if(!document.getElementById("inboxsdk__style")){var e=document.createElement("style");if(e.id="inboxsdk__style",l.onValue(function(t){e.textContent=(0,s.default)(t)}),!document.head)throw new Error("missing head");document.head.appendChild(e)}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("ud-kefir")),s=i(e("../../lib/rewriteCssWithIdMap")),l=(0,
a.default)(t,"/* suggestions */\n\n.inboxsdk__suggestions_separator_before {\n  padding-bottom: 2px !important;\n}\n\n.inboxsdk__suggestions_separator_after {\n  border-top: 1px solid #e5e5e5;\n  padding-top: 2px !important;\n}\n\n/* buttons */\n\ndiv.T-I.inboxsdk__button {\n  -webkit-user-select: none;\n  min-width: 27px;\n}\n\n.inboxsdk__no_bg {\n  background: none;\n}\n\n.inboxsdk__button.inboxsdk__button_disabled {\n  opacity: 0.55;\n}\n\n.inboxsdk__button_icon + .inboxsdk__button_text {\n  margin-left: 5px;\n}\n\n.inboxsdk__button_icon {\n  display: inline-block;\n}\n\n.inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n  vertical-align: middle;\n  margin-top: -2px;\n  user-drag: none;\n  -moz-user-select: none;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__button_green_inactive {\n  -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n  background-color: #53a93f;\n  background-image: -webkit-linear-gradient(top, transparent, transparent);\n  background-image: linear-gradient(top, transparent, transparent);\n  border: 1px solid transparent;\n  color: #fff;\n  text-shadow: none;\n}\n\n.inboxsdk__button_green_hover {\n  -webkit-box-shadow: inset 0 -1px 0 #4c8534;\n  box-shadow: inset 0 -1px 0 #4c8534;\n  background-color: #65b045;\n  background-image: -webkit-linear-gradient(top, transparent, transparent);\n  background-image: linear-gradient(top, transparent, transparent);\n  border: 1px solid transparent;\n  border-bottom: 1px solid #4c8534;\n  text-shadow: none;\n}\n\n.inboxsdk__button_green_active {\n  -webkit-box-shadow: inset 0 1px 0 #2f6124;\n  box-shadow: inset 0 1px 0 #2f6124;\n  background: #3e802f;\n  border: 1px solid transparent;\n  border-top: 1px solid #2f6124;\n  color: #fff;\n  text-shadow: none;\n}\n\n.inboxsdk__menu {\n  min-width: 1em;\n  min-height: 1em;\n  padding: 0px;\n  overflow: visible;\n  max-height: none;\n\n  /* Copied from Gmail's .J-M class */\n  z-index: 7;\n  cursor: default;\n  font-size: 13px;\n  margin: 0;\n  outline: none;\n}\n\n.inboxsdk__menu > .inboxsdk__menuContent {\n  padding: 0;\n  box-shadow: 0 8px 10px 1px rgba(0, 0, 0, 0.14),\n    0 3px 14px 2px rgba(0, 0, 0, 0.12), 0 5px 5px -3px rgba(0, 0, 0, 0.2);\n  transition: opacity 0.218s;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background: #fff;\n  outline: none;\n}\n\n.f4.J-N-JX.inboxsdk__message_more_icon {\n  height: 16px;\n  margin-top: 1px;\n  width: 16px;\n}\n\n/* end */\n\n/* compose buttons */\n\n/* fix compose mole position when sidebar is open */\n/*\nsteps to repro:\n1. open compose mole\n2. open non-native sidebar\n3. mole overlaps sidebar\n*/\n.dw .nH > .no .nH.nn:last-child[style='width: 320px;'] {\n  width: 376px !important;\n}\n\n/* fix native button wrapping */\n.inboxsdk__compose .a8X {\n  overflow: visible;\n}\n\n.inboxsdk__compose .a8X > .bAK {\n  flex-wrap: nowrap;\n}\n\n/* in material Gmail reduce padding between buttons  */\n.inboxsdk__compose_narrow_buttons .gU:not(:first-child) {\n  padding-left: 5px;\n}\n\n.inboxsdk__compose_narrow_buttons .inboxsdk__compose_actionToolbar {\n  padding-left: 10px;\n}\n\n.inboxsdk__compose_narrow_buttons .wG:not(:first-child) {\n  margin-left: 15px;\n}\n\n.inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar\n  div.inboxsdk__composeButton:last-child {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_narrow_buttons\n  .inboxsdk__compose_actionToolbar\n  div.inboxsdk__composeButton\n  + div.inboxsdk__composeButton {\n  margin-left: 3px;\n}\n\n/* end narrow */\n\n/* mimic button styling */\n.inboxsdk__composeButton,\n.inboxsdk__compose_sendButton {\n  height: 20px;\n  width: 20px;\n  padding: 4px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  vertical-align: middle;\n  outline: none;\n  position: relative;\n}\n\n.inboxsdk__composeButton + .inboxsdk__composeButton {\n  margin-left: 4px;\n}\n\n.inboxsdk__composeButton .inboxsdk__button_icon {\n  opacity: 0.55;\n}\n\n.inboxsdk__composeButton:hover .inboxsdk__button_icon,\n.inboxsdk__composeButton:focus .inboxsdk__button_icon,\n.inboxsdk__composeButton.inboxsdk__composeButton_active .inboxsdk__button_icon {\n  opacity: 1;\n}\n\n.inboxsdk__composeButton::before {\n  content: '';\n  display: block;\n  opacity: 0;\n  position: absolute;\n  transition-duration: 0.15s;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  top: 0px;\n  background: none;\n  box-sizing: border-box;\n  transform: scale(0);\n  transition-property: transform, opacity;\n  border-radius: 4px;\n}\n\n.inboxsdk__composeButton:hover::before {\n  background-color: rgba(32, 33, 36, 0.059);\n  border: none;\n  box-shadow: none;\n  opacity: 1;\n  transform: scale(1);\n}\n\n.inboxsdk__composeButton:focus::before,\n.inboxsdk__composeButton.inboxsdk__composeButton_active::before {\n  background-color: rgba(32, 33, 36, 0.122);\n  border: none;\n  box-shadow: none;\n  opacity: 1;\n  transform: scale(1);\n}\n\n.inboxsdk__compose_actionToolbar\n  .inboxsdk__compose_groupedActionToolbar\n  div.inboxsdk__composeButton:last-child {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_sendButton {\n  background-color: #1a73e8;\n  color: white;\n  height: 24px;\n  width: auto;\n  padding-left: 3px;\n  padding-right: 3px;\n  border-radius: 4px;\n}\n\n.inboxsdk__compose_sendButton {\n  padding: 6px 4px;\n  margin-left: 2px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {\n  height: 20px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_sendButton {\n  height: 24px;\n}\n\n.inboxsdk__compose_sendButton:focus,\n.inboxsdk__compose_sendButton.inboxsdk__composeButton_active {\n  background-color: #5094ed;\n  box-shadow: 0 1px 1px 0 rgba(66, 133, 244, 0.3),\n    0 1px 3px 1px rgba(66, 133, 244, 0.15);\n  border: none;\n}\n\n.T-I ~ .inboxsdk__compose_sendButton {\n  margin-left: -6px;\n}\n\n.inboxsdk__compose_actionToolbar {\n  white-space: nowrap;\n}\n\n.inboxsdk__compose_actionToolbar {\n  padding-left: 6px;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {\n  height: 20px;\n  width: 20px;\n  display: inline-flex;\n  user-select: none;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {\n  height: 17px;\n  width: 17px;\n  display: inline-flex;\n  margin: auto;\n}\n\n.inboxsdk__compose_actionToolbar + .gU:not(.inboxsdk__compose_separator) {\n  padding-left: 8px;\n}\n\n/* grouped action toolbar */\n.inboxsdk__compose_groupedActionToolbar_visible .aDg .aDh {\n  overflow-y: visible;\n}\n\n.inboxsdk__compose_groupedActionToolbar {\n  position: absolute;\n  bottom: 44px;\n  margin: 3px;\n  z-index: 10;\n  left: 0px;\n  border-radius: 2px;\n  box-shadow: 0 4px 5px 0 rgba(0, 0, 0, 0.14), 0 1px 10px 0 rgba(0, 0, 0, 0.12),\n    0 2px 4px -1px rgba(0, 0, 0, 0.2);\n  padding: 5px 15px;\n}\n\n.inboxsdk__compose_groupedActionToolbar {\n  margin-bottom: 7px;\n  padding: 4px 5px;\n  background: white;\n  left: -3px;\n}\n\n.inboxsdk__compose_inlineReply .inboxsdk__compose_groupedActionToolbar {\n  left: 14px;\n}\n\n.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton:first-child {\n  margin-left: 0px;\n  margin-right: 0px;\n}\n\n.inboxsdk__composeButton.inboxsdk__compose_groupedActionButton {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_groupedActionToolbar .inboxsdk__composeButton {\n  padding: 4px;\n}\n\n/*\nthere's an element that gets a height of 40px when the gmail formatting toolbar\nis visible. This rule makes that same element get the 40px height when\nthe actionToolbar is visible\n*/\n.inboxsdk__compose_groupedActionToolbar_visible .bA3 {\n  height: 40px;\n}\n\n.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {\n  z-index: 1;\n}\n\n.inboxsdk__compose_groupedActionToolbar div.inboxsdk__button {\n  margin-right: 0px;\n}\n\n.inboxsdk__compose_groupedActionToolbar_arrow {\n  display: none;\n}\n\n/* end grouped action toolbar */\n\n.inboxsdk__compose_customSendContainer {\n  display: inline-block;\n  position: relative;\n  outline: 0;\n  height: 29px;\n  margin: 6px 0;\n  padding: 0;\n  line-height: 29px;\n  vertical-align: middle;\n}\n\n.inboxsdk__compose_customSendContainer {\n  height: 36px;\n  line-height: 36px;\n}\n\n.inboxsdk__compose_customTitleBarColor > img.Hl,\n.inboxsdk__compose_customTitleBarColor > img.Hq,\n.inboxsdk__compose_customTitleBarColor > img.Ha {\n  background-color: transparent !important;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText,\n.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText > tbody > tr {\n  align-items: center;\n}\n\n.inboxsdk__compose_hasCustomTitleBarText > tbody {\n  width: 100%;\n}\n\n.inboxsdk__compose_nativeTitleBarText {\n  display: none !important;\n}\n\n.inboxsdk__compose_customTitleBarText {\n  width: calc(100% - 80px);\n}\n\n.inboxsdk__compose_hasCustomTitleBarText td.Hm {\n  margin-right: 10px;\n  margin-left: auto;\n}\n\n.inboxsdk__compose_statusBarPrependContainer {\n  border-top: 1px solid #cfcfcf;\n}\n\n.inboxsdk__compose_statusBarPrependContainer + table td.gU {\n  border-top: none;\n}\n\n/* end */\n\n/* appid warning gmail specific parts */\n\ninput.inboxsdk__x_close_button {\n  background-color: transparent;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/dpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ1dWlkOjY1RTYzOTA2ODZDRjExREJBNkUyRDg4N0NFQUNCNDA3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAzMjIxMUU0REM1MTExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1QzhERjZDREM1MDExRTI5RkE1ODlERTgyOTkyMjMyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIElsbHVzdHJhdG9yIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MzliZDBjZTYtYWVjMy00NWZkLThkOTktMzJhOTNhMTkxZGM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOmQ4ZGVjMWJhLTk5NGEtNGViMC04NzE4LTdhMGJkN2FlOGY4OCIvPiA8ZGM6dGl0bGU+IDxyZGY6QWx0PiA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiPmdseXBoaWNvbnM8L3JkZjpsaT4gPC9yZGY6QWx0PiA8L2RjOnRpdGxlPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvfrd2cAAANXSURBVHja5JrPaxNBFMe72wj1lFM8pNUcelLaQFLJRYptDgVBBe9F/BdyzV8h6bWQq0iKQQWhl1psL14VPPQUtErbS3owpIhdv6Mvsl1m3rz9FZv1wZeBdHbmfTozb2fejuN53lSS5jhOCcVNSJUFaJr+9BM6gXrQJ/TbS7LfXAKO51E8gB5Cd6FrwueOUexCL6FXADuN5YgakSiClaE2NFDNxNSA2ipH9icCwDy0BZ0nABDUObU9nxoITcMmNEwBIKgh9ZVLFARWhPbHABCU6rOYCAhsCfr2DyBGUn0v2fx0uPCLyLKK4gWUF8aOr9Ab+k9+hD7TNFE2A81Bi9Ad6B6NtMRURHsEX3dCRy0aib5wgXahOuSGWHMuPdMVBo4+NzLcmpBMp3dQJWrI9PVXgfaE06woAqHoZFvYZ1BDzb64EL5+HWrzTBAAchKQpmCIl5MC0PS/LJjSTRaEXnZDC8RCWhA+PxYsMMPgSzPYwJZlOi0za6oFVUM4W4WeGuf8n5HhpllHC0J7Jy56NAwdzkIHvhGrCSBqvv+4enbWUK9hiZZlHUjbEp0cC4QngQlAeBwMBQAumrUvgNALb8CQV4QQLIwBwgZTYWaK8jnvB1lnqLuGNXEgiG41IYQfpqjpr8s8s+4Hec5UrGsabgn3SX0CqAl3CUobmv7qTP1nfpAjQ6VD3baDIk4/BEyYurcN25lDwzNHo/1iiWl4M+SijSNbkNhkni25lCgw2T6z2XyPYo12pnFNtbFGbYb2RTG4NCIm+2A57ycBI4Gw+fJ7RApMhS+C5EUcGCmEzZeCArnCVBgKMzFRYMJA2HyZdullY/RxajLMdSkDaLKrwmSbimDbIY7Eo93ENj0rsRnmbz9cSmOabC4liCgwnC8nLuViTbaYIkRYGM6XXmZeiJdxi1KNskVxaWjeGoZM7XJXNL8/Fk6nUwrL0tCs2nyi+X2FyYHt/M1rZWkbP6kHq+8XDlaCo+7eRBx1M5V8iJkOUjAbukORJR3USjwdlKkEXWZSpplKYmfms8KkfugZ16c3j84212khj+/T26R9DP1/Pk9n6sKA5qXZSfEKRyfVKxyX/VKNE/e+lu+a031oVXrNCXZMh6LXSVxzclK4eHYDxa1xXzz7JcAA2eNXdJTLzjAAAAAASUVORK5CYII=);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  height: 20px;\n  width: 20px;\n  border: none;\n  vertical-align: middle;\n  cursor: pointer;\n\n  float: right;\n  margin: 5px;\n}\n\n/* thread rows */\n\n.inboxsdk__gmail_label.inboxsdk__label_has_icon .au {\n  display: inline-block;\n  margin-left: 14px;\n}\n\n.inboxsdk__thread_row_label .inboxsdk__button_icon,\n.inboxsdk__thread_row_label .inboxsdk__button_iconImg {\n  height: 11px;\n  width: 11px;\n}\n\n.inboxsdk__thread_row_label .inboxsdk__button_icon {\n  display: inline-block;\n  margin-top: 3px;\n  margin-left: 4px;\n  position: absolute;\n}\n\n.inboxsdk__thread_row_button {\n  outline: 0;\n  height: 20px;\n  width: 20px;\n  padding: 0px;\n}\n\n.inboxsdk__thread_row_button .inboxsdk__button_icon {\n  max-height: 100%;\n}\n\n.inboxsdk__thread_row_custom_date_container {\n  max-width: inherit;\n}\n\n.inboxsdk__thread_row_button .inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n  margin-top: 0px;\n}\n\n.inboxsdk__gmail_action {\n  float: right;\n  position: relative;\n  background-color: grey;\n  border: 1px solid black;\n  margin-left: 1em;\n  cursor: default;\n  padding: 0 6px;\n  background-image: -webkit-linear-gradient(top, #e9e9e9, #e6e6e6);\n  background-image: linear-gradient(top, #e9e9e9, #e6e6e6);\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-color: #ccc;\n  color: #444;\n  height: 17px;\n  line-height: 17px;\n  min-width: 56px;\n  border-radius: 2px;\n  font-size: 11px;\n  font-weight: bold;\n  text-align: center;\n  white-space: nowrap;\n  padding-right: 18px;\n}\n\n.inboxsdk__gmail_action:focus {\n  border: 1px solid #4d90fe;\n  outline: none;\n}\n\n.inboxsdk__gmail_action:active {\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n.inboxsdk__gmail_action:hover {\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\n  background-color: #ededed;\n  background-image: -webkit-linear-gradient(top, #ededed, #eaeaea);\n  background-image: linear-gradient(top, #ededed, #eaeaea);\n  border-color: #b8b8b8;\n}\n\n.inboxsdk__gmail_action::after {\n  content: '';\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  margin-left: 5px;\n  background: no-repeat\n    url(https://ssl.gstatic.com/mail/sprites/smartmail-561acb673be75c1d374881a95997fce4.png) -67px -100px;\n  width: 7px;\n  height: 7px;\n  opacity: 0.55;\n}\n\n.inboxsdk__thread_row_custom_date {\n  margin-left: 2px;\n}\n\nspan.inboxsdk__thread_row_custom_date\n  + span:not(.inboxsdk__thread_row_custom_date) {\n  display: none;\n}\n\nspan.inboxsdk__thread_row_custom_draft_label + div.yW {\n  display: none;\n}\n\n.inboxsdk__thread_row_attachment_iconWrapper,\n.inboxsdk__thread_row_attachment_icon {\n  margin-left: 3px;\n  width: 16px;\n  height: 16px;\n}\n\n.inboxsdk__thread_row_attachment_iconWrapper {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: max-content;\n}\n\n/* .zA td.apU.xy refers to the <td/> element that houses the favorite star in thread row view.\n The <span> element is what inboxSDK will render threadRowButtons as when Gmail hover actions are disabled.\n The following rules fix the issue where threadRowButtons were spilling over into the thread row email text.\n */\n.zA td.apU.xY {\n  width: initial;\n}\n\n.zA td.apU.xY span.inboxsdk__thread_row_button {\n  margin: 0 10px;\n  opacity: 0.16;\n}\n\n.zA.aqw td.apU.xY span.inboxsdk__thread_row_button {\n  opacity: 0.54;\n}\n\n.zA.aqw td.apU.xY span.inboxsdk__thread_row_button:hover {\n  opacity: 1;\n}\n\n.zA td.apU.xY span.inboxsdk__thread_row_button::before {\n  /* Google adds in a pseduo ::before element to span elems with the T-KT class applied.\n  Explicity setting this width and height to zero as remove weird positioning that results */\n  width: 0px;\n  height: 0px;\n}\n\n.inboxsdk__thread_row_attachment_icon {\n  vertical-align: middle;\n}\n\n.zA > .xY.inboxsdk__thread_row_attachment_icons_present {\n  max-width: inherit;\n}\n\n/* narrow vertical preview pane */\n.Zs .xY.inboxsdk__thread_row_attachment_icons_present {\n  flex-grow: 0;\n}\n\n.Zs .xY.inboxsdk__thread_row_label {\n  order: 1;\n}\n\n.Zs .xY.inboxsdk__thread_row_icon_wrapper {\n  order: 1;\n  margin-left: 3px;\n  margin-right: 0px;\n}\n/* end narrow vertical preview pane */\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon,\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  height: 18px;\n  width: 18px;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  width: 20px;\n  margin-right: 3px;\n  align-self: center;\n  height: 20px;\n  flex: 0 0 auto;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  vertical-align: top;\n}\n\n.inboxsdk__thread_row_image_added\n  .y6\n  .inboxsdk__thread_row_icon_wrapper\n  ~ span[id] {\n  margin-left: 3px;\n}\n\n.inboxsdk__thread_row_image_added .a4W,\n.inboxsdk__thread_row_image_added .apA,\n.inboxsdk__thread_row_image_added .apx {\n  position: relative;\n}\n\n/* end thread rows */\n[inboxsdk__message_added_attachment_icon] td.gH > span:first-child > img,\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  div.gK\n  > span:first-child\n  > img {\n  margin-right: 3px;\n  margin-left: 3px;\n  margin-top: 0px;\n}\n\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  > span:first-child\n  > *:last-child,\n[inboxsdk__message_added_attachment_icon]\n  td.gH\n  div.gK\n  > span:first-child\n  > *:last-child {\n  margin-right: 6px;\n}\n\n.inboxsdk__message_attachment_iconWrapper,\n.inboxsdk__message_attachment_icon {\n  width: 21px;\n  height: 21px;\n  position: relative;\n}\n\n.inboxsdk__message_attachment_iconWrapper {\n  margin: auto 3px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  vertical-align: top;\n}\n\n.inboxsdk__message_attachment_tooltipWrapper {\n  position: absolute;\n  top: 19px;\n  z-index: 10;\n}\n\n/* Work around issue where clicking \"Remove formatting\" in Compose causes this\n * element to become taller and shift the toolbar down. */\n.gU .aWQ {\n  max-height: 3px;\n}\n\n.aQw .inboxsdk__button_icon {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n}\n\n.aQw .inboxsdk__button_iconImg {\n  height: 18px;\n  width: 18px;\n}\n\n.aQw .inboxsdk__button_iconImg {\n  margin-top: 2px;\n}\n\n.aZi .asa .inboxsdk__button_iconImg {\n  display: inline-block;\n  vertical-align: middle;\n  margin-top: -3px;\n}\n\n/* Message view attachments toolbar */\n.aZi .aZj .asa .inboxsdk__button_iconImg {\n  margin: 0;\n}\n\nbody .dw {\n  /* Fixes issue where a tall compose window opened over a custom view could be\n   * overlapped by Gmail's top bar. Also fixes issue where mole widgets are\n   * only visible while a compose window is open.\n   */\n  z-index: 6 !important;\n}\n\n.inboxsdk__compose_outerSidebar_wrapper {\n  position: absolute;\n  left: -401px;\n  top: 0px;\n  background: white;\n  width: 400px;\n  bottom: 0px;\n  border-left: 1px solid silver;\n  box-shadow: -2px 0px 1px #e6e6e6;\n  display: block;\n}\n\n.inboxsdk__outerSidebarActive .aSt .inboxsdk__compose_outerSidebar_wrapper {\n  border-left: 0;\n  box-shadow: none;\n  left: -400px;\n}\n\n.inboxsdk__outerSidebarActive .aSs > div {\n  width: 50% !important;\n  margin-left: 30%;\n}\n\n.inboxsdk__compose_outerSidebar_header {\n  background: #404040;\n  font-size: 80%;\n  padding: 10px 10px 11px 10px;\n  color: white;\n  border-bottom: 1px solid #c4c4c4;\n}\n\n.inboxsdk__compose_outerSidebar_body {\n  position: absolute;\n  width: 100%;\n  bottom: 43px;\n  top: 36px;\n  left: -1px;\n  overflow: auto;\n}\n\n.inboxsdk__compose_outerSidebar_footer {\n  position: absolute;\n  bottom: 0px;\n  width: 100%;\n  border-top: 1px solid rgb(206, 206, 206);\n  display: block;\n}\n\n.inboxsdk__compose_innerSidebarActive form,\n.inboxsdk__compose_innerSidebarActive .GQ {\n  padding-right: 200px;\n}\n\ndiv.inboxsdk__compose_statusbar {\n  border: 0;\n  height: 40px;\n  margin: 0;\n}\n\n.inboxsdk__compose_statusbar {\n  background: none;\n  position: relative;\n}\n\n/* only include padding when in thread inline view */\n.HM .I5 .inboxsdk__compose_statusbar {\n  padding: 0 16px 16px 16px;\n}\n\ntable + .inboxsdk__compose_statusbar {\n  margin-top: -8px;\n}\n\n/* Necessary in pre-new-recipients-area Gmail to stop the compose body\nfrom resizing and pushing the statusbars off-screen when the recipients\narea is focused. */\nbody.inboxsdk__classic_gmail_recipients_area\n  .inboxsdk__compose_statusbarActive\n  .aoI {\n  height: auto !important;\n}\n\n.inboxsdk__compose_statusbarActive .aDl {\n  z-index: unset;\n}\n\n/* compose size fixing.\nTODO Can we restrict this to only composes we've modified? */\n.inboxsdk__compose .qz {\n  max-height: inherit !important;\n}\n\n/* aDi is initially position: fixed, which messes things up, so we make static */\nbody:not(.inboxsdk_hack_disableComposeSizeFixer)\n  .inboxsdk__size_fixer\n  .aDj.aDi {\n  position: static !important;\n}\n\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .HM .I5 {\n  padding-bottom: var(--inboxsdk-total-added-statusbar-height, 0px);\n}\n/* Extend the message foreground outline downwards to contain our added status bars */\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive .aDj::before {\n  height: calc(100% + var(--inboxsdk-total-added-statusbar-height, 0px));\n}\n/* When we have a status bar added and the reply status is in position absolute or fixed mode (.aDi),\nuse a background color on the element containing our added status bars so the message background outline\nisn't visible behind it. */\n.inboxsdk__compose_inlineReply.inboxsdk__compose_statusbarActive\n  .aDj.aDi\n  > .aDh {\n  background-color: white;\n}\n\n.inboxsdk__recipient_row {\n  display: flex;\n}\n\n.inboxsdk__compose_notice {\n  background-color: #f5f5f5;\n  border-radius: 4px;\n  margin: 10px;\n  padding: 10px 16px;\n}\n\n.inboxsdk__recipient_row td.ok {\n  height: 20px;\n  padding: 0px !important;\n}\n\n.inboxsdk__recipient_row td.az3 {\n  padding: 0px 3px 0px 3px;\n}\n\n.inboxsdk__compose_forceRecipientsOpen .fX.aXjCH {\n  display: block !important;\n}\n\n.inboxsdk__compose_hideRecipientArea .fX.aXjCH,\n.inboxsdk__compose_hideRecipientArea .aoD.hl,\n.inboxsdk__compose_forceRecipientsOpen .aoD.hl,\n.inboxsdk__compose_forceRecipientRowHidden {\n  display: none !important;\n}\n\n/* toolbar visibility */\n\n[data-thread-toolbar='true'] [data-rowlist-toolbar='true'] {\n  display: none !important;\n}\n\n[data-toolbar-expanded='true'] [data-toolbar-expanded='false'] {\n  display: none !important;\n}\n\n[data-toolbar-expanded='false'] [data-toolbar-expanded='true'] {\n  display: none !important;\n}\n\n[data-toolbar-icononly='true'] .inboxsdk__button_text {\n  display: none !important;\n}\n\n[data-toolbar-icononly='false'] .inboxsdk__button_text {\n  color: #5f6368;\n}\n\n[data-toolbar-icononly='false'] .asa:before {\n  border-radius: 4px;\n  border: none !important;\n}\n\n[data-toolbar-icononly='false'] .inboxsdk__button {\n  align-items: center;\n  border: none;\n  display: inline-flex;\n  justify-content: center;\n  outline: none;\n  position: relative;\n  z-index: 0;\n  -webkit-font-smoothing: antialiased;\n  font-family: 'Google Sans', Roboto, RobotoDraft, Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  letter-spacing: 0.15px;\n  background: none;\n  box-sizing: border-box;\n  color: #5f6368;\n  cursor: pointer;\n  font-weight: 500;\n  outline: none;\n  padding: 0 8px;\n}\n\n.inboxsdk__menuItem img,\n.inboxsdk__menuItem .inboxsdk__icon {\n  height: 16px;\n  width: 16px;\n  margin-top: -1px;\n}\n\n/* end */\n\n/* modal */\n\n.inboxsdk__modal_overlay {\n  right: 0px;\n  bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen {\n  position: fixed;\n  top: 0px;\n  left: 0px;\n  bottom: 0px;\n  right: 0px;\n  z-index: 503;\n  display: flex;\n  display: -webkit-flex;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n  padding: 110px 50px 50px 50px;\n}\n\n.inboxsdk__modal_content {\n  margin-top: 30px;\n  margin-bottom: 30px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_content_no_buttons:not(.inboxsdk__modal_hideBottom)\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n  padding-bottom: 24px;\n}\n\n.inboxsdk__modal_close {\n  outline: none;\n  cursor: pointer;\n}\n\n.inboxsdk__modal_fullscreen .inboxsdk__modal_container {\n  position: relative;\n  margin-top: -60px;\n  width: auto;\n  overflow: hidden;\n}\n\n.inboxsdk__modal_fullscreen .inboxsdk__modal_container .inboxsdk__modal_toprow {\n  margin-right: 16px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_close {\n  display: none;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_container {\n  padding-top: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .inboxsdk__modal_content {\n  margin-top: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideTop .Kj-JD-K7 {\n  margin: 0px;\n  display: none;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides\n  .inboxsdk__modal_container,\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideSides .inboxsdk__modal_content {\n  padding-left: 0px;\n  padding-right: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom\n  .inboxsdk__modal_content {\n  margin-bottom: 0px;\n}\n\n.inboxsdk__modal_fullscreen.inboxsdk__modal_hideBottom\n  .inboxsdk__modal_container {\n  padding-bottom: 0px;\n}\n\n.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {\n  -webkit-flex: 1;\n  flex: 1;\n  width: 0;\n  word-wrap: break-word;\n}\n\n/* end modal */\n\n/* mole */\n\n/* Fix issue where Compose toolbar can become disconnected when moles or\n * drawers are in use */\n.inboxsdk__drawers_in_use .aDi,\n.inboxsdk__moles_in_use .aDi {\n  left: auto !important;\n}\n\n.inboxsdk__drawers_in_use .aDi,\n.inboxsdk__moles_in_use .aDi {\n  position: static;\n}\n\n/* Make it so the compose/mole layer doesn't wrap, so we don't have to do a lot\n * of fancy logic to hide moles ourselves when things get too crowded. */\n.inboxsdk__moles_in_use .nH > .nH > .no {\n  white-space: nowrap;\n}\n.inboxsdk__moles_in_use .nH > .nH > .no > * {\n  white-space: initial;\n}\n.inboxsdk__moles_in_use .nH > .nH > .no > .nn {\n  display: inline-block;\n  float: none;\n}\n\n.inboxsdk__mole_view {\n  position: relative;\n  max-width: 564px;\n  height: 100vh;\n  vertical-align: top;\n  display: inline-flex;\n  display: -webkit-inline-flex;\n  align-items: flex-end;\n  -webkit-align-items: flex-end;\n}\n\n.inboxsdk__mole_view_inner {\n  visibility: visible;\n  box-sizing: border-box;\n  margin-right: 5px;\n  box-shadow: rgba(0, 0, 0, 0.2) 0 2px 6px;\n  min-width: 260px;\n  min-height: 36px;\n}\n\n.inboxsdk__mole_view_inner {\n  min-height: 40px;\n}\n\n.inboxsdk__mole_view_titlebar {\n  position: absolute;\n  left: 0;\n  right: 5px;\n  color: white;\n  font-size: 12.8px;\n  background: #404040;\n  box-sizing: border-box;\n  height: 36px;\n  padding-top: 7px;\n  padding-left: 11px;\n  cursor: pointer;\n}\n\n.inboxsdk__mole_view_titlebar {\n  border-radius: 4px 4px 0 0;\n  height: 40px;\n  padding-top: 9px;\n}\n\n.inboxsdk__mole_view_titlebar h2 {\n  font-size: inherit;\n  font-weight: inherit;\n  margin: 4px 0 0 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__mole_title_buttons {\n  white-space: nowrap;\n  float: right;\n  padding-right: 5px;\n  margin-top: -3px;\n}\n\n.inboxsdk__mole_title_buttons > img {\n  height: 24px;\n  width: 24px;\n  position: relative;\n  top: 2px;\n  opacity: 0.6;\n}\n\n.inboxsdk__mole_title_buttons > img:hover {\n  opacity: 1;\n  background-color: #737373;\n}\n\n.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content,\n.inboxsdk__mole_view.inboxsdk__minimized.inboxsdk__mole_use_minimize_title\n  h2.inboxsdk__mole_default,\n.inboxsdk__mole_view:not(.inboxsdk__minimized) h2.inboxsdk__mole_minimized,\n.inboxsdk__mole_view:not(.inboxsdk__mole_use_minimize_title)\n  h2.inboxsdk__mole_minimized,\n.inboxsdk__mole_view.inboxsdk__minimized .Hl,\n.inboxsdk__mole_view:not(.inboxsdk__minimized) .Hk {\n  display: none;\n}\n\n.inboxsdk__mole_view_content {\n  margin-top: 36px;\n  border: 1px solid #cfcfcf;\n  background: white;\n  min-width: 260px;\n  min-height: 20px;\n  max-height: 80vh;\n}\n\n.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_inner {\n  min-width: 0px;\n}\n\n.inboxsdk__mole_view_chromeless .inboxsdk__mole_view_content {\n  margin-top: 0px;\n  min-width: 0px;\n}\n\n/* end mole */\n\n/* tabs */\n\n.inboxsdk__tab {\n  width: 30px;\n}\n\n.inboxsdk__tab.IDMAP_hideTitleBar:first-child:last-child {\n  display: none;\n}\n\n.inboxsdk__tab.inboxsdk__tab_selected {\n  width: auto;\n}\n\ntable.aKk .inboxsdk__contentTabContainer .inboxsdk__tab .aAy[role='tab'] {\n  height: 28px;\n}\n\n.inboxsdk__tab_icon {\n  width: 30px;\n  height: 25px;\n  background-position-x: 5px;\n  background-position-y: 3px;\n  background-size: 16px;\n  background-repeat: no-repeat;\n}\n\n.inboxsdk__tab_icon img {\n  height: 16px;\n  width: 16px;\n  margin-left: 5px;\n  margin-top: 3px;\n}\n\n.inboxsdk__tab .aKx {\n  top: 4px;\n}\n\n.inboxsdk__sidebar div[role='complementary'] {\n  position: static !important;\n}\n\n/* Fix issue where sidebar causes threadview to be taller than it should */\n.inboxsdk__sidebar > div.y4,\n.IDMAP_app_sidebar_in_use > div.y4 {\n  display: none;\n}\n\ntable.aKk\n  .inboxsdk__contentTabContainer\n  .inboxsdk__tab:first-child\n  .aAy[role='tab'] {\n  border-left-width: 1px;\n}\n\n/* end tabs */\n\n/* old sidebar */\n\n.inboxsdk__sidebar .inboxsdk__contentPanelContainer {\n  font: 12px Arial, sans-serif;\n  max-width: 220px;\n}\n\n.inboxsdk__contentPanelContainer_contentContainer {\n  overflow: hidden;\n  margin-bottom: 10px;\n  border-bottom: 1px solid #d8d8d8;\n}\n\n/* end old sidebar */\n\n/* sidebar */\n\nbody.inboxsdk__hasTopMessageBar .bq9 {\n  top: var(--inboxsdk__topMessageBar-height);\n}\n\n.IDMAP_app_sidebar_in_use > div[role='complementary'] {\n  position: static !important;\n  width: 216px !important;\n}\n\n.IDMAP_app_sidebar_in_use {\n  /* Necessary to prevent z-indexes on sidebar items from causing them to show\n  above stuff outside of the sidebar. */\n  will-change: position;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  background: #ffffff;\n}\n\n.IDMAP_app_sidebar_content_area {\n  padding: 4px 0 12px;\n}\n\n.IDMAP_app_sidebar.IDMAP_hideTitleBar .IDMAP_app_sidebar_content_area {\n  padding-top: 0;\n}\n\n/* gmail addon support */\n\n.container_app_sidebar_in_use.no,\n.IDMAP_container_app_sidebar_no_icons.no {\n  display: flex;\n  display: -webkit-flex;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  width: 100%;\n}\n\nbody[dir='rtl'] .container_app_sidebar_in_use.no[dir='ltr'],\nbody[dir='rtl'] .idm5_container_app_sidebar_no_icons.no[dir='ltr'] {\n  flex-direction: row-reverse;\n  -webkit-flex-direction: row-reverse;\n}\n\n/* overwrite margin right of the gmail page next/back and settings icon buttons\n   to line up properly */\n\n/* when no siebar is visible */\n.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -57px !important;\n}\n\n/* when addon sidebar visible */\n.container_addon_sidebar_visible.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -321px !important;\n}\n\n/* when sdk sidebar visible */\n.container_app_sidebar_visible.container_app_sidebar_in_use.no\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: -321px !important;\n}\n\n/* no sdk icons and no native addons */\n.IDMAP_container_app_sidebar_no_icons\n  .G-atb.inboxsdk__thread_toolbar_parent[gh='tm'] {\n  margin-right: 0px !important;\n}\n\n/* quickfix, TODO investigate removing ar7 class from our buttons */\n.inboxsdk__button.ar7 {\n  pointer-events: all !important;\n}\n\n.container_app_sidebar_in_use .bkK.nn,\n.IDMAP_container_app_sidebar_no_icons .bkK.nn {\n  width: auto !important;\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0px;\n}\n\n/* when removing addon icons */\n.IDMAP_container_app_sidebar_no_icons .bnl.nn {\n  z-index: -1;\n  position: absolute;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use {\n  min-width: 57px !important;\n  flex-shrink: 0;\n  -webkit-flex-shrink: 0;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use.app_sidebar_visible {\n  min-width: 321px !important;\n}\n\n.container_app_sidebar_in_use .IDMAP_app_sidebar_in_use > .J-KU-Jg {\n  display: block !important;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container {\n  display: none;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use.app_sidebar_visible\n  .IDMAP_app_sidebar_container {\n  display: block;\n  float: left;\n  height: 100%;\n  border-left: 1px solid #e0e0e0;\n  padding-left: 16px;\n  width: calc(100% - 74px);\n  overflow: auto;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_container\n  .IDMAP_app_sidebar_content_area {\n  width: calc(100% - 16px);\n  padding-right: 16px;\n}\n\n.container_app_sidebar_in_use\n  .IDMAP_app_sidebar_in_use.app_sidebar_visible\n  .J-KU-Jz {\n  width: auto;\n  padding-right: 50px;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  margin: 18px 18px 10px 18px;\n  border: none;\n  background: transparent;\n  height: 20px;\n  width: 20px;\n  overflow: hidden;\n  padding: 0;\n  cursor: pointer;\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea.sidebar_global_iconArea .inboxsdk__button_icon {\n  margin-bottom: 18px;\n}\n\nbody .IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  overflow: visible;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_icon::before,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover:before {\n  content: '';\n  background: #f1f3f4;\n  position: absolute;\n  top: -10px;\n  left: -10px;\n  right: -10px;\n  bottom: -10px;\n  border-radius: 50%;\n  z-index: 0;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_icon::before {\n  background: #e8eaed;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {\n  width: 20px;\n  height: 20px;\n  margin-top: 0px;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon .inboxsdk__button_iconImg {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 1;\n}\n\n.IDMAP_sidebar_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  height: 40px;\n  width: 4px;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  background-color: rgb(66, 133, 244);\n  border-radius: 3px 0 0 3px;\n}\n\n.IDMAP_sidebar_iconArea.sidebar_global_iconArea\n  .sidebar_button_container_active\n  .inboxsdk__button_selectedIndicator {\n  bottom: 8px;\n}\n\n/* end sidebar */\n\n/* material sidebar */\n.brC-brG.companion_app_sidebar_visible {\n  display: block !important;\n}\n\n.bq9:not(.brC-brG).companion_app_sidebar_wrapper_visible {\n  display: block !important;\n}\n\n.companion_global_app_sidebar_visible .thread_app_sidebar {\n  display: none;\n}\n\n.companion_app_sidebar_visible:not(.companion_global_app_sidebar_visible)\n  .global_app_sidebar {\n  display: none;\n}\n\n.nH.companion_container_app_sidebar_visible {\n  width: calc(100% - 300px) !important;\n}\n\n.companion_app_sidebar_visible .addon_sidebar ~ div:not(.addon_sidebar) {\n  display: none !important;\n}\n\n.IDMAP_app_sidebar_in_use .IDMAP_app_sidebar_container.addon_sidebar {\n  height: 100%;\n  overflow: auto;\n}\n\n.IDMAP_app_sidebar_in_use\n  .IDMAP_app_sidebar_container.addon_sidebar\n  .IDMAP_app_sidebar_content_area {\n  width: 100%;\n}\n\n.IDMAP_app_sidebar_in_use:not(.companion_app_sidebar_visible) .addon_sidebar {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon_container {\n  margin-left: 0px;\n}\n\n.IDMAP_app_sidebar_content_panel .IDMAP_app_sidebar_content_panel_top_line {\n  padding: 0px 16px;\n}\n\n/* hide thread addon icons when in custom view */\nbody.inboxsdk__custom_view_active\n  .brC-aT5-aOt-ato-Kp-Jw\n  [role='tablist']\n  > div:not(:last-child) {\n  display: none;\n}\n\n/* make the native addon icon container for thread add-ons (div.bvq) always visible */\n.IDMAP_app_sidebar_in_use .bvq,\n.IDMAP_app_sidebar_in_use .bvq > div:last-child {\n  display: block !important;\n}\n\n/* hide the native addon loading div */\n.IDMAP_companion_container_app_sidebar_in_use .bvq > div:first-child {\n  display: none !important;\n}\n\n/* end material sidebar */\n\n/* custom content */\n\n.inboxsdk__custom_view_element {\n  overflow: auto;\n}\n\n/* end custom content */\n\n/* nav menu */\n\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) {\n  border-left-color: transparent;\n}\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .nU:not(.n1) .n0 {\n  font-weight: normal;\n}\n\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .bsU {\n  font-weight: normal;\n}\n.inboxsdk__hide_native_marker .ain:not(.inboxsdk__navItem) .TO {\n  background: none;\n}\n\n.inboxsdk__hide_addon_container {\n  display: flex !important;\n  display: -webkit-flex !important;\n  flex-direction: row;\n  -webkit-flex-direction: row;\n  width: 100% !important;\n}\n\nbody[dir='rtl'] .inboxsdk__hide_addon_container[dir='ltr'] {\n  flex-direction: row-reverse;\n  -webkit-flex-direction: row-reverse;\n}\n\n.inboxsdk__hide_addon_container > .bkK.nn {\n  width: auto !important;\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0;\n}\n\n.inboxsdk__hide_addon_container > .bnl.nn {\n  display: none;\n}\n\n.inboxsdk__navItem {\n  font-size: 14px;\n}\n\n/*\nfix issue in pre-Chat Gmail versions where somehow a style=\"flex-grow: 1\" attribute\nshows up on our elements preventing them from collapsing.\n*/\n.inboxsdk__navItem:not(.Xr) > .V3[style] {\n  flex-grow: 0 !important;\n}\n\n.inboxsdk__navItem > .TO.n4 {\n  display: block;\n  padding-left: 0;\n}\n\n.inboxsdk__navItem > .TO.n4 .qj > .G-asx {\n  margin-right: 0;\n}\n\n.inboxsdk__navItem > .TO .aio > .bsU:empty {\n  display: none;\n}\n\n.inboxsdk__navItem > .TO .qj:empty::after {\n  background-color: rgb(118, 118, 118);\n  border-radius: 50%;\n  content: '';\n  height: 18px;\n  margin-left: 1px;\n  width: 18px;\n}\n\n.inboxsdk__navItem > .TO .qj[style*='border-color']:empty::after {\n  border-color: inherit;\n}\n\n.inboxsdk__navItem > .TO:hover .pM {\n  display: flex;\n  display: -webkit-flex;\n  visibility: visible;\n}\n\n.inboxsdk__navItem > .TO .afM {\n  cursor: pointer;\n}\n\n.inboxsdk__navItem > .TO:hover .afM {\n  display: block;\n  visibility: visible;\n}\n\n/* This does slightly break from the native Gmail behavior, but we keep the dropdown button\n  visible while it has an active dropdown */\n.inboxsdk__navItem > .TO img.afM.afO {\n  display: block;\n  visibility: visible;\n}\n\n/* Keep the subtitle hidden while the dropdown is active */\n.inboxsdk__navItem > .TO img.afM.afO ~ .aio > .bsU {\n  display: none;\n}\n\n.inboxsdk__navItem > .TO:hover .bsU {\n  display: none;\n}\n\n.inboxsdk__navItem.inboxsdk__navItem_nonClickable > .TO:active {\n  background-color: initial;\n}\n\n.inboxsdk__navItem_hover .aj0,\n.inboxsdk__navItem_hover .p8 {\n  visibility: visible;\n}\n\n.inboxsdk__navItem_link {\n  cursor: pointer;\n  margin-left: auto;\n}\n\n.inboxsdk__navItem_link > a {\n  margin-left: 16px;\n}\n\n.inboxsdk__navItem > .TO .inboxsdk__button {\n  margin-right: 0;\n}\n\n[dir='rtl'] .inboxsdk__navItem_link {\n  left: -4px;\n  right: initial;\n}\n\n.inboxsdk__navItem_container .aio .inboxsdk__button {\n  position: absolute;\n  top: 0px;\n  right: -30px;\n}\n\n.inboxsdk__navItem_marker {\n  position: absolute;\n  left: 0px;\n  padding-bottom: 2px;\n}\n\n.inboxsdk__expando {\n  z-index: 1;\n}\n\n.inboxsdk__navItem_link > a,\n.aip .CK {\n  color: #15c;\n}\n\n.inboxsdk__navItem_link > a:hover,\n.aip .CK:hover {\n  text-decoration: underline;\n}\n\n.inboxsdk__navItem_container .aio.aip {\n  white-space: nowrap;\n}\n\n/* start nav menu open state */\n\n.WR[role=\"navigation\"] /* new left nav */\n  .inboxsdk__navItem\n  .Yh:not(.inboxsdk__navItem_parent_accessory_button):empty {\n  display: none;\n}\n\n.WR[role=\"navigation\"] /* new left nav */\n  .inboxsdk__navItem\n  .Yh:not(.inboxsdk__navItem_parent_accessory_button) {\n  background: none;\n}\n\n.WR[role=\"navigation\"] /* new left nav */\n  .inboxsdk__navItem\n  .Yh\n  .inboxsdk__button_icon {\n  display: none;\n}\n\n/* end nav menu open state */\n\n/* start nav menu close state */\n\n.WR[role=\"navigation\"].bhZ:not(.bym) /* .WR is the new left nav */\n  .inboxsdk__navItem\n  .Yh {\n  opacity: 1;\n}\n\n.WR[role=\"navigation\"].bhZ:not(.bym) /* .WR is the new left nav */\n  .inboxsdk__navItem\n  .Yh.inboxsdk__navItem_parent_accessory_button {\n  background-image: none !important;\n}\n\n.WR[role=\"navigation\"].bhZ:not(.bym) /* .WR is the new left nav */\n  .inboxsdk__navItem\n  .Yh:empty {\n  background-color: rgba(32, 33, 36, 0.71);\n  border-radius: 50%;\n  display: inherit;\n  height: 18px;\n  margin-left: 1px;\n  width: 18px;\n}\n\n.WR[role='navigation'].bhZ:not(.bym)\n  .inboxsdk__navItem\n  .Yh\n  .inboxsdk__button_icon {\n  display: inherit;\n}\n\n/* end nav menu close state */\n\n/* end nav menu */\n\n/* search results section */\n\n.inboxsdk__custom_sections {\n  margin-bottom: 15px;\n}\n\n.inboxsdk__custom_sections.Wc {\n  padding: 0px;\n  margin-bottom: 0px;\n}\n\n.inboxsdk__custom_sections {\n  margin-bottom: 8px;\n}\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_nonCollapsible\n  .inboxsdk__resultsSection_title\n  .Wp {\n  visibility: hidden;\n}\n\n.inboxsdk__custom_sections.Wc .inboxsdk__resultsSection {\n  padding-top: 0px;\n}\n\n.inboxsdk__custom_sections .Wg {\n  padding-top: 0px;\n}\n\n.inboxsdk__custom_sections.Wc .Wg {\n  border-bottom: 0;\n  padding: 0px;\n}\n\n/* end lone collapsed SectionView in Gmailv1 */\n\n.inboxsdk__results_collapsedContainer.Wg {\n  height: auto;\n}\n\n.inboxsdk__results_collapsedContainer > div {\n  display: flex;\n  display: -webkit-flex;\n  flex-wrap: wrap;\n  -webkit-flex-wrap: wrap;\n  flex: 1 0 100%;\n  -webkit-flex: 1 0 100%;\n}\n\n/* lone collapsed SectionView in Gmailv2 */\n/* If only a single SectionView is collapsed then its dropdown button and titleTextLink are still shown */\n.inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child {\n  flex: 1;\n  -webkit-flex: 1;\n  margin-right: 0;\n}\n\n.inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  flex: 1;\n  -webkit-flex: 1;\n}\n\n.inboxsdk__results_collapsedContainer\n  > div\n  > .inboxsdk__resultsSection_collapsed:first-child:last-child\n  > .inboxsdk__resultsSection_header\n  > .Cr {\n  display: flex;\n  display: -webkit-flex;\n  align-items: center;\n  -webkit-align-items: center;\n  margin-left: auto;\n}\n\n/* end lone collapsed SectionView in Gmailv2 */\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  display: inline-block;\n  margin-right: 20px;\n}\n\n.inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  display: inline-flex;\n}\n\n.Wc .inboxsdk__resultsSection.inboxsdk__resultsSection_collapsed {\n  margin-right: 0px;\n}\n\n.inboxsdk__resultsSection_collapsed .Cr {\n  display: none;\n}\n\n.inboxsdk__resultsSection_title {\n  white-space: nowrap;\n  cursor: pointer;\n  display: inline-block;\n}\n.inboxsdk__resultsSection_title {\n  display: flex;\n  align-items: center;\n  height: 48px;\n}\n\n.Wc .inboxsdk__resultsSection_title {\n  padding: 3px 0 3px 8px;\n}\n\n.inboxsdk__resultsSection_header {\n  min-height: 48px;\n  line-height: 48px;\n}\n\n.inboxsdk__resultsSection_header_summaryText.Wm:last-child .amH {\n  padding-right: 0px;\n  margin-right: 0px;\n}\n\n.inboxsdk__custom_sections.Wc\n  .inboxsdk__resultsSection_header_summaryText:last-child {\n  margin-right: 11px;\n}\n\n.inboxsdk__custom_sections.Wc .J-JN-M-I {\n  margin-right: 13px;\n}\n\n.inboxsdk__resultsSection .TB.TC {\n  text-align: center;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_loading {\n  font-style: italic;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_result_icon {\n  height: 15px;\n  width: 15px;\n}\n\n.inboxsdk__resultsSection_label_iconHtml,\n.inboxsdk__resultsSection_result_iconHtml {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA:hover > .xW {\n  /* Gmailv2 tries to hide the \"xW\" element when a \"zA\" element is hovered. This prevent that. */\n  display: flex;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow.zA > .xW {\n  max-width: none;\n  flex-basis: auto;\n}\n\n.inboxsdk__resultsSection .inboxsdk__resultsSection_tableRow .xT {\n  align-items: center;\n  -webkit-align-items: center;\n}\n\n.inboxsdk__resultsSection .xX {\n  width: 20ex;\n}\n\n.inboxsdk__resultsSection_result_title span {\n  text-overflow: ellipsis;\n  display: block;\n  overflow: hidden;\n}\n\n.inboxsdk__resultsSection tr .xW > span {\n  overflow: hidden;\n  display: block;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__resultsSection .V3 {\n  overflow: hidden;\n  white-space: nowrap;\n}\n\n.inboxsdk__resultsSection .at {\n  position: relative;\n}\n\n.inboxsdk__thread_row_label {\n  flex-shrink: 0;\n  align-self: center;\n}\n\n.inboxsdk__thread_row_label {\n  align-self: flex-end;\n}\n\n/* label in vertical preview pane */\n.apv .inboxsdk__thread_row_label {\n  align-self: flex-start;\n}\n\n.inboxsdk__resultsSection_label_icon {\n  height: 11px;\n  width: 11px;\n  position: absolute;\n  top: 2px;\n  margin-left: 4px;\n}\n\n.inboxsdk__resultsSection_label_icon {\n  margin-top: 1px;\n}\n\n.inboxsdk__resultsSection .av,\n.inboxsdk__thread_row_label .av {\n  /* max-width is set inline, default is 90px */\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.inboxsdk__resultsSection_label_icon + .av,\n.inboxsdk__thread_row_label .inboxsdk__button_icon + .av {\n  margin-left: 16px;\n}\n\n.Wc .inboxsdk__resultsSection_footer {\n  padding: 3px 3px 3px 8px;\n}\n\n/* end search results section */\n\n/* tooltip */\n\n/* gmail styles */\n\n.inboxsdk__tooltip .T-P {\n  -webkit-box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\n  background-color: #fff;\n  border: 1px solid;\n  border-color: #bbb #bbb #a8a8a8;\n  padding: 16px;\n  position: absolute;\n  z-index: 1201 !important;\n}\n\n.inboxsdk__tooltip.inboxdk__tooltip_content .T-P {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip .aRM {\n  outline: none;\n  padding: 13px 10px 16px;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxdk__tooltip_content.inboxsdk__tooltip .aRM {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip .aRR {\n  color: #333;\n  font-size: 18px;\n  margin-top: 13px;\n}\n\n.inboxsdk__tooltip .aRQ {\n  color: #777;\n  font-size: 13px;\n  margin: 3px 0 14px 0;\n}\n\n/* end gmail styles */\n\n.inboxsdk__tooltip {\n  position: fixed;\n  z-index: 1300;\n  transition: left 200ms ease, top 200ms ease;\n}\n\n.inboxsdk__tooltip .T-P {\n  position: relative;\n  width: auto;\n  max-width: 500px;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_arrow {\n  position: fixed;\n  z-index: 1400;\n  margin-top: -1px;\n  transition: left 200ms ease, top 200ms ease;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_close {\n  -webkit-user-select: none;\n}\n\n.inboxsdk__tooltip .inboxsdk__button {\n  margin-right: 0px;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_image {\n  max-height: 300px;\n  max-width: 500px;\n  overflow: hidden;\n  height: auto;\n}\n\n.inboxsdk__tooltip .inboxsdk__tooltip_image > img {\n  max-height: 300px;\n  max-width: 500px;\n}\n\n/* end tooltip */\n\n/* attachment card */\n\n.inboxsdk__attachmentCard img.aQG.aYB {\n  max-width: 178px;\n  min-width: 178px;\n  min-height: 118px;\n}\n\n.inboxsdk__attachmentCard img.aZG.aYw {\n  background: none;\n}\n\n/* add some margins between cards so 4+ cards don't hit each other */\n\n.aQw > .T-I.J-J5-Ji.L3 {\n  margin-top: 5px;\n}\n\n/* end attachment card */\n\n/* keyboard shortcut help */\n\ntable.cf.wd.inboxsdk__shortcutHelp_table {\n  margin-bottom: 15px;\n}\n\n.inboxsdk__shortcutHelp_table td.Dn {\n  display: inline-block;\n  width: 50%;\n}\n\n.inboxsdk__shortcutHelp_table table.cf {\n  display: block;\n}\n\n.inboxsdk__shortcutHelp_table tbody tbody {\n  display: block;\n}\n\n.inboxsdk__shortcutHelp_table tbody tbody tr {\n  display: block;\n  white-space: nowrap;\n}\n\n.inboxsdk__shortcutHelp_table td.wg.Dn {\n  display: inline-block;\n  width: 45%;\n}\n\n.inboxsdk__shortcutHelp_table span.wb {\n  margin-left: 3px;\n}\n\n.inboxsdk__shortcutHelp_table td.we.Dn {\n  width: 60%;\n  white-space: normal;\n}\n\n.inboxsdk__shortcutHelp_title img.inboxsdk__icon {\n  height: 21px;\n  width: 21px;\n  vertical-align: middle;\n  margin-right: 10px;\n  border-radius: 4px;\n}\n\n/* end keyboard shortcut help */\n\n/* search suggestions */\n\n.asor.inboxsdk__custom_suggestion {\n  display: flex;\n  display: -webkit-flex;\n  justify-content: center;\n  -webkit-justify-content: center;\n  align-items: center;\n  -webkit-align-items: center;\n}\n\n.inboxsdk__custom_suggestion img {\n  max-width: 32px;\n  max-height: 32px;\n}\n\n.inboxsdk__custom_suggestion_iconHTML {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 8px;\n  height: 32px;\n  width: 43px;\n}\n\n/* Adjust positioning when no description present */\n.gstq_d .inboxsdk__custom_suggestion_iconHTML {\n  margin-top: -8px;\n}\n\n/* end send suggestions */\n\n/* app toolbar */\n\n.inboxsdk__appButton {\n  margin-right: 8px;\n}\n\n.inboxsdk__appButton + .inboxsdk__appButton {\n  margin-left: 16px;\n}\n\n.inboxsdk__appButton.inboxsdk__appButton_noGPlus {\n  margin-right: 0px;\n}\n\n.inboxsdk__appButton .inboxsdk__button_icon {\n  margin-right: 5px;\n  position: relative;\n}\n\n.inboxsdk__appButton a {\n  color: #404040;\n  text-decoration: none;\n  line-height: 24px;\n}\n\n.inboxsdk__appButton.inboxsdk__appButton_noGPlus a {\n  line-height: 30px;\n}\n\n.inboxsdk__appButton a:hover {\n  text-decoration: underline;\n  color: #000;\n}\n\n.inboxsdk__gmail_dark_theme .inboxsdk__appButton a {\n  color: #eee;\n}\n.inboxsdk__gmail_dark_theme .inboxsdk__appButton a:hover {\n  color: #fff;\n}\n\n.inboxsdk__appButton_tooltip {\n  outline: none;\n  transition: none;\n  -webkit-animation: gb__a 0.2s;\n}\n\n.inboxsdk__appButton_tooltip .inboxsdk__tooltip_close {\n  display: none;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .T-P {\n  padding: 0px;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .aRM {\n  padding: 0px;\n  white-space: initial;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxsdk__tooltip.inboxsdk__appButton_tooltip .inboxsdk__tooltip_arrow {\n  transform-origin: top;\n  transform: rotateZ(180deg);\n  margin-top: 9px;\n}\n\n/* resize based on width */\n\n.inboxsdk__searchIsNarrow .streak__appToolbarButton_title {\n  display: none;\n}\n\n/* end resize based on width */\n\n/* end app toolbar */\n\n/* custom message views */\n\n.inboxsdk__custom_message_view {\n  display: flex;\n  padding-top: 20px;\n  padding-bottom: 20px;\n  border-top: 1px solid #efefef;\n  border-collapse: collapse;\n}\n\n.inboxsdk__custom_message_view_hidden {\n  display: none;\n}\n\n/* when cusotm message is right after the last message with its reply */\n.h7.ie + .inboxsdk__custom_message_view {\n  margin-top: 5px;\n}\n\n/* when custom message is after the super collapsed message elements */\n.kQ + .inboxsdk__custom_message_view,\n.kx + .inboxsdk__custom_message_view {\n  margin-top: 1px;\n}\n\n.inboxsdk__custom_message_view.inboxsdk__custom_message_view_collapsed {\n  cursor: pointer;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon {\n  padding-left: 16px;\n  padding-right: 16px;\n  flex-shrink: 0;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_icon img {\n  height: 32px;\n  width: 32px;\n  border-radius: 50%;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_content {\n  width: 100%;\n  min-width: 0px;\n}\n\n.inboxsdk__custom_message_view .inboxsdk__custom_message_view_header {\n  cursor: pointer;\n}\n\n.inboxsdk__custom_message_view_app_notice_content {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  z-index: 1;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container {\n  position: relative;\n  width: auto !important;\n  min-width: 32px;\n}\n\n.inboxsdk__custom_message_view_app_notice_content {\n  align-items: center;\n  display: flex;\n  font-size: 0.75rem !important;\n  justify-content: flex-start;\n  margin-left: 0;\n  padding: 0px;\n  top: 0;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container:hover::before {\n  content: none !important;\n}\n\n.adx.inboxsdk__custom_message_view_app_notice_container.inboxsdk__custom_message_view_app_notice_container\n  > span:first-child {\n  display: none;\n}\n\n.inboxsdk__custom_message_view_app_notice_container::before {\n  position: absolute;\n}\n\n.inboxsdk__custom_message_view_app_notice_content > * {\n  color: #555;\n}\n\ntable[role='presentation'].inboxsdk__thread_view_with_custom_view {\n  table-layout: fixed;\n}\n\ntable[role='presentation'].inboxsdk__thread_view_with_custom_view > tr {\n  display: block;\n}\n\n/* end custom message views */\n\n/* butter/snack bar */\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error {\n  background-color: #c53929 !important;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button'] {\n  color: #fff;\n}\n\n.inboxsdk__butterbar.inboxsdk__butterbar_error [role='button']::before {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n/* end butter/snack bar */\n\n/* support menu item */\n.inboxsdk__support_menuItem:hover {\n  background-color: #eeeeee;\n  outline: 1px dashed transparent;\n}\n\n.inboxsdk__compose_addressList {\n  display: flex !important;\n}\n\n/* end support menu item */\n\n/* compose popover */\n.inboxsdk__linkPopOver_section_container {\n  position: absolute;\n  width: 100%;\n  top: 35px;\n  left: 0;\n}\n\n.inboxsdk__linkPopOver_section {\n  width: 100%;\n  background: #fff;\n  border: 1px solid;\n  border-color: #bbb #bbb #a8a8a8;\n  font: 13px arial, sans-serif;\n  padding: 5px 8px;\n  margin-bottom: 5px;\n  box-sizing: border-box;\n  box-shadow: 0 1px 3px rgb(0 0 0 / 20%);\n}\n\n/* end compose popover */\n\n/*\n Toolbar/Thread button style fix for\n when the gmail setting \"Button labels\" is set to \"text\"\n*/\n\n.T-I.J-J5-Ji.T-I-ax7.inboxsdk__button .asa::after {\n  width: auto;\n}\n")
},{"../../lib/rewriteCssWithIdMap":896,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"ud-kefir":624}],661:[function(e,t,r){"use strict";function n(e,t,r){t.style.display="",e.style.top="-10000px",e.style.position="relative",e.classList.remove("bAp"),r.style.display="none",r.removeAttribute("data-inboxsdk-id")}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/core-js/json/stringify")),s=i(e("@babel/runtime-corejs2/core-js/date/now")),l=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),u=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=i(e("@babel/runtime-corejs2/helpers/createClass")),d=i(e("kefir")),f=i(e("../../lib/stream-wait-for")),p=i(e("../../lib/dom/querySelectorOrFail")),m=i(e("../../lib/dom/make-mutation-observer-chunked-stream")),h=(0,f.default)(function(){return document.body.querySelector('div.b8[role="alert"]')}).map(function(e){var t=(0,p.default)(e,".vh:not(.inboxsdk__butterbar)"),r=e.querySelector(".vh.inboxsdk__butterbar");if(!r){r=document.createElement("div"),r.classList.add("vh","inboxsdk__butterbar"),r.style.display="none";var n=document.createElement("span");n.classList.add("aT");var o=document.createElement("span");o.classList.add("inboxsdk__butterbar-text","bAq");var i=document.createElement("span");i.classList.add("inboxsdk__butterbar-buttons","bAo"),i.innerHTML="&nbsp;&nbsp;";var a=document.createElement("div");a.classList.add("inboxsdk__butterbar-close","bBe"),a.innerHTML='<div class="bBf"></div>',a.setAttribute("role","button"),a.tabIndex=0,n.appendChild(o),n.appendChild(i),r.appendChild(n),r.appendChild(a);var s=t.parentNode;if(!s)throw new Error("parentNode not found");s.insertBefore(r,t.nextSibling)}return{noticeContainer:e,googleNotice:t,sdkNotice:r}}).toProperty(),b=h.flatMapLatest(function(e){var t=e.googleNotice;return(0,m.default)(t,{childList:!0})}),v=b.filter(function(e){return e.some(function(e){return e.addedNodes.length>0})}),_=b.filter(function(e){return!e.some(function(e){return e.addedNodes.length>0})}),g=h.flatMapLatest(function(e){var t=e.sdkNotice;return(0,m.default)(t,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map(function(){return t.getAttribute("data-inboxsdk-id")})}).filter(function(e){return null==e}),y=d.default.merge([_,g]),w=function(){function e(){(0,u.default)(this,e),d.default.combine([h,v]).onValue(function(e){var t=(0,l.default)(e,1),r=t[0],n=r.googleNotice,o=r.sdkNotice;n.style.display="",o.style.display="none",o.setAttribute("data-inboxsdk-id","gmail")}),y.onValue(function(){})}return(0,c.default)(e,[{key:"getNoticeAvailableStream",value:function(){return y}},{key:"getSharedMessageQueue",value:function(){var e=document.head.getAttribute("data-inboxsdk-butterbar-queue");return e?JSON.parse(e):[]}},{key:"setSharedMessageQueue",value:function(e){var t=(0,a.default)(e);document.head.setAttribute("data-inboxsdk-butterbar-queue",t)}},{key:"showMessage",value:function(e){var t=(0,s.default)()+"-"+Math.random(),r=function(){h.take(1).onValue(function(r){var o=r.noticeContainer,i=r.googleNotice,a=r.sdkNotice;a.getAttribute("data-inboxsdk-id")===t&&(e.className&&a.classList.remove(e.className),n(o,i,a))})};return h.take(1).onValue(function(n){var o=n.noticeContainer,i=n.googleNotice,a=n.sdkNotice;o.style.visibility="visible",o.style.top="",o.classList.add("bAp"),i.style.display="none",a.className=i.className,a.classList.add("inboxsdk__butterbar");for(var s=(0,p.default)(a,".inboxsdk__butterbar-text");s.firstChild;)s.removeChild(s.firstChild);for(var l=(0,p.default)(a,".inboxsdk__butterbar-buttons");l.firstChild;)l.removeChild(l.firstChild);e.html?s.innerHTML=e.html:e.el?s.appendChild(e.el):s.textContent=e.text,e.buttons&&e.buttons.forEach(function(e){var t=document.createElement("span");t.classList.add("ag","a8k"),t.onclick=function(t){return e.onClick(t)},t.setAttribute("role","button"),t.tabIndex=0,t.textContent=e.title,l.appendChild(t)});var u=(0,p.default)(a,".inboxsdk__butterbar-close");u&&d.default.fromEvents(u,"click").take(1).onValue(r),e.className&&a.classList.add(e.className),a.style.display="",a.setAttribute("data-inboxsdk-id",t)}),{destroy:r}}},{key:"hideGmailMessage",value:function(){h.take(1).onValue(function(e){var t=e.noticeContainer,r=e.googleNotice,o=e.sdkNotice;"gmail"===o.getAttribute("data-inboxsdk-id")&&n(t,r,o)})}}]),e}();r.default=w},{"../../lib/dom/make-mutation-observer-chunked-stream":862,"../../lib/dom/querySelectorOrFail":868,"../../lib/stream-wait-for":901,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,kefir:327}],662:[function(e,t,r){(function(n){(function(){"use strict";function o(e,t){var r=a(e);if(s){var n=s(e);t&&(n=n.filter(function(t){return l(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,w.default)(e,t,r[t])}):u?c(e,u(r)):o(Object(r)).forEach(function(t){d(e,t,l(r,t))})}return e}var a=e("@babel/runtime-corejs2/core-js/object/keys"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),c=e("@babel/runtime-corejs2/core-js/object/define-properties"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=void 0;var p=f(e("@babel/runtime-corejs2/regenerator")),m=f(e("@babel/runtime-corejs2/core-js/set")),h=f(e("@babel/runtime-corejs2/core-js/map")),b=f(e("@babel/runtime-corejs2/core-js/date/now")),v=f(e("@babel/runtime-corejs2/core-js/array/from")),_=f(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),g=f(e("@babel/runtime-corejs2/helpers/classCallCheck")),y=f(e("@babel/runtime-corejs2/helpers/createClass")),w=f(e("@babel/runtime-corejs2/helpers/defineProperty")),j=f(e("live-set/toValueObservable")),k=e("ud"),x=f(e("transducers.js")),E=f(e("kefir")),S=f(e("kefir-stopper")),C=f(e("kefir-bus")),I=(f(e("asap")),f(e("lodash/includes"))),A=f(e("../../../common/get-or-fail")),T=f(e("./gmail-driver/show-app-id-warning")),D=f(e("./makePageParserTree")),M=f(e("./gmail-element-getter")),R=f(e("./make-xhr-interceptor")),O=f(e("./views/gmail-backdrop")),P=e("./views/gmail-thread-row-view"),L=f(e("./widgets/gmail-top-message-bar-driver")),V=f(e("./widgets/gmail-modal-view-driver")),N=f(e("./widgets/gmail-mole-view-driver")),B=f(e("../inbox/views/inbox-drawer-view")),q=f(e("./views/gmail-route-view/gmail-route-processor")),U=f(e("./gmail-driver/keyboard-shortcut-help-modifier")),F=f(e("./gmail-driver/open-draft-by-message-id")),H=f(e("./gmail-driver/user-info")),z=f(e("./gmail-butter-bar-driver")),W=f(e("./gmail-driver/track-gmail-styles")),G=f(e("./gmail-driver/temporary-track-download-url-validity")),K=f(e("../../driver-common/getGmailThreadIdForRfcMessageId")),$=f(e("./gmail-driver/get-rfc-message-id-for-gmail-thread-id")),J=f(e("../../driver-common/getGmailMessageIdForSyncMessageId")),Y=f(e("bimapcache")),Q=f(e("./gmail-driver/get-draft-id-for-message-id")),Z=f(e("./gmail-driver/add-nav-item")),X=f(e("./gmail-driver/add-support-item")),ee=f(e("./gmail-driver/goto-view")),te=f(e("./gmail-driver/show-custom-thread-list")),re=f(e("./gmail-driver/show-custom-route-view")),ne=f(e("./gmail-driver/show-native-route-view")),oe=f(e("./gmail-driver/register-search-suggestions-provider")),ie=f(e("./gmail-driver/setup-compose-view-driver-stream")),ae=f(e("./gmail-driver/track-events")),se=f(e("./gmail-driver/gmail-load-event")),le=f(e("./gmail-driver/thread-row-identifier")),ue=f(e("./custom-style")),ce=f(e("./gmail-driver/override-gmail-back-button")),de=f(e("./gmail-driver/add-toolbar-button-for-app")),fe=f(e("./gmail-driver/setup-route-view-driver-stream")),pe=f(e("./gmail-driver/get-native-nav-item")),me=f(e("./gmail-driver/create-link")),he=f(e("./gmail-driver/register-search-query-rewriter")),be=f(e("./gmail-driver/open-compose-window")),ve=f(e("./views/gmail-app-sidebar-view")),_e=f(e("./gmail-driver/suppressAddon")),ge=f(e("./gmail-driver/getSyncThreadFromSyncThreadId")),ye=f(e("./gmail-driver/getSyncThreadForOldGmailThreadId")),we=f(e("../../lib/toItemWithLifetimeStream")),je=f(e("../../lib/toLiveSet")),ke=f(e("../../lib/stream-wait-for")),xe=(f(e("../../lib/wait-for")),f(e("./views/gmail-nav-item-view")),function(){function e(t,r,n,o,i,a){var s=this;(0,g.default)(this,e),(0,w.default)(this,"_appId",void 0),(0,w.default)(this,"_logger",void 0),(0,w.default)(this,"_opts",void 0),(0,w.default)(this,"_envData",void 0),(0,w.default)(this,"_customRouteIDs",new m.default),(0,w.default)(this,"_customListRouteIDs",new h.default),(0,w.default)(this,"_customListSearchStringsToRouteIds",new h.default),(0,w.default)(this,"_messageIDsToThreadIDs",new h.default),(0,w.default)(this,"_threadRowIdentifier",void 0),(0,w.default)(this,"_gmailRouteProcessor",void 0),(0,w.default)(this,"_keyboardShortcutHelpModifier",void 0),(0,w.default)(this,"onready",void 0),(0,w.default)(this,"_page",void 0),(0,w.default)(this,"_pageCommunicator",void 0),(0,w.default)(this,"_pageCommunicatorPromise",void 0),(0,w.default)(this,"_butterBar",void 0),(0,w.default)(this,"_butterBarDriver",void 0),(0,w.default)(this,"_routeViewDriverStream",void 0),(0,w.default)(this,"_rowListViewDriverStream",void 0),(0,w.default)(this,"_threadRowViewDriverKefirStream",void 0),(0,w.default)(this,"_threadViewDriverLiveSet",void 0),(0,w.default)(this,"_toolbarViewDriverLiveSet",void 0),(0,w.default)(this,"_composeViewDriverStream",void 0),(0,w.default)(this,"_xhrInterceptorStream",void 0),(0,w.default)(this,"_messageViewDriverStream",void 0),(0,w.default)(this,"_stopper",(0,S.default)()),(0,w.default)(this,"_navMarkerHiddenChanged",(0,C.default)()),(0,w.default)(this,"_addonSidebarHiddenChanged",(0,C.default)()),(0,w.default)(this,"_userInfo",void 0),(0,w.default)(this,"_timestampAccountSwitcherReady",void 0),(0,w.default)(this,"_timestampGlobalsFound",void 0),(0,w.default)(this,"_timestampOnready",void 0),(0,w.default)(this,"_lastCustomThreadListActivity",void 0),(0,w.default)(this,"_currentRouteViewDriver",void 0),(0,w.default)(this,"_appSidebarView",null),(0,w.default)(this,"getGmailThreadIdForRfcMessageId",void 0),(0,w.default)(this,"getRfcMessageIdForGmailThreadId",void 0),(0,w.default)(this,"getSyncThreadIdForOldGmailThreadId",void 0),(0,w.default)(this,"getOldGmailThreadIdFromSyncThreadId",void 0),(0,w.default)(this,"removeCachedOldGmailThreadIdFromSyncThreadId",void 0),(0,w.default)(this,"getGmailMessageIdForSyncDraftId",void 0),(0,w.default)(this,"getGmailMessageIdForSyncMessageId",void 0),(0,w.default)(this,"removeCachedGmailMessageIdForSyncMessageId",void 0),(0,w.default)(this,"_recentSyncDraftIds",new h.default),(0,w.default)(this,"_selectedThreadRows",x.default.mapcat(function(e){return e.getSelectedThreadRowViewDrivers()})),(0,w.default)(this,"_threadRowViewSelectionChanges",(0,C.default)()),(0,ue.default)(),this._appId=t,this._logger=o,this._opts=i,this._envData=a,this._page=(0,D.default)(this,document),this._stopper.onValue(function(){return s._page.dump()});var l=new Y.default({key:"inboxsdk__cached_thread_ids",getAfromB:function(e){return(0,$.default)(s,e)},getBfromA:function(e){return(0,K.default)(s,e)}});this.getGmailThreadIdForRfcMessageId=function(e){return l.getBfromA(e)},this.getRfcMessageIdForGmailThreadId=function(e){return l.getAfromB(e)};var u=new Y.default({key:"inboxsdk__cached_sync_thread_id_old_gmail_thread_id",getAfromB:function(e){return(0,ye.default)(s,e).then(function(e){return e.syncThreadID})},getBfromA:function(e){return(0,ge.default)(s,e).then(function(e){if(e)return e.oldGmailThreadID;throw new Error("syncThread not found")})}});this.getSyncThreadIdForOldGmailThreadId=function(e){return u.getAfromB(e)},this.getOldGmailThreadIdFromSyncThreadId=function(e){return u.getBfromA(e)},this.removeCachedOldGmailThreadIdFromSyncThreadId=function(e){return u.removeAfromCache(e)};try{localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids_2")}catch(e){console.error(e)}var c=new Y.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_3",getAfromB:function(e){return(0,J.default)(s,e)},getBfromA:function(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=function(e){return c.getAfromB(e)},this.removeCachedGmailMessageIdForSyncMessageId=function(e){return c.removeBfromCache(e)},this.getGmailMessageIdForSyncDraftId=function(e){return(0,J.default)(s,e)},this._gmailRouteProcessor=new q.default,this._keyboardShortcutHelpModifier=new U.default,this._butterBarDriver=new z.default,E.default.later(45e3).takeUntilBy((0,we.default)(this._page.tree.getAllByTag("supportMenu"))).onValue(function(){s._logger.errorSite(new Error("Failed to find gmail supportMenu"))}),this._setupEventStreams(),this.onready.then(function(){(0,ae.default)(s),(0,se.default)(s),(0,ce.default)(s,s._gmailRouteProcessor),(0,W.default)(),(0,G.default)(s),null!=i.suppressAddonTitle&&(0,_e.default)(s,i.suppressAddonTitle)}).catch(function(e){s._logger.error(e)})}return(0,y.default)(e,[{key:"destroy",value:function(){this._threadRowViewSelectionChanges.end(),this._keyboardShortcutHelpModifier.destroy(),this._stopper.destroy(),(0,P.removeAllThreadRowUnclaimedModifications)()}},{key:"getAppId",value:function(){return this._appId}},{key:"getOpts",value:function(){return this._opts}},{key:"getPageCommunicator",value:function(){return this._pageCommunicator}},{key:"getPageCommunicatorPromise",value:function(){return this._pageCommunicatorPromise}},{key:"getLogger",value:function(){return this._logger}},{key:"getTagTree",value:function(){return this._page.tree}},{key:"getCustomListSearchStringsToRouteIds",value:function(){return this._customListSearchStringsToRouteIds}},{key:"getThreadRowIdentifier",value:function(){return this._threadRowIdentifier}},{key:"getButterBarDriver",value:function(){return this._butterBarDriver}},{key:"getButterBar",value:function(){return this._butterBar}},{key:"setButterBar",value:function(e){this._butterBar=e}},{key:"getCustomRouteIDs",value:function(){return this._customRouteIDs}},{key:"getCustomListRouteIDs",value:function(){return this._customListRouteIDs}},{key:"getKeyboardShortcutHelpModifier",value:function(){return this._keyboardShortcutHelpModifier}},{key:"getRouteViewDriverStream",value:function(){return this._routeViewDriverStream}},{key:"getRowListViewDriverStream",value:function(){return this._rowListViewDriverStream}},{key:"getThreadRowViewDriverStream",value:function(){return this._threadRowViewDriverKefirStream}},{key:"getThreadViewDriverStream",value:function(){return(0,we.default)(this._threadViewDriverLiveSet).map(function(e){return e.el})}},{key:"getAttachmentCardViewDriverStream",value:function(){return this._messageViewDriverStream.flatMap(function(e){return e.isLoaded()?E.default.constant(e):e.getEventStream().filter(function(e){return"messageLoad"===e.eventName}).map(function(){return e}).take(1)}).map(function(e){return e.getAttachmentCardViewDrivers()}).flatten()}},{key:"getComposeViewDriverStream",value:function(){return this._composeViewDriverStream}},{key:"getXhrInterceptorStream",value:function(){return this._xhrInterceptorStream}},{key:"getMessageViewDriverStream",value:function(){return this._messageViewDriverStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEnvData",value:function(){return this._envData}},{key:"getTimestampOnReady",value:function(){return null==this._timestampOnready?(this._logger.error(new Error("getTimestampOnReady called before ready")),(0,b.default)()):this._timestampOnready}},{key:"delayToTimeAfterReady",value:function(e){var t=this.getTimestampOnReady()+e,r=Math.max(0,t-(0,b.default)());return E.default.later(r)}},{key:"getTimings",value:function(){return{piMainStarted:this._envData.piMainStarted,piLoadStarted:this._envData.piLoadStarted,globalsFound:this._timestampGlobalsFound,accountSwitcherReady:this._timestampAccountSwitcherReady,onready:this._timestampOnready}}},{key:"registerThreadButton",value:function(e){var t=(0,S.default)(),r=function(e){t.takeUntilBy(e.getStopper()).onValue(function(){e.destroy()})},n=(0,j.default)(this._toolbarViewDriverLiveSet).subscribe(function(t){var n=t.value;n.isForThread()?e.positions&&!(0,I.default)(e.positions,"THREAD")||r(n.addButton(i(i({},e),{},{section:e.threadSection||"METADATA_STATE",onClick:function(t){e.onClick({position:"THREAD",dropdown:t.dropdown,selectedThreadViewDrivers:[n.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}}))):n.isForRowList()&&(e.positions&&!(0,I.default)(e.positions,"LIST")||r(n.addButton(i(i({},e),{},{section:e.listSection||"METADATA_STATE",onClick:function(t){var r=(0,v.default)(n.getThreadRowViewDrivers()).filter(function(e){return e.isSelected()});e.onClick({position:"LIST",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:r})}}))))});if(t.onValue(function(){n.unsubscribe()}),!e.positions||(0,I.default)(e.positions,"ROW")){var o=function(r){r.addButton(E.default.constant({hasDropdown:e.hasDropdown,iconClass:e.iconClass,iconUrl:e.iconUrl,orderHint:e.orderHint,onClick:function(t){e.onClick&&e.onClick({position:"ROW",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[r]})}}).merge(t))};this._currentRouteViewDriver&&this._currentRouteViewDriver.getRowListViews().forEach(function(e){e.getThreadRowViewDrivers().forEach(o)});var a=this._threadRowViewDriverKefirStream.observe({value:o});t.onValue(function(){a.unsubscribe()})}return function(){t.destroy()}}},{key:"hashChangeNoViewChange",value:function(e){if("#"!==e[0])throw new Error("bad hash");window.history.replaceState(null,null,e);var t=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+"#inboxsdk-fake-no-vc",newURL:document.location.href.replace(/#.*$/,"")+e});window.dispatchEvent(t)}},{key:"addCustomRouteID",value:function(e){var t=this;return this._customRouteIDs.add(e),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),function(){t._customRouteIDs.delete(e)}}},{key:"addCustomListRouteID",value:function(e,t){var r=this;return this._customListRouteIDs.set(e,t),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),function(){r._customListRouteIDs.delete(e)}}},{key:"signalCustomThreadListActivity",value:function(e){this._lastCustomThreadListActivity={customRouteID:e,timestamp:new Date}}},{key:"getLastCustomThreadListActivity",value:function(){return this._lastCustomThreadListActivity}},{key:"showCustomThreadList",value:function(e,t,r){(0,te.default)(this,e,t,r)}},{key:"showCustomRouteView",value:function(e){(0,re.default)(this,e)}},{key:"showNativeRouteView",value:function(){(0,ne.default)(this)}},{key:"createLink",value:function(e,t){return(0,me.default)(this._gmailRouteProcessor,e,t)}},{key:"goto",value:function(e,t){return(0,ee.default)(this,e,t)}},{key:"resolveUrlRedirects",value:function(e){return this._pageCommunicatorPromise.then(function(t){return t.resolveUrlRedirects(e)})}},{key:"registerSearchSuggestionsProvider",value:function(e){(0,oe.default)(this,e)}},{key:"registerSearchQueryRewriter",value:function(e){(0,he.default)(this._pageCommunicator,e)}},{key:"addToolbarButtonForApp",value:function(e){return(0,de.default)(this,e)}},{key:"openNewComposeViewDriver",value:function(){function e(){return t.apply(this,arguments)}var t=(0,_.default)(p.default.mark(function e(){var t,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.getNextComposeViewDriver(),e.next=4,(0,be.default)(this);case 4:return e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),this._logger.error(e.t0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])}));return e}()},{key:"getNextComposeViewDriver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return this._composeViewDriverStream.merge(E.default.later(e,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(function(){return new Error("Driver was shut down before a new compose was found")}).flatMap(function(e){return e instanceof Error?E.default.constantError(e):E.default.constant(e)}).take(1).takeErrors(1).toPromise()}},{key:"openDraftByMessageID",value:function(e){return(0,F.default)(this,e)}},{key:"createModalViewDriver",value:function(e){return new V.default(e)}},{key:"createMoleViewDriver",value:function(e){return new N.default(this,e)}},{key:"createDrawerViewDriver",value:function(e){return new B.default(e)}},{key:"createBackdrop",value:function(e,t){return new O.default(e,t)}},{key:"addNavItem",value:function(e,t){return(0,Z.default)(this,e,t)}},{key:"addSupportItem",value:function(e){return(0,X.default)(this,e)}},{key:"getSentMailNativeNavItem",value:function(){var e=this,t=(0,pe.default)(this,"sent");return t.catch(function(t){return e._logger.error(t)}),t}},{key:"setShowNativeNavMarker",value:function(e){this._navMarkerHiddenChanged.emit(null);var t=M.default.getLeftNavContainerElement();t&&(e?t.classList.remove("inboxsdk__hide_native_marker"):(t.classList.add("inboxsdk__hide_native_marker"),this._stopper.takeUntilBy(this._navMarkerHiddenChanged).onValue(function(){t.classList.remove("inboxsdk__hide_native_marker")})))}},{key:"setShowNativeAddonSidebar",value:function(e){this._addonSidebarHiddenChanged.emit(null);var t=M.default.getAddonSidebarContainerElement(),r=M.default.getMainContentBodyContainerElement();if(t&&r){var n=r.parentElement;if(!n)return;e?n.classList.remove("inboxsdk__hide_addon_container"):(n.classList.add("inboxsdk__hide_addon_container"),this._stopper.takeUntilBy(this._addonSidebarHiddenChanged).onValue(function(){n.classList.remove("inboxsdk__hide_addon_container")}))}}},{key:"getGmailActionToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,_.default)(p.default.mark(function e(){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._pageCommunicator.getActionTokenValue());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getUserEmailAddress",value:function(){return this._pageCommunicator.getUserEmailAddress()}},{key:"isConversationViewDisabled",value:function(){return this._pageCommunicator.isConversationViewDisabled()}},{key:"getUserLanguage",value:function(){return this._pageCommunicator.getUserLanguage()}},{key:"getUserContact",value:function(){return{emailAddress:this.getUserEmailAddress(),name:this._userInfo.getUserName()}}},{key:"getAccountSwitcherContactList",value:function(){return this._userInfo.getAccountSwitcherContactList()}},{key:"activateShortcut",value:function(e,t,r){var n=this;this.getKeyboardShortcutHelpModifier().set(e,this._appId,t,r),e.once("destroy",function(){n.getKeyboardShortcutHelpModifier().delete(e)})}},{key:"_setupEventStreams",value:function(){var e=this,t=(0,R.default)();this._xhrInterceptorStream=t.xhrInterceptStream.takeUntilBy(this._stopper),this._pageCommunicatorPromise=t.pageCommunicatorPromise,this.onready=this._pageCommunicatorPromise.then(function(t){e._timestampGlobalsFound=(0,b.default)(),e._pageCommunicator=t,e._logger.setUserEmailAddress(e.getUserEmailAddress()),e._logger.setIsUsingSyncAPI(t.isUsingSyncAPI()),e._userInfo=new H.default(e),e._timestampAccountSwitcherReady=(0,b.default)(),e._routeViewDriverStream=(0,fe.default)(e._gmailRouteProcessor,e).takeUntilBy(e._stopper).toProperty(),e._routeViewDriverStream.onValue(function(t){e._currentRouteViewDriver=t}),e._rowListViewDriverStream=e._setupRouteSubViewDriver("newGmailRowListView").takeUntilBy(e._stopper),e._setupThreadRowViewDriverKefirStream(),e._threadViewDriverLiveSet=(0,je.default)(e._setupRouteSubViewDriver("newGmailThreadView").takeUntilBy(e._stopper).flatMap(function(e){return e.getReadyStream().map(function(){return e})}).map(function(e){return{el:e,removalStream:e.getStopper()}})),e._setupToolbarViewDriverStream(),e._setupMessageViewDriverStream(),e._setupComposeViewDriverStream(),e._threadRowIdentifier=new le.default(e),e._timestampOnready=(0,b.default)()})}},{key:"_setupComposeViewDriverStream",value:function(){this._composeViewDriverStream=(0,ie.default)(this,this._messageViewDriverStream,this._xhrInterceptorStream).takeUntilBy(this._stopper)}},{key:"_setupRouteSubViewDriver",value:function(e){return this._routeViewDriverStream.flatMap(function(t){return t.getEventStream().filter(function(t){return t.eventName===e}).map(function(e){return e.view})})}},{key:"_setupThreadRowViewDriverKefirStream",value:function(){this._threadRowViewDriverKefirStream=this._rowListViewDriverStream.flatMap(function(e){return e.getRowViewDriverStream()}).takeUntilBy(this._stopper)}},{key:"_setupToolbarViewDriverStream",value:function(){this._toolbarViewDriverLiveSet=(0,je.default)(E.default.merge([this._rowListViewDriverStream.map(function(e){return e.getToolbarView()}),this.getThreadViewDriverStream().map(function(e){return e.getToolbarView()})]).filter(Boolean).flatMap(function(e){return e.waitForReady()}).map(function(e){return{el:e,removalStream:e.getStopper()}}).takeUntilBy(this._stopper)),this._toolbarViewDriverLiveSet.subscribe({})}},{key:"_setupMessageViewDriverStream",value:function(){this._messageViewDriverStream=this.getThreadViewDriverStream().flatMap(function(e){return e.getMessageViewDriverStream()}).takeUntilBy(this._stopper)}},{key:"addGlobalSidebarContentPanel",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,_.default)(p.default.mark(function e(t){var r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.waitForGlobalSidebarReady().merge(this._stopper.flatMap(function(){return E.default.constantError(new Error("Driver instance was destroyed early"))})).take(1).takeErrors(1).toPromise();case 2:return r=this.getGlobalSidebar(),e.abrupt("return",r.addGlobalSidebarContentPanel(t));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"waitForGlobalSidebarReady",value:function(){var e=function(){return M.default.getCompanionSidebarContentContainerElement()&&(M.default.getCompanionSidebarIconContainerElement()||M.default.getAddonSidebarContainerElement())};return e()?E.default.constant(void 0):(0,ke.default)(e).map(function(){})}},{key:"getGlobalSidebar",value:function(){var e=this._appSidebarView;if(!e){var t=M.default.getCompanionSidebarContentContainerElement();if(!t)throw new Error("did not find companionSidebarContentContainerEl");e=this._appSidebarView=new ve.default(this,t)}return e}},{key:"isRunningInPageContext",value:function(){return!(!n.GLOBALS||!n._GM_main)}},{key:"isUsingSyncAPI",value:function(){return this._pageCommunicator.isUsingSyncAPI()}},{key:"showAppIdWarning",value:function(){(0,T.default)(this)}},{key:"createTopMessageBarDriver",value:function(e){return new L.default(e)}},{key:"associateThreadAndMessageIDs",value:function(e,t){this._messageIDsToThreadIDs.set(t,e)}},{key:"getThreadIDForMessageID",value:function(e){return(0,A.default)(this._messageIDsToThreadIDs,e)}},{key:"getDraftIDForMessageID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,Q.default)(this,e,t)}},{key:"reportRecentSyncDraftId",value:function(e){var t=this._recentSyncDraftIds.get(e),r=(null!==t&&void 0!==t?t:0)+1;this._recentSyncDraftIds.set(e,r)}},{key:"reportDraftClosed",value:function(e){var t=this;E.default.later(3e4).takeUntilBy(this._stopper).onValue(function(){var r,n=t._recentSyncDraftIds.get(e);null==n||n<1?(r=0,t._logger.error(new Error("_recentSyncDraftIds count had unexpected value"),{count:n})):r=n-1,0===r?t._recentSyncDraftIds.delete(e):t._recentSyncDraftIds.set(e,r)})}},{key:"isRecentSyncDraftId",value:function(e){return this._recentSyncDraftIds.has(e)}},{key:"getSelectedThreadRowViewDrivers",value:function(){return this._currentRouteViewDriver?x.default.toArray(this._currentRouteViewDriver.getRowListViews(),this._selectedThreadRows):[]}},{key:"signalThreadRowViewSelectionChange",value:function(){this._threadRowViewSelectionChanges.value(void 0)}},{key:"registerThreadRowViewSelectionHandler",value:function(e){var t=this;return this._threadRowViewSelectionChanges.onValue(e),function(){t._threadRowViewSelectionChanges.offValue(e)}}}]),e}()),Ee=(0,k.defn)(t,xe);r.default=Ee}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/get-or-fail":642,"../../driver-common/getGmailMessageIdForSyncMessageId":831,"../../driver-common/getGmailThreadIdForRfcMessageId":832,"../../lib/stream-wait-for":901,"../../lib/toItemWithLifetimeStream":902,"../../lib/toLiveSet":903,"../../lib/wait-for":904,"../inbox/views/inbox-drawer-view":817,"./custom-style":660,"./gmail-butter-bar-driver":661,"./gmail-driver/add-nav-item":663,"./gmail-driver/add-support-item":664,"./gmail-driver/add-toolbar-button-for-app":665,"./gmail-driver/create-link":666,"./gmail-driver/get-draft-id-for-message-id":668,"./gmail-driver/get-native-nav-item":669,"./gmail-driver/get-rfc-message-id-for-gmail-thread-id":671,"./gmail-driver/getSyncThreadForOldGmailThreadId":673,"./gmail-driver/getSyncThreadFromSyncThreadId":674,"./gmail-driver/gmail-load-event":675,"./gmail-driver/goto-view":676,"./gmail-driver/keyboard-shortcut-help-modifier":678,"./gmail-driver/open-compose-window":679,"./gmail-driver/open-draft-by-message-id":680,"./gmail-driver/override-gmail-back-button":681,"./gmail-driver/register-search-query-rewriter":682,"./gmail-driver/register-search-suggestions-provider":683,"./gmail-driver/setup-compose-view-driver-stream":684,"./gmail-driver/setup-route-view-driver-stream":685,"./gmail-driver/show-app-id-warning":686,"./gmail-driver/show-custom-route-view":687,"./gmail-driver/show-custom-thread-list":688,"./gmail-driver/show-native-route-view":689,"./gmail-driver/suppressAddon":690,"./gmail-driver/temporary-track-download-url-validity":691,"./gmail-driver/thread-row-identifier":692,"./gmail-driver/track-events":693,"./gmail-driver/track-gmail-styles":694,"./gmail-driver/user-info":695,"./gmail-element-getter":696,"./make-xhr-interceptor":702,"./makePageParserTree":703,"./views/gmail-app-sidebar-view":705,"./views/gmail-backdrop":714,"./views/gmail-nav-item-view":749,"./views/gmail-route-view/gmail-route-processor":750,"./views/gmail-thread-row-view":754,"./widgets/gmail-modal-view-driver":772,"./widgets/gmail-mole-view-driver":773,"./widgets/gmail-top-message-bar-driver":775,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,asap:83,bimapcache:100,kefir:327,"kefir-bus":324,
"kefir-stopper":326,"live-set/toValueObservable":335,"lodash/includes":493,"transducers.js":623,ud:625}],663:[function(e,t,r){"use strict";function n(e,t,r){return o.apply(this,arguments)}function o(){return o=(0,f.default)(d.default.mark(function e(t,r,n){var o,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:if(o=new m.default(t,r,1),o.setNavItemDescriptor(n),!p.default.isStandalone())try{a=i(o),a(),o.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(a)}catch(e){h.default.error(e)}return e.abrupt("return",o);case 6:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function i(e){return p.default.shouldAddNavItemsInline()?function(){(0,v.default)(a(),e.getElement())}:function(){var t=p.default.getSeparateSectionNavItemMenuInjectionContainer();if(!t)throw new Error("should not happen");(0,c.default)(document.querySelectorAll(".Xa.wT:not([data-group-order-hint])")).slice(1).forEach(function(e){e.dataset.groupOrderHint="zz_gmail"}),(0,v.default)(t,e.getElement())}}function a(){var e=document.querySelector(".inboxsdk__navMenu");return e?(0,g.default)(e,".TK"):s()}function s(){var e=document.createElement("div");e.setAttribute("class","LrBjie inboxsdk__navMenu"),e.innerHTML='<div class="TK"></div>';var t=p.default.getSameSectionNavItemMenuInjectionContainer();if(!t)throw new Error("should not happen");return t.insertBefore(e,t.children[2]),(0,_.default)(e,{attributes:!0,attributeFilter:["class"]}).onValue(function(){e.classList.contains("TA")&&e.classList.remove("TA")}),(0,g.default)(e,".TK")}var l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.default=n,r.waitForNavMenuReady=void 0;var c=u(e("@babel/runtime-corejs2/core-js/array/from")),d=u(e("@babel/runtime-corejs2/regenerator")),f=u(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),p=u(e("../gmail-element-getter")),m=u(e("../views/gmail-nav-item-view")),h=u(e("../../../lib/logger")),b=u(e("../../../lib/wait-for")),v=u(e("../../../lib/dom/insert-element-in-order")),_=u(e("../../../lib/dom/make-mutation-observer-stream")),g=u(e("../../../lib/dom/querySelectorOrFail")),y=u(e("lodash/once")),w=(0,y.default)((0,f.default)(d.default.mark(function e(){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.default.isStandalone()){e.next=7;break}return e.next=3,p.default.waitForGmailModeToSettle();case 3:return e.next=5,(0,b.default)(function(){return document.querySelector(".aeN[role=navigation], .aeN [role=navigation]")});case 5:return e.next=7,(0,b.default)(function(){return document.querySelector(".Ls77Lb.aZ6 > .pp")});case 7:case"end":return e.stop()}},e)})));r.waitForNavMenuReady=w},{"../../../lib/dom/insert-element-in-order":856,"../../../lib/dom/make-mutation-observer-stream":863,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/logger":891,"../../../lib/wait-for":904,"../gmail-element-getter":696,"../views/gmail-nav-item-view":749,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,"lodash/once":516}],664:[function(e,t,r){"use strict";function n(e,t){return new a.default(e,t)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../views/gmail-support-item-view"))},{"../views/gmail-support-item-view":753,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],665:[function(e,t,r){"use strict";function n(e,t){return s.default.waitForGmailModeToSettle().then(function(){return s.default.isStandalone()?new a.default(function(e,t){}):new l.default(e,t)})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/promise")),s=i(e("../gmail-element-getter")),l=i(e("../views/gmail-app-toolbar-button-view"))},{"../gmail-element-getter":696,"../views/gmail-app-toolbar-button-view":710,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],666:[function(e,t,r){"use strict";function n(e,t,r){if(r="string"==typeof r?r:r?(0,a.default)({},r):{},t=e.getCompatibleRouteID(t),"string"==typeof r){var n=t.match(/:/g);if(n&&1===n.length){var o=r;r={},r[t.match(/:(\w+)($|\/)?/)[1]]=o}else r={}}t.match(/:page(?:\/|$)/)&&!r.page&&(r.page=0);var i,c=t.split("/");try{i=(0,l.default)(t,r)}catch(e){u.default.error(e,{routeID:t,paramsKey:(0,s.default)(r)}),i=c.map(function(e){if(-1===e.indexOf(":"))return e;var t=e.split(":");return r&&void 0!==r[t[1]]?t[0]+r[t[1]]:t[0]}).map(encodeURIComponent).join("/")}return e.isListRouteName(c[0])&&i.indexOf("p0")===i.length-2&&(i=i.substring(0,i.length-3)),"#"+i}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/object/assign")),s=i(e("@babel/runtime-corejs2/core-js/object/keys")),l=i(e("../../../lib/populateRouteID")),u=i(e("../../../lib/logger"))},{"../../../lib/logger":891,"../../../lib/populateRouteID":894,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],667:[function(e,t,r){(function(t){(function(){"use strict";function n(e,r){var n="".concat(e.replace(/^thread-/,""),"+").concat(r),s=t.from(n).toString("base64").replace(/=/g,"");return(0,o.convertBase)(s,i,a)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=e("@macil/simple-base-converter"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a="BCDFGHJKLMNPQRSTVWXZbcdfghjklmnpqrstvwxz"}).call(this)}).call(this,e("buffer").Buffer)},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@macil/simple-base-converter":81,buffer:101}],668:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,u.default)(l.default.mark(function e(t,r){var n,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.default)({method:"GET",url:document.location.origin+document.location.pathname,data:{ui:"2",ik:t.getPageCommunicator().getIkValue(),view:"cv",th:r,prf:"1",nsc:"1",mb:"0",rt:"j",search:"drafts"}});case 2:return n=e.sent,e.prev=3,o=(0,p.readDraftId)(n.text,r),i={responseText:n.text},e.abrupt("return",{draftID:o,debugData:i});case 9:throw e.prev=9,e.t0=e.catch(3),(0,m.default)(t.getAppId())&&t.getLogger().error(e.t0,{message:"failed to read draft ID",messageID:r,text:n.text}),e.t0;case 13:case"end":return e.stop()}},e,null,[[3,9]])})),o.apply(this,arguments)}function i(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?n(e,t):h(e,t)}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/regenerator")),u=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=s(e("lodash/memoize")),d=e("ud"),f=s(e("../../../driver-common/gmailAjax")),p=e("../gmail-response-processor"),m=s(e("../../../lib/isStreakAppId")),h=(0,c.default)(n,function(e,t){return t}),b=(0,d.defn)(t,i);r.default=b},{"../../../driver-common/gmailAjax":836,"../../../lib/isStreakAppId":890,"../gmail-response-processor":700,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,"lodash/memoize":513,ud:625}],669:[function(e,t,r){"use strict";function n(e,t){return(0,c.default)(function(){var e=l.default.getLeftNavContainerElement();return e?e.querySelector('.aim a[href*="#'.concat(t,'"]')):null},3e5).then(function(r){var n=(0,u.default)(r,function(e){return e.classList.contains("aim")});if(!n)throw new Error("native nav item structured weird");return n.__nativeGmailNavItemView||(n.__nativeGmailNavItemView=new s.default(e,n,t)),n.__nativeGmailNavItemView}).catch(function(e){if(l.default.isStandalone())return new a.default(function(e,t){});throw e})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/promise")),s=i(e("../views/native-gmail-nav-item-view")),l=i(e("../gmail-element-getter")),u=i(e("../../../../common/find-parent")),c=i(e("../../../lib/wait-for"))},{"../../../../common/find-parent":640,"../../../lib/wait-for":904,"../gmail-element-getter":696,"../views/native-gmail-nav-item-view":760,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],670:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){var n,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.default)(t,{oldGmailMessageID:r});case 2:if(n=e.sent,o=n.match(/^Message-ID:\s+(\S+)\s*$/im)){e.next=6;break}throw new Error("Failed to find rfc id for gmail thread id. Message may not exist in user's account.");case 6:return e.abrupt("return",(0,c.default)(o[1]));case 7:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=a(e("../../../driver-common/getOriginalMessagePage")),c=a(e("../../../../common/html-to-text"))},{"../../../../common/html-to-text":645,"../../../driver-common/getOriginalMessagePage":833,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59}],671:[function(e,t,r){"use strict";function n(e){if("function"!=typeof s)return null;var t=new s,r=new s;return(n=function(e){return e?r:t})(e)}function o(e,t){return i.apply(this,arguments)}function i(){return i=(0,p.default)(d.default.mark(function e(t,r){var n,o,i,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ui:2,ik:t.getPageCommunicator().getIkValue(),view:"cv",th:r,nsc:1,mb:0,rt:"j",search:"all"},e.next=3,(0,m.default)({method:"POST",url:document.location.origin+document.location.pathname+"?"+h.default.stringify(n),canRetry:!0});case 3:if(o=e.sent,i=b.extractMessageIdsFromThreadBatchRequest(o.text),1===(0,f.default)(i).length){e.next=7;break}throw new Error("Expected to find 1 thread/message ID pair, but got ".concat((0,f.default)(i).length));case 7:if(a=i[r]){e.next=10;break}throw new Error("Could not find a message ID for given thread ID");case 10:return e.abrupt("return",(0,v.default)(t,a));case 11:case"end":return e.stop()}},e)})),i.apply(this,arguments)}var a=e("@babel/runtime-corejs2/helpers/typeof"),s=e("@babel/runtime-corejs2/core-js/weak-map"),l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),c=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.default=o;var d=c(e("@babel/runtime-corejs2/regenerator")),f=c(e("@babel/runtime-corejs2/core-js/object/keys")),p=c(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),m=c(e("../../../driver-common/gmailAjax")),h=c(e("querystring")),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=l&&u;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?u(e,s):null;c&&(c.get||c.set)?l(o,s,c):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(e("../gmail-response-processor")),v=c(e("./get-rfc-message-id-for-gmail-message-id"))},{"../../../driver-common/gmailAjax":836,"../gmail-response-processor":700,"./get-rfc-message-id-for-gmail-message-id":670,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,querystring:579}],672:[function(e,t,r){"use strict";function n(e){var t=e.match(/#([^?]*)(?:\?(.*))?/);if(!t)return{name:"inbox",params:[],hash:"",query:void 0};var r=t[1],n=r.split("/");return{name:decodeURIComponent(n[0]),params:n.slice(1).map(function(e){return e.replace(/\+/g," ")}).map(decodeURIComponent),query:t[2],hash:r}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],673:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){var n,o,i,a,l,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)(t,"threadid:"+new u.default(r,16).toString(10));case 2:if(n=e.sent,o=n.threads,i=n._text,null!=(a=o[0])){e.next=12;break}throw console.error("Thread with ID ".concat(r," not found by Gmail")),l=(0,d.default)(t.getAppId()),f=new Error("Thread not found by getSyncThreadForOldGmailThreadId"),t.getLogger().error(f,{oldGmailThreadId:l?r:null,responseText:l?i:null}),f;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=(e("ud"),a(e("bignumber.js"))),c=a(e("../../../driver-common/getSyncThreadsForSearch")),d=(a(e("../../../driver-common/gmailAjax")),a(e("../../../lib/isStreakAppId")));e("../gmail-sync-response-processor")},{"../../../driver-common/getSyncThreadsForSearch":834,"../../../driver-common/gmailAjax":836,"../../../lib/isStreakAppId":890,"../gmail-sync-response-processor":701,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,"bignumber.js":99,ud:625}],674:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,p.default)(u.default.mark(function e(t,r){var n,o,a,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.all([t.getPageCommunicator().getBtaiHeader(),t.getPageCommunicator().getXsrfToken()]);case 2:return n=e.sent,o=(0,f.default)(n,2),a=o[0],s=o[1],e.abrupt("return",i(r,a,s));case 7:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function i(e,t,r){return a.apply(this,arguments)}function a(){return a=(0,p.default)(u.default.mark(function e(t,r,n){var o,i,a,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.default)({method:"POST",url:"https://mail.google.com/sync".concat((0,b.default)(),"/i/fd"),headers:{"Content-Type":"application/json","X-Framework-Xsrf-Token":n,"X-Gmail-BTAI":r,"X-Google-BTD":"1"},data:(0,d.default)({1:[{1:t,2:1}]})});case 2:if(o=e.sent,i=o.text,a=(0,h.extractThreadsFromThreadResponse)(i),!(a.length>0)){e.next=9;break}if(s=a[0],!s.oldGmailThreadID){e.next=9;break}return e.abrupt("return",s);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e)})),a.apply(this,arguments)}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=n,r.getThreadFromSyncThreadIdUsingHeaders=i;var u=l(e("@babel/runtime-corejs2/regenerator")),c=l(e("@babel/runtime-corejs2/core-js/promise")),d=l(e("@babel/runtime-corejs2/core-js/json/stringify")),f=l(e("@babel/runtime-corejs2/helpers/slicedToArray")),p=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),m=(e("ud"),l(e("../../../driver-common/gmailAjax"))),h=e("../gmail-sync-response-processor"),b=l(e("../../../driver-common/getAccountUrlPart"))},{"../../../driver-common/getAccountUrlPart":830,"../../../driver-common/gmailAjax":836,"../gmail-sync-response-processor":701,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"@babel/runtime-corejs2/regenerator":59,ud:625}],675:[function(e,t,r){(function(t){(function(){"use strict";function n(e){return o.apply(this,arguments)}function o(){return o=(0,u.default)(s.default.mark(function e(r){var n,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.getPageCommunicator(),e.next=3,n.isConversationViewDisabled();case 3:return o=e.sent,e.next=6,(0,d.waitForNavMenuReady)();case 6:r.getLogger().eventSite("gmailSettings",{isGmailIntegratedView:(0,c.default)(),screenWidth:window.screen&&window.screen.width,screenHeight:window.screen&&window.screen.height,windowWidth:window.innerWidth,windowHeight:window.innerHeight,language:n.getUserLanguage(),isUsingSyncAPI:n.isUsingSyncAPI(),previewPane:n.getUserOriginalPreviewPaneMode(),isConversationViewDisabled:o,wasAccountSwitcherReadyAtStart:r.getEnvData().wasAccountSwitcherReadyAtStart,timings:(0,l.default)({responseStart:t.performance&&t.performance.timing.responseStart,responseEnd:t.performance&&t.performance.timing.responseEnd,domLoading:t.performance&&t.performance.timing.domLoading,domInteractive:t.performance&&t.performance.timing.domInteractive,domComplete:t.performance&&t.performance.timing.domComplete,domContentLoadedEventStart:t.performance&&t.performance.timing.domContentLoadedEventStart,domContentLoadedEventEnd:t.performance&&t.performance.timing.domContentLoadedEventEnd,domainLookupEnd:t.performance&&t.performance.timing.domainLookupEnd,domainLookupStart:t.performance&&t.performance.timing.domainLookupStart,fetchStart:t.performance&&t.performance.timing.fetchStart,loadEventStart:t.performance&&t.performance.timing.loadEventStart,loadEventEnd:t.performance&&t.performance.timing.loadEventEnd,navigationStart:t.performance&&t.performance.timing.navigationStart,requestStart:t.performance&&t.performance.timing.requestStart},r.getTimings())});case 7:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/core-js/object/assign")),u=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=(a(e("../gmail-element-getter")),a(e("./isIntegratedViewGmail"))),d=e("./add-nav-item")}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../gmail-element-getter":696,"./add-nav-item":663,"./isIntegratedViewGmail":677,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59}],676:[function(e,t,r){"use strict";function n(e){if("function"!=typeof p)return null;var t=new p,r=new p;return(n=function(e){return e?r:t})(e)}function o(e,t){var r=s(e);if(l){var n=l(e);t&&(n=n.filter(function(t){return u(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,v.default)(e,t,r[t])}):c?d(e,c(r)):o(Object(r)).forEach(function(t){f(e,t,u(r,t))})}return e}var a=e("@babel/runtime-corejs2/helpers/typeof"),s=e("@babel/runtime-corejs2/core-js/object/keys"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),d=e("@babel/runtime-corejs2/core-js/object/define-properties"),f=e("@babel/runtime-corejs2/core-js/object/define-property"),p=e("@babel/runtime-corejs2/core-js/weak-map"),m=e("@babel/runtime-corejs2/helpers/interopRequireDefault");f(r,"__esModule",{value:!0}),r.default=void 0;var h=m(e("@babel/runtime-corejs2/regenerator")),b=m(e("@babel/runtime-corejs2/core-js/parse-int")),v=m(e("@babel/runtime-corejs2/helpers/defineProperty")),_=m(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),g=m(e("lodash/includes")),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=f&&u;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=i?u(e,s):null;l&&(l.get||l.set)?f(o,s,l):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(e("ud")),w=e("../../../constants/router"),j=e("../../../lib/dom/simulate-mouse-event"),k=(m(e("./get-url-object")),y.defn(t,function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,_.default)(h.default.mark(function e(t,r,n){var o,a,s,l,u,c;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("#"!==r[0]){e.next=4;break}if(!n){e.next=3;break}throw new Error("params parameter can't be passed with resolved URL");case 3:r=r.slice(1);case 4:if(!(0,g.default)(w.NATIVE_ROUTE_IDS,r)){e.next=24;break}if(!t.isUsingSyncAPI()){e.next=15;break}if(!n||"string"==typeof n){e.next=15;break}if(!(o=n.threadID)||"string"!=typeof o){e.next=15;break}if(a=(0,b.default)(o,16),isNaN(a)){e.next=15;break}return e.next=13,t.getSyncThreadIdForOldGmailThreadId(o);case 13:s=e.sent,n=i(i({},n),{},{threadID:"#"+s});case 15:l=t.createLink(r,n),u=document.createElement("a"),u.style.display="none",u.href=l,document.body.appendChild(u),(0,j.simulateClick)(u),u.remove(),e.next=26;break;case 24:c=t.createLink(r,n),window.location.hash=c;case 26:case"end":return e.stop()}},e)}));return e}())),x=k;r.default=x},{"../../../constants/router":658,"../../../lib/dom/simulate-mouse-event":874,"./get-url-object":672,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,"lodash/includes":493,ud:625}],677:[function(e,t,r){"use strict";function n(){var e,t=document.querySelector("div[role=navigation]");return Boolean(null===t||void 0===t?void 0:null===(e=t.firstElementChild)||void 0===e?void 0:e.classList.contains("Xa"))}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],678:[function(e,t,r){"use strict";function n(e){if("function"!=typeof l)return null;var t=new l,r=new l;return(n=function(e){return e?r:t})(e)}function o(e){for(var t=[],r=e.split(/[\s+]/g),n=e.match(/[\s+]/g),o=0;o<r.length;o++)t.push('<span class="wh">'+(0,b.default)(i(r[o]))+"</span>"),n&&n[o]&&t.push(a(n[o]));return t.push(" :"),t.join("")}function i(e){switch(e.toLowerCase()){case"shift":return"<Shift>";case"ctrl":return"<Ctrl>";case"alt":return"<Alt>";case"meta":case"command":return"<⌘>";case"mod":return/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"<⌘>":"<Ctrl>";default:return e}}function a(e){switch(e){case" ":return'<span class="wb">then</span> ';case"+":return' <span class="wb">+</span> ';default:return""}}var s=e("@babel/runtime-corejs2/helpers/typeof"),l=e("@babel/runtime-corejs2/core-js/weak-map"),u=e("@babel/runtime-corejs2/core-js/object/define-property"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");u(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/core-js/set")),p=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=d(e("@babel/runtime-corejs2/helpers/createClass")),h=d(e("@babel/runtime-corejs2/helpers/defineProperty")),b=d(e("lodash/escape")),v=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=u&&c;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?c(e,a):null;l&&(l.get||l.set)?u(o,a,l):o[a]=e[a]}o.default=e,r&&r.set(e,o)}(e("kefir")),d(e("kefir-stopper"))),_=d(e("../../../lib/dom/make-element-child-stream")),g=d(e("../../../lib/dom/querySelectorOrFail")),y=d(e("../../../lib/dom/make-mutation-observer-chunked-stream")),w=function(){function e(){(0,p.default)(this,e),(0,h.default)(this,"_appId",void 0),(0,h.default)(this,"_appName",void 0),(0,h.default)(this,"_appIconUrl",void 0),(0,h.default)(this,"_stopper",void 0),(0,h.default)(this,"_shortcuts",void 0),this._appId=null,this._appName=null,this._appIconUrl=null,this._stopper=(0,v.default)(),this._shortcuts=new f.default,this._monitorKeyboardHelp()}return(0,m.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._shortcuts.clear()}},{key:"set",value:function(e,t,r,n){this._initializeAppValues(t,r,n),this._shortcuts.add(e)}},{key:"delete",value:function(e){this._shortcuts.delete(e)}},{key:"_initializeAppValues",value:function(e,t,r){this._appId||(this._appId=e),this._appName||(this._appName=t),this._appIconUrl||(this._appIconUrl=r)}},{key:"_monitorKeyboardHelp",value:function(){var e=this;(0,_.default)(document.body).map(function(e){return e.el}).filter(function(e){return e&&e.classList&&e.classList.contains("wa")}).flatMap(function(e){return(0,y.default)(e,{attributes:!0,attributeFilter:["class"]}).filter(function(){return!e.classList.contains("aou")}).toProperty(function(){return null}).map(function(){return e})}).takeUntilBy(this._stopper).onValue(function(t){return e._renderHelp(t)})}},{key:"_renderHelp",value:function(e){var t=this;if(0!==this._shortcuts.size){var r=(this._shortcuts.keys(),this._renderHeader()),n=this._renderTable(),o=n.querySelectorAll("tbody tbody"),i=0;this._shortcuts.forEach(function(e){t._renderShortcut(o[i%2],e),i++});var a=(0,g.default)(e,".aov"),s=a.parentElement;if(!s)throw new Error("Could not find parent");s.insertBefore(r,a),s.insertBefore(n,a)}}},{key:"_renderHeader",value:function(){var e=document.createElement("div");if(e.setAttribute("class","aov  aox"),e.innerHTML=['<div class="aow">','<span class="inboxsdk__shortcutHelp_title">',(0,b.default)(this._appName||this._appId)+" keyboard shortcuts","</span>","</div>"].join(""),this._appIconUrl){var t=document.createElement("img");this._appIconUrl&&(t.src=this._appIconUrl),t.setAttribute("class","inboxsdk__icon");var r=(0,g.default)(e,".inboxsdk__shortcutHelp_title");r.insertBefore(t,r.firstChild)}return e}},{key:"_renderTable",value:function(){var e=document.createElement("table");return e.setAttribute("cellpadding","0"),e.setAttribute("class","cf wd inboxsdk__shortcutHelp_table"),e.innerHTML=["<tbody>","<tr>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>",'<td class="Dn">','<table cellpadding="0" class="cf">',"<tbody>","<tr><th>&nbsp;</th><th>&nbsp;</th></tr>","</tbody>","</table>","</td>","</tr","</tbody>"].join(""),e}},{key:"_renderShortcut",value:function(e,t){var r=document.createElement("tr");r.innerHTML=['<td class="wg Dn"> ',o(t.chord),"</td>",'<td class="we Dn"> ',(0,b.default)(t.description||""),"</td>"].join(""),e.appendChild(r)}}]),e}();r.default=w},{"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-stopper":326,"lodash/escape":482}],679:[function(e,t,r){"use strict";function n(e){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.waitForGmailModeToSettle();case 2:if(!c.default.isStandaloneComposeWindow()&&!c.default.isStandaloneThreadWindow()){e.next=4;break}throw new Error("Can not open new compose while in standalone window");case 4:if(c.default.getComposeButton()){e.next=7;break}return e.next=7,(0,d.default)(function(){return!!c.default.getComposeButton()});case 7:if(r=c.default.getComposeButton()){e.next=10;break}throw new Error("Could not find compose button");case 10:(0,u.simulateClick)(r);case 11:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("../../../lib/dom/simulate-mouse-event"),c=a(e("../gmail-element-getter")),d=a(e("../../../lib/wait-for"))},{"../../../lib/dom/simulate-mouse-event":874,"../../../lib/wait-for":904,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59}],680:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,d.default)(u.default.mark(function e(t,r){var n,o,s,l,c,d,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUsingSyncAPI()){e.next=18;break}return e.next=3,(0,h.default)(t,r);case 3:return o=e.sent,e.next=6,(0,p.default)(t,"rfc822msgid:"+o);case 6:if(s=e.sent,l=s.threads,0!==l.length){e.next=10;break}throw new Error("Failed to get sync message id");case 10:if(c=l[0],d=c.extraMetaData.syncMessageData.find(function(e){return e.oldMessageID===r})){e.next=14;break}
throw new Error("Failed to find syncMessageData");case 14:f=d.syncMessageID,n=a(window.location.hash,c.syncThreadID,f),e.next=19;break;case 18:n=i(window.location.hash,r);case 19:window.location.hash=n;case 20:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function i(e,t){e="#"+e.replace(/^#/,"");var r=e.split("?"),n=(0,c.default)(r,2),o=n[0],i=n[1],a=f.default.parse(i);return a.compose?a.compose+=","+t:a.compose=t,o+"?"+f.default.stringify(a)}function a(e,t,r){e="#"+e.replace(/^#/,"");var n=e.split("?"),o=(0,c.default)(n,2),i=o[0],a=o[1],s=f.default.parse(a);return s.compose=(0,m.default)(t,r),i+"?"+f.default.stringify(s)}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=n,r.makeNewHash=i,r.makeNewSyncHash=a;var u=l(e("@babel/runtime-corejs2/regenerator")),c=l(e("@babel/runtime-corejs2/helpers/slicedToArray")),d=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),f=l(e("querystring")),p=l(e("../../../driver-common/getSyncThreadsForSearch")),m=l(e("./encodeDraftUrlId")),h=l(e("./get-rfc-message-id-for-gmail-message-id"))},{"../../../driver-common/getSyncThreadsForSearch":834,"./encodeDraftUrlId":667,"./get-rfc-message-id-for-gmail-message-id":670,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"@babel/runtime-corejs2/regenerator":59,querystring:579}],681:[function(e,t,r){"use strict";function n(e,t){u.default.waitForGmailModeToSettle().then(function(){u.default.isStandalone()||o(e,t)})}function o(e,t){e.getRouteViewDriverStream().scan(function(e,t){var r,n;return e&&e.gmailRouteView&&e.gmailRouteView.isCustomRouteBelongingToApp()&&(r=e.gmailRouteView.getRouteID(),n=e.gmailRouteView.getParams()),{gmailRouteView:t,lastCustomRouteID:r,lastCustomRouteParams:n}},void 0).changes().onValue(function(r){var n=r.gmailRouteView,o=r.lastCustomRouteID,i=r.lastCustomRouteParams;d(n,o,i,e,t)})}function i(e,t){var r=u.default.getThreadBackButton();r&&(0,c.default)(r).takeUntilBy(t.getStopper()).filter(function(e){return!e.defaultPrevented}).onValue(function(e){window.history.back(),e.preventDefault(),e.stopImmediatePropagation()})}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=n;var l=(s(e("kefir")),e("ud")),u=s(e("../gmail-element-getter")),c=s(e("../../../lib/dom/on-mouse-down-and-up")),d=(0,l.defn)(t,function(e,t,r,n,o){t&&e.getRouteType()===o.RouteTypes.THREAD&&i(n,e)})},{"../../../lib/dom/on-mouse-down-and-up":864,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,ud:625}],682:[function(e,t,r){"use strict";function n(e,t){e.createCustomSearchTerm(t.term),e.ajaxInterceptStream.filter(function(e){return"searchQueryForReplacement"===e.type&&e.term===t.term}).onValue(function(r){a.default.resolve(t.termReplacer({})).then(function(n){if("string"!=typeof n)throw new Error("termReplacer response must be a string");var o="("+n+")",i=r.query.replace(t.term,function(){return o});e.setSearchQueryReplacement(r.query,i)})})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],683:[function(e,t,r){"use strict";function n(e,t){var r=a(e);if(s){var n=s(e);t&&(n=n.filter(function(t){return l(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,m.default)(e,t,r[t])}):u?c(e,u(r)):n(Object(r)).forEach(function(t){d(e,t,l(r,t))})}return e}function i(e,t){var r="inboxsdk__suggestions_"+(""+(0,h.default)()+Math.random()).replace(/\D+/g,""),n=e.getPageCommunicator();n.registerSuggestionsModifier(r);var i=n.ajaxInterceptStream.filter(function(e){return"suggestionsRequest"===e.type}).flatMapLatest(function(n){var i=n.query;return y.default.fromPromise(b.default.resolve(t(i))).flatMap(function(t){try{var n=(0,E.default)(e,t),i=n.map(function(e){return o(o({},e),{},{providerId:r,id:"".concat((0,h.default)(),"-").concat(Math.random())})});return y.default.constant(i)}catch(e){return y.default.constantError(e)}}).mapErrors(function(t){return e.getLogger().error(t),[]}).map(function(e){return{query:i,suggestions:e}})}).onValue(function(e){n.provideAutocompleteSuggestions(r,e.query,e.suggestions)}).map(function(e){return e.suggestions}),a=e.getRouteViewDriverStream().toProperty(function(){return null}).map(function(){return x.default.getSearchInput()}).filter(Boolean).take(1),s=a.flatMapLatest(function(e){return y.default.fromEvents(e,"focus")}).map(function(){return x.default.getSearchSuggestionsBoxParent()}).filter(Boolean).flatMapLatest(j.default).map(function(e){return e.el.firstElementChild}).take(1).toProperty(),l=s.flatMap(function(e){return(0,k.default)(e,{childList:!0}).toProperty(function(){return null})}).map(function(){return null}),u=a.flatMap(function(e){return(0,w.default)(document,"keydown").filter(function(t){return 13==t.keyCode&&t.target===e})}),c=s.sampledBy(l).map(function(e){return(0,v.default)(e.children).filter(function(e){return e.getElementsByClassName(r).length>0})});c.onValue(function(e){if(e[0]&&e[0].previousElementSibling){var t=e[0].previousElementSibling.firstElementChild;t&&t.classList.add("inboxsdk__suggestions_separator_before");var r=e[0].firstElementChild;r&&r.classList.add("inboxsdk__suggestions_separator_after")}});var d=c.flatMapLatest(function(e){return y.default.merge(e.map(function(e){return y.default.merge([(0,w.default)(e,"click"),u.filter(function(){return e.classList.contains("gssb_i")})]).map(function(t){return{event:t,row:e}})}))}),f=y.default.merge([i,a.flatMapLatest(function(e){return y.default.fromEvents(e,"blur")}).map(function(){return[]})]).toProperty();y.default.combine([d,a],[f]).onValue(function(t){var r=t,n=(0,p.default)(r,3),o=n[0],i=o.event,a=o.row,s=n[1],l=n[2],u=a.querySelector("span[data-inboxsdk-suggestion]"),c=u?JSON.parse(u.getAttribute("data-inboxsdk-suggestion")||"null"):null,d=(0,_.default)(function(){i.stopImmediatePropagation(),i.preventDefault(),s.blur(),s.value=""});if(c){var f=c.id,m=(0,g.default)(l,function(e){return e.id===f});m||e.getLogger().error(new Error("Failed to find suggestion by id")),m&&m.onClick&&(d(),m.onClick.call(null))}c&&c.routeName?(d(),e.goto(c.routeName,c.routeParams)):c&&c.externalURL&&(d(),window.open(c.externalURL))})}var a=e("@babel/runtime-corejs2/core-js/object/keys"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),c=e("@babel/runtime-corejs2/core-js/object/define-properties"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=i;var p=f(e("@babel/runtime-corejs2/helpers/slicedToArray")),m=f(e("@babel/runtime-corejs2/helpers/defineProperty")),h=f(e("@babel/runtime-corejs2/core-js/date/now")),b=f(e("@babel/runtime-corejs2/core-js/promise")),v=f(e("@babel/runtime-corejs2/core-js/array/from")),_=f(e("lodash/once")),g=f(e("lodash/find")),y=f(e("kefir")),w=f(e("../../../lib/from-event-target-capture")),j=(e("../../../lib/dom/simulate-mouse-event"),f(e("../../../lib/dom/make-element-child-stream"))),k=f(e("../../../lib/dom/make-mutation-observer-chunked-stream")),x=f(e("../gmail-element-getter")),E=f(e("../../../lib/copyAndValidateAutocompleteResults"))},{"../../../lib/copyAndValidateAutocompleteResults":848,"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/from-event-target-capture":878,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,kefir:327,"lodash/find":484,"lodash/once":516}],684:[function(e,t,r){"use strict";function n(e,t,r){return g.flatMapLatest(function(n){return n(e,t,r)})}function o(e,t,r){return d.default.fromPromise(v.default.waitForGmailModeToSettle()).flatMap(function(){var t,n=!1;return v.default.isStandaloneComposeWindow()?(t=a(),n=!0):t=v.default.isStandaloneThreadWindow()?d.default.never():i(),t.map((0,h.default)(function(t){return new _.default(t,r,e,{isStandalone:n,isInlineReplyForm:!1})}))}).merge(t.flatMap(function(t){return t.getReplyElementStream().map((0,h.default)(function(t){return new _.default(t,r,e,{isStandalone:!1,isInlineReplyForm:!0})}))})).flatMap(function(e){return e.ready()})}function i(){return s(function(){return v.default.getComposeWindowContainer()}).flatMap(function(e){var t=e.el.querySelector("div.AD");return t?(0,m.default)(t).takeUntilBy(e.removalStream).map(l("composeFullscreenStateChanged")):d.default.never()}).merge(v.default.getFullscreenComposeWindowContainerStream().flatMap(function(e){var t=e.el,r=e.removalStream;return(0,m.default)(t).takeUntilBy(r)}).map(l("composeFullscreenStateChanged")).map(function(e){var t=e.el,r=e.removalStream,n=t.querySelector("[role=dialog] div.aaZ");if(!n)return null;var o=(0,p.default)(n,{childList:!0}).filter(function(){return 0===n.childElementCount}).map(function(){return null});return{el:t,removalStream:r.merge(o).take(1)}}).filter(Boolean)).flatMap(function(e){if(!e)throw new Error("Should not happen");var t=e.el.querySelector("[role=dialog]");return t&&t.querySelector("form")?d.default.constant({el:t,removalStream:e.removalStream}):d.default.never()}).flatMap((0,b.default)())}function a(){return s(function(){return v.default.StandaloneCompose.getComposeWindowContainer()})}function s(e){return d.default.interval(2e3).map(e).filter().take(1).flatMap(function(e){return(0,m.default)(e)})}function l(e){return function(t){var r=t&&t.el&&t.el.querySelector&&t.el.querySelector("[role=dialog]");return r&&r.dispatchEvent(new CustomEvent(e,{bubbles:!1,cancelable:!1,detail:null})),t}}var u=e("@babel/runtime-corejs2/core-js/object/define-property"),c=e("@babel/runtime-corejs2/helpers/interopRequireDefault");u(r,"__esModule",{value:!0}),r.default=n;var d=c(e("kefir")),f=c(e("ud-kefir")),p=(c(e("../../../lib/stream-wait-for")),c(e("../../../lib/dom/make-mutation-observer-chunked-stream"))),m=c(e("../../../lib/dom/make-element-child-stream")),h=c(e("../../../lib/dom/element-view-mapper")),b=c(e("../../../lib/dom/make-element-stream-merger")),v=c(e("../gmail-element-getter")),_=c(e("../views/gmail-compose-view")),g=(c(e("../../../lib/logger")),(0,f.default)(t,o))},{"../../../lib/dom/element-view-mapper":852,"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-element-stream-merger":860,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/logger":891,"../../../lib/stream-wait-for":901,"../gmail-element-getter":696,"../views/gmail-compose-view":716,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"ud-kefir":624}],685:[function(e,t,r){"use strict";function n(e,t){var r=p(e);if(m){var n=m(e);t&&(n=n.filter(function(t){return h(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,j.default)(e,t,r[t])}):b?v(e,b(r)):n(Object(r)).forEach(function(t){_(e,t,h(r,t))})}return e}function i(e,t){var r=void 0!==c&&e[d]||e["@@iterator"];if(!r){if(f(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?u(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r=t.getCustomRouteIDs(),n=t.getCustomListRouteIDs(),a=t.getCustomListSearchStringsToRouteIds(),s=(0,I.default)(document.location.href).hash,l=null;t.getStopper().onValue(function(){l&&l.destroy()});var u=s,c={},d=x.default.fromEvents(window,"hashchange").filter(function(e){return!e.oldURL.match(/#inboxsdk-fake-no-vc$/)}).map(function(e){return{new:(0,I.default)(e.newURL),old:(0,I.default)(e.oldURL)}}).filter(function(e){return e.new.hash!==e.old.hash}).map(function(e){return e.new}).map(function(t){var o,a=t.hash,s=t.name,l=i(r);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=(0,A.default)(u,a);if(c)return{urlObject:t,type:"CUSTOM",routeID:c}}}catch(e){l.e(e)}finally{l.f()}var d,f=i(n);try{for(f.s();!(d=f.n()).done;){var p=(0,k.default)(d.value,1),m=p[0],h=(0,A.default)(m,s);if(h)return{urlObject:t,type:"CUSTOM_LIST_TRIGGER",routeID:h}}}catch(e){f.e(e)}finally{f.f()}return e.isNativeRoute(t.name)?{urlObject:t,type:"NATIVE"}:{urlObject:t,type:"OTHER_APP_CUSTOM"}}),f=d.filter(function(e){return"NATIVE"!==e.type}),p=d.filter(function(e){return"NATIVE"===e.type}).filter(function(e){var t=e.urlObject,r=s;return s=t.hash,r===t.hash}).filter(function(e){return e.urlObject.hash!==u});return x.default.merge([f,p,S.default.getMainContentElementChangedStream().map(function(e){return{urlObject:(0,I.default)(document.location.href),type:"NATIVE"}}).filter(function(t){return e.isNativeRoute(t.urlObject.name)})]).map(function(e){var r=e.type,n=e.urlObject;if("NATIVE"===r&&"search"===n.name){var o=a.get(n.params[0]);if(o){var i=S.default.getSearchInput();if(!i)throw new Error("Should not happen");if(i.value="",1===n.params.length||2===n.params.length&&"p"===n.params[1][0])return t.hashChangeNoViewChange("#"+o+(n.params[1]?"/"+n.params[1]:"")),{type:"CUSTOM_LIST",urlObject:n,routeID:o}}}return e}).map(function(e){var t=e.urlObject;return c[t.hash]||(c[t.hash]={data:{}}),c[t.hash].lastUsedTimestamp=(0,y.default)(),(0,w.default)(c).length>50&&(c=(0,w.default)(c).sort(function(e,t){return c[t].lastUsedTimestamp-c[e].lastUsedTimestamp}).slice(0,25).reduce(function(e,t){return o(o({},e),{},(0,j.default)({},t,c[t]))},{})),o(o({},e),{},{cachedRouteData:c[t.hash].data})}).map(function(r){if("NATIVE"===r.type||"CUSTOM_LIST"===r.type)t.showNativeRouteView();else if("CUSTOM_LIST_TRIGGER"===r.type)return void t.showCustomThreadList(r.routeID,(0,E.default)(n,r.routeID),r.urlObject.params);return new C.default(r,e,t)}).filter(Boolean).map(function(e){return l&&l.destroy(),l=e,u=(0,I.default)(document.location.href).hash,e})}var u=e("@babel/runtime-corejs2/core-js/array/from"),c=e("@babel/runtime-corejs2/core-js/symbol"),d=e("@babel/runtime-corejs2/core-js/symbol/iterator"),f=e("@babel/runtime-corejs2/core-js/array/is-array"),p=e("@babel/runtime-corejs2/core-js/object/keys"),m=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),h=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),b=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),v=e("@babel/runtime-corejs2/core-js/object/define-properties"),_=e("@babel/runtime-corejs2/core-js/object/define-property"),g=e("@babel/runtime-corejs2/helpers/interopRequireDefault");_(r,"__esModule",{value:!0}),r.default=l;var y=g(e("@babel/runtime-corejs2/core-js/date/now")),w=g(e("@babel/runtime-corejs2/core-js/object/keys")),j=g(e("@babel/runtime-corejs2/helpers/defineProperty")),k=g(e("@babel/runtime-corejs2/helpers/slicedToArray")),x=g(e("kefir")),E=g(e("../../../../common/get-or-fail")),S=g(e("../gmail-element-getter")),C=g(e("../views/gmail-route-view/gmail-route-view")),I=g(e("./get-url-object")),A=g(e("../../../lib/routeIDmatchesHash"))},{"../../../../common/get-or-fail":642,"../../../lib/routeIDmatchesHash":897,"../gmail-element-getter":696,"../views/gmail-route-view/gmail-route-view":751,"./get-url-object":672,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,kefir:327}],686:[function(e,t,r){"use strict";function n(e){var t=document.createElement("div");t.className="inboxsdk__appid_warning",t.innerHTML='\n<div class="inboxsdk__appid_warning_main">\n  <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>\n  <div>You\'ve loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>\n</div>\n<a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>\n<input type="button" value="" title="Close" class="inboxsdk__x_close_button" />\n';var r=e.createTopMessageBarDriver((0,s.default)(a.default,{el:t})),n=t.querySelector(".inboxsdk__x_close_button");if(!n)throw new Error("Should not happen");n.addEventListener("click",function(e){r.remove()})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("kefir")),s=i(e("kefir-cast"));i(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":877,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-cast":325}],687:[function(e,t,r){"use strict";function n(e){var t=e.querySelector(".inboxsdk__custom_view");return t||(t=document.createElement("div"),t.classList.add("inboxsdk__custom_view"),e.appendChild(t),t)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=e("ud"),s=i(e("../gmail-element-getter")),l=e("../../../lib/dom/simulate-mouse-event"),u=(0,a.defn)(t,function(e,t){var r=s.default.getContentSectionElement();if(r){for(var o=document.getSelection(),i=0;i<o.rangeCount;i++){var a=o.getRangeAt(i);if("function"==typeof a.intersectsNode&&a.intersectsNode(r)){o.removeAllRanges();break}}n(r).appendChild(t);var u=r.children;Array.prototype.forEach.call(u,function(e){e.classList.contains("inboxsdk__custom_view")||(e.style.display="none")});var c=s.default.getCompanionSidebarIconContainerElement();if(c){var d=c.querySelector(".J-KU-KO");d&&(0,l.simulateClick)(d)}document.body.classList.add("inboxsdk__custom_view_active")}}),c=u;r.default=c},{"../../../lib/dom/simulate-mouse-event":874,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,ud:625}],688:[function(e,t,r){"use strict";function n(e){if("function"!=typeof w)return null;var t=new w,r=new w;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=y&&v;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?v(e,a):null;s&&(s.get||s.set)?y(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function i(e,t){var r=h(e);if(b){var n=b(e);t&&(n=n.filter(function(t){return v(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,E.default)(e,t,r[t])}):_?g(e,_(r)):i(Object(r)).forEach(function(t){y(e,t,v(r,t))})}return e}function s(e,t){return e.length>B&&t.error(new Error("Received more than the maximum number of threads specified by handler, ignoring additional threads (https://www.inboxsdk.com/docs/#Router).")),e.slice(0,B)}function l(e,t){return console.log("Failed to find id for thread",e,t),null}function u(e,t,r){if((0,A.default)(r)){e.deprecationWarning("Returning an array from a handleCustomListRoute handler","a CustomListDescriptor object");var n=s(r,e);return{total:n.length,threads:n}}if("object"===(0,C.default)(r)){var o=r.total,i=r.hasMore,a=r.threads;if(!(0,A.default)(a))throw new Error('handleCustomListRoute result must contain a "threads" array (https://www.inboxsdk.com/docs/#Router).');if(null!=o&&null!=i)throw new Error('handleCustomListRoute result must only contain either a "total" or a "hasMore" property, but not both. (https://www.inboxsdk.com/docs/#Router).');if("number"==typeof o)return{total:o,threads:s(a,e)};if("boolean"==typeof i){var l=s(a,e);return{total:i?"MANY":t+a.length,threads:l}}throw new Error('handleCustomListRoute result must contain either a "total" number or a "hasMore" boolean (https://www.inboxsdk.com/docs/#Router).')}throw new Error("handleCustomListRoute result must be an array or an object (https://www.inboxsdk.com/docs/#Router).")}function c(e){if("string"==typeof e)return"<"==e[0]?{rfcId:e}:{gtid:e};if(e){var t={gtid:"string"==typeof e.gmailThreadId&&e.gmailThreadId,rfcId:"string"==typeof e.rfcMessageId&&e.rfcMessageId};if(t.gtid||t.rfcId)return t}}function d(e,t,r){if("string"==typeof t.rfcId)return T.default.resolve(t);if("string"==typeof t.gtid){var n=t.gtid;return e.getRfcMessageIdForGmailThreadId(n).then(function(e){return{gtid:n,rfcId:e}},function(e){return r(n,e)})}throw new Error("Should not happen")}function f(e,t,r){return"string"==typeof t.gtid?T.default.resolve(t):e.getGmailThreadIdForRfcMessageId(t.rfcId).then(function(e){return{gtid:e,rfcId:t.rfcId}},function(e){return r(t.rfcId,e)})}function p(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l,i=q(e,t,r,o),a=document.location.hash,s=R.default.getMainContentElementChangedStream().changes().take(1),u=R.default.getSearchInput();if(!u)throw new Error("could not find search input");u.value="",u.style.visibility="hidden",s.onValue(function(){u.style.visibility="visible"});var c="#search/"+[i].concat((0,x.default)(n)).map(encodeURIComponent).join("/");window.history.replaceState(null,null,c);var d=new window.HashChangeEvent("hashchange",{oldURL:document.location.href.replace(/#.*$/,"")+a,newURL:document.location.href.replace(/#.*$/,"")+c});window.dispatchEvent(d)}var m=e("@babel/runtime-corejs2/helpers/typeof"),h=e("@babel/runtime-corejs2/core-js/object/keys"),b=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),v=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),_=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),g=e("@babel/runtime-corejs2/core-js/object/define-properties"),y=e("@babel/runtime-corejs2/core-js/object/define-property"),w=e("@babel/runtime-corejs2/core-js/weak-map"),j=e("@babel/runtime-corejs2/helpers/interopRequireDefault");y(r,"__esModule",{value:!0}),r.default=p;var k=j(e("@babel/runtime-corejs2/regenerator")),x=j(e("@babel/runtime-corejs2/helpers/toConsumableArray")),E=j(e("@babel/runtime-corejs2/helpers/defineProperty")),S=j(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),C=j(e("@babel/runtime-corejs2/helpers/typeof")),I=j(e("@babel/runtime-corejs2/core-js/map")),A=j(e("@babel/runtime-corejs2/core-js/array/is-array")),T=j(e("@babel/runtime-corejs2/core-js/promise")),D=j(e("@babel/runtime-corejs2/core-js/date/now")),M=j(e("lodash/find")),R=(j(e("kefir")),j(e("../gmail-element-getter"))),O=o(e("../gmail-response-processor")),P=o(e("../gmail-sync-response-processor")),L=j(e("../../../lib/isStreakAppId")),V=j(e("immutability-helper")),N=new I.default,B=50,q=function(e,t,r,n){var o=N.get(r);if(o)return o;var i=(0,D.default)()+"-"+Math.random();return e.getPageCommunicator().setupCustomListResultsQuery(i),e.getPageCommunicator().ajaxInterceptStream.filter(function(e){return"searchForReplacement"===e.type&&e.query===i}).onValue(function(o){var s=o.start;(0,S.default)(k.default.mark(function o(){var l,p,m,h,b,v,_,g,y,w,j,x,E,S,C,I,A,R,N;return k.default.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e.signalCustomThreadListActivity(t),o.prev=1,o.next=4,T.default.resolve(r(s,B));case 4:m=o.sent,h=u(e.getLogger(),s,m),l=h.total,p=h.threads,o.next=15;break;case 10:o.prev=10,o.t0=o.catch(1),e.getLogger().error(o.t0),l=0,p=[];case 15:return b=p.map(c).filter(Boolean),o.next=18,T.default.all(b.map(function(t){return d(e,t,n)}));case 18:return v=o.sent.filter(Boolean),_=v.length>0?v.map(function(e){return"rfc822msgid:"+e.rfcId}).join(" OR "):""+Math.random()+(0,D.default)(),e.getPageCommunicator().setCustomListNewQuery({newQuery:_,newStart:0,query:i,start:s}),g=e.getPageCommunicator().ajaxInterceptStream.filter(function(e){return"searchResultsResponse"===e.type&&e.query===i&&e.start===s}).map(function(e){return e.response}).take(1).toPromise(),o.next=24,T.default.all(v.map(function(t){return f(e,t,n)}));case 24:return y=o.sent.filter(Boolean),o.next=27,g;case 27:w=o.sent,e.signalCustomThreadListActivity(t),o.prev=29,e.isUsingSyncAPI()?(x=P.extractThreadsFromSearchResponse(w),E=y.map(function(e){var t=e.gtid;return(0,M.default)(x,function(e){return e.oldGmailThreadID===t})}).filter(Boolean),S=x.length!==E.length||x.some(function(e,t){return e!==E[t]}),S?(I=(0,D.default)(),C=E.map(function(e,t){var r=String(I-t),n=(0,V.default)(e,{rawResponse:{1:{3:{$set:r},8:{$set:r}}}});return e.rawResponse[1][5]&&(n=(0,V.default)(n,{rawResponse:{1:{5:function(e){return e.map(function(e){return a(a({},e),{},{7:r,18:r,31:r})})}}}})),n})):C=x,j=P.replaceThreadsInSearchResponse(w,C,{start:s,total:l})):(A=O.extractThreads(w),R=y.map(function(e){var t=e.gtid;return(0,M.default)(A,function(e){return e.gmailThreadId===t})}).filter(Boolean),j=O.replaceThreadsInResponse(w,R,{start:s,total:l})),e.getPageCommunicator().setCustomListResults(i,j),o.next=41;break;case 34:o.prev=34,o.t1=o.catch(29),e.getLogger().error(o.t1,{responseReplacementFailure:!0,idPairsLength:y.length}),N=e.getButterBar(),N&&N.showError({text:"Failed to load custom thread list"});try{e.isUsingSyncAPI()?e.getPageCommunicator().setCustomListResults(i,P.replaceThreadsInSearchResponse(w,[],{start:s,total:l})):e.getPageCommunicator().setCustomListResults(i,O.replaceThreadsInResponse(w,[],{start:s,total:l}))}catch(t){e.getLogger().error(t),e.getPageCommunicator().setCustomListResults(i,null)}return o.abrupt("return");case 41:setTimeout(function(){var t=document.querySelector(".vY .vX.UC");if(t&&"none"!==t.style.display&&/#\d+/.test(t.textContent)){var r=(0,L.default)(e.getAppId());e.getLogger().error(new Error("Gmail error with custom thread list"),{message:t.textContent,completedIDPairsLength:y.length,response:r?w:null,newResponse:r?j:null})}},1e3);case 42:case"end":return o.stop()}},o,null,[[1,10],[29,34]])}))().catch(function(t){return e.getLogger().error(t)})}),e.getCustomListSearchStringsToRouteIds().set(i,t),N.set(r,i),i}},{"../../../lib/isStreakAppId":890,"../gmail-element-getter":696,"../gmail-response-processor":700,"../gmail-sync-response-processor":701,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,"immutability-helper":317,kefir:327,"lodash/find":484}],689:[function(e,t,r){"use strict";function n(e){var t=a.default.getContentSectionElement();t&&(Array.prototype.forEach.call(t.children,function(e){e.style.display=""}),document.body.classList.contains("inboxsdk__custom_view_active")&&(document.body.classList.remove("inboxsdk__custom_view_active"),(0,s.default)()))}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../gmail-element-getter")),s=i(e("../../../lib/fake-window-resize"))},{"../../../lib/fake-window-resize":877,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],690:[function(e,t,r){"use strict";function n(e,t){(0,l.default)(function(){return u.default.getCompanionSidebarIconContainerElement()}).map(function(t){var r=t.querySelector(".J-KU-Jg, [role=tablist], .brC-bsf-aT5-aOt");return r||(e.getLogger().error(new Error("_waitForAddonTitleAndSuppress: elementToWatch not found")),null)}).filter().flatMap(s.default).filter(function(e){var r=e.el;return"tab"===r.getAttribute("role")&&(r.getAttribute("data-tooltip")||r.getAttribute("aria-label"))===t}).takeUntilBy(e.getStopper()).onValue(function(e){var t=e.el;(t.classList.contains("J-KU-KO")||t.classList.contains("bse-bvF-I-KO")||t.classList.contains("aT5-aOt-I-KO"))&&(0,a.simulateClick)(t),t.style.display="none"}).onError(function(t){e.getLogger().error(t,"error in suppressAddon")})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=e("../../../lib/dom/simulate-mouse-event"),s=i(e("../../../lib/dom/make-element-child-stream")),l=i(e("../../../lib/stream-wait-for")),u=i(e("../gmail-element-getter"))},{"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/stream-wait-for":901,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],691:[function(e,t,r){
(function(t){(function(){"use strict";function n(e){"sdk_streak_21e9788951"===e.getAppId()&&t.fetch&&!l&&(l=!0,e.getAttachmentCardViewDriverStream().filter(function(e){return"FILE"===e.getAttachmentType()}).filter(function(){return Math.random()<.01}).onValue(function(){var t=(0,s.default)(a.default.mark(function t(r){var n,o;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=r._getDownloadLink(),t.prev=1,t.next=4,r.getDownloadURL();case 4:o=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),e.getLogger().error(t.t0,{reason:"problem getting download url",downloadLinkBefore:n,downloadLinkAfter:r._getDownloadLink()}),t.abrupt("return");case 11:if(o){t.next=14;break}return e.getLogger().error(new Error("no download url found"),{downloadLinkBefore:n,downloadLinkAfter:r._getDownloadLink()}),t.abrupt("return");case 14:e.getLogger().eventSdkPassive("testing.getDownloadURL success");case 15:case"end":return t.stop()}},t,null,[[1,7]])}));return function(e){return t.apply(this,arguments)}}()))}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/regenerator")),s=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=!1}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59}],692:[function(e,t,r){"use strict";function n(e,t){var r=void 0!==s&&e[l]||e["@@iterator"];if(!r){if(u(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?a(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=e("@babel/runtime-corejs2/core-js/array/from"),s=e("@babel/runtime-corejs2/core-js/symbol"),l=e("@babel/runtime-corejs2/core-js/symbol/iterator"),u=e("@babel/runtime-corejs2/core-js/array/is-array"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/regenerator")),p=d(e("@babel/runtime-corejs2/core-js/set")),m=d(e("@babel/runtime-corejs2/core-js/promise")),h=d(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),b=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),v=d(e("@babel/runtime-corejs2/helpers/createClass")),_=d(e("@babel/runtime-corejs2/helpers/defineProperty")),g=e("ud"),y=(d(e("kefir")),d(e("./getSyncThreadFromSyncThreadId")),function(){function e(t){var r=this;(0,b.default)(this,e),(0,_.default)(this,"_driver",void 0),(0,_.default)(this,"_composeViews",void 0),this._driver=t,this._composeViews=new p.default,this._driver.getComposeViewDriverStream().onValue(function(e){r._composeViews.add(e),e.getStopper().onValue(function(){r._composeViews.delete(e)})})}return(0,v.default)(e,[{key:"getThreadIdForThreadRow",value:function(e,t){var r=this._driver.getPageCommunicator().getThreadIdForThreadRowByDatabase(t[0]);if(r)return r;if(0==e.getVisibleMessageCount()&&e.getVisibleDraftCount()>0){var n=this._findComposeForThreadRow(e);if(n)return n.getMessageID()}return null}},{key:"getDraftIdForThreadRow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,h.default)(f.default.mark(function e(t){var r,n,o;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.getVisibleMessageCount()>0||0==t.getVisibleDraftCount())){e.next=2;break}return e.abrupt("return",m.default.resolve(null));case 2:if(!(r=this._findComposeForThreadRow(t))){e.next=5;break}return e.abrupt("return",r.getDraftID());case 5:return e.next=7,this._driver.getDraftIDForMessageID(t.getThreadID());case 7:return n=e.sent,o=n.draftID,e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"_findComposeForThreadRow",value:function(e){var t,r=[],o=e.getSubject(),i=n(this._composeViews);try{for(i.s();!(t=i.n()).done;){var a=t.value;o===a.getSubject()&&r.push(a)}}catch(e){i.e(e)}finally{i.f()}return 1==r.length?r[0]:null}}]),e}()),w=(0,g.defn)(t,y);r.default=w},{"./getSyncThreadFromSyncThreadId":674,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,kefir:327,ud:625}],693:[function(e,t,r){"use strict";function n(e,t){var r=h(e);if(b){var n=b(e);t&&(n=n.filter(function(t){return v(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,j.default)(e,t,r[t])}):_?g(e,_(r)):n(Object(r)).forEach(function(t){y(e,t,v(r,t))})}return e}function i(e){a(e),p(e),m(e)}function a(e){e.getComposeViewDriverStream().onValue(function(t){var r=s(e,t);r("compose open"),l(t,r)})}function s(e,t){var r=e.getLogger(),n={isInlineReply:t.isInlineReplyForm(),isReply:t.isReply()};return function(e,t){r.eventSite(e,o(o({},n),t))}}function l(e,t){u(e,t),d(e,t)}function u(e,t){var r=e.getElement().querySelector(".a1");r&&k.default.fromEvents(r,"mousedown").takeUntilBy(e.getStopper()).onValue(function(){t("attachment button clicked"),c(e,t)})}function c(e,t){(0,x.default)(document.body).map(function(e){return e.el}).filter(function(e){return e&&"file"===e.type}).take(1).flatMap(function(t){return k.default.fromEvents(t,"change").map(function(){return!0}).merge(k.default.fromEvents(e.getBodyElement(),"focus").map(function(){return!1}).delay(1e3))}).take(1).filter(Boolean).takeUntilBy(e.getStopper()).onValue(function(){return t("attachment uploaded")})}function d(e,t){var r=e.getElement().querySelector(".aA7");r&&k.default.fromEvents(r,"mousedown").takeUntilBy(e.getStopper()).onValue(function(){t("drive button clicked"),f(e,t)})}function f(e,t){var r=e.getBodyElement().querySelectorAll(".gmail_drive_chip").length;(0,x.default)(document.body).map(function(e){return e.el}).filter(function(e){return e&&e.classList.contains("picker-dialog")}).take(1).flatMap(function(t){return k.default.fromEvents(e.getBodyElement(),"focus").delay(1e3).map(function(){return e.getBodyElement()?e.getBodyElement().querySelectorAll(".gmail_drive_chip").length:0}).map(function(e){return r<e}).take(1)}).take(1).filter(Boolean).takeUntilBy(e.getStopper()).onValue(function(){return t("drive file added")})}function p(e){(0,x.default)(document.body).map(function(e){return e.el}).filter(function(e){return e.getAttribute&&"alertdialog"===e.getAttribute("role")}).takeUntilBy(e.getStopper()).onValue(function(t){var r=t.querySelector("[role=heading]");if(r&&r.textContent.indexOf("exceeds the 25MB")>-1)return void e.getLogger().eventSite("large attachment suggest drive");var n=t.querySelector(".Kj-JD-Jz");return n&&n.textContent.indexOf("exceeds the maximum")>-1?void e.getLogger().eventSite("large attachment from drag and drop"):void 0})}function m(e){e.getComposeViewDriverStream().flatMapLatest(function(){return k.default.fromEvents(document.body,"dragenter").filter(function(e){return e.toElement}).filter(function(e){return e.toElement.classList.contains("aC7")||e.toElement.classList.contains("aC9")}).take(1)}).takeUntilBy(e.getStopper()).onValue(function(){return e.getLogger().eventSite("compose drag file")}),e.getComposeViewDriverStream().flatMapLatest(function(){return k.default.fromEvents(document.body,"drop").filter(function(e){return e.toElement}).filter(function(e){return e.toElement.classList.contains("aC7")||e.toElement.classList.contains("aC9")}).take(1)}).takeUntilBy(e.getStopper()).onValue(function(){return e.getLogger().eventSite("compose drop file")})}var h=e("@babel/runtime-corejs2/core-js/object/keys"),b=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),v=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),_=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),g=e("@babel/runtime-corejs2/core-js/object/define-properties"),y=e("@babel/runtime-corejs2/core-js/object/define-property"),w=e("@babel/runtime-corejs2/helpers/interopRequireDefault");y(r,"__esModule",{value:!0}),r.default=i;var j=w(e("@babel/runtime-corejs2/helpers/defineProperty")),k=w(e("kefir")),x=w(e("../../../lib/dom/make-element-child-stream"))},{"../../../lib/dom/make-element-child-stream":859,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],694:[function(e,t,r){"use strict";function n(){var e=document.querySelector(".TO .TN");if(!e)return c.default.error(new Error("Failed to find nav item outer element")),"compact";var t=(0,l.default)(getComputedStyle(e).getPropertyValue("padding-top"),10);return t>=6?"comfortable":t>=3?"cozy":"compact"}function o(){var e=document.querySelector(".aio");if(!e)return c.default.error(new Error("Failed to find nav item")),!1;var t=getComputedStyle(e).getPropertyValue("color"),r=p.exec(t);if(!r)return c.default.error(new Error("Failed to read color string"),{colorString:t}),!1;var n=+r[1],o=+r[2],i=+r[3];return 36!==i&&(n===o&&n===i||c.default.error(new Error("Nav item color not grayscale"),{r:n,g:o,b:i}),n>128)}function i(){function e(){var e=n();t!==e&&(t&&document.body.classList.remove("inboxsdk__gmail_density_"+t),t=e,document.body.classList.add("inboxsdk__gmail_density_"+t));var i=o();r!==i&&(r=i,r?document.body.classList.add("inboxsdk__gmail_dark_theme"):document.body.classList.remove("inboxsdk__gmail_dark_theme"))}if(!document.head.hasAttribute("data-inboxsdk-gmail-style-tracker")&&!f.default.isStandalone()){document.head.setAttribute("data-inboxsdk-gmail-style-tracker","true");var t=null,r=null;(0,d.default)(function(){return document.querySelector(".TO .TN")&&document.querySelector(".aio")}).then(function(){var t=new MutationObserver(e),r={characterData:!0,childList:!0};(0,u.default)(document.styleSheets).forEach(function(e){"STYLE"==e.ownerNode.tagName&&t.observe(e.ownerNode,r)}),e()}).catch(function(e){c.default.error(e)})}}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=i;var l=s(e("@babel/runtime-corejs2/core-js/parse-int")),u=s(e("@babel/runtime-corejs2/core-js/array/from")),c=s(e("../../../lib/logger")),d=s(e("../../../lib/wait-for")),f=s(e("../gmail-element-getter")),p=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/},{"../../../lib/logger":891,"../../../lib/wait-for":904,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],695:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/array/from")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("lodash/find")),c=o(e("lodash/uniqBy")),d=(o(e("../../../../common/censorHTMLstring")),o(e("../../../lib/logger")),o(e("../../../lib/wait-for")),function(){function e(t){(0,a.default)(this,e),(0,l.default)(this,"_failedWaitFor",void 0),(0,l.default)(this,"_userEmail",void 0),this._failedWaitFor=!1,this._userEmail=t.getUserEmailAddress()}return(0,s.default)(e,[{key:"getUserName",value:function(){var e=this,t=document.querySelector("div.gb_w div.gb_B .gb_D");if(t)return t.textContent;var r=(0,u.default)(this.getAccountSwitcherContactList(),function(t){return t.emailAddress===e._userEmail});return r&&null!=r.name?r.name:this._userEmail}},{key:"getAccountSwitcherContactList",value:function(){var e=(0,i.default)(document.querySelectorAll('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."]')).slice(0,1).map(function(e){var t=e.parentElement,r=t.children[0],n=t.children[1];return r&&n?{name:r.textContent,emailAddress:n.textContent}:null}).filter(Boolean),t=(0,i.default)(document.querySelectorAll('[role=banner] div[aria-label] div > a[target="_blank"] > img + div')).map(function(e){var t=e.children[1].textContent.match(/\S+/);if(!t)throw new Error("Failed to match");return{name:e.children[0].textContent,emailAddress:t[0]}});return(0,c.default)(e.concat(t),function(e){return e.emailAddress.toLowerCase()})}}]),e}());r.default=d},{"../../../../common/censorHTMLstring":636,"../../../lib/logger":891,"../../../lib/wait-for":904,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/find":484,"lodash/uniqBy":529}],696:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/core-js/array/from")),c=l(e("lodash/once")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),f=l(e("../../lib/dom/make-element-child-stream")),p=l(e("../../lib/dom/querySelectorOrFail")),m=l(e("./gmail-element-getter/wait-for-gmail-mode-to-settle")),h=l(e("./gmail-element-getter/get-main-content-element-changed-stream")),b=l(e("./gmail-driver/isIntegratedViewGmail")),v=l(e("../../lib/logger")),_={getActiveMoreMenu:function(){for(var e=document.querySelectorAll(".J-M.aX0.aYO.jQjAxd"),t=0;t<e.length;t++)if("none"!==e[t].style.display)return e[t];return null},getAddonSidebarContainerElement:function(){return document.querySelector(".no > .nn.bnl")},getCompanionSidebarContentContainerElement:function(){return document.querySelector(".brC-brG")},getCompanionSidebarIconContainerElement:function(){return document.querySelector(".brC-aT5-aOt-Jw")},getComposeButton:function(){return(0,b.default)()?document.querySelector(".aqn .aic div[role=button].L3"):document.querySelector("[gh=cm]")},getComposeWindowContainer:function(){return document.querySelector(".dw .nH > .nH > .no")},getContentSectionElement:function(){var e=document.querySelector("div.nH.bkK > .nH");if((0,b.default)())return e;var t=_.getLeftNavContainerElement(),r=t?t.nextElementSibling.children[0]:null;return e!==r&&v.default.error(new Error("getContentSectionElement old and new method inconsistency"),{elClassName:null===e||void 0===e?void 0:e.className,oldMethodClassName:null===r||void 0===r?void 0:r.className}),r},getFullscreenComposeWindowContainer:function(){return document.querySelector(".aSs .aSt")},getFullscreenComposeWindowContainerStream:function(){if(!document.body)throw new Error;return(0,f.default)(document.body).filter(function(e){return e.el.classList.contains("aSs")}).flatMap(function(e){var t=e.el,r=e.removalStream;return(0,f.default)(t).takeUntilBy(r)}).filter(function(e){return e.el.classList.contains("aSt")}).take(1).map(function(e){return{el:e.el,removalStream:d.never()}}).toProperty()},getGtalkButtons:function(){return document.querySelector(".aeN .aj5.J-KU-Jg")},getLeftNavContainerElement:function(){return(0,b.default)()?document.querySelector("div[role=navigation] + div.aqn"):document.querySelector(".aeN")},getLeftNavHeightElement:function(){return document.querySelector(".aeN")},getMainContentBodyContainerElement:function(){return document.querySelector(".no > .nn.bkK")},getMainContentContainer:function(){return document.querySelector("div.aeF > div.nH")},getMainContentElementChangedStream:(0,c.default)(function(){return(0,h.default)(this)}),getMoleParent:function(){return document.body.querySelector(".dw .nH > .nH > .no")},shouldAddNavItemsInline:function(){if((0,b.default)())return!0;var e=document.querySelector(".aeN[role=navigation], .aeN [role=navigation]");if(!e)throw new Error("shouldAddNavItemsInline failed to find leftNavElement");return!!e.classList.contains("aZ6")},getSeparateSectionNavItemMenuInjectionContainer:function(){return document.querySelector(".aeN")},getSameSectionNavItemMenuInjectionContainer:function(){return(0,b.default)()?document.querySelector(".yJ .wT > .n3"):document.querySelector(".aeN .n3")},getRowListElements:function(){return(0,u.default)(document.querySelectorAll("[gh=tl]"))},getScrollContainer:function(){return document.querySelector("div.Tm.aeJ")},getSearchInput:function(){return document.querySelector("form[role=search] input")},getSearchSuggestionsBoxParent:function(){return document.querySelector("table.gstl_50 > tbody > tr > td.gssb_e")},getSidebarContainerElement:function(){return document.querySelector("[role=main] table.Bs > tr .y3")},getThreadBackButton:function(){var e;try{e=_.getToolbarElement()}catch(e){return null}return e.querySelector(".lS")},getThreadContainerElement:function(){return document.querySelector("[role=main] .g.id table.Bs > tr")},getToolbarElement:function(){return(0,p.default)(document,"[gh=tm]")},getTopAccountContainer:function(){return document.querySelector('header[role="banner"] > div:nth-child(2) > div:nth-child(2)')},isGplusEnabled:function(){var e=_.getTopAccountContainer();return!!e&&0===e.querySelectorAll('a[href*="https://plus"][href*="upgrade"]').length},isPreviewPane:function(){return!!document.querySelector(".aia")},isStandalone:function(){return this.isStandaloneComposeWindow()||this.isStandaloneThreadWindow()},isStandaloneComposeWindow:function(){return document.body.classList.contains("xE")&&document.body.classList.contains("xp")},isStandaloneThreadWindow:function(){return document.body.classList.contains("aAU")&&document.body.classList.contains("xE")&&document.body.classList.contains("Su")},StandaloneCompose:{getComposeWindowContainer:function(){return document.querySelector("[role=main]")}},waitForGmailModeToSettle:function(){return(0,m.default)().toPromise()}},g=_;r.default=g},{"../../lib/dom/make-element-child-stream":859,"../../lib/dom/querySelectorOrFail":868,"../../lib/logger":891,"./gmail-driver/isIntegratedViewGmail":677,"./gmail-element-getter/get-main-content-element-changed-stream":697,"./gmail-element-getter/wait-for-gmail-mode-to-settle":698,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"lodash/once":516}],697:[function(e,t,r){"use strict";function n(e){if("function"!=typeof l)return null;var t=new l,r=new l;return(n=function(e){return e?r:t})(e)}function o(e){var t=i(e).flatMap(function(e){return(0,b.default)(e).filter(function(e){return e.el.classList.contains("nH")}).flatMap(function(e){var t=e.el,r=e.removalStream;return(0,h.default)(t,{attributes:!0,attributeFilter:["style"]}).map(function(e){return(0,f.default)(e)}).toProperty(function(){return{target:t}}).filter(a).map(function(e){return e.target}).takeUntilBy(r)})}).toProperty();return t.onValue(function(){}),t}function i(e){return e.isStandaloneComposeWindow()?p.never():(0,m.default)(function(){return e.getMainContentContainer()})}function a(e){return"none"!==e.target.style.display}var s=e("@babel/runtime-corejs2/helpers/typeof"),l=e("@babel/runtime-corejs2/core-js/weak-map"),u=e("@babel/runtime-corejs2/core-js/object/define-property"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");u(r,"__esModule",{value:!0}),r.default=o;var f=d(e("lodash/last")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=u&&c;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?c(e,a):null;l&&(l.get||l.set)?u(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),m=d(e("../../../lib/stream-wait-for")),h=d(e("../../../lib/dom/make-mutation-observer-chunked-stream")),b=d(e("../../../lib/dom/make-element-child-stream"))},{"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/stream-wait-for":901,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"lodash/last":511}],698:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("lodash/once")),a=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),s=(0,i.default)(function(){return(0,a.default)(document.body,{attributes:!0,attributeFilter:["class"]}).toProperty(function(){}).filter(function(){return document.body.classList.length>0}).map(function(){}).take(1).toProperty()}),l=s;r.default=l},{"../../../lib/dom/make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/once":516}],699:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,b.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/core-js/promise")),u=s(e("@babel/runtime-corejs2/core-js/json/stringify")),c=s(e("@babel/runtime-corejs2/regenerator")),d=s(e("@babel/runtime-corejs2/helpers/slicedToArray")),f=s(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),p=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=s(e("@babel/runtime-corejs2/helpers/createClass")),h=s(e("@babel/runtime-corejs2/helpers/inherits")),b=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),v=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),_=s(e("../../lib/common-page-communicator")),g=s(e("../../lib/dom/make-mutation-observer-chunked-stream")),y=s(e("kefir")),w=function(e){function t(){return(0,p.default)(this,t),r.apply(this,arguments)}(0,h.default)(t,e);var r=n(t);return(0,m.default)(t,[{key:"getMessageDate",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getMessageData(t,r,"data-inboxsdk-sortdate","inboxSDKtellMeThisMessageDate"));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getMessageRecipients",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,r){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._getMessageData(t,r,"data-inboxsdk-recipients","inboxSDKtellMeThisMessageRecipients"));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"_getMessageData",value:function(){function e(e,r,n,o){return t.apply(this,arguments)}var t=(0,f.default)(c.default.mark(function e(t,r,n,o){var i,a,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.getAttribute(n)){e.next=19;break}if(!this.isUsingSyncAPI()){e.next=8;break}return e.next=5,l.default.all([this.getBtaiHeader(),this.getXsrfToken()]);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[null,null];case 9:if(a=e.t0,s=(0,d.default)(a,2),u=s[0],f=s[1],r.dispatchEvent(new CustomEvent(o,{bubbles:!0,cancelable:!1,detail:{threadId:t,ikValue:this.getIkValue(),btaiHeader:u,xsrfToken:f}})),i=r.getAttribute(n)){e.next=19;break}return e.next=18,(0,g.default)(r,{attributes:!0,attributeFilter:[n]}).take(1).toPromise();case 18:i=r.getAttribute(n);case 19:if(!i||"error"===i){e.next=23;break}return e.abrupt("return",JSON.parse(i));case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}},e,this)}));return e}()},{key:"getThreadIdForThreadRowByDatabase",value:function(e){var t=e.getAttribute("data-inboxsdk-threadid");return t||(e.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByDatabase",{bubbles:!0,cancelable:!1,detail:null})),t=e.getAttribute("data-inboxsdk-threadid")),t}},{key:"getThreadIdForThreadRowByClick",value:function(e){var t=e.getAttribute("data-inboxsdk-threadid");return t||(e.dispatchEvent(new CustomEvent("inboxSDKtellMeThisThreadIdByClick",{bubbles:!0,cancelable:!1,detail:null})),t=e.getAttribute("data-inboxsdk-threadid")),t}},{key:"getCurrentThreadID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.dispatchEvent(new CustomEvent("inboxSDKtellMeCurrentThreadId",{bubbles:!0,cancelable:!1,detail:{isPreviewedThread:t}}));var r=e.getAttribute("data-inboxsdk-currentthreadid");if(null==r)throw new Error("Failed to read value");return r}},{key:"getUserOriginalPreviewPaneMode",value:function(){return document.head.getAttribute("data-inboxsdk-user-preview-pane-mode")}},{key:"getActionTokenValue",value:function(){var e=document.head.getAttribute("data-inboxsdk-action-token-value");if(null==e)throw new Error("Failed to read value");return e}},{key:"isUsingSyncAPI",value:function(){var e=document.head.getAttribute("data-inboxsdk-using-sync-api");if(null==e)throw new Error("Failed to read value");return"true"===e}},{key:"isConversationViewDisabled",value:function(){return new l.default(function(e){y.default.fromEvents(document,"inboxSDKgmonkeyResponse").take(1).onValue(function(t){e(t.detail)}),document.dispatchEvent(new CustomEvent("inboxSDKtellMeIsConversationViewDisabled",{bubbles:!1,cancelable:!1,detail:null}))})}},{key:"registerSuggestionsModifier",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKregisterSuggestionsModifier",{bubbles:!1,cancelable:!1,detail:{providerID:e}}))}},{key:"provideAutocompleteSuggestions",value:function(e,t,r){document.dispatchEvent(new CustomEvent("inboxSDKprovideSuggestions",{bubbles:!1,cancelable:!1,detail:{providerID:e,query:t,suggestions:JSON.parse((0,u.default)(r))}}))}},{key:"setupCustomListResultsQuery",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKcustomListRegisterQuery",{bubbles:!1,cancelable:!1,detail:{query:e}}))}},{key:"setCustomListNewQuery",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKcustomListNewQuery",{bubbles:!1,cancelable:!1,detail:e}))}},{key:"setCustomListResults",value:function(e,t){document.dispatchEvent(new CustomEvent("inboxSDKcustomListResults",{bubbles:!1,cancelable:!1,detail:{query:e,newResults:t}}))}},{key:"createCustomSearchTerm",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKcreateCustomSearchTerm",{bubbles:!1,cancelable:!1,detail:{term:e}}))}},{key:"setSearchQueryReplacement",value:function(e,t){document.dispatchEvent(new CustomEvent("inboxSDKsearchReplacementReady",{bubbles:!1,cancelable:!1,detail:{query:e,newQuery:t}}))}},{key:"registerComposeRequestModifier",value:function(e,t){var r=(new Date).getTime()+"_"+t+"_"+Math.random(),n={modifierId:r};return this.isUsingSyncAPI()?n.draftID=e:n.composeid=e,document.dispatchEvent(new CustomEvent("inboxSDKregisterComposeRequestModifier",{detail:n,bubbles:!1,cancelable:!1})),r}},{key:"unregisterComposeRequestModifier",value:function(e,t){document.dispatchEvent(new CustomEvent("inboxSDKunregisterComposeRequestModifier",{detail:{keyId:e,modifierId:t},bubbles:!1,cancelable:!1}))}},{key:"modifyComposeRequest",value:function(e,t,r){var n={modifierId:t,composeParams:r};this.isUsingSyncAPI()?n.draftID=e:n.composeid=e,document.dispatchEvent(new CustomEvent("inboxSDKcomposeRequestModified",{detail:n,bubbles:!1,cancelable:!1}))}}]),t}(_.default);r.default=w},{"../../lib/common-page-communicator":847,"../../lib/dom/make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/helpers/slicedToArray":53,"@babel/runtime-corejs2/regenerator":59,kefir:327}],700:[function(e,t,r){"use strict";function n(e){var t=c(e).value,r=o(t),n=i(t)||r;if(!r||!n)throw new Error("Failed to read email response");return{threadID:n,messageID:r}}function o(e){var t=S(e,"a",function(e){return e.length>3&&(0,M.default)(e[3])&&e[3].length>0});return t?t[3][0]:null}function i(e){var t=S(e,"csd",function(e){return 3==e.length&&(0,M.default)(e[2])&&e[2].length>5});return t?t[1]:null}function a(e){
var t=c(e).value,r=S(t,"cs",function(e){return"cs"===e[0]&&e.length>20});return r?r[1]:null}function s(e){for(var t=0,r=[];;){var n=l(e,t);if(n<0){r.push(e.substr(t));break}if(r.push(e.substr(t,n-t)),r.push('"'),t=n+1,'"'===e[n]){var o=u(e,t,'"');if(o<0)throw new Error("Unclosed double quote");r.push(e.slice(t,o+1)),t=o+1}else{var i=u(e,t,"'");if(i<0)throw new Error("Unclosed single quote");var a=e.slice(t,i).replace(/"/g,'\\"').replace(/\\'/g,"'");r.push(a),r.push('"'),t=i+1}}return r.join("")}function l(e,t){for(var r=t,n=e.length;r<n;r++)if('"'===e[r]||"'"===e[r])return r;return-1}function u(e,t,r){for(var n=t,o=e.length;n<o;n++)if("\\"===e[n])n++;else if(e[n]===r)return n;return-1}function c(e){var t,r={includeLengths:!1,suggestionMode:/^5\n/.test(e),noArrayNewLines:!/^[,\]]/m.test(e),includeExplicitNulls:!0},n=[];if(r.suggestionMode){if(-1===(t=e.indexOf("'\n")))throw new Error("Message was missing beginning header");t+=2}else{if(-1===(t=e.indexOf("\n\n")))throw new Error("Message was missing beginning newlines");t+=2}for(;t<e.length;){var o=e.indexOf("\n",t+1);-1===o?o=e.length:"\r"===e[o-1]&&(o+=1);var i=e.slice(t,o),a=void 0;if(/^\d+\s*$/.test(i)){r.includeLengths=!0;var s=+i;a=e.slice(o,o+s),t=o+s}else a=e.slice(t),t=e.length;n.push(f(a))}return{value:n,options:r}}function d(e,t){for(var r,n=[],o=0,i=!1;-1!==(r=u(e,o,'"'));)i?n.push(e.slice(o,r+1)):n.push(t(e.slice(o,r+1))),o=r+1,i=!i;if(i)throw new Error("string ended inside quoted section");return n.push(t(e.slice(o))),n.join("")}function f(e){e=e.replace(/[\r\n\t]/g,""),e=s(e),e=d(e,function(e){return e.replace(/,\s*(?=,|\])/g,",null").replace(/\[\s*(?=,)/g,"[null")});try{return JSON.parse(e,function(e,t){return null==t?void 0:t})}catch(e){throw new Error("deserialization error")}}function p(e,t){return t.suggestionMode?((0,U.default)(t.includeLengths),h(e,t.includeExplicitNulls)):m(e,t)}function m(e,t){for(var r=t.includeLengths,n=t.noArrayNewLines,o=t.includeExplicitNulls,i=")]}'\n"+(n&&r?"":"\n"),a=0;a<e.length;a++){var s=e[a],l=b(s,n,o);if(r){var u=l.length+(n?2:1);i+=(n?"\n":"")+u+"\n"+l}else i+=l}if(!r)if(n)i=i.replace(/"([0-9a-f]{8,16})"\]$/,"'$1']");else{var c=i.split(/\r|\n/),d=c.slice(0,-3),f=c.slice(-3);i=d.join("\n"),i+="\n"+f[0]+f[1].replace(/"/g,"'")}return i+(n&&r?"\n":"")}function h(e,t){for(var r="5\n)]}'\n",n=0;n<e.length;n++){var o=e[n],i=b(o,!1,t);r+=i.length+"\r\n"+i}return r}function b(e,t,r){for(var n="[",o=0;o<e.length;o++){var i=e[o],a=void 0;a=(0,M.default)(i)?b(i,t,r):null==i?r?"null":"":(0,R.default)(i).replace(/</gim,"\\u003c").replace(/=/gim,"\\u003d").replace(/>/gim,"\\u003e").replace(/&/gim,"\\u0026"),o>0&&(n+=","),n+=a}return n+="]"+(t?"":"\n")}function v(e,t){var r=c(e).value,n=B.default.toArray(r,B.default.compose(B.default.cat,B.default.filter(M.default),B.default.cat,B.default.filter(function(e){return"ms"===e[0]&&e[1]===t}),B.default.take(1),B.default.map(function(e){return e[60]})))[0];if(n){var o=n.match(/^msg-[^:]:(\S+)$/i);return o&&o[1]}return null}function _(e,t,r){var n=r.start,o=r.total,i=c(e),a=i.value,s=i.options,l=1===a.length&&2===a[0].length&&"string"==typeof a[0][1],u=l?a[0][0].map(function(e){return[e]}):a,d=[],f=[],m=[],h=[],b=!1;u.forEach(function(e){var t=!1,r=[],n=[];e.forEach(function(e){if(o&&"ti"===e[0])if("number"==typeof o)e[2]=e[10]=o;else if("MANY"===o){e[2]=e[10]=1e5,e[3]=1;var i=e[5];e[6]?e[6][0]=[i,1]:console.error("replaceThreadsInResponse(): Missing item[6]")}"tb"===e[0]?(b=t=!0,r.length&&(m=r),h=n):b?n.push(e):r.push(e)}),t||(b?f.push(n):d.push(r))});var v=E(t,n);m.length&&(v[0]=m.concat(v[0]||[])),h.length&&(v.length?v[v.length-1]=v[v.length-1].concat(h):v.push(h));var _=(0,V.default)([d,v,f]),g=(0,V.default)(_),y=(0,N.default)(g);if("e"!==y[0])throw new Error("Failed to find end section");return y[1]=g.length,p(l?[[(0,V.default)(_),a[0][1]]]:_,s)}function g(e){return y(c(e).value)}function y(e){return 1===e.length&&2===e[0].length&&"string"==typeof e[0][1]&&(e=[e[0][0]]),k(e).map(function(e){return(0,O.default)((0,P.default)({subject:(0,F.default)(e[9]),shortDate:(0,F.default)(e[14]),timeString:(0,F.default)(e[15]),peopleHtml:j(e[7]),timestamp:e[16]/1e3,isUnread:e[9].indexOf("<b>")>-1,lastEmailAddress:e[28],bodyPreviewHtml:e[10],someGmailMessageIds:[e[1],e[2]],gmailThreadId:e[0]},"_originalGmailFormat",{value:e}))})}function w(e){var t=c(e),r=t.value;return B.default.toObj(r,H)}function j(e){return e.replace(/^[^<]*/,"").replace(/(<span[^>]*) class="[^"]*"/g,"$1")}function k(e){return B.default.toArray(e,z)}function x(e){var t=c(e),r=t.value;1===r.length&&(r=r[0]);var n=B.default.toArray(r,W),o=B.default.toArray(r,G),i={};return o.forEach(function(e){i[e.messageID]=e}),n.map(function(e){return{threadID:e.threadID,messages:e.messageIDs.map(function(e){return i[e]})}})}function E(e,t){var r=B.default.compose(B.default.map(function(e){return e._originalGmailFormat}),B.default.partition(10),(0,q.default)(function(e,r){return[["tb",t+10*r,e]]}));return B.default.toArray(e,r)}function S(e,t,r){for(var n=C(e,t,100),o=0;o<n.length;o++){var i=n[o].path.slice(0,-1),a=I(e,i);if(r(a))return a}}function C(e,t,r){for(var n=[],o={el:e,path:[]},i=[o];i.length>0;){var a=i.pop();if(a.path.length<=r)if(null!==a.el&&"object"===(0,D.default)(a.el))for(var s=(0,L.default)(a.el),l=0;l<s.length;l++){var u=s[l],c={el:a.el[u],path:a.path.concat([u])};i.push(c)}else a.el===t&&n.push(a)}return n}function I(e,t){for(var r=e,n=0;n<t.length;n++)r=r[t[n]];return r}var A=e("@babel/runtime-corejs2/core-js/object/define-property"),T=e("@babel/runtime-corejs2/helpers/interopRequireDefault");A(r,"__esModule",{value:!0}),r.interpretSentEmailResponse=n,r.extractGmailMessageIdFromSentEmail=o,r.extractGmailThreadIdFromSentEmail=i,r.extractGmailThreadIdFromMessageIdSearch=a,r.rewriteSingleQuotes=s,r.deserialize=c,r.deserializeArray=f,r.serialize=p,r.readDraftId=v,r.replaceThreadsInResponse=_,r.extractThreads=g,r.extractThreadsFromDeserialized=y,r.extractMessageIdsFromThreadBatchRequest=w,r.cleanupPeopleLine=j,r.extractMessages=x;var D=T(e("@babel/runtime-corejs2/helpers/typeof")),M=T(e("@babel/runtime-corejs2/core-js/array/is-array")),R=T(e("@babel/runtime-corejs2/core-js/json/stringify")),O=T(e("@babel/runtime-corejs2/core-js/object/freeze")),P=T(e("@babel/runtime-corejs2/core-js/object/define-property")),L=T(e("@babel/runtime-corejs2/core-js/object/keys")),V=T(e("lodash/flatten")),N=T(e("lodash/last")),B=T(e("transducers.js")),q=T(e("map-indexed-xf")),U=T(e("assert")),F=T(e("../../../common/html-to-text")),H=B.default.compose(B.default.cat,B.default.cat,B.default.filter(function(e){return"cs"===e[0]}),B.default.map(function(e){return[e[1],e[2]]})),z=B.default.compose(B.default.cat,B.default.filter(function(e){return"tb"===e[0]}),B.default.map(function(e){return e[2]}),B.default.cat),W=B.default.compose(B.default.cat,B.default.filter(function(e){return"cs"===e[0]}),B.default.map(function(e){return{threadID:e[1],messageIDs:e[8]}})),G=B.default.compose(B.default.cat,B.default.filter(function(e){return"ms"===e[0]}),B.default.map(function(e){return{messageID:e[1],date:e[7]}}))},{"../../../common/html-to-text":645,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,assert:85,"lodash/flatten":488,"lodash/last":511,"map-indexed-xf":533,"transducers.js":623}],701:[function(e,t,r){"use strict";function n(e,t){var r=u(e);if(c){var n=c(e);t&&(n=n.filter(function(t){return d(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,b.default)(e,t,r[t])}):f?p(e,f(r)):n(Object(r)).forEach(function(t){m(e,t,d(r,t))})}return e}function i(e){var t=JSON.parse(e),r=t&&t[3];return r?r.map(function(e,r){var n=e[1];return n?{subject:n[1],snippet:n[2],syncThreadID:n[4],oldGmailThreadID:null!=n[18]?new g.default(n[18]).toString(16):n[20],rawResponse:e,extraMetaData:{snippet:t[15]&&t[15][1]&&t[15][1][r]||"",syncMessageData:n[5].map(function(e){return{syncMessageID:e[1],oldMessageID:e[56],date:+e[7]}})}}:null}).filter(y.default):[]}function a(e){var t=JSON.parse(e),r=t&&t[2];if(!r)throw new Error("Failed to process thread response");return r.map(function(e){if("string"!=typeof e[1]||!(0,v.default)(e[3])||e[2]&&e[2][1]&&e[2][1][14]&&(0,v.default)(e[2][2])){var t=e[2]&&e[2][1];if(!t)return null;var r,n=(0,v.default)(e[3])&&e[3];if(n)r=n.map(function(e){return{syncMessageID:e[1],date:+e[2][17],recipients:s(e)}});else{r=(e[2]&&e[2][2]).map(function(e){return{syncMessageId:e[1],date:+e[16]}})}return{subject:t[2],snippet:t[3],syncThreadID:t[1],oldGmailThreadID:new g.default(t[14]).toString(16),rawResponse:e,extraMetaData:{syncMessageData:r,snippet:""}}}return{syncThreadID:e[1],oldGmailThreadID:e[2]&&e[2][1]&&e[2][1][16]||void 0,extraMetaData:{snippet:e[2]&&e[2][1]&&e[2][1][3]||void 0,syncMessageData:(e[3]||[]).filter(function(e){return Boolean(e[2])}).map(function(e){return{syncMessageID:e[1],date:+e[2][17],recipients:s(e)}})}}}).filter(y.default)}function s(e){if(e[2]){var t=e[2][1]||[],r=e[2][2]||[],n=e[2][3]||[];return t.concat(r).concat(n).map(function(e){return{emailAddress:e[2],name:e[3]}})}}function l(e,t,r){var n=JSON.parse(e);return(n[3]||t.length)&&(n[3]=t.map(function(e,t){return o(o({},e.rawResponse),{},{2:t})})),(n[15]||t.length)&&(n[15]=o(o({},n[15]),{},{1:t.map(function(e){return e.extraMetaData.snippet}),2:t.map(function(e){return e.extraMetaData.syncMessageData.map(function(e){return e.syncMessageID})})})),(0,_.default)(n)}var u=e("@babel/runtime-corejs2/core-js/object/keys"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),f=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),p=e("@babel/runtime-corejs2/core-js/object/define-properties"),m=e("@babel/runtime-corejs2/core-js/object/define-property"),h=e("@babel/runtime-corejs2/helpers/interopRequireDefault");m(r,"__esModule",{value:!0}),r.extractThreadsFromSearchResponse=i,r.extractThreadsFromThreadResponse=a,r.replaceThreadsInSearchResponse=l;var b=h(e("@babel/runtime-corejs2/helpers/defineProperty")),v=h(e("@babel/runtime-corejs2/core-js/array/is-array")),_=h(e("@babel/runtime-corejs2/core-js/json/stringify")),g=h(e("bignumber.js")),y=h(e("../../lib/isNotNil"))},{"../../lib/isNotNil":889,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"bignumber.js":99}],702:[function(e,t,r){"use strict";function n(){var e=new l.default,t=e.ajaxInterceptStream,r=(0,u.injectScript)().then(function(){return e});return{xhrInterceptStream:a.default.merge([t.filter(function(e){return"emailSending"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,s.parse)(e.body);return{type:"emailSending",composeId:t.composeid,draft:t.draft}}),t.filter(function(e){return"emailSent"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,s.parse)(e.originalSendBody),r=e.responseText;return{type:"emailSent",composeId:t.composeid,draft:t.draft,response:r}}),t.filter(function(e){return"emailDraftSaveSending"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,s.parse)(e.body);return{type:"emailDraftSaveSending",composeId:t.composeid,draft:t.draft}}),t.filter(function(e){return"emailDraftReceived"===e.type}).map(function(e){if(e.draftID)return e;var t=(0,s.parse)(e.originalSendBody),r=e.responseText;return{type:"emailDraftReceived",composeId:t.composeid,draft:t.draft,response:r,connectionDetails:e.connectionDetails}})]),pageCommunicatorPromise:r}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("kefir")),s=e("querystring"),l=i(e("./gmail-page-communicator")),u=e("../../lib/inject-script")},{"../../lib/inject-script":885,"./gmail-page-communicator":699,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,querystring:579}],703:[function(e,t,r){"use strict";function n(e,t){var r=a(e);if(s){var n=s(e);t&&(n=n.filter(function(t){return l(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,p.default)(e,t,r[t])}):u?c(e,u(r)):n(Object(r)).forEach(function(t){d(e,t,l(r,t))})}return e}function i(e,t){function r(e){return n?o(o({},e),{},{logError:function(e,t){var r={el:t,html:t?(0,v.default)(t):null};n.getLogger().errorSite(e,r)}}):e}var n=e,i=new m.default(t,r(b.default));return _.changes().onValue(function(e){console.log("replacing PageParserTree options"),i.replaceOptions(r(e))}),i}var a=e("@babel/runtime-corejs2/core-js/object/keys"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),c=e("@babel/runtime-corejs2/core-js/object/define-properties"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=i;var p=f(e("@babel/runtime-corejs2/helpers/defineProperty")),m=f(e("page-parser-tree")),h=f(e("ud-kefir")),b=f(e("./pageParserOptions")),v=f(e("../../../common/censorHTMLtree")),_=(0,h.default)(t,b.default)},{"../../../common/censorHTMLtree":637,"./pageParserOptions":704,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"page-parser-tree":543,"ud-kefir":624}],704:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var n={tags:{},watchers:[{sources:[null],tag:"composeLinkPopOverContainer",selectors:["body",".Lf.a5s"]}],finders:{supportMenu:{fn:function(e){return e.querySelectorAll("header[role=banner] div:not([aria-label]):not([data-ogsr-up]) > div:not(.inboxsdk__appButton) > div[data-tooltip] + div[role=menu]")}},composeLinkPopOverContainer:{fn:function(e){return e.querySelectorAll("body > .Lf.a5s")}}}},o=n;r.default=o},{"@babel/runtime-corejs2/core-js/object/define-property":12}],705:[function(e,t,r){(function(n){(function(){"use strict";var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/defineProperty")),u=e("ud"),c=i(e("ud-kefir")),d=i(e("kefir")),f=i(e("kefir-stopper")),p=i(e("./primary")),m=i(e("../../../../driver-common/sidebar/ContentPanelViewDriver")),h=(0,c.default)(t,null),b=function(){function e(t,r){var n=this;(0,a.default)(this,e),(0,l.default)(this,"_stopper",(0,f.default)()),(0,l.default)(this,"_driver",void 0),(0,l.default)(this,"_instanceId",void 0),this._driver=t;var o=r.getAttribute("data-sdk-sidebar-instance-id");if(null!=o)this._instanceId=o;else{var i=new p.default(t,r);this._instanceId=i.getInstanceId(),h.changes().onValue(function(){i.destroy(),i=new p.default(t,r),n._instanceId=i.getInstanceId()})}}return(0,s.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"_getShouldThreadAppSidebarOpen",value:function(){return"false"!==n.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")}},{key:"_setShouldThreadAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_getShouldGlobalAppSidebarOpen",value:function(){return"true"===n.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")}},{key:"_setShouldGlobalAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"addThreadSidebarContentPanel",value:function(e,t){var r=new m.default(this._driver,e,this._instanceId);return d.default.merge([t.getStopper(),this._stopper]).take(1).takeUntilBy(r.getStopper()).onValue(function(){return r.remove()}),r}},{key:"addGlobalSidebarContentPanel",value:function(e){var t=new m.default(this._driver,e,this._instanceId,!0);return this._stopper.takeUntilBy(t.getStopper()).onValue(function(){return t.remove()}),t}}]),e}(),v=(0,u.defn)(t,b);r.default=v}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../driver-common/sidebar/ContentPanelViewDriver":841,"./primary":709,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,ud:625,"ud-kefir":624}],706:[function(e,t,r){"use strict";function n(e,t,r){var n=r.querySelector(s);if(!n)return void e.error(new Error("addCompanionGlobalIconArea: no sidebarIconArea"));var o=n.firstElementChild;if(!o)return void e.error(new Error("addCompanionGlobalIconArea: no nativeIconArea"));o.insertAdjacentElement("beforebegin",t)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=e("ud"),s=(i(e("../../../../../lib/dom/querySelectorOrFail")),".brC-aT5-aOt-bsf-Jw"),l=(0,a.defn)(t,n);r.default=l},{"../../../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,ud:625}],707:[function(e,t,r){"use strict";function n(e,t,r){var n=r.querySelector(s);if(!n)return void e.error(new Error("addCompanionThreadIconArea: no tablist"));var o=r.querySelector("[role=separator]");if(o){if(!o.parentElement)throw new Error;o.parentElement.insertBefore(t,o.nextElementSibling)}else e.error(new Error("addCompanionThreadIconArea: failed to find separator")),n.insertAdjacentElement("beforebegin",t)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=e("ud"),s=(i(e("kefir")),i(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),i(e("../../../../../lib/dom/querySelectorOrFail")),"[role=tablist],.J-KU-Jg"),l=(0,a.defn)(t,n);r.default=l},{"../../../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,ud:625}],708:[function(e,t,r){"use strict";function n(e,t,r,n){(0,a.default)(n.querySelectorAll("[data-app-name]")).forEach(function(t){var r=t.getAttribute("data-app-name"),n=(0,l.default)(e.getOrderedItems(),function(e){return e.value.appName===r});t.setAttribute("data-order-hint",n)});var o=(0,l.default)(e.getOrderedItems(),function(e){return e.value.appName===t});o>-1&&r.setAttribute("data-order-hint",o),(0,u.default)(n,r,["data-order-hint"])}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/helpers/toConsumableArray")),s=e("ud"),l=i(e("lodash/findIndex")),u=i(e("../../../../../lib/dom/insert-element-in-order")),c=(0,s.defn)(t,n);r.default=c},{"../../../../../lib/dom/insert-element-in-order":856,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56,"lodash/findIndex":485,ud:625}],709:[function(e,t,r){(function(n){(function(){"use strict";var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a,s=i(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),l=i(e("@babel/runtime-corejs2/core-js/date/now")),u=i(e("@babel/runtime-corejs2/core-js/map")),c=i(e("@babel/runtime-corejs2/core-js/set")),d=i(e("@babel/runtime-corejs2/core-js/json/stringify")),f=i(e("@babel/runtime-corejs2/core-js/array/from")),p=i(e("@babel/runtime-corejs2/core-js/promise")),m=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),h=i(e("@babel/runtime-corejs2/helpers/createClass")),b=i(e("@babel/runtime-corejs2/helpers/defineProperty")),v=(i(e("lodash/find")),i(e("lodash/findIndex"))),_=e("ud"),g=i(e("auto-html")),y=i(e("asap")),w=i(e("kefir")),j=i(e("kefir-bus")),k=i(e("kefir-stopper")),x=i(e("order-manager")),E=i(e("react")),S=i(e("react-dom")),C=i(e("../../../../../driver-common/sidebar/AppSidebar")),I=i(e("../../../gmail-element-getter")),A=i(e("../../../../../lib/idMap")),T=i(e("../../../../../lib/incrementName")),D=i(e("../../../../../lib/dom/querySelectorOrFail")),M=i(e("../../../../../lib/dom/make-mutation-observer-chunked-stream")),R=(i(e("../../../../../lib/dom/make-element-child-stream")),e("../../../../../lib/dom/simulate-mouse-event")),O=i(e("../../../../../lib/fake-window-resize")),P=i(e("./add-companion-thread-icon-area")),L=i(e("./add-companion-global-icon-area")),V=i(e("./add-to-icon-area")),N=function(){function e(t,r){var o=this;(0,m.default)(this,e),(0,b.default)(this,"_stopper",(0,k.default)()),(0,b.default)(this,"_driver",void 0),(0,b.default)(this,"_instanceId","".concat((0,l.default)(),"-").concat(Math.random())),(0,b.default)(this,"_companionSidebarContentContainerEl",void 0),(0,b.default)(this,"_instanceIdsToDescriptors",new u.default),(0,b.default)(this,"_threadSidebarComponent",null),(0,b.default)(this,"_threadIconArea",null),(0,b.default)(this,"_globalIconArea",null),(0,b.default)(this,"_globalButtonContainers",new u.default),(0,b.default)(this,"_threadButtonContainers",new u.default),(0,b.default)(this,"_contentContainers",new u.default),(0,b.default)(this,"_threadSidebarContainerEl",null),(0,b.default)(this,"_companionSidebarOuterWrapper",void 0),(0,b.default)(this,"_currentIds",new c.default),(0,b.default)(this,"_orderManager",new x.default({get:function(){try{return JSON.parse(n.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set:function(e){try{n.localStorage.setItem("inboxsdk__sidebar_ordering",(0,d.default)(e))}catch(e){console.error("failed to set sidebar order data",e)}}})),(0,b.default)(this,"_containerProp",void 0),(0,b.default)(this,"_updateHighlightedAppThreadIconBus",(0,j.default)()),(0,b.default)(this,"_appSidebarRefSetter",function(e){e&&(o._threadSidebarComponent=e)}),(0,b.default)(this,"_closeButton",null),this._driver=t,this._companionSidebarContentContainerEl=r,this._setupElement()}return(0,h.default)(e,[{key:"getInstanceId",value:function(){return this._instanceId}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"_getShouldGlobalAppSidebarOpen",value:function(){return"true"===n.localStorage.getItem("inboxsdk__global_app_sidebar_should_open")}},{key:"_setShouldGlobalAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__global_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_getShouldThreadAppSidebarOpen",value:function(){return"false"!==n.localStorage.getItem("inboxsdk__thread_app_sidebar_should_open")}},{key:"_setShouldThreadAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__thread_app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_createThreadSidebarIfNeeded",value:function(){var e=this;if(this._threadSidebarContainerEl)return this._threadSidebarContainerEl;var t=this._threadSidebarContainerEl=document.createElement("div");return t.classList.add("thread_app_sidebar",(0,A.default)("app_sidebar_container"),"addon_sidebar"),this._companionSidebarContentContainerEl.insertBefore(t,this._companionSidebarContentContainerEl.firstElementChild),this._containerProp=function(){return t},this._updateHighlightedAppThreadIconBus.bufferWithTimeOrCount(150,100).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(function(){var r=t.getBoundingClientRect(),n=(0,f.default)(t.querySelectorAll(".".concat((0,A.default)("app_sidebar_content_panel"),".").concat((0,A.default)("expanded")," .").concat((0,A.default)("app_sidebar_content_panel_top_line")))),o=t.scrollTop,i=o+r.height/2,a=n.find(function(e){var t=e.getBoundingClientRect(),r=t.bottom,n=r+o;return n>o&&n<i});if(!a){for(var s,l=0;l<n.length;l++){var u=n[l],c=u.getBoundingClientRect(),d=c.bottom;if(d<0)s=u;else if(d>0)break}a=s}if(a){var p=(a.getAttribute("data-instance-id"),a.getAttribute("data-app-name"));if(!p)return;var m=e._threadButtonContainers.get(p);if(!m||!e._threadIconArea)return;var h=e._threadIconArea.querySelector(".sidebar_button_container_active");h&&h.classList.remove("sidebar_button_container_active"),m.classList.add("sidebar_button_container_active")}}),this._updateHighlightedAppThreadIconBus.plug(w.default.fromEvents(t,"scroll").map(function(){return null})),this._renderThreadSidebar(),t}},{key:"_renderThreadSidebarIfPresent",value:function(){this._threadSidebarContainerEl&&this._renderThreadSidebar()}},{key:"_renderThreadSidebar",value:function(){var e=this,t=this._threadSidebarContainerEl;if(!t)throw new Error("_renderThreadSidebar should not be called when _threadSidebarContainerEl is unset");return new p.default(function(r){S.default.render(E.default.createElement(C.default,{ref:e._appSidebarRefSetter,panels:e._orderManager.getOrderedItems().map(function(e){return e.value}),onMoveEnd:function(t,r,n,o){e._orderManager.moveItem(n,o),e._renderThreadSidebar()},onExpandedToggle:function(){e._updateHighlightedAppThreadIconBus.emit(null)},container:e._containerProp}),t,function(){if(!e._threadSidebarComponent)throw new Error("Should not happen");r(e._threadSidebarComponent),e._updateHighlightedAppThreadIconBus.emit(null)})})}},{key:"_getActiveButtonContainer",value:function(){var e;return this._globalIconArea&&(e=this._globalIconArea.querySelector(".sidebar_button_container_active")),!e&&this._threadIconArea&&(e=this._threadIconArea.querySelector(".sidebar_button_container_active")),e}},{key:"_addButton",value:function(e,t,r){var n=this;(0,y.default)(function(){if(!e)throw new Error("should not happen");var o,i=t.detail.instanceId,l=r&&t.detail.iconUrl?t.detail.iconUrl:t.detail.appIconUrl,u=t.detail.appName,c=t.detail.iconClass||"",d=r?n._globalButtonContainers.get(u):n._threadButtonContainers.get(u);if(d){var f=Number(d.getAttribute("data-count"))||1;d.setAttribute("data-count",String(f+1)),o=d}else{o=document.createElement("div"),o.className=(0,A.default)("sidebar_button_container"),o.setAttribute("data-app-name",u),o.innerHTML=(0,g.default)(a||(a=(0,s.default)(['\n          <button class="inboxsdk__button_icon ','" type="button" data-tooltip="','">\n            <img class="inboxsdk__button_iconImg" src="','">\n          </button>\n          <div class="inboxsdk__button_selectedIndicator"></div>\n        '])),c,u,l),t.detail.primaryColor&&((0,D.default)(o,".inboxsdk__button_selectedIndicator").style.backgroundColor=t.detail.primaryColor),r?n._globalButtonContainers.set(u,o):n._threadButtonContainers.set(u,o);var p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n._getActiveButtonContainer()===o){if(!n._closeButton)throw new Error;n._closeButton(!0)}else{if(n._closeButton&&n._closeButton(!0),r?n._setShouldGlobalAppSidebarOpen(!0):n._setShouldThreadAppSidebarOpen(!0),n._openSidebarAndActivateButton(o,r),r){var t=n._contentContainers.get(u);t&&(t.style.display=""),n._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible"),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:i}}))}else{var a=n._threadSidebarComponent;if(!a)throw new Error("sidebar not mounted");e||(a.openPanel(i),a.scrollPanelIntoView(i,!0))}n._closeButton=function(e){n._closeButton=null;var t=n._getActiveButtonContainer();if(!t)throw new Error("Expected activeButtonContainer");if(n._closeSidebarAndDeactivateButton(t),r){e&&n._setShouldGlobalAppSidebarOpen(!1);var o=n._contentContainers.get(u);o?o.style.display="none":n._driver.getLogger().error(new Error("Unexpected: contentEl not set")),document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:i}}))}else e&&n._setShouldThreadAppSidebarOpen(!1);(0,O.default)()},(0,O.default)()}};(0,D.default)(o,"button").addEventListener("click",function(e){e.stopPropagation(),p()},!0),e&&(0,V.default)(n._orderManager,u,o,e);var m=n._getActiveButtonContainer();if(r){if(n._getShouldGlobalAppSidebarOpen()){var h=n._globalIconArea&&m&&n._globalIconArea.contains(m);h||p(!0)}}else if(n._getShouldThreadAppSidebarOpen()){var b=n._threadIconArea&&m&&n._threadIconArea.contains(m);b||p(!0)}}})}},{key:"_removeButton",value:function(e,t,r){var n=e.detail.appName,o=t.get(n);if(!r||!o)throw new Error("should not happen: tried to remove button without container or iconArea");var i=Number(o.getAttribute("data-count"));if(i<=1){if(o===r.querySelector(".sidebar_button_container_active")){if(!this._closeButton)throw new Error;this._closeButton(!1),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible");var a=this._companionSidebarOuterWrapper.previousElementSibling;a&&a.classList.remove("companion_container_app_sidebar_visible")}o.remove(),t.delete(n)}else 2===i?o.removeAttribute("data-count"):o.setAttribute("data-count",String(i-1))}},{key:"_closeSidebarAndDeactivateButton",value:function(e){e.classList.remove("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.remove("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add("brC-brG-btc"),this._companionSidebarContentContainerEl.classList.remove("companion_app_sidebar_visible","companion_global_app_sidebar_visible");var t=this._companionSidebarOuterWrapper.previousElementSibling;t&&t.classList.remove("companion_container_app_sidebar_visible")}},{key:"_openSidebarAndActivateButton",value:function(e,t){var r=I.default.getCompanionSidebarIconContainerElement();if(!r)throw new Error("Could not find companion sidebar icon container element")
;if(this._getActiveButtonContainer())throw new Error("activeButtonContainer should not be true");var n=r.querySelector(".aT5-aOt-I-KO");n&&(0,R.simulateClick)(n),e.classList.add("sidebar_button_container_active"),this._companionSidebarOuterWrapper.classList.add("companion_app_sidebar_wrapper_visible"),this._companionSidebarContentContainerEl.classList.add("companion_app_sidebar_visible"),this._companionSidebarContentContainerEl.classList.remove("brC-brG-btc");var o=this._companionSidebarOuterWrapper.previousElementSibling;o&&o.classList.add("companion_container_app_sidebar_visible"),t&&this._companionSidebarContentContainerEl.classList.add("companion_global_app_sidebar_visible")}},{key:"_setupElement",value:function(){var e=this,t=I.default.getCompanionSidebarIconContainerElement();if(!t)throw new Error("Could not find companion sidebar icon container element");if(this._companionSidebarContentContainerEl.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._companionSidebarOuterWrapper=this._companionSidebarContentContainerEl.classList.contains("bq9")?this._companionSidebarContentContainerEl:this._companionSidebarContentContainerEl.parentElement,!this._companionSidebarOuterWrapper)throw new Error("should not happen: failed to find companionSidebarOuterWrapper");var r=this._companionSidebarOuterWrapper.previousElementSibling;if(r&&r.classList.add((0,A.default)("companion_container_app_sidebar_in_use")),this._companionSidebarContentContainerEl.classList.add((0,A.default)("app_sidebar_in_use")),!document.body.querySelector("."+(0,A.default)("app_sidebar_waiting_platform"))){var n=document.createElement("div");n.className=(0,A.default)("app_sidebar_waiting_platform"),document.body.appendChild(n)}w.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_ordering"===e.key}).takeUntilBy(this._stopper).onValue(function(){e._orderManager.reload(),e._renderThreadSidebarIfPresent()}),w.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(r){e._createThreadSidebarIfNeeded();for(var n=r.detail.id;e._currentIds.has(n);)n=(0,T.default)(n);e._currentIds.add(n);var o=r.detail.appName;e._orderManager.addItem({groupId:r.detail.appId,id:n,orderHint:r.detail.orderHint,value:{id:n,appName:o,appId:r.detail.appId,instanceId:r.detail.instanceId,title:r.detail.title,iconClass:r.detail.iconClass,iconUrl:r.detail.iconUrl,hideTitleBar:r.detail.hideTitleBar,el:r.target}}),e._renderThreadSidebar();var i=e._threadIconArea=t.querySelector(".sidebar_thread_iconArea");i||(i=e._threadIconArea=document.createElement("div"),i.className=(0,A.default)("sidebar_iconArea"),i.classList.add("sidebar_thread_iconArea"),(0,P.default)(e._driver.getLogger(),i,t)),e._addButton(i,r,!1)}),w.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._orderManager.getOrderedItems(),n=(0,v.default)(r,function(e){return e.value.instanceId===t.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");e._orderManager.updateItemValueByIndex(n,{id:r[n].value.id,appId:t.detail.appId,appName:t.detail.appName||t.detail.title,instanceId:t.detail.instanceId,title:t.detail.title,iconClass:t.detail.iconClass,iconUrl:t.detail.iconUrl,hideTitleBar:t.detail.hideTitleBar,el:t.target}),e._renderThreadSidebar()}),w.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._orderManager.getOrderedItems(),n=(0,v.default)(r,function(e){return e.value.instanceId===t.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");e._currentIds.delete(r[n].id),e._orderManager.removeItemByIndex(n),e._renderThreadSidebar(),e._removeButton(t,e._threadButtonContainers,e._threadIconArea)}),w.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._threadSidebarComponent&&e._threadSidebarComponent.scrollPanelIntoView(t.detail.instanceId)}),w.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._threadSidebarComponent&&e._threadSidebarComponent.closePanel(t.detail.instanceId)}),w.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter(function(t){return t.detail.sidebarId===e._instanceId&&!t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._renderThreadSidebar().then(function(r){var n=e._instanceIdsToDescriptors.get(t.detail.instanceId);if(n){var o=e._threadButtonContainers.get(n.appName);if(!o)throw new Error("missing button container");e._getActiveButtonContainer()!==o&&(0,D.default)(o,"button").click()}})}),w.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(r){for(var n=r.detail.id;e._currentIds.has(n);)n=(0,T.default)(n);e._currentIds.add(n);var o=r.detail.appName,i=e._globalIconArea=t.querySelector(".sidebar_global_iconArea");i||(i=e._globalIconArea=document.createElement("div"),i.className=(0,A.default)("sidebar_iconArea"),i.classList.add("sidebar_global_iconArea"),(0,L.default)(e._driver.getLogger(),i,t));var a=document.createElement("div");a.classList.add("addon_sidebar",(0,A.default)("app_sidebar_container"),"global_app_sidebar"),e._companionSidebarContentContainerEl.insertAdjacentElement("afterbegin",a),e._contentContainers.set(o,a),a.appendChild(r.target),a.style.display="none",e._addButton(i,r,!0)}),w.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._globalButtonContainers.get(t.detail.appName);if(r){var n=t.detail.iconClass||"",o=t.detail.iconUrl||t.detail.appIconUrl;(0,D.default)(r,"img").setAttribute("src",o);(0,D.default)(r,"button").setAttribute("class","inboxsdk__button_icon ".concat(n))}}),w.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){e._currentIds.delete(t.detail.id),e._removeButton(t,e._globalButtonContainers,e._globalIconArea)}),w.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._instanceIdsToDescriptors.get(t.detail.instanceId);if(r){var n=e._globalButtonContainers.get(r.appName);if(n){if(e._getActiveButtonContainer()===n){if(!e._closeButton)throw new Error("Expected this._closeButton");e._closeButton(!0)}}}}),w.default.fromEvents(document.body,"inboxsdkSidebarPanelOpen").filter(function(t){return t.detail.sidebarId===e._instanceId&&t.detail.isGlobal}).takeUntilBy(this._stopper).onValue(function(t){var r=e._instanceIdsToDescriptors.get(t.detail.instanceId);if(r){var n=e._globalButtonContainers.get(r.appName);if(n){e._getActiveButtonContainer()!==n&&(0,D.default)(n,"button").click()}}}),w.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId}).takeUntilBy(this._stopper).onValue(function(t){e._instanceIdsToDescriptors.set(t.detail.instanceId,t.detail)}),w.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId}).takeUntilBy(this._stopper).onValue(function(t){e._instanceIdsToDescriptors.delete(t.detail.instanceId)}),w.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(t){return t.detail.sidebarId===e._instanceId}).takeUntilBy(this._stopper).onValue(function(t){e._instanceIdsToDescriptors.set(t.detail.instanceId,t.detail)});var o=this._companionSidebarContentContainerEl.children[0],i=this._companionSidebarContentContainerEl.children[1];w.default.merge([o,i].map(function(e){return(0,M.default)(e,{attributes:!0,attributeFilter:["style"]})})).filter(function(){return o.style.display!==i.style.display}).takeUntilBy(this._stopper).onValue(function(){var t=e._getActiveButtonContainer();t&&(0,D.default)(t,"button").click()})}}]),e}(),B=(0,_.defn)(t,N);r.default=B}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../../driver-common/sidebar/AppSidebar":840,"../../../../../lib/dom/make-element-child-stream":859,"../../../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../../../lib/dom/querySelectorOrFail":868,"../../../../../lib/dom/simulate-mouse-event":874,"../../../../../lib/fake-window-resize":877,"../../../../../lib/idMap":882,"../../../../../lib/incrementName":884,"../../../gmail-element-getter":696,"./add-companion-global-icon-area":706,"./add-companion-thread-icon-area":707,"./add-to-icon-area":708,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,asap:83,"auto-html":89,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/find":484,"lodash/findIndex":485,"order-manager":537,react:606,"react-dom":584,ud:625}],710:[function(e,t,r){"use strict";function n(e,t){var r=document.createElement("div");r.setAttribute("class","inboxsdk__appButton"),r.innerHTML='<a href="#">\n               <span class="inboxsdk__appButton_title"></span>\n             </a>',r.addEventListener("click",function(e){e.preventDefault(),t(e)});var n=m.default.getTopAccountContainer();if(!n){var o=new Error("Could not make button"),i=document.querySelector("[role=banner]");throw e.getLogger().error(o,{type:"failed to make appToolbarButton",gbsfwPresent:!!document.getElementById("gbsfw"),bannerHtml:i&&(0,d.default)(i)}),o}var a=n;if(!a){var s=new Error("Could not make button");throw e.getLogger().error(s,{type:"failed to make appToolbarButton",topAccountContainerHTML:(0,d.default)(n)}),s}try{return m.default.isGplusEnabled()||r.classList.add("inboxsdk__appButton_noGPlus"),a.insertBefore(r,a.lastElementChild),r}catch(o){throw e.getLogger().error(o,{type:"failed to make appToolbarButton",insertionElementHTML:(0,d.default)(a)}),o}}function o(e,t){e.textContent=t.title,e.className="inboxsdk__appButton_title ".concat(t.titleClass||"")}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=a(e("@babel/runtime-corejs2/helpers/createClass")),u=a(e("@babel/runtime-corejs2/helpers/defineProperty")),c=a(e("../../../lib/dom/querySelectorOrFail")),d=a(e("../../../../common/censorHTMLtree")),f=(a(e("kefir")),a(e("kefir-stopper"))),p=a(e("../../../driver-common/update-icon")),m=a(e("../gmail-element-getter")),h=a(e("../widgets/gmail-tooltip-view")),b=a(e("../../../widgets/buttons/dropdown-view")),v=a(e("./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react")),_=function(){function e(t,r){var n=this;(0,s.default)(this,e),(0,u.default)(this,"_stopper",void 0),(0,u.default)(this,"_iconSettings",void 0),(0,u.default)(this,"_element",null),(0,u.default)(this,"_activeDropdown",void 0),(0,u.default)(this,"_buttonDescriptor",void 0),(0,u.default)(this,"_driver",void 0),this._driver=t,this._stopper=(0,f.default)(),this._iconSettings={},r.takeUntilBy(this._stopper).onValue(function(e){try{n._handleButtonDescriptor(e)}catch(e){n._driver.getLogger().error(e)}}),(0,v.default)()}return(0,l.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._element&&this._element.remove(),this._activeDropdown&&this._activeDropdown.close()}},{key:"getStopper",value:function(){return this._stopper}},{key:"getElement",value:function(){return this._element}},{key:"open",value:function(){try{this._activeDropdown||this._handleClick()}catch(e){this._driver.getLogger().error(e)}}},{key:"close",value:function(){try{this._activeDropdown&&this._handleClick()}catch(e){this._driver.getLogger().error(e)}}},{key:"_handleButtonDescriptor",value:function(e){var t=this;if(!e)throw new Error("The application passed an invalid value for buttonDescriptor");var r=this._element=this._element||n(this._driver,function(){t._handleClick()});this._buttonDescriptor=e,(0,p.default)(this._iconSettings,(0,c.default)(r,"a"),!1,e.iconClass,e.iconUrl),o((0,c.default)(r,"span"),e)}},{key:"_handleClick",value:function(){var e=this,t=this._element;if(t){var r=this._buttonDescriptor;if(!r)throw new Error("app toolbar button clicked before receiving button descriptor");if(this._activeDropdown)this._activeDropdown.close();else{var n={},o=new h.default;o.getContainerElement().classList.add("inboxsdk__appButton_tooltip"),o.getContentElement().innerHTML="",r.arrowColor&&((0,c.default)(o.getContainerElement(),".T-P-atC").style.borderTopColor=r.arrowColor),n.dropdown=this._activeDropdown=new b.default(o,t,{manualPosition:!0}),n.dropdown.on("destroy",function(){e._activeDropdown=null}),r.onClick&&r.onClick.call(null,n),this._element&&o.anchor(this._element,{position:"bottom",offset:{top:8}})}}}}]),e}();r.default=_},{"../../../../common/censorHTMLtree":637,"../../../driver-common/update-icon":842,"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/dropdown-view":941,"../gmail-element-getter":696,"../widgets/gmail-tooltip-view":774,"./gmail-app-toolbar-button-view/monitor-top-banner-size-and-react":711,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326}],711:[function(e,t,r){(function(t){(function(){"use strict";function n(){var e=t.ResizeObserver;if(e){var r=document.body;if(r){var n=r.querySelector("[role=banner]");if(n&&!n.hasAttribute("inboxsdk__resize_claimed")){n.setAttribute("inboxsdk__resize_claimed","true");new e(function(){n.clientWidth<o?r.classList.add("inboxsdk__searchIsNarrow"):r.classList.remove("inboxsdk__searchIsNarrow")}).observe(n)}}}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=900}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"@babel/runtime-corejs2/core-js/object/define-property":12}],712:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/weak-map")),a=o(e("@babel/runtime-corejs2/core-js/array/from")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/defineProperty")),c=e("ud"),d=o(e("./gmail-attachment-card-view")),f=o(e("../widgets/buttons/button-view")),p=o(e("../../../lib/dom/querySelectorOrFail")),m=o(e("../../../widgets/buttons/basic-button-view-controller")),h=(0,c.defn)(t,function(){function e(t,r,n){(0,s.default)(this,e),(0,u.default)(this,"_element",void 0),(0,u.default)(this,"_messageViewDriver",void 0),(0,u.default)(this,"_driver",void 0),(0,u.default)(this,"_elsToCardViews",void 0),this._driver=r,this._messageViewDriver=n,this._elsToCardViews=new i.default,t?this._element=t:this._setupElement()}return(0,l.default)(e,[{key:"destroy",value:function(){this.getAttachmentCardViews().forEach(function(e){e.destroy()})}},{key:"getElement",value:function(){return this._element}},{key:"getAttachmentCardViews",value:function(){var e=this,t=this._element.querySelectorAll(".aQH > span");return(0,a.default)(t).map(function(t){var r=e._elsToCardViews.get(t);return r||(r=new d.default({element:t},e._driver,e._messageViewDriver),e._elsToCardViews.set(t,r)),r})}},{key:"_setupElement",value:function(){this._element=document.createElement("div"),this._element.setAttribute("class","hq gt a10"),this._element.innerHTML=['<div class="hp"></div>','<div class="a3I">Attachments area</div>',"<div></div>",'<div class="aQH">','<div class="aZK"></div>',"</div>"].join("")}},{key:"_createAreaToolbarIfNeeded",value:function(){var e=this._element.querySelector(".ho");if(e)return e;var t=document.createElement("div");return t.className="ho",t.innerHTML='<span class="aVW"><span>'.concat(this.getAttachmentCardViews().length,'</span> Attachments</span><div class="aZi J-J5-Ji"></div>'),this._element.insertBefore(t,this._element.lastElementChild),this._element.classList.remove("a10"),t}},{key:"_updateToolbarCardCount",value:function(){var e=this.getAttachmentCardViews().length;if(e>1){var t=this._createAreaToolbarIfNeeded();(0,p.default)(t,".aVW > span").textContent=String(e)}}},{key:"addGmailAttachmentCardView",value:function(e){var t=this._element.querySelector(".aXK, .aQH");if(!t)return void this._driver.getLogger().error(new Error("Could not find attachment zone"));t.insertBefore(e.getElement(),t.lastElementChild),this._updateToolbarCardCount()}},{key:"addButtonToDownloadAllArea",value:function(e){var t=new f.default({iconClass:"T-I-J3",iconUrl:e.iconUrl,tooltip:e.tooltip,hasButtonToLeft:!0});t.addClass("aZj"),t.getElement().children[0].className="asa";var r=(new m.default({activateFunction:function(){e.onClick&&e.onClick()},buttonView:t}),this._createAreaToolbarIfNeeded());(0,p.default)(r,".aZi").appendChild(t.getElement())}}]),e}()),b=h;r.default=b},{"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/basic-button-view-controller":939,"../widgets/buttons/button-view":762,"./gmail-attachment-card-view":713,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,ud:625}],713:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i,a,s,l,u=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),c=o(e("@babel/runtime-corejs2/regenerator")),d=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),f=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=o(e("@babel/runtime-corejs2/helpers/createClass")),m=o(e("@babel/runtime-corejs2/helpers/defineProperty")),h=o(e("lodash/find")),b=o(e("kefir")),v=o(e("kefir-stopper")),_=(o(e("util")),o(e("auto-html"))),g=e("ud"),y=o(e("../../../lib/from-event-target-capture")),w=o(e("../../../lib/dom/querySelectorOrFail")),j=o(e("../widgets/buttons/button-view")),k=o(e("../../../widgets/buttons/basic-button-view-controller")),x=e("../../../lib/dom/simulate-mouse-event"),E=o(e("../../../lib/wait-for")),S=(o(e("../../../lib/stream-wait-for")),function(){function e(t,r,n){(0,f.default)(this,e),(0,m.default)(this,"_element",void 0),(0,m.default)(this,"_driver",void 0),(0,m.default)(this,"_messageViewDriver",void 0),(0,m.default)(this,"_cachedType",void 0),(0,m.default)(this,"_stopper",(0,v.default)()),(0,m.default)(this,"_previewClicks",b.default.pool()),this._driver=r,this._messageViewDriver=n,t.element?this._element=t.element:this._createNewElement(t)}return(0,p.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getElement",value:function(){return this._element}},{key:"getMessageViewDriver",value:function(){return this._messageViewDriver}},{key:"getStopper",value:function(){return this._stopper}},{key:"getPreviewClicks",value:function(){return this._previewClicks.takeUntilBy(this._stopper)}},{key:"_isStandardAttachment",value:function(){return"FILE"===this.getAttachmentType()}},{key:"getAttachmentType",value:function(){if(this._cachedType)return this._cachedType;var e=this._readAttachmentType();return"UNLOADED"!==e&&(this._cachedType=e),e}},{key:"_readAttachmentType",value:function(){if(this._element.classList.contains("inboxsdk__attachmentCard"))return"CUSTOM";if(1===this._element.children.length&&0===this._element.children[0].children.length)return"UNLOADED";var e=this._getDownloadLink();return!e||e.match(/^https?:\/\/mail\.google\.com\//)?"FILE":e.match(/^https?:\/\/([^/]*\.)?google(usercontent)?\.com\//)?"DRIVE":"UNKNOWN"}},{key:"addButton",value:function(e){var t=this,r=new j.default({iconUrl:e.iconUrl,tooltip:e.tooltip});new k.default({activateFunction:function(){e.onClick&&e.onClick({getDownloadURL:function(){return t.getDownloadURL()}})},buttonView:r});this._addButton(r)}},{key:"getTitle",value:function(){var e=this._element.querySelector("span .aV3");return e?e.textContent:""}},{key:"_getDownloadLink",value:function(){var e=this._element.firstElementChild;if(!e)throw new Error("Failed to find link");if("A"===e.tagName&&e.href){var t=e.href;return t?t.replace(/([?&])disp=inline(?=&|$)/,"$1disp=safe"):t}var r=this._element.getAttribute("download_url");if(r){var n=/:(https:\/\/[^:]+)/.exec(r);return n?n[1]:null}}},{key:"getDownloadURL",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,r,n,o,i=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this._isStandardAttachment()){e.next=19;break}return e.next=4,(0,E.default)(function(){return i._getDownloadLink()});case 4:if(t=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,this._driver.resolveUrlRedirects(t);case 9:if(r=e.sent,/^https:\/\/mail-attachment\.googleusercontent\.com\/attachment\//.test(r)){e.next=16;break}if(console.error("getDownloadURL returned unexpected url",r),n=new Error("getDownloadURL returned unexpected url"),this._driver.getLogger().error(n,{finalUrlCensored:r.replace(/\?[^/]+$/,"?[...]")}),!/^https:\/\/mail\.google\.com\//.test(r)){e.next=16;break}throw n;case 16:return e.abrupt("return",r);case 19:return o=this._element.querySelector("[data-inboxsdk-download-url]"),e.abrupt("return",o?o.getAttribute("data-inboxsdk-download-url"):null);case 21:e.next=27;break;case 23:throw e.prev=23,e.t0=e.catch(0),this._driver.getLogger().error(e.t0),e.t0;case 27:case"end":return e.stop()}},e,this,[[0,23]])}));return e}()},{key:"_extractFileNameFromElement",value:function(){return(0,w.default)(this._element,".aQA > span").textContent}},{key:"_createNewElement",value:function(e){this._element=document.createElement("span"),this._element.classList.add("aZo"),this._element.classList.add("inboxsdk__attachmentCard");var t=[(0,_.default)(i||(i=(0,u.default)(['\n\t\t\t<a target="_blank" role="link" class="aQy e" href="">\n\t\t\t\t<div aria-hidden="true">\n\t\t\t\t\t<div class="aSG"></div>\n\t\t\t\t\t<div class="aVY aZn">\n\t\t\t\t\t\t<div class="aZm"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="aSH">'])))];if(t=e.iconThumbnailUrl?t.concat([(0,_.default)(a||(a=(0,u.default)(['\n\t\t\t\t<div class="aYv">\n\t\t\t\t\t<img class="aZG aYw" src="','">\n\t\t\t\t</div>'])),e.iconThumbnailUrl)]):t.concat([(0,_.default)(s||(s=(0,u.default)(['\n\t\t\t\t<img class="aQG aYB inboxsdk__attachmentCard_previewThumbnailUrl"\n\t\t\t\t\tsrc="','">'])),e.previewThumbnailUrl)]),t=t.concat([(0,_.default)(l||(l=(0,u.default)(['\n\t\t\t<div class="aYy">\n\t\t\t\t<div class="aYA">\n\t\t\t\t\t<img class="aSM" src="','">\n\t\t\t\t</div>\n\t\t\t\t<div class="aYz">\n\t\t\t\t\t<div class="a12">\n\t\t\t\t\t\t<div class="aQA">\n\t\t\t\t\t\t\t<span class="aV3 a6U"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="aYp">\n\t\t\t\t\t\t\t<span class="SaH2Ve"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="aSI">\n\t\t\t<div class="aSJ"></div>\n\t\t</div>\n\t</div>\n</a>\n<div class="aQw"></div>'])),e.fileIconImageUrl)]),this._element.innerHTML=t.join(""),this._element.children[0].href=e.previewUrl,e.mimeType&&"image"===e.mimeType.split("/")[0]&&this._element.children[0].classList.add("aZI"),(0,w.default)(this._element,"span .aV3").textContent=e.title,(0,w.default)(this._element,"div.aYp > span").textContent=e.description||"",(0,w.default)(this._element,"div.aSJ").style.borderColor=e.foldColor,this._addHoverEvents(),e.buttons){var r=(0,h.default)(e.buttons,function(e){return e.downloadUrl});r&&this._addDownloadButton(r),this._addMoreButtons(e.buttons)}if(this._previewClicks.plug(b.default.fromEvents(this._element,"click").map(function(e){return{preventDefault:function(){return e.preventDefault()}}})),e.previewThumbnailUrl&&e.failoverPreviewIconUrl){var n=(0,w.default)(this._element,".inboxsdk__attachmentCard_previewThumbnailUrl");n.onerror=function(t){var r=document.createElement("div");r.classList.add("aYv"),r.innerHTML='<img class="aZG aYw" src="'+e.failoverPreviewIconUrl+'">';var o=n.parentElement;if(!o)throw new Error("Could not find parent element");o.insertBefore(r,n.nextElementSibling),n.remove()}}}},{key:"_addHoverEvents",value:function(){var e=this;b.default.merge([b.default.fromEvents(this._element,"mouseenter"),(0,y.default)(this._element,"focus")]).onValue(function(){e._element.classList.add("aZp")}),b.default.merge([b.default.fromEvents(this._element,"mouseleave"),(0,y.default)(this._element,"blur")]).onValue(function(){e._element.classList.remove("aZp")});var t=(0,w.default)(this._element,"a");b.default.fromEvents(t,"focus").onValue(function(){t.classList.add("a1U")}),b.default.fromEvents(t,"blur").onValue(function(){t.classList.remove("a1U")})}},{key:"_addDownloadButton",value:function(e){var t=new j.default({tooltip:"Download",iconClass:"aSK J-J5-Ji aYr"});t.getElement().setAttribute("data-inboxsdk-download-url",e.downloadUrl);new k.default({activateFunction:function(){var t=!1;if(e.onClick&&e.onClick({preventDefault:function(){t=!0}}),!t){var r=document.createElement("a");r.href=e.downloadUrl,e.downloadFilename&&(r.download=e.downloadFilename),r.addEventListener("click",function(e){e.stopPropagation()},!0),e.openInNewTab&&r.setAttribute("target","_blank"),document.body.appendChild(r),(0,x.simulateClick)(r),r.remove()}},buttonView:t});this._addButton(t)}},{key:"_addMoreButtons",value:function(e){var t=this;(e||[]).filter(function(e){return!e.downloadUrl}).forEach(function(e){t.addButton(e)})}},{key:"_addButton",value:function(e){e.addClass("aQv"),this._getButtonContainerElement().appendChild(e.getElement())}},{key:"_getPreviewImageUrl",value:function(){var e=this._getPreviewImage();return e?e.src:null}},{key:"_getPreviewImage",value:function(){return this._element.querySelector("img.aQG")}},{key:"_getButtonContainerElement",value:function(){return(0,w.default)(this._element,".aQw")}}]),e}()),C=(0,g.defn)(t,S);r.default=C},{"../../../lib/dom/querySelectorOrFail":868,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/from-event-target-capture":878,"../../../lib/stream-wait-for":901,"../../../lib/wait-for":904,"../../../widgets/buttons/basic-button-view-controller":939,"../widgets/buttons/button-view":762,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/regenerator":59,"auto-html":89,kefir:327,"kefir-stopper":326,"lodash/find":484,ud:625,util:629}],714:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=(o(e("kefir")),o(e("kefir-stopper"))),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;(0,i.default)(this,e),(0,s.default)(this,"_stopper",(0,u.default)());var n=document.createElement("div");if(n.className="Kj-JD-Jh inboxsdk__modal_overlay",n.style.zIndex=String(t),!r)throw new Error("no target");r.appendChild(n),this._stopper.onValue(function(){n.remove()})}return(0,a.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}}]),e}(),d=(0,l.defn)(t,c);r.default=d},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,ud:625}],715:[function(e,t,r){"use strict";function n(){return["<colgroup>",'<col class="k0vOLb">','<col class="Ci">','<col class="y5">','<col class="WA">','<col class="yY">',"<col>",'<col class="xX">',"</colgroup>","<tbody>","</tbody>"].join("")}function o(e){var t="";null!=e.iconHtml?t=(0,I.default)(l||(l=(0,v.default)(['<div class="inboxsdk__resultsSection_result_icon inboxsdk__resultsSection_result_iconHtml">\n        ',"\n      </div>"])),{__html:e.iconHtml}):e.iconUrl?t=(0,I.default)(u||(u=(0,v.default)(['<img class="inboxsdk__resultsSection_result_icon ','" src="','">'])),e.iconClass||"",e.iconUrl):e.iconClass&&(t=(0,I.default)(c||(c=(0,v.default)(['<div class="','"></div>'])),e.iconClass));var r=(0,g.default)(e.labels)?e.labels.map(i).join(""):"";return['<td class="xY PF"></td>','<td class="xY oZ-x3"></td>','<td class="xY WA">',t,"</td>",'<td class="xY WA"></td>','<td class="xY yX inboxsdk__resultsSection_result_title">','<div class="yW">',"<span "+(e.isRead?"":'class="zF"')+">",(0,x.default)(e.title),"</span>","</div>","</td>",'<td class="xY a4W">','<div class="xS">','<div class="xT">','<div class="yi">',r,"</div>",'<div class="y6">','<span class="bog">',e.isRead?"":"<b>",(0,x.default)(e.body||""),e.isRead?"":"</b>","</span>","</div>","</div>","</div>","</td>",'<td class="xY xW">',"<span"+(e.isRead?"":' class="bq3"')+">",(0,x.default)(e.shortDetailText||""),"</span>","</td>"].join("")}function i(e){var t=e.backgroundColor||"rgb(194, 194, 194)",r=e.foregroundColor||"rgb(255, 255, 255)",n=e.maxWidth||"90px",o=[(0,I.default)(d||(d=(0,v.default)(['<div class="ar as" data-tooltip="','">\n      <div class="at" style="background-color: ',"; border-color: ",';">\n        <div class="au" style="border-color: ',';">'])),e.title,t,t,t)],i=e.iconBackgroundColor?(0,I.default)(f||(f=(0,v.default)(['style="background-color: ','"'])),e.iconBackgroundColor):"";return null!=e.iconHtml?o.push((0,I.default)(p||(p=(0,v.default)(['<div class="inboxsdk__resultsSection_label_icon inboxsdk__resultsSection_label_iconHtml"\n        ',"\n      >\n        ","\n      </div>"])),{
__html:i},{__html:e.iconHtml})):e.iconClass?o.push((0,I.default)(m||(m=(0,v.default)(['<div\n        class="inboxsdk__resultsSection_label_icon ','"\n        ',"\n        >\n      </div>"])),e.iconClass||"",{__html:i})):e.iconUrl&&o.push((0,I.default)(h||(h=(0,v.default)(['<img\n        class="inboxsdk__resultsSection_label_icon"\n        ','\n        src="','" />'])),{__html:i},e.iconUrl)),o.push((0,I.default)(b||(b=(0,v.default)(['\n          <div class="av" style="color: ',"; max-width: ",'">\n            ',"\n          </div>\n        </div>\n      </div>\n    </div>\n    "])),r,n,e.title)),o.join("")}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l,u,c,d,f,p,m,h,b,v=s(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),_=s(e("@babel/runtime-corejs2/core-js/array/from")),g=s(e("@babel/runtime-corejs2/core-js/array/is-array")),y=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),w=s(e("@babel/runtime-corejs2/helpers/createClass")),j=s(e("@babel/runtime-corejs2/helpers/defineProperty")),k=e("ud"),x=s(e("lodash/escape")),E=s(e("kefir")),S=s(e("kefir-bus")),C=s(e("../../../../common/defer")),I=s(e("auto-html")),A=s(e("../../../lib/dom/querySelectorOrFail")),T=s(e("../widgets/buttons/inbox-dropdown-button-view")),D=s(e("../widgets/gmail-dropdown-view")),M=s(e("../../../widgets/buttons/dropdown-button-view-controller")),R=function(){function e(t,r,n,o){(0,y.default)(this,e),(0,j.default)(this,"_driver",void 0),(0,j.default)(this,"_groupOrderHint",void 0),(0,j.default)(this,"_isReadyDeferred",void 0),(0,j.default)(this,"_isCollapsible",void 0),(0,j.default)(this,"_collapsibleSectionDescriptor",{}),(0,j.default)(this,"_isSearch",void 0),(0,j.default)(this,"_element",null),(0,j.default)(this,"_headerElement",null),(0,j.default)(this,"_titleElement",null),(0,j.default)(this,"_bodyElement",null),(0,j.default)(this,"_contentElement",null),(0,j.default)(this,"_tableBodyElement",null),(0,j.default)(this,"_collapsedContainer",null),(0,j.default)(this,"_messageElement",null),(0,j.default)(this,"_footerElement",null),(0,j.default)(this,"_eventStream",void 0),(0,j.default)(this,"_isCollapsed",!1),(0,j.default)(this,"_inboxDropdownButtonView",null),(0,j.default)(this,"_dropdownViewController",null),this._driver=t,this._isSearch=n,this._groupOrderHint=r,this._isCollapsible=o,this._eventStream=(0,S.default)(),this._isReadyDeferred=new C.default}return(0,w.default)(e,[{key:"destroy",value:function(){this._element&&this._element.remove(),this._eventStream&&this._eventStream.end(),this._headerElement&&this._headerElement.remove(),this._titleElement&&this._titleElement.remove(),this._bodyElement&&this._bodyElement.remove(),this._contentElement&&this._contentElement.remove(),this._tableBodyElement&&this._tableBodyElement.remove(),this._collapsedContainer&&this._collapsedContainer.remove(),this._messageElement&&this._messageElement.remove(),this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}},{key:"getElement",value:function(){var e=this._element;if(!e)throw new Error("tried to access element that does not exist");return e}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"setCollapsibleSectionDescriptorProperty",value:function(e){var t=this,r=e.takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null}));r.onValue(function(e){return t._updateValues(e)}),r.take(1).onValue(function(e){return t._isReadyDeferred.resolve(t)})}},{key:"setCollapsed",value:function(e){var t=this;this._isCollapsible&&this._isReadyDeferred.promise.then(function(){e?t._collapse():t._expand()})}},{key:"_updateValues",value:function(e){var t=this._element;if(!e)return void(t&&(t.style.display="none"));t&&(t.style.display=""),t?this._updateElement(e):(this._setupElement(e),this._showLoadingMessage()),this._updateHeader(e),this._updateTitle(e),this._updateSubtitle(e),this._updateSummaryText(e),this._updateDropdown(e),this._updateContentElement(e),this._updateTableRows(e),this._updateMessageElement(e),this._updateFooter(e),this._collapsibleSectionDescriptor=e}},{key:"_setupElement",value:function(e){var t=this,r=this._element=document.createElement("div");r.setAttribute("class","inboxsdk__resultsSection"),r.setAttribute("data-group-order-hint",String(this._groupOrderHint)),r.setAttribute("data-order-hint",String("number"==typeof e.orderHint?e.orderHint:0)),this._isCollapsible||r.classList.add("inboxsdk__resultsSection_nonCollapsible"),this._setupHeader(e);var n=this._bodyElement=document.createElement("div"),o=document.createElement("div");o.classList.add("zE"),n.appendChild(o),r.appendChild(n);var i=this._contentElement=document.createElement("div");o.appendChild(i);var a=this._messageElement=document.createElement("div");o.appendChild(a);var s=this._tableBodyElement=document.createElement("div");o.appendChild(s),this._setupFooter(e),this._isCollapsible&&this._titleElement&&E.default.fromEvents(this._titleElement,"click").onValue(function(){return t._toggleCollapseState()}),E.default.fromEvents(r,"removeCollapsedContainer").onValue(function(){return t._destroyCollapsedContainer()}),E.default.fromEvents(r,"readdToCollapsedContainer").onValue(function(){return t._addToCollapsedContainer()}),this._eventStream.emit({type:"update",property:"orderHint",sectionDescriptor:e})}},{key:"_setupHeader",value:function(e){var t=this._headerElement=document.createElement("div");t.classList.add("inboxsdk__resultsSection_header","Wg"),this._setupGmailv2Header(t,e),this._element&&this._element.appendChild(t)}},{key:"_setupGmailv2Header",value:function(e,t){var r=this._titleElement=document.createElement("div");r.setAttribute("class","inboxsdk__resultsSection_title"),r.innerHTML=['<h3 class="Wr iR">','<img alt="" src="//ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif" class="qi Wp Wq">','<div class="Wn">',(0,x.default)(t.title),"</div>","</h3>"].join("");var n=document.createElement("div");n.classList.add("Cr"),this._isSearch&&n.classList.add("Wg"),e.appendChild(r),e.appendChild(n)}},{key:"_setupFooter",value:function(e){var t=this._footerElement=document.createElement("div");t.classList.add("inboxsdk__resultsSection_footer"),this._bodyElement&&this._bodyElement.appendChild(t)}},{key:"_updateElement",value:function(e){if(this._collapsibleSectionDescriptor.orderHint!==e.orderHint){var t=this._element;t&&t.setAttribute("data-order-hint",""+("number"==typeof e.orderHint?e.orderHint:0)),this._eventStream.emit({type:"update",property:"orderHint"})}}},{key:"_updateHeader",value:function(e){this._isCollapsible||e.title||e.subtitle||e.titleLinkText||e.hasDropdown?this._headerElement&&(this._headerElement.style.display=""):this._headerElement&&(this._headerElement.style.display="none")}},{key:"_updateTitle",value:function(e){if(this._collapsibleSectionDescriptor.title!==e.title){this._titleElement&&((0,A.default)(this._titleElement,"h3 > .Wn").textContent=e.title)}}},{key:"_updateSubtitle",value:function(e){var t=this._titleElement;if(t){var r=t.querySelector(".inboxsdk__resultsSection_title_subtitle");if(e.subtitle){if(this._collapsibleSectionDescriptor.subtitle!==e.subtitle){if(!r&&(r=document.createElement("span"))&&t){r.classList.add("inboxsdk__resultsSection_title_subtitle");var n=t.querySelector(".Wn");n&&(r.classList.add("aw5"),n.appendChild(r))}r.textContent="("+e.subtitle+")"}}else r&&r.remove()}}},{key:"_updateSummaryText",value:function(e){var t=this,r=this._headerElement;if(r){var n=r.querySelector(".inboxsdk__resultsSection_header_summaryText");if(e.titleLinkText){if(e.titleLinkText!==this._collapsibleSectionDescriptor.titleLinkText){if(!n){n=document.createElement("div"),n.setAttribute("class","inboxsdk__resultsSection_header_summaryText Wm"),n.innerHTML=['<span class="Di">&nbsp;','<div class="J-J5-Ji amH">','<span class="Dj">',"<span></span>","</span>","&nbsp;","</div>","</span>"].join(""),this._eventStream.plug(E.default.fromEvents(n,"click").map(function(){return{eventName:"titleLinkClicked",sectionDescriptor:t._collapsibleSectionDescriptor}}));var o=n;n.addEventListener("mouseenter",function(){o.classList.add("aqi")}),n.addEventListener("mouseleave",function(){o.classList.remove("aqi")});var i=r.querySelector(".Cr");i&&i.insertAdjacentElement("afterbegin",n)}(0,A.default)(n,".Dj > *").textContent=e.titleLinkText}}else n&&n.remove()}}},{key:"_updateDropdown",value:function(e){if(e.hasDropdown&&e.onDropdownClick){if(e.hasDropdown&&e.onDropdownClick)if(this._inboxDropdownButtonView&&this._dropdownViewController)e.onDropdownClick!==this._collapsibleSectionDescriptor.onDropdownClick&&this._dropdownViewController&&this._dropdownViewController.setDropdownShowFunction(e.onDropdownClick);else{var t=this._inboxDropdownButtonView=new T.default;this._dropdownViewController=new M.default({buttonView:t,dropdownViewDriverClass:D.default,dropdownShowFunction:e.onDropdownClick});var r=this._headerElement;if(r){var n=r.querySelector(".Cr");n&&n.appendChild(t.getElement())}}}else this._inboxDropdownButtonView&&this._inboxDropdownButtonView.destroy(),this._dropdownViewController&&this._dropdownViewController.destroy()}},{key:"_updateContentElement",value:function(e){var t=this._contentElement;t&&(t.innerHTML="",e.contentElement?(t.style.display="",t.appendChild(e.contentElement)):t.style.display="none")}},{key:"_updateTableRows",value:function(e){var t=e.tableRows,r=this._tableBodyElement;r&&(r.innerHTML="",t&&0!==t.length?(r.style.display="",this._renderTable(t)):r.style.display="none")}},{key:"_renderTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","F cf zt"),t.innerHTML=n(),this._tableBodyElement&&this._tableBodyElement.appendChild(t);var r=t.querySelector("tbody"),i=this._eventStream;e.forEach(function(e){var t=document.createElement("tr");if(t.setAttribute("class","inboxsdk__resultsSection_tableRow zA "+(e.isRead?"yO":"zE")),t.innerHTML=o(e),!r)throw new Error("should not happen");r.appendChild(t),i.plug(E.default.fromEvents(t,"click").map(function(){return{eventName:"rowClicked",rowDescriptor:e}}))})}},{key:"_updateMessageElement",value:function(e){var t=this._messageElement;e.tableRows&&e.tableRows.length>0||e.contentElement?t&&(t.innerHTML="",t.style.display="none"):e.tableRows&&0===e.tableRows.length&&!e.contentElement&&this._showEmptyMessage()}},{key:"_showLoadingMessage",value:function(){var e=this._messageElement;e&&(e.setAttribute("class","TB TC inboxsdk__resultsSection_loading"),e.innerHTML="loading...",e.style.display="")}},{key:"_showEmptyMessage",value:function(){var e=this._messageElement;e&&(e.setAttribute("class","TB TC"),e.innerHTML="No results found",e.style.display="")}},{key:"_updateFooter",value:function(e){var t=this,r=this._footerElement;if(r)if(r.innerHTML="",e.footerLinkText||e.footerLinkIconUrl||e.footerLinkIconClass){r.style.display="";var n=document.createElement("span");n.setAttribute("class","e Wb"),n.textContent=e.footerLinkText,this._eventStream.plug(E.default.fromEvents(n,"click").map(function(){return{eventName:"footerClicked",sectionDescriptor:t._collapsibleSectionDescriptor}})),r.appendChild(n),r.insertAdjacentHTML("beforeend",'<br style="clear:both;">')}else r.style.display="none"}},{key:"_toggleCollapseState",value:function(){this._isCollapsed?this._expand():this._collapse()}},{key:"_collapse",value:function(){var e=this._element;if(e){e.classList.add("inboxsdk__resultsSection_collapsed"),this._isSearch||this._addToCollapsedContainer();if(this._titleElement){var t=(0,A.default)(this._titleElement,"h3 > img.Wp");t&&(t.classList.remove("Wq"),t.classList.add("Wo"))}this._bodyElement&&(this._bodyElement.style.display="none"),this._isCollapsed=!0,this._eventStream.emit({eventName:"collapsed"})}}},{key:"_expand",value:function(){var e=this._element;if(e){e.classList.remove("inboxsdk__resultsSection_collapsed"),this._isSearch||this._removeFromCollapsedContainer();if(this._titleElement){var t=(0,A.default)(this._titleElement,"h3 > img.Wp");t&&(t.classList.remove("Wo"),t.classList.add("Wq"))}this._bodyElement&&(this._bodyElement.style.display=""),this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}}},{key:"_addToCollapsedContainer",value:function(){var e=this._element;if(e)if(this._headerElement&&this._headerElement.classList.remove("Wg"),this._isCollapsedContainer(e.previousElementSibling)&&this._isCollapsedContainer(e.nextElementSibling)){var t=e.nextElementSibling,r=e.previousElementSibling;if(!r)throw new Error("previousSibling does not exist");if(!t)throw new Error("otherCollapseContainer does not exist");var n=(r.children[0].appendChild(e),(0,_.default)(t.children[0].children).concat((0,_.default)(t.children[1].children)));t&&this._pulloutSectionsFromCollapsedContainer(t),this._recollapse(n)}else this._readdToCollapsedContainer()}},{key:"_removeFromCollapsedContainer",value:function(){this._headerElement&&this._headerElement.classList.add("Wg");var e=this._element;if(e){var t=e.parentElement;if(t){var r=t.parentElement;if(r&&r.classList.contains("inboxsdk__results_collapsedContainer")){var n=(0,_.default)(r.children[0].children).concat((0,_.default)(r.children[1].children));this._pulloutSectionsFromCollapsedContainer(r),this._destroyCollapsedContainer(),this._recollapse(n.filter(function(t){return t!==e}))}}}}},{key:"_pulloutSectionsFromCollapsedContainer",value:function(e){(0,_.default)(e.children[0].children).forEach(function(t){return e.insertAdjacentElement("beforebegin",t)}),(0,_.default)(e.children[1].children).reverse().forEach(function(t){return e.insertAdjacentElement("afterend",t)})}},{key:"_readdToCollapsedContainer",value:function(){var e=this._element;if(e){if(this._collapsedContainer)return void this._collapsedContainer.children[0].insertBefore(e,this._collapsedContainer.children[1].firstElementChild);var t,r;this._isCollapsedContainer(e.previousElementSibling)?(r=!1,t=e.previousElementSibling):this._isCollapsedContainer(e.nextElementSibling)?(r=!0,t=e.nextElementSibling):(r=!0,this._createCollapsedContainer(),t=this._collapsedContainer),r&&t?t.children[0].insertBefore(e,t.children[0].firstElementChild):t&&t.children[0].appendChild(e)}}},{key:"_isCollapsedContainer",value:function(e){return e&&e.classList.contains("inboxsdk__results_collapsedContainer")}},{key:"_recollapse",value:function(e){e.forEach(function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent("removeCollapsedContainer",!1,!1,null),e.dispatchEvent(t);var r=document.createEvent("CustomEvent");r.initCustomEvent("readdToCollapsedContainer",!1,!1,null),e.dispatchEvent(r)})}},{key:"_createCollapsedContainer",value:function(){var e=this._collapsedContainer=document.createElement("div");e.setAttribute("class","inboxsdk__results_collapsedContainer Wg"),e.innerHTML='<div class="inboxsdk__results_collapsedContainer_prepend"></div><div class="inboxsdk__results_collapsedContainer_append"></div>';var t=this._element;t&&t.insertAdjacentElement("afterend",e)}},{key:"_destroyCollapsedContainer",value:function(){this._collapsedContainer&&(this._collapsedContainer.remove(),this._collapsedContainer=null)}}]),e}(),O=(0,k.defn)(t,R);r.default=O},{"../../../../common/defer":639,"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/dropdown-button-view-controller":940,"../widgets/buttons/inbox-dropdown-button-view":765,"../widgets/gmail-dropdown-view":770,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"auto-html":89,kefir:327,"kefir-bus":324,"lodash/escape":482,ud:625}],716:[function(e,t,r){"use strict";function n(e){if("function"!=typeof p)return null;var t=new p,r=new p;return(n=function(e){return e?r:t})(e)}function o(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=m&&h;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?h(e,a):null;s&&(s.get||s.set)?m(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function i(e,t){var r=void 0!==c&&e[d]||e["@@iterator"];if(!r){if(f(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?u(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var l=e("@babel/runtime-corejs2/helpers/typeof"),u=e("@babel/runtime-corejs2/core-js/array/from"),c=e("@babel/runtime-corejs2/core-js/symbol"),d=e("@babel/runtime-corejs2/core-js/symbol/iterator"),f=e("@babel/runtime-corejs2/core-js/array/is-array"),p=e("@babel/runtime-corejs2/core-js/weak-map"),m=e("@babel/runtime-corejs2/core-js/object/define-property"),h=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),b=e("@babel/runtime-corejs2/helpers/interopRequireDefault");m(r,"__esModule",{value:!0}),r.default=void 0;var v,_=b(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),g=b(e("@babel/runtime-corejs2/core-js/promise")),y=b(e("@babel/runtime-corejs2/core-js/object/define-property")),w=b(e("@babel/runtime-corejs2/core-js/weak-map")),j=b(e("@babel/runtime-corejs2/core-js/array/from")),k=b(e("@babel/runtime-corejs2/core-js/parse-int")),x=b(e("@babel/runtime-corejs2/regenerator")),E=b(e("@babel/runtime-corejs2/helpers/typeof")),S=b(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),C=b(e("@babel/runtime-corejs2/helpers/classCallCheck")),I=b(e("@babel/runtime-corejs2/helpers/createClass")),A=b(e("@babel/runtime-corejs2/helpers/defineProperty")),T=b(e("auto-html")),D=b(e("transducers.js")),M=b(e("lodash/once")),R=b(e("lodash/escape")),O=b(e("lodash/includes")),P=b(e("lodash/constant")),L=b(e("lodash/find")),V=b(e("asap")),N=b(e("pdelay")),B=o(e("kefir")),q=o(e("ud")),U=b(e("closest-ng")),F=b(e("kefir-bus")),H=b(e("kefir-stopper")),z=b(e("../../../lib/delay-asap")),W=e("../../../lib/dom/simulate-mouse-event"),G=b(e("../../../lib/dom/simulate-key")),K=b(e("../../../lib/dom/querySelectorOrFail")),$=b(e("../../../../common/isElementVisible")),J=b(e("../../../lib/dom/make-element-child-stream")),Y=e("../../../lib/dom/simulate-drag-and-drop"),Q=o(e("../gmail-response-processor")),Z=b(e("../gmail-element-getter")),X=b(e("../../../lib/dom/set-css")),ee=b(e("../../../lib/wait-for")),te=b(e("../../../lib/stream-wait-for")),re=b(e("../../../lib/dom/make-mutation-observer-chunked-stream")),ne=b(e("../../../lib/handle-compose-link-chips")),oe=b(e("../../../lib/insert-link-chip-into-body")),ie=b(e("./gmail-compose-view/add-compose-notice")),ae=b(e("./gmail-compose-view/add-status-bar")),se=b(e("../../../lib/dom/insert-html-at-cursor")),le=b(e("./gmail-compose-view/ensure-grouping-is-open")),ue=b(e("./gmail-compose-view/ensure-app-button-toolbars-are-closed")),ce=b(e("./gmail-compose-view/size-fixer")),de=b(e("./gmail-compose-view/add-tooltip-to-button")),fe=b(e("./gmail-compose-view/add-recipient-row")),pe=b(e("./gmail-compose-view/add-button")),me=b(e("./gmail-compose-view/set-recipients")),he=b(e("./gmail-compose-view/focus")),be=b(e("./gmail-compose-view/monitor-selection-range")),ve=b(e("./gmail-compose-view/manage-button-grouping")),_e=e("../../../lib/dom/get-selection"),ge=b(e("./gmail-compose-view/get-minimized-stream")),ye=b(e("../../../../common/censorHTMLstring")),we=b(e("./gmail-compose-view/insert-link-into-body")),je=b(e("./gmail-compose-view/get-address-changes-stream")),ke=b(e("./gmail-compose-view/get-body-changes-stream")),xe=b(e("./gmail-compose-view/get-recipients")),Ee=b(e("./gmail-compose-view/get-response-type-changes-stream")),Se=b(e("../../../driver-common/compose/getPresendingStream")),Ce=b(e("../../../driver-common/compose/getDiscardStream")),Ie=b(e("./gmail-compose-view/update-insert-more-area-left")),Ae=b(e("./gmail-compose-view/setupLinkPopovers")),Te=b(e("./gmail-compose-view/get-formatting-area-offset-left")),De=b(e("./gmail-compose-view/override-edit-subject")),Me=b(e("./gmail-compose-view/detectClassicRecipientsArea")),Re=(b(e("../../../../common/censorHTMLtree")),e("./gmail-compose-view/page-parser")),Oe=(b(e("page-parser-tree")),e("tag-tree"),o(e("./gmail-compose-view/from-manager"))),Pe=!1,Le=function(){function t(e,r,n,o){var i=this;(0,C.default)(this,t),(0,A.default)(this,"_element",void 0),(0,A.default)(this,"_seenBodyElement",void 0),(0,A.default)(this,"_isInlineReplyForm",void 0),(0,A.default)(this,"_isFullscreen",void 0),(0,A.default)(this,"_isStandalone",void 0),(0,A.default)(this,"_emailWasSent",void 0),(0,A.default)(this,"_driver",void 0),(0,A.default)(this,"_managedViewControllers",void 0),(0,A.default)(this,"_eventStream",void 0),(0,A.default)(this,"_isTriggeringADraftSavePending",void 0),(0,A.default)(this,"_buttonViewControllerTooltipMap",void 0),(0,A.default)(this,"_composeID",void 0),(0,A.default)(this,"_messageIDElement",void 0),(0,A.default)(this,"_messageId",void 0),(0,A.default)(this,"_finalMessageId",void 0),(0,A.default)(this,"_initialMessageId",void 0),(0,A.default)(this,"_targetMessageID",void 0),(0,A.default)(this,"_draftSaving",void 0),(0,A.default)(this,"_draftIDpromise",void 0),(0,A.default)(this,"_threadID",void 0),(0,A.default)(this,"_stopper",void 0),(0,A.default)(this,"_lastSelectionRange",void 0),(0,A.default)(this,"_requestModifiers",void 0),(0,A.default)(this,"_isListeningToAjaxInterceptStream",void 0),(0,A.default)(this,"_formattingArea",void 0),(0,A.default)(this,"_closedProgrammatically",!1),(0,A.default)(this,"_destroyed",!1),(0,A.default)(this,"_removedFromDOMStopper",void 0),(0,A.default)(this,"_hasSetupLinkPopOvers",!1),(0,A.default)(this,"_page",void 0),(0,A.default)(this,"tagTree",void 0),(0,A.default)(this,"ready",void 0),this._element=e,this._element.classList.add("inboxsdk__compose"),o.isInlineReplyForm&&this._element.classList.add("inboxsdk__compose_inlineReply"),this._isInlineReplyForm=o.isInlineReplyForm,this._isStandalone=o.isStandalone,this._isFullscreen=!1,this._emailWasSent=!1,this._messageId=null,this._finalMessageId=null,this._draftSaving=!1,this._draftIDpromise=null,this._driver=n,this._stopper=(0,H.default)(),this._managedViewControllers=[],this._requestModifiers={},this._isListeningToAjaxInterceptStream=!1,this._eventStream=(0,F.default)(),this._removedFromDOMStopper=(0,H.default)(),this._isTriggeringADraftSavePending=!1,this._page=(0,Re.makePageParser)(e,n.getLogger()),this.tagTree=this._page.tree;var a;a=this._driver.isUsingSyncAPI()?r.filter(function(e){return e.draftID===i._getDraftIDfromForm()}).map(function(e){switch(e.type){case"emailSending":return{eventName:"sending"};case"emailSent":var t=e.threadID,r=e.messageID;return e.oldMessageID&&(i._messageId=e.oldMessageID),e.oldThreadID&&(i._threadID=e.oldThreadID),n.removeCachedGmailMessageIdForSyncMessageId(r),n.removeCachedOldGmailThreadIdFromSyncThreadId(t),{eventName:"sent",data:{getThreadID:(0,M.default)((0,S.default)(x.default.mark(function r(){return x.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.oldThreadID){r.next=2;break}return r.abrupt("return",e.oldThreadID);case 2:return r.next=4,n.getOldGmailThreadIdFromSyncThreadId(t);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},r)}))),getMessageID:(0,M.default)((0,S.default)(x.default.mark(function t(){return x.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.oldMessageID){t.next=2;break}return t.abrupt("return",e.oldMessageID);case 2:return t.next=4,n.getGmailMessageIdForSyncMessageId(r);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t)})))}};case"emailSendFailed":return{eventName:"sendCanceled"};case"emailDraftReceived":return i._messageId=e.oldMessageID,i._threadID=e.oldThreadID,{eventName:"draftSaved",data:{getThreadID:function(){return g.default.resolve(e.oldThreadID)},getMessageID:function(){return g.default.resolve(e.oldMessageID)}}};default:return null}}).filter(Boolean):r.filter(function(e){return e.composeId===i.getComposeID()}).map(function(e){switch(e.type){case"emailSending":return[{eventName:"sending"}];case"emailSent":var t=Q.interpretSentEmailResponse(e.response);if((0,O.default)(["tr","eu"],t.messageID))return[{eventName:"sendCanceled"}];i._emailWasSent=!0,t.messageID&&(i._finalMessageId=t.messageID),i._messageId=null;var r={getThreadID:function(){return g.default.resolve(t.threadID)},getMessageID:function(){return g.default.resolve(t.messageID)}};return["threadID","gmailThreadId"].forEach(function(e){(0,y.default)(r,e,{get:function(){return i._driver.getLogger().deprecationWarning("composeView sent event.".concat(e),"composeView sent event.getThreadID()"),t.threadID}})}),["messageID","gmailMessageId"].forEach(function(e){(0,y.default)(r,e,{get:function(){return i._driver.getLogger().deprecationWarning("composeView sent event.".concat(e),"composeView sent event.getMessageID()"),t.messageID}})}),[{eventName:"sent",data:r}];case"emailDraftSaveSending":return i._draftSaving=!0,[{eventName:"draftSaving"}];case"emailDraftReceived":i._draftSaving=!1;var n;try{n=Q.interpretSentEmailResponse(e.response)}catch(t){throw"sdk_streak_21e9788951"===i._driver.getAppId()?(i._driver.getLogger().error(t,{connectionDetails:e.connectionDetails,response:e.response}),t):t}if("eu"===n.messageID)return[];var o=[{eventName:"draftSaved",data:n}];return n.messageID?n.messageID&&i._messageId!==n.messageID&&(/^[0-9a-f]+$/i.test(n.messageID)?(i._messageId=n.messageID,o.push({eventName:"messageIDChange",data:i._messageId})):i._driver.getLogger().error(new Error("Invalid message id from emailDraftReceived"),{value:n.messageID})):i._driver.getLogger().error(new Error("Missing message id from emailDraftReceived")),o;default:return[]}}).flatten().map(function(e){return i._driver.getLogger().shouldTrackEverything()&&n.getLogger().eventSite("compose.debug.xhr",{eventName:e.eventName}),e}),this._eventStream.plug(B.merge([a,B.fromEvents(this._element,"buttonAdded").map(function(){return{eventName:"buttonAdded"}}),B.fromEvents(this._element,"resize").map(function(){return{eventName:"resize"}}),B.fromEvents(this._element,"composeFullscreenStateChanged").map(function(){return i._updateComposeFullscreenState(),{eventName:"fullscreenChanged",data:{fullscreen:i._isFullscreen}}})])),B.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue(function(){i._closedProgrammatically=!0}),this._buttonViewControllerTooltipMap=new w.default;var s=this.getMaybeBodyElement();this.ready=(0,P.default)((s?B.constant(s):(0,te.default)(function(){return i.getMaybeBodyElement()},18e4)).takeUntilBy(this._stopper).map(function(e){return i._seenBodyElement=e,i._composeID=i._element.querySelector('input[name="composeid"]').value,i._messageIDElement=i._element.querySelector('input[name="draft"]'),i._messageIDElement||(n.getLogger().error(new Error("Could not find compose message id field")),i._messageIDElement=document.createElement("input")),i._setupIDs(),i._setupStreams(),i._setupConsistencyCheckers(),i._updateComposeFullscreenState(),i.getEventStream().filter(function(e){return"presending"===e.eventName}).takeUntilBy(i._stopper).onValue(function(){(0,J.default)(document.body).map(function(e){return e.el}).filter(function(e){return e.getAttribute&&"alertdialog"===e.getAttribute("role")}).takeUntilBy(B.merge([i.getEventStream().filter(function(e){var t=e.eventName;return"sendCanceled"===t||"sending"===t}),B.later(15)])).onValue(function(){i._eventStream.emit({eventName:"sendCanceled"})})}),i}).toProperty()),this.ready().onError(function(e){n.getLogger().error(e,{hasForm:!!i.getElement().querySelector("form"),class:i.getElement().getAttribute("class")})}),this._driver.isUsingSyncAPI()?B.merge([this._removedFromDOMStopper.filterBy(this._eventStream.filter(function(e){var t=e.eventName;return"presending"===t||"sendCanceled"===t}).map(function(e){return"sendCanceled"===e.eventName}).toProperty(function(){return!0})),B.combine([this._removedFromDOMStopper,this._eventStream.filter(function(e){return"sent"===e.eventName})])]).take(1).flatMap(function(){return(0,z.default)(null)}).onValue(function(){return i._destroy()}):this._removedFromDOMStopper.onValue(function(){return i._destroy()}),(0,Me.default)()}return(0,I.default)(t,[{key:"destroy",value:function(){this._removedFromDOMStopper.destroy(),this._page.dump()}},{key:"_destroy",value:function(){this._eventStream.emit({eventName:"destroy",data:{messageID:this.getMessageID(),closedByInboxSDK:this._closedProgrammatically}}),this._eventStream.end(),this._managedViewControllers.forEach(function(e){e.destroy()}),this._requestModifiers={},this._managedViewControllers.length=0,this._stopper.destroy(),this._destroyed=!0}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getGmailDriver",value:function(){return this._driver}},{key:"isDestroyed",value:function(){return this._destroyed}},{key:"_setupStreams",value:function(){var e=this;this._eventStream.plug((0,je.default)(this)),this._eventStream.plug((0,ke.default)(this)),this._eventStream.plug((0,Ee.default)(this)),this._eventStream.plug((0,Se.default)({element:this.getElement(),sendButton:this.getSendButton(),sendAndArchive:this.getSendAndArchiveButton()})),this._eventStream.plug((0,Ce.default)({element:this.getElement(),discardButton:this.getDiscardButton()})),this._eventStream.plug(B.fromEvents(this.getElement(),"inboxSDKsendCanceled").map(function(){return{eventName:"sendCanceled"}})),this._eventStream.plug(B.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map(function(){return{eventName:"discardCanceled"}})),this._eventStream.plug(B.later(10).flatMap(function(){return(0,ge.default)(e)}).changes().map(function(e){return{eventName:e?"minimized":"restored"}})),this._driver.isUsingSyncAPI()||(0,re.default)(this._messageIDElement,{attributes:!0,attributeFilter:["value"]}).takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).map(function(){return e._getMessageIDfromForm()}).filter(function(t){return t&&!e._emailWasSent&&e._messageId!==t}).onValue(function(t){e._messageId=t,e._eventStream.emit({eventName:"messageIDChange",data:e._messageId})})}},{key:"_setupConsistencyCheckers",value:function(){try{(0,ne.default)(this),(0,be.default)(this),(0,ve.default)(this),(0,ce.default)(this._driver,this)}catch(e){this._driver.getLogger().error(e)}}},{key:"_setupIDs",value:function(){var e=this;if(this._driver.isUsingSyncAPI()){var t=this._getTargetMessageID();t&&this._driver.getGmailMessageIdForSyncMessageId(t).then(function(t){return e._targetMessageID=t});var r=this._getMessageIDfromForm();r?(this._driver.getGmailMessageIdForSyncDraftId(r).then(function(t){e._initialMessageId=t,e._messageId=t}).catch(function(){}),this._driver.reportRecentSyncDraftId(r),this._stopper.onValue(function(){e._driver.reportDraftClosed(r)
})):this._driver.getLogger().error(new Error("Draft is missing sync draft id"));var n=this._element.querySelector('input[name="lts"]');n&&"string"==typeof n.value&&(this._threadID=n.value)}else this._targetMessageID=this._getTargetMessageID(),this._messageId=this._initialMessageId=this._getMessageIDfromForm(),this._threadID=this._getThreadID()}},{key:"_updateComposeFullscreenState",value:function(){if(this._isInlineReplyForm)this._isFullscreen=!1;else if(this._isStandalone)this._isFullscreen=!0;else{var e=Z.default.getFullscreenComposeWindowContainer();this._isFullscreen=!!e&&e.contains(this._element)}}},{key:"focus",value:function(){(0,he.default)(this)}},{key:"insertBodyTextAtCursor",value:function(e){return this.insertBodyHTMLAtCursor((0,R.default)(e).replace(/\n/g,"<br>"))}},{key:"insertBodyHTMLAtCursor",value:function(e){var t=(0,se.default)(this.getBodyElement(),e,this.getLastSelectionRange());return this._triggerDraftSave(),(0,G.default)(this.getBodyElement(),13,13),t}},{key:"insertLinkIntoBody",value:function(e,t){var r=(0,we.default)(this,e,t);return this._triggerDraftSave(),r}},{key:"insertLinkChipIntoBody",value:function(e){var t=(0,oe.default)(this,e);return this._triggerDraftSave(),t}},{key:"setSubject",value:function(e){this._element.querySelector("input[name=subjectbox]").value=e,this._triggerDraftSave()}},{key:"setBodyHTML",value:function(e){this.getBodyElement().innerHTML=e,this._triggerDraftSave()}},{key:"setBodyText",value:function(e){this.getBodyElement().textContent=e,this._triggerDraftSave()}},{key:"setToRecipients",value:function(e){(0,me.default)(this,"to",e),this._triggerDraftSave()}},{key:"setCcRecipients",value:function(e){(0,me.default)(this,"cc",e),this._triggerDraftSave()}},{key:"setBccRecipients",value:function(e){(0,me.default)(this,"bcc",e),this._triggerDraftSave()}},{key:"addRecipientRow",value:function(e){return(0,fe.default)(this,e)}},{key:"forceRecipientRowsOpen",value:function(){var e=this;return this._element.classList.add("inboxsdk__compose_forceRecipientsOpen"),function(){e._element.classList.remove("inboxsdk__compose_forceRecipientsOpen")}}},{key:"hideNativeRecipientRows",value:function(){var e=(0,Re.getRecipientRowElements)(this._element);return e.forEach(function(e){e.classList.add("inboxsdk__compose_forceRecipientRowHidden")}),function(){e.forEach(function(e){e.classList.remove("inboxsdk__compose_forceRecipientRowHidden")})}}},{key:"hideRecipientArea",value:function(){var e=this;return this._element.classList.add("inboxsdk__compose_hideRecipientArea"),function(){e._element.classList.remove("inboxsdk__compose_hideRecipientArea")}}},{key:"getFromContact",value:function(){return Oe.getFromContact(this._driver,this)}},{key:"getFromContactChoices",value:function(){return Oe.getFromContactChoices(this._driver,this)}},{key:"setFromEmail",value:function(e){Oe.setFromEmail(this._driver,this,e)}},{key:"addButton",value:function(e,t,r){return(0,pe.default)(this,e,t,r)}},{key:"addTooltipToButton",value:function(e,t,r){var n=(0,de.default)(this,e,t,r);this._buttonViewControllerTooltipMap.set(e,n)}},{key:"closeButtonTooltip",value:function(e){if(this._buttonViewControllerTooltipMap){var t=this._buttonViewControllerTooltipMap.get(e);t&&(t.destroy(),this._buttonViewControllerTooltipMap.delete(e))}}},{key:"addComposeNotice",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,ie.default)(this,t);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),B.fromEvents(r,"destroy").flatMap(z.default).takeUntilBy(this._stopper).onValue(function(){e._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),r}},{key:"addStatusBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,ae.default)(this,t);return this._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})),B.fromEvents(r,"destroy").flatMap(z.default).takeUntilBy(this._stopper).onValue(function(){e._element.dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),r}},{key:"hideNativeStatusBar",value:function(){var e=this.getStatusArea(),t=(0,K.default)(e,"table"),r=this.getFormattingToolbar(),n=r&&"none"!==r.style.display;return t.style.display="none",r&&n&&(r.style.display="none"),function(){t.style.display="",r&&n&&(r.style.display="")}}},{key:"replaceSendButton",value:function(e){var t=this,r=this.getSendButtonGroup(),n=this.getSendAndArchiveButton();r.style.display="none";var o=n&&n.parentElement;o instanceof HTMLElement&&(o.style.display="none");var i=document.createElement("div");i.classList.add("inboxsdk__compose_customSendContainer"),i.appendChild(e),r.insertAdjacentElement("afterend",i),this._element.setAttribute("data-inboxsdk-send-replaced","");var a=(0,H.default)();return B.fromEvents(this.getBodyElement(),"keydown").takeUntilBy(this._stopper).takeUntilBy(a).filter(function(e){return(9===e.which||9===e.keyCode)&&!e.shiftKey}).onValue(function(e){var r=t.getStatusArea(),n=r.querySelectorAll("[tabindex]");if(0!==n.length){var o=(0,j.default)(n).find(function(e){return null!==e.offsetParent});o&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),o.focus())}}),function(){a.destroy(),i.remove(),t._element.removeAttribute("data-inboxsdk-send-replaced"),r.style.display="",o instanceof HTMLElement&&(o.style.display="")}}},{key:"hideDiscardButton",value:function(){var e=this.getDiscardButton();return e.style.display="none",function(){e.style.display=""}}},{key:"ensureFormattingToolbarIsHidden",value:function(){var e=this.getFormattingToolbarToggleButton(),t=this.getFormattingToolbar();e&&t&&""===t.style.display&&(0,W.simulateClick)(e)}},{key:"close",value:function(){var e=this;if(this.isInlineReplyForm())return void console.warn("Trying to close an inline reply which doesn't work.");this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),this._isFullscreen?(this._eventStream.filter(function(e){return"fullscreenChanged"===e.eventName}).onValue(function(){return(0,W.simulateClick)(e.getCloseButton())}),(0,W.simulateClick)(this.getMoleSwitchButton())):(0,W.simulateClick)(this.getCloseButton())}},{key:"send",value:function(e){var t=this,r=e.sendAndArchive;(0,V.default)(function(){var e=t.getSendAndArchiveButton();r&&e?(0,W.simulateClick)(e):(0,W.simulateClick)(t.getSendButton())})}},{key:"discard",value:function(){(0,W.simulateClick)(this.getDiscardButton())}},{key:"popOut",value:function(){if(!this.isInlineReplyForm())throw new Error("Can only pop out inline reply compose views");var e=(0,K.default)(this._element,".M9 > [role=menu]:first-child > .SK > [role=menuitem]:last-child");(0,W.simulateClick)(e)}},{key:"overrideEditSubject",value:function(){(0,De.default)(this._driver,this)}},{key:"_hideDropzones",value:function(){(0,X.default)("compose dropzone hider","body > .aC7 .aC9 {visibility: hidden;}")}},{key:"_reenableDropzones",value:function(){(0,X.default)("compose dropzone hider",null)}},{key:"_dropzonesVisible",value:function(){return null!=(0,L.default)(document.querySelectorAll("body > .aC7:not(.aWP)"),$.default)}},{key:"_findDropzoneForThisCompose",value:function(e){var t=this._element.getBoundingClientRect(),r=e?"body > .aC7:not(.aWP)":"body > .aC7.aWP",n=D.default.toArray(Array.prototype.slice.call(document.querySelectorAll(r)),D.default.compose(D.default.filter($.default),D.default.filter(function(e){var r=(0,k.default)(e.style.top,10),n=r+(0,k.default)(e.style.height,10),o=(0,k.default)(e.style.left,10),i=o+(0,k.default)(e.style.width,10);return r>=t.top&&o>=t.left&&i<=t.right&&n<=t.bottom}),D.default.take(1)))[0];if(!n)throw new Error("Failed to find dropzone");return n}},{key:"_attachFiles",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,S.default)(x.default.mark(function e(t,r){var n,o,a,s,l,u,c=this;return x.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._hideDropzones(),n=(0,M.default)(function(){return(0,Y.simulateDragEnd)(c._element,t)}),e.prev=2,o=!0,a=i(D.default.partition(t,3)),e.prev=5,a.s();case 7:if((s=a.n()).done){e.next=25;break}if(l=s.value,!o){e.next=13;break}o=!1,e.next=15;break;case 13:return e.next=15,(0,N.default)(500);case 15:return(0,Y.simulateDragOver)(this._element,l),e.next=18,(0,ee.default)(function(){return c._dropzonesVisible()},2e4);case 18:return u=this._findDropzoneForThisCompose(r),(0,Y.simulateDrop)(u,l),n(),e.next=23,(0,ee.default)(function(){return!c._dropzonesVisible()},2e4);case 23:e.next=7;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(5),a.e(e.t0);case 30:return e.prev=30,a.f(),e.finish(30);case 33:e.next=38;break;case 35:e.prev=35,e.t1=e.catch(2),this._driver.getLogger().error(e.t1);case 38:return e.prev=38,n(),this._reenableDropzones(),e.finish(38);case 42:case"end":return e.stop()}},e,this,[[2,35,38,42],[5,27,30,33]])}));return e}()},{key:"attachFiles",value:function(e){return this._attachFiles(e,!1)}},{key:"attachInlineFiles",value:function(e){return this._attachFiles(e,!0)}},{key:"isForward",value:function(){return Boolean(this._element.querySelector(".Un.J-JN-M-I .mI"))}},{key:"isReply",value:function(){return this._isInlineReplyForm||!!this._element.querySelector(".HQ")}},{key:"isInlineReplyForm",value:function(){return this._isInlineReplyForm}},{key:"getBodyElement",value:function(){var e=this.getMaybeBodyElement();if(!e)throw new Error("Could not find body element");return e}},{key:"getMaybeBodyElement",value:function(){return this._element.querySelector(".Ap [g_editable=true]")}},{key:"getTopFormElement",value:function(){return(0,K.default)(this._element,"td > form")}},{key:"getHTMLContent",value:function(){return this.getBodyElement().innerHTML}},{key:"getTextContent",value:function(){return this.getBodyElement().textContent}},{key:"getSelectedBodyHTML",value:function(){return(0,_e.getSelectedHTMLInElement)(this.getBodyElement(),this.getLastSelectionRange())}},{key:"getSelectedBodyText",value:function(){return(0,_e.getSelectedTextInElement)(this.getBodyElement(),this.getLastSelectionRange())}},{key:"getSubject",value:function(){return this.getSubjectInput().value}},{key:"getSubjectInput",value:function(){return this._element.querySelector("input[name=subjectbox]")}},{key:"getMetadataFormElement",value:function(){var e=this.getBodyElement().closest(".aoP.aoC");if(!e)throw new Error("Could not find compose container");return(0,K.default)(e,"form.bAs")}},{key:"getToRecipients",value:function(){return(0,xe.default)(this,"to")}},{key:"getCcRecipients",value:function(){return(0,xe.default)(this,"cc")}},{key:"getBccRecipients",value:function(){return(0,xe.default)(this,"bcc")}},{key:"getAdditionalActionToolbar",value:function(){return e("./gmail-compose-view/get-additional-action-toolbar").default(this)}},{key:"updateInsertMoreAreaLeft",value:function(e){(0,Ie.default)(this,e)}},{key:"_getFormattingAreaOffsetLeft",value:function(){return(0,Te.default)(this)}},{key:"getFormattingArea",value:function(){var e=this._formattingArea;return e||(e=this._formattingArea=this._element.querySelector(".oc")),e}},{key:"getFormattingToolbar",value:function(){return this._element.querySelector(".aX")}},{key:"getFormattingToolbarArrow",value:function(){var e=this.getFormattingToolbar();if(!e)throw new Error("Failed to find formatting toolbar");return(0,K.default)(e,".aA4")}},{key:"getFormattingToolbarToggleButton",value:function(){var e=(0,K.default)(this._element,"[role=button] .dv"),t=(0,U.default)(e,"[role=button]");if(!t)throw new Error("failed to find button");return t}},{key:"getStatusBarPrependContainer",value:function(){return this._element.querySelector(".inboxsdk__compose_statusBarPrependContainer")}},{key:"getScrollBody",value:function(){var e=this._element.querySelector("table .GP");if(!e)throw new Error("Failed to find scroll body");return e}},{key:"getStatusArea",value:function(){var e=this._element.querySelector(".aDg .aDj > .aDh");if(!e)throw new Error("Failed to find status area");return e}},{key:"getInsertMoreArea",value:function(){return(0,K.default)(this._element,".eq")}},{key:"getInsertLinkButton",value:function(){return(0,K.default)(this._element,".e5.aaA.aMZ")}},{key:"getSendButton",value:function(){return(0,K.default)(this._element,".IZ .Up div > div[role=button]:not(.Uo):not([aria-haspopup=true]):not([class^=inboxsdk_])")}},{key:"getSendButtonGroup",value:function(){var e=this._element.querySelector(".IZ .Up div > [role=button][aria-haspopup=true]:not([class^=inboxsdk_])");return e?e.parentElement:this.getSendButton()}},{key:"getSendAndArchiveButton",value:function(){if(!this.isReply())return null;var e=this._element.querySelector(".IZ .Up div > div[role=button].Uo:not([aria-haspopup=true]):not([class^=inboxsdk_])");if(e)return e;var t=this.getSendButton(),r=t.parentElement;if(!(r instanceof HTMLElement))throw new Error("should not happen");if(r.childElementCount<=1)return this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find, childElementCount <= 1"),null;var n=r.children[0]!==t?r.children[0]:r.children[1],o=n?n.querySelector("[role=button]"):null;return o?this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - found"):this._driver.getLogger().eventSdkPassive("getSendAndArchiveButton - old method - failed to find"),o}},{key:"getCloseButton",value:function(){return this._element.querySelectorAll(".Hm > img")[2]}},{key:"getMoleSwitchButton",value:function(){return this._element.querySelectorAll(".Hm > img")[1]}},{key:"getBottomBarTable",value:function(){return(0,K.default)(this._element,".aoP .aDh > table")}},{key:"getBottomToolbarContainer",value:function(){return(0,K.default)(this._element,".aoP .aDj")}},{key:"getDiscardButton",value:function(){return(0,K.default)(this._element,".gU.az5 .oh")}},{key:"getComposeID",value:function(){return this._composeID}},{key:"getInitialMessageID",value:function(){return this._initialMessageId}},{key:"_getDraftIDfromForm",value:function(){var e=this._messageIDElement&&this._messageIDElement.value||null;if("string"==typeof e&&"undefined"!==e&&"null"!==e){if(this._driver.isUsingSyncAPI())return e.replace("#","").replace("msg-a:","");this._driver.getLogger().error(new Error("Invalid draft id in element"),{value:e})}return null}},{key:"_getMessageIDfromForm",value:function(){var e=this._messageIDElement&&this._messageIDElement.value||null;if("string"==typeof e&&"undefined"!==e&&"null"!==e){if(this._driver.isUsingSyncAPI())return e.replace("#","");if(/^[0-9a-f]+$/i.test(e))return e;this._driver.getLogger().error(new Error("Invalid message id in element"),{value:e})}return null}},{key:"getMessageID",value:function(){return this._messageId}},{key:"getTargetMessageID",value:function(){return this._targetMessageID}},{key:"getThreadID",value:function(){return this._threadID}},{key:"getCurrentDraftID",value:function(){function e(){return t.apply(this,arguments)}var t=(0,S.default)(x.default.mark(function e(){var t,r,n;return x.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._driver.isUsingSyncAPI()){e.next=20;break}if(t=this._getDraftIDfromForm(),!this._messageId){e.next=6;break}return e.abrupt("return",t);case 6:if(!(r=this._getMessageIDfromForm())){e.next=18;break}return e.prev=8,e.next=11,this._driver.getGmailMessageIdForSyncDraftId(r);case 11:n=e.sent,e.next=17;break;case 14:return e.prev=14,e.t0=e.catch(8),e.abrupt("return",null);case 17:return e.abrupt("return",t);case 18:e.next=25;break;case 20:if(this.getMessageID()){e.next=24;break}return e.abrupt("return",null);case 24:return e.abrupt("return",this.getDraftID());case 25:case"end":return e.stop()}},e,this,[[8,14]])}));return e}()},{key:"getDraftID",value:function(){var e=this._draftIDpromise;return e||(e=this._draftIDpromise=this._getDraftIDimplementation()),e}},{key:"_getDraftIDimplementation",value:function(){function e(){return t.apply(this,arguments)}var t=(0,S.default)(x.default.mark(function e(){var t,r,n,o,i,a,s,l,u=this;return x.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._driver.isUsingSyncAPI()){e.next=21;break}if(t=this._getDraftIDfromForm(),!this._messageId){e.next=6;break}return e.abrupt("return",t);case 6:if(!(r=this._getMessageIDfromForm())){e.next=19;break}return e.prev=8,e.next=11,this._driver.getGmailMessageIdForSyncDraftId(r);case 11:n=e.sent,e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),e.next=18,this._eventStream.filter(function(e){return"draftSaved"===e.eventName}).beforeEnd(function(){return null}).map(function(){return u._getDraftIDfromForm()}).take(1).toPromise();case 18:return e.abrupt("return",t);case 19:e.next=46;break;case 21:if(o=-1,i=null,e.prev=23,this._messageId){e.next=29;break}return e.next=27,this._eventStream.filter(function(e){return"messageIDChange"===e.eventName}).beforeEnd(function(){return null}).take(1).toPromise();case 27:if(this._messageId){e.next=29;break}return e.abrupt("return",null);case 29:a=null,s=x.default.mark(function e(){var t,r,n,s;return x.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o++,t=u._messageId){e.next=4;break}throw new Error("Should not happen");case 4:if(a!==t){e.next=11;break}if(!u._draftSaving){e.next=9;break}return e.next=8,u._eventStream.filter(function(e){return"messageIDChange"===e.eventName}).beforeEnd(function(){return null}).take(1).toPromise();case 8:return e.abrupt("return","continue");case 9:throw setTimeout((0,S.default)(x.default.mark(function e(){var r,n,o,i,a;return x.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u._messageId){e.next=3;break}throw new Error("Should not happen");case 3:return e.next=5,u._driver.getDraftIDForMessageID(r,!0);case 5:n=e.sent,o=n.draftID,i=n.debugData,a=new Error("Failed to read draft ID -- after check"),u._driver.getLogger().error(a,{message:"getDraftID error -- after check",messageIdChanged:t!==r,gotDraftID:null!=o,debugData:o?null:i});case 10:case"end":return e.stop()}},e)})),1e4),new Error("Failed to read draft ID");case 11:return a=t,e.next=14,u._driver.getDraftIDForMessageID(t);case 14:if(r=e.sent,n=r.draftID,s=r.debugData,i=s,!n){e.next=20;break}return e.abrupt("return",{v:n});case 20:case"end":return e.stop()}},e)});case 31:return e.delegateYield(s(),"t1",33);case 33:if("continue"!==(l=e.t1)){e.next=36;break}return e.abrupt("continue",31);case 36:if("object"!==(0,E.default)(l)){e.next=38;break}return e.abrupt("return",l.v);case 38:e.next=31;break;case 40:e.next=46;break;case 42:throw e.prev=42,e.t2=e.catch(23),this._driver.getLogger().error(e.t2,{message:"getDraftID error",removedFromDOM:!document.contains(this._element),destroyed:this._destroyed,isFullscreen:this._isFullscreen,isStandalone:this._isStandalone,emailWasSent:this._emailWasSent,i:o,lastDebugData:i}),e.t2;case 46:case"end":return e.stop()}},e,this,[[8,14],[23,42]])}));return e}()},{key:"addManagedViewController",value:function(e){this._managedViewControllers.push(e)}},{key:"ensureGroupingIsOpen",value:function(e){(0,le.default)(this._element,e)}},{key:"ensureAppButtonToolbarsAreClosed",value:function(){(0,ue.default)(this._element)}},{key:"isMinimized",value:function(){var e=this.getElement(),t=this.getMaybeBodyElement(),r=(0,L.default)(e.children,function(e){return e.contains(t)});return r?""!==r.style.display:(Pe||(Pe=!0,this._driver.getLogger().error(new Error("isMinimized failed to find bodyContainer"),{bodyElement:!!t,hasMessageIDElement:!!this._messageIDElement,ended:this._eventStream.ended,bodyElStillInCompose:this._element.contains(this._seenBodyElement),seenBodyElHtml:(0,ye.default)(this._seenBodyElement.outerHTML),composeHtml:(0,ye.default)(e.outerHTML)})),!1)}},{key:"setMinimized",value:function(e){if(e!==this.isMinimized()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");var t=(0,K.default)(this._element,".Hm > img");(0,W.simulateClick)(t)}}},{key:"setFullscreen",value:function(e){if(e!==this.isFullscreen()){if(this._isInlineReplyForm)throw new Error("Not implemented for inline compose views");var t=(0,K.default)(this._element,".Hm > img:nth-of-type(2)");(0,W.simulateClick)(t)}}},{key:"setTitleBarColor",value:function(e){var t=(0,K.default)(this._element,".nH.Hy.aXJ table.cf.Ht td.Hm"),r=[(0,K.default)(this._element,".nH.Hy.aXJ .pi > .l.o"),(0,K.default)(this._element,".nH.Hy.aXJ .l.m"),(0,K.default)(this._element,".nH.Hy.aXJ .l.m > .l.n")];return t.classList.add("inboxsdk__compose_customTitleBarColor"),r.forEach(function(t){t.style.backgroundColor=e}),function(){t.classList.remove("inboxsdk__compose_customTitleBarColor"),r.forEach(function(e){e.style.backgroundColor=""})}}},{key:"setTitleBarText",value:function(e){if(this.isInlineReplyForm())throw new Error("setTitleBarText() is not supported on inline compose views");var t=(0,K.default)(this._element,".nH.Hy.aXJ table.cf.Ht");if(t.classList.contains("inboxsdk__compose_hasCustomTitleBarText"))throw new Error("Custom title bar text is already registered for this compose view");var r=(0,K.default)(t,"div.Hp").parentElement;if(!(r instanceof HTMLElement))throw new Error("Could not locate title bar text parent");t.classList.add("inboxsdk__compose_hasCustomTitleBarText"),r.classList.add("inboxsdk__compose_nativeTitleBarText");var n=document.createElement("td");return n.classList.add("inboxsdk__compose_customTitleBarText"),n.innerHTML=(0,T.default)(v||(v=(0,_.default)(['\n      <div class="Hp">\n        <h2 class="a3E">\n          <div class="aYF">',"</div>\n        </h2>\n      </div>\n    "])),e),r.insertAdjacentElement("afterend",n),function(){n.remove(),t.classList.remove("inboxsdk__compose_hasCustomTitleBarText"),r.classList.remove("inboxsdk__compose_nativeTitleBarText")}}},{key:"_triggerDraftSave",value:function(){var e=this;this._isTriggeringADraftSavePending||(this._isTriggeringADraftSavePending=!0,B.later(0).takeUntilBy(this._stopper).onValue(function(){e._isTriggeringADraftSavePending=!1;var t=e.getMaybeBodyElement();if(t){var r=e._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,G.default)(t,190,0)}finally{r()}}}))}},{key:"_getTargetMessageID",value:function(){var e=this._element.querySelector('input[name="rm"]');return e&&"string"==typeof e.value&&"undefined"!=e.value?e.value.replace("#",""):null}},{key:"_getThreadID",value:function(){var e=this.getTargetMessageID();try{return e?this._driver.getThreadIDForMessageID(e):null}catch(e){return this._driver.getLogger().error(e),null}}},{key:"getElement",value:function(){return this._element}},{key:"isFullscreen",value:function(){return this._isFullscreen}},{key:"getLastSelectionRange",value:function(){var e=this._lastSelectionRange;return e&&!this.getBodyElement().contains(e.commonAncestorContainer)&&(this._lastSelectionRange=void 0),this._lastSelectionRange}},{key:"setLastSelectionRange",value:function(e){this._lastSelectionRange=e}},{key:"registerRequestModifier",value:function(e){var t=this,r=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!r)throw new Error("keyId should be set here");var n=this._driver.getPageCommunicator().registerComposeRequestModifier(r,this._driver.getAppId());this._requestModifiers[n]=e,this._startListeningForModificationRequests(),this._stopper.onValue(function(){t._driver.getPageCommunicator().unregisterComposeRequestModifier(r,n)})}},{key:"_startListeningForModificationRequests",value:function(){var e=this;if(!this._isListeningToAjaxInterceptStream){var t=this._driver.isUsingSyncAPI()?this._getDraftIDfromForm():this.getComposeID();if(!t)throw new Error("keyId should be set here");this._driver.getPageCommunicator().ajaxInterceptStream.filter(function(r){var n=r.type,o=r.composeid,i=r.draftID,a=r.modifierId;return"inboxSDKmodifyComposeRequest"===n&&(o===t||t===i)&&Boolean(e._requestModifiers[a])}).takeUntilBy(this._stopper).onValue(function(r){var n=r.modifierId,o=r.composeParams;e._driver.getLogger().shouldTrackEverything()&&e._driver.getLogger().eventSite("inboxSDKmodifyComposeRequest");var i=e._requestModifiers[n];new g.default(function(e){return e(i(o))}).then(function(r){return e._driver.getPageCommunicator().modifyComposeRequest(t,n,r||o)}).then(function(t){return e._driver.getLogger().shouldTrackEverything()&&e._driver.getLogger().eventSite("composeRequestModified"),t}).catch(function(r){e._driver.getPageCommunicator().modifyComposeRequest(t,n,o),e._driver.getLogger().error(r)})}),this._isListeningToAjaxInterceptStream=!0}}},{key:"setupLinkPopOvers",value:function(){this._hasSetupLinkPopOvers||(this._hasSetupLinkPopOvers=!0,this._eventStream.plug((0,Ae.default)(this)))}}]),t}(),Ve=q.defn(t,Le);r.default=Ve},{"../../../../common/censorHTMLstring":636,"../../../../common/censorHTMLtree":637,"../../../../common/isElementVisible":646,"../../../driver-common/compose/getDiscardStream":828,"../../../driver-common/compose/getPresendingStream":829,"../../../lib/delay-asap":850,"../../../lib/dom/get-selection":855,"../../../lib/dom/insert-html-at-cursor":857,"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/dom/set-css":870,"../../../lib/dom/simulate-drag-and-drop":872,"../../../lib/dom/simulate-key":873,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/handle-compose-link-chips":880,"../../../lib/insert-link-chip-into-body":886,"../../../lib/stream-wait-for":901,"../../../lib/wait-for":904,"../gmail-element-getter":696,"../gmail-response-processor":700,"./gmail-compose-view/add-button":717,"./gmail-compose-view/add-compose-notice":718,"./gmail-compose-view/add-recipient-row":719,"./gmail-compose-view/add-status-bar":720,"./gmail-compose-view/add-tooltip-to-button":721,"./gmail-compose-view/detectClassicRecipientsArea":722,"./gmail-compose-view/ensure-app-button-toolbars-are-closed":723,"./gmail-compose-view/ensure-grouping-is-open":724,"./gmail-compose-view/focus":725,"./gmail-compose-view/from-manager":726,"./gmail-compose-view/get-additional-action-toolbar":727,"./gmail-compose-view/get-address-changes-stream":728,"./gmail-compose-view/get-body-changes-stream":730,"./gmail-compose-view/get-formatting-area-offset-left":731,"./gmail-compose-view/get-minimized-stream":732,"./gmail-compose-view/get-recipients":733,"./gmail-compose-view/get-response-type-changes-stream":734,"./gmail-compose-view/insert-link-into-body":736,"./gmail-compose-view/manage-button-grouping":737,"./gmail-compose-view/monitor-selection-range":738,"./gmail-compose-view/override-edit-subject":739,"./gmail-compose-view/page-parser":740,"./gmail-compose-view/set-recipients":742,"./gmail-compose-view/setupLinkPopovers":743,"./gmail-compose-view/size-fixer":744,"./gmail-compose-view/update-insert-more-area-left":745,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,asap:83,"auto-html":89,"closest-ng":105,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/constant":477,"lodash/escape":482,"lodash/find":484,"lodash/includes":493,"lodash/once":516,"page-parser-tree":543,pdelay:545,"tag-tree":622,"transducers.js":623,ud:625}],717:[function(e,t,r){"use strict";function n(e,t){var r=d(e);if(f){var n=f(e);t&&(n=n.filter(function(t){return p(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,_.default)(e,t,r[t])}):m?h(e,m(r)):n(Object(r)).forEach(function(t){b(e,t,p(r,t))})}return e}function i(e,t,r,n){return new g.default(function(o,i){var s;t.takeUntilBy(e.getStopper()).onValue(function(t){var i=c(t,n,e.getGmailDriver());s?s.update(i):i&&(s=a(e,i,r),o({buttonViewController:s,buttonDescriptor:t}))}).onEnd(function(){o(null)})})}function a(e,t,r){if(e.getElement()&&e.getFormattingToolbar()){var n;return"MODIFIER"===t.type?n=s(e,t,r):"SEND_ACTION"===t.type&&(n=l(e,t)),e.getElement().dispatchEvent(new CustomEvent("buttonAdded",{bubbles:!1,cancelable:!1,detail:null})),n}}function s(e,t,r){var n=u(t);n.getView().getElement().setAttribute("tabindex","1"),n.getView().getElement().setAttribute("data-order-hint",String(t.orderHint||0)),n.getView().getElement().setAttribute("data-group-order-hint",r);var o=e._getFormattingAreaOffsetLeft(),i=n.getView().getElement(),a=e.getAdditionalActionToolbar();return(0,E.default)(a,i),e.updateInsertMoreAreaLeft(o),e.addManagedViewController(n),n}function l(e,t){var r=u(t);r.getView().removeClass("inboxsdk__composeButton"),r.getView().addClass("inboxsdk__compose_sendButton"),r.getView().getElement().setAttribute("tabindex","1");var n=e.getSendButtonGroup(),o=r.getView().getElement();return n.parentElement.insertBefore(o,n.nextSibling),e.addManagedViewController(r),r}function u(e){var t,r=new w.default(e),n=o({buttonView:r},e);return e.hasDropdown?((0,y.default)(n,{dropdownViewDriverClass:x.default,dropdownPositionOptions:{vAlign:"top"}}),t=new k.default(n)):t=new j.default(n),t}function c(e,t,r){if(!e)return null;var n=o({type:"MODIFIER"},e),i=n.onClick;return n.onClick=function(e){r.getLogger().eventSdkActive("composeView.addedButton.click"),i(o(o({},t),e))},n.hasDropdown?n.dropdownShowFunction=n.onClick:n.activateFunction=n.onClick,n.noArrow=!0,n.tooltip=n.tooltip||n.title,delete n.title,"MODIFIER"===n.type?n.buttonColor="flatIcon":"SEND_ACTION"===n.type&&(n.buttonColor="blue"),n}var d=e("@babel/runtime-corejs2/core-js/object/keys"),f=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),p=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),m=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),h=e("@babel/runtime-corejs2/core-js/object/define-properties"),b=e("@babel/runtime-corejs2/core-js/object/define-property"),v=e("@babel/runtime-corejs2/helpers/interopRequireDefault");b(r,"__esModule",{value:!0}),r.default=i;var _=v(e("@babel/runtime-corejs2/helpers/defineProperty")),g=v(e("@babel/runtime-corejs2/core-js/promise")),y=v(e("@babel/runtime-corejs2/core-js/object/assign")),w=(v(e("kefir")),v(e("./gmail-compose-button-view"))),j=v(e("../../../../widgets/buttons/basic-button-view-controller")),k=v(e("../../../../widgets/buttons/dropdown-button-view-controller")),x=v(e("../../widgets/gmail-dropdown-view")),E=v(e("../../../../lib/dom/insert-element-in-order"))},{"../../../../lib/dom/insert-element-in-order":856,"../../../../widgets/buttons/basic-button-view-controller":939,"../../../../widgets/buttons/dropdown-button-view-controller":940,"../../widgets/gmail-dropdown-view":770,"./gmail-compose-button-view":735,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/defineProperty":39,
"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],718:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,j.default)(e);if(t){var o=(0,j.default)(this).constructor;r=m(n,arguments,o)}else r=n.apply(this,arguments);return(0,w.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!m)return!1;if(m.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(m(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){var r=l(e);if(u){var n=u(e);t&&(n=n.filter(function(t){return c(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,k.default)(e,t,r[t])}):d?f(e,d(r)):i(Object(r)).forEach(function(t){p(e,t,c(r,t))})}return e}function s(e,t){var r=a({orderHint:0},t),n=r.orderHint,o=new T(e,n);return e.getStopper().takeUntilBy(x.default.fromEvents(o,"destroy")).onValue(function(){return o.destroy()}),o}var l=e("@babel/runtime-corejs2/core-js/object/keys"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),f=e("@babel/runtime-corejs2/core-js/object/define-properties"),p=e("@babel/runtime-corejs2/core-js/object/define-property"),m=e("@babel/runtime-corejs2/core-js/reflect/construct"),h=e("@babel/runtime-corejs2/helpers/interopRequireDefault");p(r,"__esModule",{value:!0}),r.default=s;var b=h(e("@babel/runtime-corejs2/helpers/classCallCheck")),v=h(e("@babel/runtime-corejs2/helpers/createClass")),_=h(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),g=h(e("@babel/runtime-corejs2/helpers/get")),y=h(e("@babel/runtime-corejs2/helpers/inherits")),w=h(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),j=h(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),k=h(e("@babel/runtime-corejs2/helpers/defineProperty")),x=h(e("kefir")),E=h(e("kefir-stopper")),S=h(e("../../../../lib/dom/insert-element-in-order")),C=h(e("../../../../lib/logger")),I=h(e("../../../../lib/dom/querySelectorOrFail")),A=h(e("../../../../views/SimpleElementView")),T=function(e){function t(e,n){var o;(0,b.default)(this,t);var i=document.createElement("div");return i.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",i.style.fontSize="14px",o=r.call(this,i),(0,k.default)((0,_.default)(o),"_gmailComposeView",void 0),(0,k.default)((0,_.default)(o),"_orderHint",void 0),(0,k.default)((0,_.default)(o),"_stopper",(0,E.default)()),o._gmailComposeView=e,o._orderHint=n,i.className="inboxsdk__compose_notice",i.setAttribute("data-order-hint",String(n)),o._setComposeNotice(),o}(0,y.default)(t,e);var r=n(t);return(0,v.default)(t,[{key:"destroy",value:function(){this.destroyed||((0,g.default)((0,j.default)(t.prototype),"destroy",this).call(this),this._stopper.destroy())}},{key:"_setComposeNotice",value:function(){try{var e=(0,I.default)(this._gmailComposeView.getElement(),".iN");(0,S.default)(e,this.el,["data-order-hint"],!0)}catch(e){C.default.error(e)}}}]),t}(A.default)},{"../../../../lib/dom/insert-element-in-order":856,"../../../../lib/dom/querySelectorOrFail":868,"../../../../lib/logger":891,"../../../../views/SimpleElementView":920,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/get":41,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-stopper":326}],719:[function(e,t,r){"use strict";function n(e,t){var r;return t.takeUntilBy(e.getStopper()).onValue(function(t){r&&(r.remove(),r=null),t&&(r=o(e,t),(0,s.default)(r)),e.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),function(){r&&(r.remove(),r=null,e.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null})))}}function o(e,t){var r=document.createElement("tr"),n=document.createElement("td"),o=document.createElement("td");if(r.appendChild(n),r.appendChild(o),r.setAttribute("class","inboxsdk__recipient_row"),t.labelText){n.setAttribute("class","ok");var i=document.createElement("span");i.setAttribute("class","gO"),n.appendChild(i),i.textContent=t.labelText,t.labelClass&&n.classList.add(t.labelClass),t.labelTextClass&&i.classList.add(t.labelTextClass)}t.el&&(o.setAttribute("class","az3"),o.appendChild(t.el));var a=(0,l.getRecipientRowElements)(e.getElement())[0],s=a.parentElement;s.insertBefore(r,a.nextSibling);var u=s.closest(".fX");return u&&u.classList.add("inboxsdk__compose_addressList"),r}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=(a(e("kefir")),a(e("../../../../lib/dom/block-and-reemit-keyboard-events"))),l=e("./page-parser")},{"../../../../lib/dom/block-and-reemit-keyboard-events":851,"./page-parser":740,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],720:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,x.default)(e);if(t){var o=(0,x.default)(this).constructor;r=h(n,arguments,o)}else r=n.apply(this,arguments);return(0,k.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!h)return!1;if(h.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(h(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){var r=u(e);if(c){var n=c(e);t&&(n=n.filter(function(t){return d(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){(0,E.default)(e,t,r[t])}):f?p(e,f(r)):i(Object(r)).forEach(function(t){m(e,t,d(r,t))})}return e}function s(e,t){var r=a({height:40,orderHint:0,addAboveNativeStatusBar:!1},t),n=r.height,o=r.orderHint,i=r.addAboveNativeStatusBar,s=new P(e,n,o,i);return e.getStopper().takeUntilBy(C.default.fromEvents(s,"destroy")).onValue(function(){return s.destroy()}),s}function l(e,t){var r=document.createElement("div");return r.className=(0,A.default)("aDh","inboxsdk__compose_statusbar",{inboxsdk__addAboveNative:t}),r.style.fontFamily="Roboto,RobotoDraft,Helvetica,Arial,sans-serif",r.style.fontSize="15.6px",r.setAttribute("data-order-hint",String(e)),r}var u=e("@babel/runtime-corejs2/core-js/object/keys"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),f=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),p=e("@babel/runtime-corejs2/core-js/object/define-properties"),m=e("@babel/runtime-corejs2/core-js/object/define-property"),h=e("@babel/runtime-corejs2/core-js/reflect/construct"),b=e("@babel/runtime-corejs2/helpers/interopRequireDefault");m(r,"__esModule",{value:!0}),r.default=void 0;var v=b(e("@babel/runtime-corejs2/core-js/array/from")),_=b(e("@babel/runtime-corejs2/helpers/classCallCheck")),g=b(e("@babel/runtime-corejs2/helpers/createClass")),y=b(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),w=b(e("@babel/runtime-corejs2/helpers/get")),j=b(e("@babel/runtime-corejs2/helpers/inherits")),k=b(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),x=b(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),E=b(e("@babel/runtime-corejs2/helpers/defineProperty")),S=e("ud"),C=b(e("kefir")),I=b(e("kefir-stopper")),A=b(e("classnames")),T=b(e("../../../../lib/dom/insert-element-in-order")),D=b(e("../../../../lib/logger")),M=b(e("../../../../lib/dom/querySelectorOrFail")),R=b(e("../../../../views/SimpleElementView")),O=(0,S.defn)(t,s);r.default=O;var P=function(e){function t(e,n,o,i){var a;return(0,_.default)(this,t),a=r.call(this,l(o,i)),(0,E.default)((0,y.default)(a),"_addAboveNativeStatusBar",void 0),(0,E.default)((0,y.default)(a),"_gmailComposeView",void 0),(0,E.default)((0,y.default)(a),"_nativeStatusContainer",void 0),(0,E.default)((0,y.default)(a),"_prependContainer",null),(0,E.default)((0,y.default)(a),"_stopper",(0,I.default)()),a._addAboveNativeStatusBar=i,a._gmailComposeView=e,a._nativeStatusContainer=(0,M.default)(e.getElement(),".iN > tbody .aDj"),a._setStatusBar(),a.setHeight(n),a}(0,j.default)(t,e);var r=n(t);return(0,g.default)(t,[{key:"destroy",value:function(){this.destroyed||((0,w.default)((0,x.default)(t.prototype),"destroy",this).call(this),this._stopper.destroy(),this._prependContainer&&0===this._prependContainer.children.length&&this._prependContainer.remove(),this._updateTotalHeight())}},{key:"setHeight",value:function(e){this.el.style.height=e+"px",this._updateTotalHeight()}},{key:"_updateTotalHeight",value:function(){var e=(0,v.default)(this._gmailComposeView.getElement().querySelectorAll(".inboxsdk__compose_statusbar")).map(function(e){return e.getBoundingClientRect().height}).reduce(function(e,t){return e+t},0);this._gmailComposeView.getElement().style.setProperty("--inboxsdk-total-added-statusbar-height",e+"px")}},{key:"_setStatusBar",value:function(){try{var e=this._gmailComposeView.getStatusArea();if(this._gmailComposeView.getElement().classList.add("inboxsdk__compose_statusbarActive"),this._addAboveNativeStatusBar){var t=this._prependContainer=e.querySelector(".inboxsdk__compose_statusBarPrependContainer")||document.createElement("div");t.classList.add("inboxsdk__compose_statusBarPrependContainer"),e.insertAdjacentElement("afterbegin",t),(0,T.default)(t,this.el)}else if(this._gmailComposeView.isInlineReplyForm()){var r=(0,M.default)(this._gmailComposeView.getElement(),".iN > tbody .aDj .aDh .IZ");(0,T.default)(r,this.el)}else(0,T.default)(e,this.el)}catch(e){D.default.error(e)}}}]),t}(R.default)},{"../../../../lib/dom/insert-element-in-order":856,"../../../../lib/dom/querySelectorOrFail":868,"../../../../lib/logger":891,"../../../../views/SimpleElementView":920,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/get":41,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,classnames:104,kefir:327,"kefir-stopper":326,ud:625}],721:[function(e,t,r){"use strict";function n(e,t,r,n){var i=new u.default(n),a=i.getStopper().merge(e.getStopper());e.getStopper().takeUntilBy(i.getStopper()).onValue(function(){return i.destroy()}),document.body.appendChild(i.getElement()),o(i,e,t,r),e.getEventStream().filter(function(e){return"buttonAdded"===e.eventName||"fullscreenChanged"===e.eventName}).merge(i.getEventStream().filter(function(e){return"imageLoaded"===e.eventName})).debounce(10).takeUntilBy(a).onValue(o.bind(null,i,e,t,r)),t.getView().getEventStream().takeUntilBy(a).filter(function(e){return"click"===e.eventName}).onValue(i.destroy.bind(i));var l=s.default.interval(50).takeUntilBy(a),c=0,d=0;return l.takeWhile(function(){return!!t.getView()&&!!i.getElement()}).map(function(){return t.getView().getElement().getBoundingClientRect()}).filter(function(e){return e.left!==c||e.top!==d}).map(function(e){return c=e.left,d=e.top,e}).onValue(i.anchor.bind(i,t.getView().getElement(),{position:"top"})),l.filter(function(){return!t.getView()||!t.getView().getElement().offsetParent}).onValue(i.destroy.bind(i)),i}function o(e,t,r,n){try{t.ensureGroupingIsOpen(n.type),setTimeout(function(){e.anchor(r.getView().getElement(),{position:"top"})},10)}catch(e){l.default.error(e)}}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("kefir")),l=a(e("../../../../lib/logger")),u=a(e("../../widgets/gmail-tooltip-view"))},{"../../../../lib/logger":891,"../../widgets/gmail-tooltip-view":774,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],722:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/toConsumableArray")),a=o(e("lodash/once")),s=(0,a.default)(function(){var e=(0,i.default)(document.styleSheets).find(function(e){try{if(e.cssRules)return(0,i.default)(e.cssRules).find(function(e){return e instanceof CSSStyleRule&&".aoI"===e.selectorText&&e.style.fontSize&&e.style.color})}catch(e){}return!1});if(e){if((0,i.default)(e.cssRules).some(function(e){return e instanceof CSSStyleRule&&".aoI"===e.selectorText&&"visible"===e.style.overflowY}))return;if((0,i.default)(e.cssRules).some(function(e){return e instanceof CSSStyleRule&&".aaZ > .M9 > .aoI"===e.selectorText&&"auto"===e.style.overflowY}))return;document.body.classList.add("inboxsdk__classic_gmail_recipients_area")}});r.default=s},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56,"lodash/once":516}],723:[function(e,t,r){"use strict";function n(e){var t=e.querySelector(".inboxsdk__compose_groupedActionButton");t&&e.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")&&(0,o.simulateClick)(t)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":874,"@babel/runtime-corejs2/core-js/object/define-property":12}],724:[function(e,t,r){"use strict";function n(e,t){if("SEND_ACTION"!==t){var r=e.querySelector(".inboxsdk__compose_groupedActionButton");r&&(e.classList.contains("inboxsdk__compose_groupedActionToolbar_visible")||(0,o.simulateClick)(r))}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":874,"@babel/runtime-corejs2/core-js/object/define-property":12}],725:[function(e,t,r){"use strict";function n(e){e.getBodyElement().focus();var t=e.getLastSelectionRange(),r=document.getSelection();if(!r)throw new Error;t&&r.anchorNode===r.focusNode&&r.anchorOffset===r.focusOffset&&(r.removeAllRanges(),r.addRange(t))}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],726:[function(e,t,r){"use strict";function n(e,t){var r=t.getElement().querySelector('input[name="from"]'),n=r?r.value:null;if(!n)return e.getUserContact();var i,a=o(e,t),s=(0,u.default)(a,function(e){return e.emailAddress===n});return s?i=s.name:(i=n,e.getLogger().error(new Error("getFromContact failed to find name"),{fromContactChoicesLength:a.length})),{emailAddress:n,name:i}}function o(e,t){var r=t.getElement().querySelectorAll("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX > div[value][role=menuitem]");return 0==r.length?[e.getUserContact()]:(0,l.default)(r).map(function(e){return{emailAddress:e.getAttribute("value")||"",name:e.textContent.replace(/<.*/,"").trim()}})}function i(e,t,r){if(t.getFromContact().emailAddress!==r){var n=t.getElement().querySelector("div.J-M.jQjAxd.J-M-awS[role=menu] > div.SK.AX");if(n){var o=(0,u.default)(n.children,function(e){return e.getAttribute("value")==r});if(!o)throw new Error("Chosen email from choice was not found");(0,c.simulateClick)(o)}else if(e.getUserContact().emailAddress!=r)throw new Error("Chosen email from choice was not found")}}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.getFromContact=n,r.getFromContactChoices=o,r.setFromEmail=i;var l=s(e("@babel/runtime-corejs2/core-js/array/from")),u=s(e("lodash/find")),c=e("../../../../lib/dom/simulate-mouse-event")},{"../../../../lib/dom/simulate-mouse-event":874,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/find":484}],727:[function(e,t,r){"use strict";function n(e){var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar > div");if(t)return t;var r=e.getElement().querySelector(".inboxsdk__compose_actionToolbar > div");if(r)return r;if(!(r=l.get(e))){var n=r=o(e);e.getStopper().onValue(function(){n.remove()}),l.set(e,r)}return r}function o(e){var t=document.createElement("td");t.setAttribute("class","inboxsdk__compose_actionToolbar gU");var r=e.getFormattingArea();if(!r)throw new Error("formatting area missing");r.insertAdjacentElement("beforebegin",t);for(var n=t.parentElement;n&&"TABLE"!==n.tagName;)n=n.parentElement;if(n){var o=n.querySelector("colgroup col");if(o){var i=document.createElement("col");i.setAttribute("class","inboxsdk__compose_actionToolbarColumn");var a=document.createElement("col");a.setAttribute("class","inboxsdk__compose_separatorColumn"),o.insertAdjacentElement("afterend",a),o.insertAdjacentElement("afterend",i)}}var s=document.createElement("div");return t.appendChild(s),s}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/core-js/weak-map")),l=new s.default},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],728:[function(e,t,r){"use strict";function n(e){var t=(0,m.getRecipientRowElements)(e.getElement());if(!t||0===t.length)return d.default.never();var r=d.default.merge([i("to",e),i("cc",e),i("bcc",e)]),n=r.map(a);return d.default.merge([r,n,s(e)])}function o(e,t,r){return"option"===e.getAttribute("role")?{name:e.getAttribute("data-name"),emailAddress:e.getAttribute("data-hovercard-id")}:(0,p.default)(t,r)(e)}function i(e,t){var r=t.tagTree.getAllByTag("".concat(e,"Recipient"));return(0,h.default)(r).flatMap(function(r){var n=r.el,i=r.removalStream,a=o(n.getValue(),e,t);return a?d.default.constant({eventName:"".concat(e,"ContactAdded"),data:{contact:a}}).merge(i.map(function(){return{eventName:"".concat(e,"ContactRemoved"),data:{contact:a}}})):d.default.never()})}function a(e){var t={to:{added:[],removed:[]},cc:{added:[],removed:[]},bcc:{added:[],removed:[]}},r=e.eventName.split("Contact");return t[r[0]][r[1].toLowerCase()].push(e.data.contact),{eventName:"recipientsChanged",data:t}}function s(e){return d.default.later(0,null).flatMap(function(){var t=e.getElement().querySelector('input[name="from"]');return d.default.constant(l("fromContactChanged",e.getFromContact())).merge(t?(0,f.default)(t,{attributes:!0,attributeFilter:["value"]}).map(function(){return l("fromContactChanged",e.getFromContact())}):d.default.never())})}function l(e,t){return{eventName:e,data:{contact:t}}}var u=e("@babel/runtime-corejs2/core-js/object/define-property"),c=e("@babel/runtime-corejs2/helpers/interopRequireDefault");u(r,"__esModule",{value:!0}),r.default=n;var d=c(e("kefir")),f=(c(e("transducers.js")),c(e("../../../../lib/logger")),c(e("../../../../lib/dom/make-mutation-observer-stream"))),p=c(e("./get-address-information-extractor")),m=e("./page-parser"),h=(c(e("../../../../lib/dom/make-element-child-stream")),c(e("../../../../lib/toItemWithLifetimeStream")))},{"../../../../lib/dom/make-element-child-stream":859,"../../../../lib/dom/make-mutation-observer-stream":863,"../../../../lib/logger":891,"../../../../lib/toItemWithLifetimeStream":902,"./get-address-information-extractor":729,"./page-parser":740,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"transducers.js":623}],729:[function(e,t,r){"use strict";function n(e,t){return function(r){var n=r instanceof HTMLInputElement&&r.getAttribute("name")===e?r:r.querySelector("input[name='".concat(e,"']"));if(!n)return a.default.error(new Error("contactNode can't be found"),{addressType:e,composeViewHtml:(0,l.default)(t.getElement().outerHTML)}),null;var o=n.value;try{return(0,s.default)(o)}catch(e){return null}}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../../../../lib/logger")),s=i(e("../../../../lib/extract-contact-from-email-contact-string")),l=i(e("../../../../../common/censorHTMLstring"))},{"../../../../../common/censorHTMLstring":636,"../../../../lib/extract-contact-from-email-contact-string":876,"../../../../lib/logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],730:[function(e,t,r){"use strict";function n(e){var t=e.getBodyElement();return(0,a.default)(t,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"bodyChanged"}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=(i(e("kefir")),i(e("../../../../lib/dom/make-mutation-observer-stream")))},{"../../../../lib/dom/make-mutation-observer-stream":863,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],731:[function(e,t,r){"use strict";function n(e,t){if(!t){var r=l.get(e);if(null!=r)return r}var n=e.getFormattingArea();if(!n)return 0;var o=n.getBoundingClientRect().left;return l.set(e,o),(0,s.default)(function(){return l.delete(e)}),o}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/weak-map")),s=i(e("asap")),l=new a.default},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83}],732:[function(e,t,r){"use strict";function n(e){return c.flatMapLatest(function(t){return t(e)})}function o(e){var t=e.getElement(),r=e.getBodyElement(),n=(0,s.default)(t.children,function(e){return e.contains(r)});return(0,u.default)(n,{attributes:!0,attributeFilter:["style"]}).map(function(){return e.isMinimized()})}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("lodash/find")),l=(a(e("kefir")),a(e("ud-kefir"))),u=a(e("../../../../lib/dom/make-mutation-observer-stream")),c=(0,l.default)(t,o)},{"../../../../lib/dom/make-mutation-observer-stream":863,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"lodash/find":484,"ud-kefir":624}],733:[function(e,t,r){"use strict";function n(e,t){var r=(0,s.getRecipientChips)(e.getElement(),t);return(0,a.default)(r).map(function(r){return"option"===r.getAttribute("role")?{name:r.getAttribute("data-name"),emailAddress:r.getAttribute("data-hovercard-id")}:(0,l.default)(t,e)(r)}).filter(u.default)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=e("./page-parser"),l=i(e("./get-address-information-extractor")),u=i(e("../../../../lib/isNotNil"))},{"../../../../lib/isNotNil":889,"./get-address-information-extractor":729,"./page-parser":740,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],734:[function(e,t,r){"use strict";function n(e){var t;try{return t=(0,u.default)(e.getElement(),".J-J5-Ji .J-JN-M-I-Jm > img"),(0,l.default)(t,{attributeFilter:["class"],attributes:!0}).map(function(){return{data:{isForward:e.isForward()},eventName:"responseTypeChanged"}})}catch(e){return s.default.error(e),a.default.never()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("kefir")),s=i(e("../../../../lib/logger")),l=i(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),u=i(e("../../../../lib/dom/querySelectorOrFail"))},{"../../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../../lib/dom/querySelectorOrFail":868,"../../../../lib/logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],735:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=l(e("lodash/includes")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),m=l(e("kefir-bus")),h=l(e("../../../../lib/logger")),b=e("../../../../lib/dom/simulate-mouse-event"),v=l(e("../../../../lib/dom/keyboard-shortcut-stream")),_=function(){function e(t){(0,u.default)(this,e),(0,d.default)(this,"_element",document.createElement("div")),(0,d.default)(this,"_iconElement",document.createElement("div")),(0,d.default)(this,"_iconImgElement",void 0),(0,d.default)(this,"_iconClass",void 0),(0,d.default)(this,"_iconUrl",void 0),(0,d.default)(this,"_tooltip",void 0),(0,d.default)(this,"_hasDropdown",void 0),(0,d.default)(this,"_isEnabled",void 0),(0,d.default)(this,"_keyboardShortcutHandle",void 0),(0,d.default)(this,"_eventStream",void 0),this._isEnabled=!1!==t.enabled,this._iconClass=t.iconClass,this._iconUrl=t.iconUrl,this._tooltip=t.tooltip||t.title||t.text,this._hasDropdown=!!t.hasDropdown,this._keyboardShortcutHandle=t.keyboardShortcutHandle,this._createElement(t),this._eventStream=(0,m.default)(),this._setupEventStream(),this._setupAestheticEvents(),!1!==t.enabled&&this._setupKeyboardShortcutEvent()}return(0,c.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){this.addClass("inboxsdk__composeButton_active")}},{key:"deactivate",value:function(){this.removeClass("inboxsdk__composeButton_active")}},{key:"addClass",value:function(e){this._element.classList.add(e)}},{key:"removeClass",value:function(e){this._element.classList.remove(e)}},{key:"simulateHover",value:function(){(0,b.simulateHover)(this._element)}},{key:"setEnabled",value:function(e){this._setEnabled(e)}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"update",value:function(e){if(!e)return void(this._element.style.display="none");"none"===this._element.style.display&&(this._element.style.display="");var t=e.tooltip||e.title||e.text;t!=this._tooltip&&this._updateTooltip(t),e.iconUrl!=this._iconUrl&&this._updateIconUrl(e.iconUrl),e.iconClass!=this._iconClass&&this._updateIconClass(e.iconClass),!1!==e.enabled&&!0!==e.enabled||this._setEnabled(e.enabled)}},{key:"_createElement",value:function(e){this._createMainElement(e),this._createIconElement()}},{key:"_createMainElement",value:function(e){this._element.setAttribute("class","inboxsdk__composeButton"),e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0");var t=e.tooltip||e.title||e.text;t&&this._element.setAttribute("data-tooltip",t),!1===e.enabled&&this._element.classList.add("inboxsdk__button_disabled"),e.noOverflow&&this._element.setAttribute("data-no-overflow","")}},{key:"_createIconElement",value:function(){var e=this._iconElement;this._iconClass&&(e.innerHTML="&nbsp;",e.setAttribute("class",this._iconClass)),e.classList.add("inboxsdk__button_icon"),this._element.appendChild(e),this._iconUrl&&this._createIconImgElement()}},{key:"_createIconImgElement",value:function(){this._iconElement.innerHTML="";var e=this._iconImgElement=document.createElement("img");e.classList.add("inboxsdk__button_iconImg"),this._iconUrl?e.src=this._iconUrl:h.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),this._iconElement.appendChild(e)}},{key:"_updateTooltip",value:function(e){this._tooltip=e,e?this._element.setAttribute("data-tooltip",e):this._element.removeAttribute("data-tooltip")}},{key:"_updateIconUrl",value:function(e){this._iconUrl=e,!e&&this._iconImgElement?(this._iconImgElement.remove(),this._iconImgElement=null):e&&!this._iconImgElement?this._createIconImgElement():e&&this._iconImgElement&&(this._iconImgElement.src=e)}},{key:"_updateIconClass",value:function(e){this._iconClass=e,this._iconElement.setAttribute("class","inboxsdk__button_icon "+(e||""))}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}},{key:"_setupEventStream",value:function(){var e=this,t=p.fromEvents(this._element,"click");t.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(t.filter(function(){return e.isEnabled()}).map(function(e){return{eventName:"click",domEvent:e}}));var r=function(e){return(0,f.default)([32,13],e.which)},n=p.fromEvents(this._element,"keydown").filter(function(){return e.isEnabled()}),o=n.filter(r);this._eventStream.plug(o.map(function(e){return{eventName:"click",domEvent:e}
})),o.onValue(function(e){e.stopPropagation(),e.preventDefault()})}},{key:"_setupKeyboardShortcutEvent",value:function(){var e=this._keyboardShortcutHandle;e&&this._eventStream.plug((0,v.default)(e.chord).takeUntilBy(this._eventStream.filter(function(e){return"enabledChanged"===e.eventName&&!1===e.isEnabled})).map(function(e){return{eventName:"click",domEvent:e}}))}},{key:"_setupAestheticEvents",value:function(){var e=this;p.fromEvents(this._element,"mouseenter").filter(function(){return e.isEnabled()}).onValue(function(){e._element.classList.add("inboxsdk__button_hover")}),p.fromEvents(this._element,"mouseleave").onValue(function(){e._element.classList.remove("inboxsdk__button_hover")})}}]),e}();r.default=_},{"../../../../lib/dom/keyboard-shortcut-stream":858,"../../../../lib/dom/simulate-mouse-event":874,"../../../../lib/logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324,"lodash/includes":493}],736:[function(e,t,r){"use strict";function n(e,t,r){return o(e,t,r)}function o(e,t,r){e.focus(),e.getBodyElement().focus();var n=document.getSelection();if(!n)throw new Error("selection does't exist, what?");var o=n.getRangeAt(0),i=document.createElement("a");return i.href=r,o.extractContents(),o.insertNode(i),i.textContent=t,n.selectAllChildren(i),n.collapseToEnd(),i}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;e("../../../../lib/dom/simulate-mouse-event"),a(e("../../../../lib/dom/set-value-and-dispatch-event"))},{"../../../../lib/dom/set-value-and-dispatch-event":871,"../../../../lib/dom/simulate-mouse-event":874,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],737:[function(e,t,r){"use strict";function n(e){e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&o(e),i(e)}function o(e){var t=(0,B.default)(q,e);t.groupedToolbarButtonViewController&&t.groupedToolbarButtonViewController.destroy(),t.formattingToolbarMutationObserver&&t.formattingToolbarMutationObserver.disconnect();var r=t.groupedActionToolbarContainer.firstElementChild;if(r){h(e,r),r.remove();var n=(0,L.default)(e.getElement(),".inboxsdk__compose_actionToolbar");n.innerHTML="",n.appendChild(r)}}function i(e){a(e),w(e)}function a(e){F.has(e)||(F.add(e),window.requestAnimationFrame(function(){if(F.delete(e),!e.isDestroyed()&&(s(e),l(e))){var t=c(e),r=d(e);p(e,r),b(e,r),k(e,r),e.getElement().classList.remove("inboxsdk__compose_narrow_buttons"),s(e),e.getStopper().onValue(function(){t.remove(),r.destroy()})}}))}function s(e){e.getElement().clientWidth>u(e)||0===e.getElement().querySelectorAll(".inboxsdk__composeButton").length||e.getElement().classList.contains("inboxsdk__compose_narrow_buttons")||(e.getElement().classList.add("inboxsdk__compose_narrow_buttons"),e.getElement().offsetTop)}function l(e){return!e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar")&&(!(e.getElement().querySelectorAll(".inboxsdk__composeButton:not([data-no-overflow])").length<2)&&u(e)>e.getBottomToolbarContainer().clientWidth)}function u(e){var t=e.getBottomBarTable();return(0,I.default)(t.querySelectorAll(".btC > td")).reduce(function(e,t){return e+t.clientWidth},0)}function c(e){var t=document.createElement("div");return t.classList.add("inboxsdk__compose_groupedActionToolbar"),t.innerHTML='<div class="inboxsdk__compose_groupedActionToolbar_arrow"> </div>',(0,B.default)(q,e).groupedActionToolbarContainer=t,t.style.display="none",t}function d(e){var t=(0,B.default)(q,e),r=f(),n=new D.default({buttonView:r,activateFunction:function(){g(e,n),y()&&(0,B.default)(q,e).groupedActionToolbarContainer.querySelectorAll(".inboxsdk__composeButton")[0].focus()}});return t.groupedActionToolbarContainer.addEventListener("keydown",function(e){27===e.which&&(n.activate(),r.getElement().focus(),e.preventDefault(),e.stopPropagation())}),(0,B.default)(q,e).groupedToolbarButtonViewController=n,n}function f(){var e=new T.default({tooltip:"More Tools",iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAADxJREFUOBFjYKASYISa8x/NPJLFmdAMIJs7+Awi2ys000hy7EBdghHLgy+wqeYimgU+2QaPxhrZQUe6RgBYwgkWqJftAwAAAABJRU5ErkJggg=="});return e.addClass("inboxsdk__compose_groupedActionButton"),e.getElement().setAttribute("tabindex","1"),e}function p(e,t){var r=(0,L.default)(e.getElement(),".inboxsdk__compose_actionToolbar > div"),n=r.parentElement,o=document.createElement("div");o.appendChild(t.getView().getElement()),n.appendChild(o);var i=(0,B.default)(q,e).groupedActionToolbarContainer;i.insertBefore(r,i.firstElementChild),n.appendChild(i),m(e)}function m(e){h(e,(0,L.default)(e.getElement(),".inboxsdk__compose_actionToolbar > div"))}function h(e,t){var r=e.getElement().querySelectorAll(".inboxsdk__composeButton[data-no-overflow]");(0,I.default)(r).forEach(function(e){return(0,M.default)(t,e,void 0,!0)})}function b(e,t){y()&&_(e,t)}function v(e,t){(0,B.default)(q,e).groupedActionToolbarContainer.style.display="none",e.getElement().classList.remove("inboxsdk__compose_groupedActionToolbar_visible"),t.getView().deactivate(),localStorage.inboxsdk__compose_groupedActionButton_state="collapsed",e.getBottomBarTable().style.position="";var r=e.getElement().querySelector(".qz");r&&(r.scrollTop=r.scrollTop-1)}function _(e,t){(0,B.default)(q,e).groupedActionToolbarContainer.style.display="",e.getElement().classList.add("inboxsdk__compose_groupedActionToolbar_visible"),t.getView().activate(),localStorage.inboxsdk__compose_groupedActionButton_state="expanded",j(e);var r=e.getFormattingToolbar();r&&""===r.style.display&&(0,R.simulateClick)(e.getFormattingToolbarToggleButton());var n=e.getElement().querySelector(".qz");n&&(n.scrollTop=n.scrollTop+1)}function g(e,t){y()?v(e,t):_(e,t)}function y(){return"expanded"===localStorage.inboxsdk__compose_groupedActionButton_state}function w(e){H.has(e)||(H.add(e),window.requestAnimationFrame(function(){if(H.delete(e),!e.isDestroyed()){(0,N.default)(e);var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");t&&"none"!==t.style.display&&j(e)}}))}function j(e){if(!e.isMinimized()){var t=e.getElement().querySelector(".inboxsdk__compose_groupedActionToolbar");if(t){var r=(0,L.default)(e.getElement(),".inboxsdk__compose_groupedActionButton"),n=(0,L.default)(t,".inboxsdk__compose_groupedActionToolbar_arrow");if(t.style.display="",r.offsetLeft+r.clientWidth>t.offsetWidth){var o=r.clientWidth/2-t.offsetWidth/2-3;t.style.left=r.offsetLeft+o+"px",n.style.left=-(o+1)+"px"}else t.style.left="",n.style.left=r.offsetLeft-1+"px";e.getBottomBarTable().style.position="relative";var i=e.getBottomBarTable().clientHeight;if(t.style.bottom="".concat(i+1,"px"),i<1){var a=e.getElement().querySelectorAll("td.HE");P.default.error(new Error("bottom toolbar had bad height"),{bottomToolbarHeight:i,heElementHeights:(0,I.default)(a).map(function(e){return e.clientHeight}),heElementsHTML:(0,I.default)(a).map(V.default)})}}}}function k(e,t){(0,O.default)(function(){if(e.isDestroyed())throw"skip";return e.getFormattingToolbar()}).then(function(r){var n=new MutationObserver(function(e){var r=e[0].target;r instanceof HTMLElement&&""===r.style.display&&"expanded"===localStorage.inboxsdk__compose_groupedActionButton_state&&t.activate()});n.observe(r,{attributes:!0,attributeFilter:["style"]}),(0,B.default)(q,e).formattingToolbarMutationObserver=n,e.getStopper().onValue(function(){return n.disconnect()})}).catch(function(e){if("skip"!==e)throw P.default.error(e),e})}var x=e("@babel/runtime-corejs2/core-js/object/define-property"),E=e("@babel/runtime-corejs2/helpers/interopRequireDefault");x(r,"__esModule",{value:!0}),r.default=void 0;var S=E(e("@babel/runtime-corejs2/core-js/map")),C=E(e("@babel/runtime-corejs2/core-js/weak-set")),I=E(e("@babel/runtime-corejs2/core-js/array/from")),A=(E(e("asap")),e("ud")),T=E(e("./gmail-compose-button-view")),D=E(e("../../../../widgets/buttons/basic-button-view-controller")),M=(E(e("../../../../widgets/buttons/dropdown-button-view-controller")),E(e("../../widgets/gmail-dropdown-view")),E(e("../../../../lib/dom/insert-element-in-order"))),R=e("../../../../lib/dom/simulate-mouse-event"),O=E(e("../../../../lib/wait-for")),P=E(e("../../../../lib/logger")),L=E(e("../../../../lib/dom/querySelectorOrFail")),V=E(e("../../../../../common/censorHTMLtree")),N=E(e("./position-formatting-toolbar")),B=E(e("../../../../../common/get-or-fail")),q=(0,A.defonce)(t,function(){return new S.default}),U=(0,A.defn)(t,function(e){if("true"!==e.getElement().getAttribute("data-button-grouping-managed")){var t={};q.set(e,t),e.getElement().setAttribute("data-button-grouping-managed","true"),e.getEventStream().filter(function(e){return"fullscreenChanged"===e.eventName}).debounce(10).onValue(function(){n(e)}),e.getEventStream().filter(function(e){return"buttonAdded"===e.eventName}).onValue(function(){i(e)}),e.getEventStream().filter(function(e){return"resize"===e.eventName||"restored"===e.eventName}).onValue(function(){i(e)});var r=e.getElement();e.getStopper().onValue(function(){q.delete(e),r.setAttribute("data-button-grouping-managed","false")})}});r.default=U;var F=new C.default,H=new C.default},{"../../../../../common/censorHTMLtree":637,"../../../../../common/get-or-fail":642,"../../../../lib/dom/insert-element-in-order":856,"../../../../lib/dom/querySelectorOrFail":868,"../../../../lib/dom/simulate-mouse-event":874,"../../../../lib/logger":891,"../../../../lib/wait-for":904,"../../../../widgets/buttons/basic-button-view-controller":939,"../../../../widgets/buttons/dropdown-button-view-controller":940,"../../widgets/gmail-dropdown-view":770,"./gmail-compose-button-view":735,"./position-formatting-toolbar":741,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-set":31,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83,ud:625}],738:[function(e,t,r){"use strict";function n(e){a.default.merge([(0,s.default)(document.body,"mousedown"),(0,s.default)(e.getBodyElement(),"keydown"),e.getEventStream().filter(function(e){return"bodyChanged"===e.eventName})]).takeUntilBy(e.getStopper()).onValue(function(t){var r=e.getMaybeBodyElement(),n=document.getSelection();r&&n.rangeCount>0&&r.contains(n.anchorNode)&&e.setLastSelectionRange(n.getRangeAt(0))})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("kefir")),s=i(e("../../../../lib/from-event-target-capture"))},{"../../../../lib/from-event-target-capture":878,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],739:[function(e,t,r){"use strict";function n(e,t){if(t.isReply()){var r=t.getElement().querySelector("div.J-M.jQjAxd.HX[role=menu] > div.SK.AX > [role=menuitem]:nth-last-child(2)");if(!r)return void(c||(e.getLogger().error(new Error("could not find edit subject item"),{composeElement:(0,l.default)(t.getElement())}),c=!0));r.addEventListener("click",function(e){e.stopPropagation()},!0),r.addEventListener("mouseup",function(r){r.stopPropagation(),o(e,t)},!0)}}function o(e,t){var r=t.getToRecipients(),n=t.getCcRecipients(),o=t.getBccRecipients(),a=t.getFromContact(),s=t.getSubject();i(t);var l=t.getHTMLContent();t.discard(),e.openNewComposeViewDriver().then(function(e){r.length>0&&e.setToRecipients(r.map(function(e){return e.emailAddress})),n.length>0&&e.setCcRecipients(n.map(function(e){return e.emailAddress})),o.length>0&&e.setBccRecipients(o.map(function(e){return e.emailAddress})),e.setFromEmail(a.emailAddress),e.setSubject(s),e.setBodyHTML(l),setTimeout(function(){e.getSubjectInput().select()},1)})}function i(e){if(!e.getBodyElement().querySelector(".gmail_extra")){var t=e.getElement().querySelector(".ajR");t&&(0,u.simulateClick)(t)}}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=n;var l=s(e("../../../../../common/censorHTMLtree")),u=e("../../../../lib/dom/simulate-mouse-event"),c=!1},{"../../../../../common/censorHTMLtree":637,"../../../../lib/dom/simulate-mouse-event":874,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],740:[function(e,t,r){"use strict";function n(e,t){return new f.default(e,{logError:function(e,r){var n={el:r,html:r?(0,p.default)(r):null};t.errorSite(e,n)},tags:{},watchers:[{sources:[null],tag:"recipientsCommon",selectors:["div","div","div[jsaction]","div[role=region]","table","tbody","tr","td","form","div","table.GS","tbody","tr.bzf","td.eV","div","div"]},{sources:[null],tag:"recipientsCommon",selectors:["div[role=region]","table","tbody","tr","td","form","div","table[role=presentation]","tbody","tr","td.Iy","div.fX","table.GS","tbody","tr.bzf","td.eV","div","div"]},{sources:["recipientsCommon"],tag:"toRecipient",selectors:[{$or:[['div.anm[name="to"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:function(e){return e.querySelector("textarea.vO[name=to], input[name=to]")}},{$map:function(e){return e.closest("tr")}},"td.eV","div","div",".vR","input[type=hidden]",{$map:function(e){return e.parentElement}}]]}]},{sources:["recipientsCommon"],tag:"ccRecipient",selectors:[{$or:[['div.anm[name="cc"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:function(e){return e.querySelector("textarea.vO[name=cc], input[name=cc]")}},{$map:function(e){return e.closest("tr")}},"td.eV","div","div",".vR","input[type=hidden]",{$map:function(e){return e.parentElement}}]]}]},{sources:["recipientsCommon"],tag:"bccRecipient",selectors:[{$or:[['div.anm[name="bcc"]',{$or:[[],["div.aUy"]]},"div","div","div","div","[role=listbox]","div","div","div[role=option][data-name]"],[{$map:function(e){return e.querySelector("textarea.vO[name=bcc], input[name=bcc]")}},{$map:function(e){return e.closest("tr")}},"td.eV","div","div",".vR","input[type=hidden]",{$map:function(e){return e.parentElement}}]]}]}],finders:{toRecipient:{fn:function(e){return o(e,"to")}},ccRecipient:{fn:function(e){return o(e,"cc")}},bccRecipient:{fn:function(e){return o(e,"bcc")}}}})}function o(e,t){var r=s(e,t);return r?(0,c.default)(r.querySelectorAll(".vR > input[type=hidden]")).map(function(e){return e.parentElement}):e.querySelectorAll('.GS .anm[name="'.concat(t,'"] [role=listbox] [role=option][data-name]'))}function i(e){return Array.prototype.filter.call(e.querySelectorAll(".GS tr, .GS .anm[name] [role=listbox]"),function(e){return!e.classList.contains("inboxsdk__recipient_row")})}function a(e,t){return e.querySelector('.GS .anm[name="'.concat(t,'"] [role=listbox]'))}function s(e,t){var r=e.querySelector('.GS tr textarea.vO[name="'.concat(t,'"], .GS tr input[name="').concat(t,'"]'));return r?(0,d.default)(r,"tr"):null}var l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.makePageParser=n,r.getRecipientChips=o,r.getRecipientRowElements=i,r.getRecipientRowForType=a,r.getOldRecipientRowForType=s;var c=u(e("@babel/runtime-corejs2/core-js/array/from")),d=u(e("closest-ng")),f=u(e("page-parser-tree")),p=u(e("../../../../../common/censorHTMLtree"))},{"../../../../../common/censorHTMLtree":637,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"closest-ng":105,"page-parser-tree":543}],741:[function(e,t,r){"use strict";function n(e){var t=e.getFormattingToolbar();if(t&&""===t.style.display){var r=e.getFormattingToolbarArrow(),n=e.getFormattingToolbarToggleButton(),o=n.offsetLeft+n.clientWidth/2-r.offsetWidth/2;r.style.left=o+"px";var i=e.getStatusBarPrependContainer();t.style.bottom=i?-1*i.offsetHeight+"px":""}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],742:[function(e,t,r){"use strict";function n(e,t,r){function i(t){var r=t.closest(".fX.aiL");if(r&&"none"===r.style.display){(0,u.default)(e.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus"))}}if(!o(e,t,r)){var a=e.getLastSelectionRange(),c=(0,p.getRecipientRowForType)(e.getElement(),t);if("cc"===t){var m=e.getElement().querySelector("span.pE[role=link]");m&&(i(m),m.click(),c=(0,p.getRecipientRowForType)(e.getElement(),t))}else if("bcc"===t){var h=e.getElement().querySelector("span.pB[role=link]");h&&(i(h),h.click(),c=(0,p.getRecipientRowForType)(e.getElement(),t))}var b=c;if(b){var v=(0,u.default)(b,"input[role=combobox][aria-autocomplete=list]");if(!(v instanceof HTMLInputElement))throw new Error;(0,s.default)(b.querySelectorAll("div[role=option][data-name] div.afX[aria-label]")).forEach(function(e){e.click()}),v.value="";var _=new DataTransfer;_.setData("text/plain",r.join(",")),v.dispatchEvent(new ClipboardEvent("paste",{clipboardData:_}));var g=b.closest("div.anm[name]");if(r.length>0&&g&&!g.hasAttribute("data-inboxsdk-handled-reset")){var y=String(Number(g.getAttribute("data-inboxsdk-tracking-fresh-compose")||0)+1);g.setAttribute("data-inboxsdk-tracking-fresh-compose",y),setTimeout(function(){g.getAttribute("data-inboxsdk-tracking-fresh-compose")===y&&(g.removeAttribute("data-inboxsdk-tracking-fresh-compose"),0===b.querySelectorAll("div[role=option][data-name] div.afX[aria-label]").length&&(g.setAttribute("data-inboxsdk-handled-reset","true"),n(e,t,r)))},100)}}else{var w;try{if(!(w=(0,p.getOldRecipientRowForType)(e.getElement(),t)))throw new Error("getOldRecipientRowForType failed")}catch(e){return void l.default.error(e,{addressType:t})}var j=w.querySelector("textarea.vO");if(!(j&&j instanceof HTMLTextAreaElement))return;(0,s.default)(w.querySelectorAll(".vR .vM")).forEach(function(e){(0,d.simulateClick)(e)}),j.value=r.join(","),(0,f.default)(j,13,0);if((0,u.default)(e.getElement(),"div.aoD.hl").dispatchEvent(new FocusEvent("focus")),"cc"===t){var k=(0,u.default)(e.getElement(),"span.aB.gQ.pE");(0,d.simulateClick)(k)}else if("bcc"===t){var x=(0,u.default)(e.getElement(),"span.aB.gQ.pB");(0,d.simulateClick)(x)}}if(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),a){var E=document.getSelection();if(!E)throw new Error;E.removeAllRanges(),E.addRange(a)}}}function o(e,t,r){var n=(0,c.default)(e,t).map(function(e){return e.emailAddress});if(!r)return!!n;if(!n)return!!r;if(r.length!==n.length)return!1;for(var o=0;o<n.length;o++){var i=n[o];if(-1===r.indexOf(i))return!1}return!0}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/core-js/array/from")),l=a(e("../../../../lib/logger")),u=a(e("../../../../lib/dom/querySelectorOrFail")),c=a(e("./get-recipients")),d=e("../../../../lib/dom/simulate-mouse-event"),f=a(e("../../../../lib/dom/simulate-key")),p=e("./page-parser")},{"../../../../lib/dom/querySelectorOrFail":868,"../../../../lib/dom/simulate-key":873,"../../../../lib/dom/simulate-mouse-event":874,"../../../../lib/logger":891,"./get-recipients":733,"./page-parser":740,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],743:[function(e,t,r){"use strict";function n(e){if("function"!=typeof d)return null;var t=new d,r=new d;return(n=function(e){return e?r:t})(e)}function o(e){var t=i();return function(){var r,n=(0,y.default)(e);if(t){var o=(0,y.default)(this).constructor;r=c(n,arguments,o)}else r=n.apply(this,arguments);return(0,g.default)(this,r)}}function i(){if("undefined"==typeof Reflect||!c)return!1;if(c.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!0}catch(e){return!1}}function a(e){var t,r=null===(t=document.getSelection())||void 0===t?void 0:t.focusNode;if(!r)return null;if(r instanceof Text){var n;if(r.previousSibling instanceof HTMLAnchorElement&&0===(null===(n=document.getSelection())||void 0===n?void 0:n.anchorOffset))return r.previousSibling;if(r.nextSibling instanceof HTMLAnchorElement)return r.nextSibling}return s(r,e.getBodyElement())}function s(e,t){return e instanceof HTMLAnchorElement?e:e&&e!==t?s(e.parentElement,t):null}function l(e){return(0,k.default)(e.getGmailDriver().getTagTree().getAllByTag("composeLinkPopOverContainer")).flatMap(function(t){var r=t.el,n=t.removalStream,o=r.getValue(),i=null;return n.onValue(function(){i&&(i.emit("close"),i=null)}),(0,x.default)(o,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).takeUntilBy(n).flatMap(function(){if(i&&(i.emit("close"),i=null),"visible"===o.style.visibility){var t=a(e);if(t&&e.getElement().contains(t)){var r=new S(t,o);return i=r,j.constant({eventName:"linkPopOver",data:r})}}return j.never()})})}var u=e("@babel/runtime-corejs2/helpers/typeof"),c=e("@babel/runtime-corejs2/core-js/reflect/construct"),d=e("@babel/runtime-corejs2/core-js/weak-map"),f=e("@babel/runtime-corejs2/core-js/object/define-property"),p=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),m=e("@babel/runtime-corejs2/helpers/interopRequireDefault");f(r,"__esModule",{value:!0}),r.default=l;var h=m(e("@babel/runtime-corejs2/helpers/classCallCheck")),b=m(e("@babel/runtime-corejs2/helpers/createClass")),v=m(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),_=m(e("@babel/runtime-corejs2/helpers/inherits")),g=m(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),y=m(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),w=m(e("@babel/runtime-corejs2/helpers/defineProperty")),j=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=f&&p;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?p(e,a):null;s&&(s.get||s.set)?f(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),k=m(e("../../../../lib/toItemWithLifetimeStream")),x=m(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),E=m(e("../../../../lib/safe-event-emitter")),S=function(e){function t(e,n){var o;return(0,h.default)(this,t),o=r.call(this),(0,w.default)((0,v.default)(o),"_linkEl",void 0),(0,w.default)((0,v.default)(o),"_popOverEl",void 0),o._linkEl=e,o._popOverEl=n,o}(0,_.default)(t,e);var r=o(t);return(0,b.default)(t,[{key:"getLinkElement",value:function(){return this._linkEl}},{key:"addSection",value:function(){var e=this._popOverEl.querySelector(".inboxsdk__linkPopOver_section_container");return e||(e=document.createElement("div"),e.className="inboxsdk__linkPopOver_section_container",this._popOverEl.appendChild(e)),new C(this,e)}}]),t}(E.default),C=function(){function e(t,r){var n=this;(0,h.default)(this,e),(0,w.default)(this,"_el",document.createElement("div")),this._el.className="inboxsdk__linkPopOver_section",r.appendChild(this._el),t.on("close",function(){n.remove()})}return(0,b.default)(e,[{key:"getElement",value:function(){return this._el}},{key:"remove",value:function(){this._el.remove()}}]),e}()},{"../../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../../lib/safe-event-emitter":898,"../../../../lib/toItemWithLifetimeStream":902,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],744:[function(e,t,r){"use strict";function n(e){return"#"+(0,_.default)(e)}function o(e,t,r){return["height","min-height","max-height"].map(function(n){var o=(0,u.default)(e.style.getPropertyValue(n),10);if((0,c.default)(o))return null;var i=Math.max(o-t,r);return i===o?null:"".concat(n,": ").concat(i,"px !important;")}).filter(Boolean).join("\n")}function i(e){var t=e.getMaybeBodyElement();return t?(0,u.default)(t.style.minHeight,10)||0:0}function a(e,t){function r(e,t){var r=w+n(k)+" "+e,o=(0,m.default)(h.cssRules,function(e){return e.selectorText===r});-1!==o&&h.deleteRule(o),h.insertRule(r+" { "+t+" }",0)}if(!t.isInlineReplyForm()&&!t.getElement().classList.contains("inboxsdk__size_fixer")){t.getElement().classList.add("inboxsdk__size_fixer");var a=t.getEventStream(),s=a.filter(function(){return!1}).beforeEnd(function(){return null}),l=a.filter(function(e){return(0,f.default)(["resize","fullscreenChanged"],e.eventName)}).merge((0,b.default)(null)),u=t.getStatusArea().parentElement,c=t.getScrollBody(),h=j(),_=t.getTopFormElement(),k=t.getElement().id;k||(k=t.getElement().id="x".concat(Math.random(),"x").concat((0,d.default)())),(0,v.default)(u,{attributes:!0}).takeUntilBy(s).onValue(function(){t.getElement().dispatchEvent(new CustomEvent("resize",{bubbles:!1,cancelable:!1,detail:null}))}),l.bufferBy(l.flatMap(function(e){return(0,b.default)(null)})).filter(function(e){return e.length>0}).merge((0,v.default)(c,{attributes:!0})).takeUntilBy(s).onValue(function(){var e=Math.max(u.offsetHeight-g,0),a=Math.max(_.offsetHeight-y,0),s=e+a,l=i(t),d=o(c,s,l);r(n(c.id),d)}),s.onValue(function(){for(var e=h.cssRules.length-1;e>=0;e--)(0,p.default)(h.cssRules[e].selectorText,w+n(k)+" ")&&h.deleteRule(e)})}}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=a;var u=l(e("@babel/runtime-corejs2/core-js/parse-int")),c=l(e("@babel/runtime-corejs2/core-js/number/is-nan")),d=l(e("@babel/runtime-corejs2/core-js/date/now")),f=l(e("lodash/includes")),p=l(e("lodash/startsWith")),m=l(e("lodash/findIndex")),h=l(e("lodash/once")),b=(l(e("kefir")),l(e("../../../../lib/delay-asap"))),v=l(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),_=l(e("../../../../lib/css-selector-escape")),g=60,y=72,w="body:not(.inboxsdk_hack_disableComposeSizeFixer) ",j=(0,h.default)(function(){var e=document.createElement("style");e.type="text/css",e.className="inboxsdk__compose_size_fixer",document.head.appendChild(e);var t=e.sheet;if(!(t instanceof CSSStyleSheet))throw new Error("Could not add stylesheet");return t})},{"../../../../lib/css-selector-escape":849,"../../../../lib/delay-asap":850,"../../../../lib/dom/make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/number/is-nan":6,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"lodash/findIndex":485,"lodash/includes":493,"lodash/once":516,"lodash/startsWith":520}],745:[function(e,t,r){"use strict";function n(e,t){l.has(e)||(l.add(e),window.requestAnimationFrame(function(){if(l.delete(e),!e.isDestroyed()){var r=e._getFormattingAreaOffsetLeft(),n=(0,s.default)(e.getInsertMoreArea().style.left,10),o=r-t;e.getInsertMoreArea().style.left=n+o+"px"}}))}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/weak-set")),s=i(e("@babel/runtime-corejs2/core-js/parse-int")),l=new a.default},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/weak-set":31,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],746:[function(e,t,r){"use strict";function n(e){return{name:e.getAttribute("name"),emailAddress:e.getAttribute("email")}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a,s=i(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),l=i(e("@babel/runtime-corejs2/regenerator")),u=i(e("@babel/runtime-corejs2/core-js/promise")),c=i(e("@babel/runtime-corejs2/core-js/array/from")),d=i(e("@babel/runtime-corejs2/core-js/parse-int")),f=i(e("@babel/runtime-corejs2/helpers/typeof")),p=i(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),m=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),h=i(e("@babel/runtime-corejs2/helpers/createClass")),b=i(e("@babel/runtime-corejs2/helpers/defineProperty")),v=i(e("lodash/sortBy")),_=i(e("lodash/once")),g=i(e("auto-html")),y=(i(e("asap")),e("ud")),w=i(e("kefir")),j=i(e("kefir-bus")),k=i(e("kefir-stopper")),x=i(e("kefir-cast")),E=i(e("./gmail-attachment-area-view")),S=i(e("./gmail-attachment-card-view")),C=i(e("./gmail-message-view/get-updated-contact")),I=i(e("./gmail-message-view/attachment-icon")),A=(i(e("../../../lib/delay-asap")),i(e("../../../lib/wait-for")),i(e("../../../lib/dom/make-mutation-observer-stream"))),T=i(e("../../../lib/dom/querySelectorOrFail")),D=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),M=e("../../../lib/dom/simulate-mouse-event"),R=i(e("../../../../common/censorHTMLtree")),O=i(e("../../../../common/find-parent")),P=i(e("../../../lib/dom/reemitClickEventForReact")),L=!1,V=function(){function e(t,r,n){var o=this;(0,m.default)(this,e),(0,b.default)(this,"_element",void 0),(0,b.default)(this,"_driver",void 0),(0,b.default)(this,"_eventStream",(0,j.default)()),(0,b.default)(this,"_stopper",(0,
k.default)()),(0,b.default)(this,"_threadViewDriver",void 0),(0,b.default)(this,"_moreMenuItemDescriptors",void 0),(0,b.default)(this,"_moreMenuAddedElements",void 0),(0,b.default)(this,"_replyElementStream",void 0),(0,b.default)(this,"_readyStream",void 0),(0,b.default)(this,"_replyElement",void 0),(0,b.default)(this,"_gmailAttachmentAreaView",void 0),(0,b.default)(this,"_messageLoaded",!1),(0,b.default)(this,"_openMoreMenu",void 0),(0,b.default)(this,"_sender",null),(0,b.default)(this,"_recipients",null),(0,b.default)(this,"_recipientEmailAddresses",null),(0,b.default)(this,"_recipientsFull",null),this._element=t,this._threadViewDriver=r,this._driver=n,this._moreMenuItemDescriptors=[],this._moreMenuAddedElements=[],this._replyElement=null,this._replyElementStream=this._eventStream.filter(function(e){return"replyElement"===e.eventName}).map(function(e){return e.change}),this._setupMessageStateStream(),this._monitorEmailAddressHovering(),this._setupMoreMenuWatching();var i;if(n.isUsingSyncAPI()){var a=this._element.querySelector("[data-message-id]");if(a){var s=a.getAttribute("data-message-id");if(!s)throw new Error("data-message-id attribute has no value");i=a.hasAttribute("data-legacy-message-id")&&!this._driver.isRecentSyncDraftId(s.replace("#",""))?w.default.constant(null):w.default.fromPromise((0,p.default)(l.default.mark(function e(){var t,r,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=l.default.mark(function e(t){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o._driver.getGmailMessageIdForSyncMessageId(s.replace("#",""));case 3:return r=e.sent,a.setAttribute("data-legacy-message-id",r),e.abrupt("return",{v:null});case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,new u.default(function(e){return setTimeout(e,200*t)});case 12:case"end":return e.stop()}},e,null,[[0,8]])}),r=0;case 2:if(!(r<10)){e.next=10;break}return e.delegateYield(t(r),"t0",4);case 4:if(n=e.t0,"object"!==(0,f.default)(n)){e.next=7;break}return e.abrupt("return",n.v);case 7:r++,e.next=2;break;case 10:throw new Error("gmail message id never became available");case 11:case"end":return e.stop()}},e)}))())}else i=w.default.constant(null)}else i=w.default.constant(null);this._readyStream=i.takeUntilBy(this._stopper).onValue(function(){return o._processInitialState()})}return(0,h.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._eventStream.end(),this._gmailAttachmentAreaView&&this._gmailAttachmentAreaView.destroy(),this._moreMenuAddedElements.forEach(function(e){e.remove()})}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getReplyElementStream",value:function(){return this._replyElementStream}},{key:"getElement",value:function(){return this._element}},{key:"getThreadViewDriver",value:function(){return this._threadViewDriver}},{key:"isLoaded",value:function(){return this._messageLoaded}},{key:"getContentsElement",value:function(){if(!this._messageLoaded)throw new Error("tried to get message contents before message is loaded");try{return(0,T.default)(this._element,"div.ii.gt")}catch(e){return this._driver.getLogger().error(e),(0,T.default)(this._element,".adP")}}},{key:"isElementInQuotedArea",value:function(e){return null!=(0,O.default)(e,function(e){return"BLOCKQUOTE"===e.nodeName})}},{key:"getSender",value:function(){var e=this._sender;if(e)return e;var t=(0,T.default)(this._element,"td.gF span[email]"),r=t.getAttribute("email");if(!r)throw new Error("Could not find email address");return e=this._sender={name:t.getAttribute("name"),emailAddress:r}}},{key:"getRecipients",value:function(){var e=this,t=this._recipients;if(t)return t;var r=(0,c.default)(this._element.querySelectorAll(".hb span[email]"));return t=this._recipients=r.map(function(t){return e._getUpdatedContact({name:t.getAttribute("name"),emailAddress:t.getAttribute("email")||""})})}},{key:"getRecipientEmailAddresses",value:function(){var e=this._recipientEmailAddresses;if(e)return e;var t=(0,c.default)(this._element.querySelectorAll(".hb span[email]"));return e=this._recipientEmailAddresses=t.map(function(e){return e.getAttribute("email")||""})}},{key:"getRecipientsFull",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,r,n,o=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._recipientsFull)){e.next=3;break}return e.abrupt("return",t);case 3:if(!this._driver.isUsingSyncAPI()){e.next=11;break}return r=this._threadViewDriver.getInternalID(),e.next=7,this._driver.getPageCommunicator().getMessageRecipients(r,this._element);case 7:t=this._recipientsFull=e.sent,t||(this._driver.getLogger().error(new Error("Failed to find message recipients from response"),{threadID:r}),t=this._recipientsFull=this.getRecipients()),e.next=13;break;case 11:n=(0,c.default)(this._element.querySelectorAll(".hb span[email]")),t=this._recipientsFull=n.map(function(e){return o._getUpdatedContact({name:e.getAttribute("name"),emailAddress:e.getAttribute("email")||""})});case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDateString",value:function(){return(0,T.default)(this._element,".ads .gK .g3").title}},{key:"getDate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._threadViewDriver.getInternalID(),e.next=3,this._driver.getPageCommunicator().getMessageDate(t,this._element);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAttachmentCardViewDrivers",value:function(){return this._gmailAttachmentAreaView?this._gmailAttachmentAreaView.getAttachmentCardViews():[]}},{key:"addButtonToDownloadAllArea",value:function(e){var t=this._getAttachmentArea();t&&t.addButtonToDownloadAllArea(e)}},{key:"addMoreMenuItem",value:function(e){this._moreMenuItemDescriptors=(0,v.default)(this._moreMenuItemDescriptors.concat([e]),function(e){return e.orderHint}),this._updateMoreMenu()}},{key:"_setupMoreMenuWatching",value:function(){var e=this;this._openMoreMenu=null,this._eventStream.filter(function(e){return"viewStateChange"===e.eventName}).toProperty(function(){return null}).flatMapLatest(function(){var t=e._getMoreButton();return t?(0,D.default)(t,{attributes:!0,attributeFilter:["aria-expanded"]}).map(function(){return"true"===t.getAttribute("aria-expanded")?e._getOpenMoreMenu():null}):w.default.constant(null)}).takeUntilBy(this._stopper).onValue(function(t){e._openMoreMenu=t,e._updateMoreMenu()})}},{key:"_getMoreButton",value:function(){return"EXPANDED"!==this.getViewState()?null:this._element.querySelector("tr.acZ div.T-I.J-J5-Ji.aap.L3[role=button][aria-haspopup]")}},{key:"_getOpenMoreMenu",value:function(){return document.body.querySelector("td > div.nH.if > div.nH.aHU div.b7.J-M[aria-haspopup=true]")}},{key:"_closeActiveEmailMenu",value:function(){var e=this._getMoreButton();e&&(0,M.simulateClick)(e)}},{key:"_updateMoreMenu",value:function(){var e=this;this._moreMenuAddedElements.forEach(function(e){e.remove()}),this._moreMenuAddedElements.length=0;var t=this._openMoreMenu;if(t&&this._moreMenuItemDescriptors.length){var r=t.offsetHeight,n=t.offsetWidth,o=document.createElement("div");o.className="J-Kh",this._moreMenuAddedElements.push(o),t.appendChild(o),this._moreMenuItemDescriptors.forEach(function(r){var n=document.createElement("div");if(n.className="J-N",n.setAttribute("role","menuitem"),n.innerHTML=(0,g.default)(a||(a=(0,s.default)(['<div class="J-N-Jz">',"</div>"])),r.title),n.addEventListener("mouseenter",function(e){return n.classList.add("J-N-JT")}),n.addEventListener("mouseleave",function(e){return n.classList.remove("J-N-JT")}),n.addEventListener("click",function(t){e._closeActiveEmailMenu(),r.onClick()}),r.iconUrl||r.iconClass){var o=document.createElement("img");o.className="f4 J-N-JX inboxsdk__message_more_icon ".concat(r.iconClass||""),o.src=r.iconUrl||"images/cleardot.gif";var i=n.firstElementChild;i&&i.appendChild(o)}e._moreMenuAddedElements.push(n),t.appendChild(n)});var i=t.getBoundingClientRect(),l=i.width-n;l>0&&(t.style.left=Math.max(0,(0,d.default)(t.style.left)-l)+"px");var u=this._getMoreButton();if(u){var c=u.getBoundingClientRect();if(i.top<c.top){var f=i.height-r;t.style.top=Math.max(0,(0,d.default)(t.style.top)-f)+"px"}}}}},{key:"getMessageID",value:function(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._messageLoaded))throw new Error("tried to get message id before message is loaded");var e=this._element.querySelector("[data-legacy-message-id]");if(e){var t=e.getAttribute("data-legacy-message-id");if(!t)throw new Error("message id attribute with no value, wtf?");return t}var r=this._element.querySelector("div.ii.gt");if(!r){var n=new Error("Could not find message id element");throw this._driver.getLogger().error(n,{elementHtml:(0,R.default)(this._element)}),n}var o=r.className.match(/\bm([0-9a-f]+)\b/);if(o)return L||(L=!0,this._driver.getLogger().eventSite("old messageid location")),o[1];var i=r.firstElementChild;if(!i){var a=new Error("Could not find message id value");throw this._driver.getLogger().error(a,{reason:"Could not find element",messageHtml:(0,R.default)(r)}),a}var s=i.className.match(/\bm([0-9a-f]+)\b/);if(!s){var l=new Error("Could not find message id value");throw this._driver.getLogger().error(l,{reason:"Element was missing message className",messageHtml:(0,R.default)(r)}),l}return s[1]}},{key:"getMessageIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMessageID());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"addAttachmentIcon",value:function(e){var t=this,r=new I.default;if(!this._element)return console.warn("addDateIcon called on destroyed message"),r;this._element.setAttribute("inboxsdk__message_added_attachment_icon","true");var n=(0,_.default)(function(){var e=document.createElement("img");return e.src="images/cleardot.gif",e}),o=(0,_.default)(function(){return document.createElement("div")}),i=(0,_.default)(function(){return document.createElement("div")}),a=!1,s=null;return this._stopper.onValue(function(){a&&(o().remove(),i().remove(),n().remove(),a=!1)}),(0,x.default)(w.default,e).combine(this._eventStream.filter(function(e){return"viewStateChange"===e.eventName}).toProperty(function(){return null}),function(e){return e}).takeUntilBy(this._stopper).onValue(function(e){if(e){var l;l="COLLAPSED"===t.getViewState()?(0,T.default)(t._element,".adf.ads td.gH span"):(0,T.default)(t._element,"td.gH div.gK span");var u=null!=e.iconHtml?o():n(),c=e.onClick;if(c?(u.onclick=function(e){e.preventDefault(),e.stopPropagation(),c()},u.style.cursor="pointer"):(u.onclick=null,u.style.cursor=""),e.tooltip&&"object"==(0,f.default)(e.tooltip)&&e.tooltip instanceof HTMLElement){var d=i();d.className="inboxsdk__message_attachment_tooltipWrapper",d.onclick=function(e){e.stopPropagation(),(0,P.default)(e)},d.appendChild(e.tooltip),u.onmouseenter=function(e){e.preventDefault(),e.stopPropagation(),u.appendChild(d),r.emit("tooltipShown")},u.onmouseleave=function(e){e.preventDefault(),e.stopPropagation(),u.removeChild(d),r.emit("tooltipHidden")},u.removeAttribute("data-tooltip")}else e.tooltip&&"string"==typeof e.tooltip?u.setAttribute("data-tooltip",e.tooltip):u.removeAttribute("data-tooltip");u.className=null!=e.iconHtml?"inboxsdk__message_attachment_iconWrapper ".concat(e.iconClass||""):"inboxsdk__message_attachment_icon "+(e.iconClass||""),null!=e.iconHtml?(l.contains(n())&&n().remove(),u.innerHTML=e.iconHtml):s!=e.iconUrl&&(l.contains(o())&&o().remove(),u.style.background=e.iconUrl?"url("+e.iconUrl+") no-repeat 0 0":"",s=e.iconUrl),l.contains(u)||(l.appendChild(u),a=!0)}else a&&(o().remove(),n().remove(),i().remove(),a=!1)}),r}},{key:"getViewState",value:function(){return this._element.classList.contains("kQ")||this._element.classList.contains("kx")?"HIDDEN":this._element.classList.contains("kv")?"COLLAPSED":"EXPANDED"}},{key:"hasOpenReply",value:function(){return Boolean(this._replyElement)}},{key:"addAttachmentCard",value:function(e){var t=new S.default(e,this._driver,this);return this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._getAttachmentArea()),this._gmailAttachmentAreaView||(this._gmailAttachmentAreaView=this._createAttachmentArea()),this._gmailAttachmentAreaView.addGmailAttachmentCardView(t),t}},{key:"_setupMessageStateStream",value:function(){var e=this;this._eventStream.plug((0,A.default)(this._element,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0}).takeUntilBy(this._stopper).map(function(e){var t,r,n=e.target.classList,o=e.oldValue;return o.indexOf("kQ")>-1||o.indexOf("kx")>-1?t="HIDDEN":o.indexOf("kv")>-1||o.indexOf("ky")>-1?t="COLLAPSED":o.indexOf("h7")>-1&&(t="EXPANDED"),n.contains("kQ")||n.contains("kx")?r="HIDDEN":n.contains("kv")||n.contains("ky")?r="COLLAPSED":n.contains("h7")&&(r="EXPANDED"),{oldValue:t,newValue:r,currentClassList:n}}).map(function(t){return"EXPANDED"===t.newValue&&"EXPANDED"!==t.oldValue&&e._checkMessageOpenState(t.currentClassList),t}).filter(function(e){return e.newValue!==e.oldValue&&!!e.oldValue&&!!e.newValue}).map(function(e){return{eventName:"viewStateChange",oldValue:e.oldValue,newValue:e.newValue}}))}},{key:"_processInitialState",value:function(){this._checkMessageOpenState(this._element.classList)}},{key:"_checkMessageOpenState",value:function(e){if(e.contains("h7")&&!this._messageLoaded){var t;try{t=this.getMessageID(!0)}catch(e){return void this._driver.getLogger().error(e)}this._messageLoaded=!0;try{this._driver.associateThreadAndMessageIDs(this._threadViewDriver.getThreadID(),t)}catch(e){this._driver.getLogger().error(e)}this._gmailAttachmentAreaView=this._getAttachmentArea(),this._eventStream.emit({type:"internal",eventName:"messageLoad"}),this._setupReplyStream()}}},{key:"_setupReplyStream",value:function(){var e=this._element.querySelector(".ip");if(e){var t=this,r=null;w.default.combine([(0,D.default)(e,{attributes:!0,attributeFilter:["class"]}),w.default.later(1,null)]).merge(w.default.later(1)).takeUntilBy(this._stopper).beforeEnd(function(){return"END"}).onValue(function(n){if("END"!==n&&e.classList.contains("adB")){if(!r){var o=e.firstElementChild;t._replyElement=o,o&&(r=(0,j.default)(),t._eventStream.emit({type:"internal",eventName:"replyElement",change:{el:o,removalStream:r}}))}}else if(r){var i=r;r=null,i.emit(null),i.end(),t._replyElement=null}})}}},{key:"_monitorEmailAddressHovering",value:function(){var e=this;this._eventStream.plug(w.default.fromEvents(this._element,"mouseover").map(function(e){return e.target}).filter(function(e){return e&&e.getAttribute("email")}).map(function(t){var r=null;return r=e._element.classList.contains("h7")?e._element.querySelector("h3.iw").contains(t)?"sender":"recipient":"sender",{get contact(){return e._getUpdatedContact(n(t))},contactType:r,eventName:"contactHover",messageViewDriver:e}}))}},{key:"_getAttachmentArea",value:function(){return this._element.querySelector(".hq")?new E.default(this._element.querySelector(".hq"),this._driver,this):null}},{key:"_createAttachmentArea",value:function(){var e=new E.default(null,this._driver,this),t=(0,T.default)(this._element,".hi"),r=t.parentNode;if(!r)throw new Error("parentNode not found");return r.insertBefore(e.getElement(),t),e}},{key:"_getUpdatedContact",value:function(e){return(0,C.default)(e,this._element)}},{key:"getReadyStream",value:function(){return this._readyStream}}]),e}(),N=(0,y.defn)(t,V);r.default=N},{"../../../../common/censorHTMLtree":637,"../../../../common/find-parent":640,"../../../lib/delay-asap":850,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/make-mutation-observer-stream":863,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/dom/reemitClickEventForReact":869,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/wait-for":904,"./gmail-attachment-area-view":712,"./gmail-attachment-card-view":713,"./gmail-message-view/attachment-icon":747,"./gmail-message-view/get-updated-contact":748,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,asap:83,"auto-html":89,kefir:327,"kefir-bus":324,"kefir-cast":325,"kefir-stopper":326,"lodash/once":516,"lodash/sortBy":519,ud:625}],747:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/inherits")),c=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),d=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),f=e("ud"),p=s(e("../../../../lib/safe-event-emitter")),m=function(e){function t(){return(0,l.default)(this,t),r.apply(this,arguments)}(0,u.default)(t,e);var r=n(t);return t}(p.default),h=(0,f.defn)(t,m);r.default=h},{"../../../../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,ud:625}],748:[function(e,t,r){"use strict";function n(e,t){var r=c[e.emailAddress];if(r){if(r.headerContact.name===e.name)return r.modalContact;delete c[e.emailAddress]}var n=t.querySelector(".ajA.SK"),i=n&&"hidden"===n.style.visibility,a=t.querySelector(".ajy[aria-haspopup=true]");if(a&&i){var u=function(e){e.stopPropagation()},d=function(e){e.shouldIgnore=!0};t.addEventListener("click",u),document.addEventListener("focus",d,!0),(0,l.simulateClick)(a);try{o(e)}catch(e){s.default.error(e)}finally{(0,l.simulateClick)(a),t.removeEventListener("click",u),document.removeEventListener("focus",d,!0)}if(r=c[e.emailAddress])return r.modalContact}return e}function o(e){for(var t=document.querySelectorAll(".ajC [email]"),r=0;r<t.length;r++){var n=t[r],o=n.getAttribute("email");if(o&&!c[o]){var i={emailAddress:o,name:null},a=n.getAttribute("name");if(a)i.name=a;else{var s=(0,u.default)(n.textContent);o===s.emailAddress&&(i=s)}c[o]={headerContact:e,modalContact:i}}}}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("../../../../lib/logger")),l=e("../../../../lib/dom/simulate-mouse-event"),u=a(e("../../../../lib/extract-contact-from-email-contact-string")),c={}},{"../../../../lib/dom/simulate-mouse-event":874,"../../../../lib/extract-contact-from-email-contact-string":876,"../../../../lib/logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],749:[function(e,t,r){"use strict";function n(e){if("function"!=typeof m)return null;var t=new m,r=new m;return(n=function(e){return e?r:t})(e)}function o(e,t){var r=l(e);if(u){var n=u(e);t&&(n=n.filter(function(t){return c(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,x.default)(e,t,r[t])}):d?f(e,d(r)):o(Object(r)).forEach(function(t){p(e,t,c(r,t))})}return e}function a(){return z}var s=e("@babel/runtime-corejs2/helpers/typeof"),l=e("@babel/runtime-corejs2/core-js/object/keys"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),f=e("@babel/runtime-corejs2/core-js/object/define-properties"),p=e("@babel/runtime-corejs2/core-js/object/define-property"),m=e("@babel/runtime-corejs2/core-js/weak-map"),h=e("@babel/runtime-corejs2/helpers/interopRequireDefault");p(r,"__esModule",{value:!0}),r.getLeftIndentationPaddingValue=a,r.default=void 0;var b,v,_,g=h(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),y=h(e("@babel/runtime-corejs2/core-js/number/max-safe-integer")),w=h(e("@babel/runtime-corejs2/helpers/toConsumableArray")),j=h(e("@babel/runtime-corejs2/helpers/classCallCheck")),k=h(e("@babel/runtime-corejs2/helpers/createClass")),x=h(e("@babel/runtime-corejs2/helpers/defineProperty")),E=h(e("auto-html")),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=p&&c;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?c(e,a):null;l&&(l.get||l.set)?p(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),C=h(e("kefir-bus")),I=h(e("../gmail-element-getter")),A=h(e("../../../lib/dom/get-insert-before-element")),T=h(e("../../../lib/dom/querySelectorOrFail")),D=h(e("../../../lib/dom/make-mutation-observer-chunked-stream")),M=h(e("../widgets/buttons/button-view")),R=h(e("../widgets/buttons/more-dropdown-button-view")),O=h(e("../widgets/buttons/more-parent-accessory-button-view")),P=h(e("../widgets/buttons/create-accessory-button-view")),L=h(e("../widgets/buttons/create-parent-accessory-button-view")),V=h(e("../widgets/gmail-dropdown-view")),N=h(e("../../../widgets/buttons/dropdown-button-view-controller")),B=h(e("../../../widgets/buttons/basic-button-view-controller")),q=h(e("../../../driver-common/update-icon")),U=h(e("../../../driver-common/render-custom-icon")),F=h(e("../../../constants/nav-item-types")),H=0,z=12,W=function(){function e(t,r,n){(0,j.default)(this,e),(0,x.default)(this,"_accessory",null),(0,x.default)(this,"_accessoryViewController",null),(0,x.default)(this,"_driver",void 0),(0,x.default)(this,"_element",void 0),(0,x.default)(this,"_eventStream",void 0),(0,x.default)(this,"_expandoElement",null),(0,x.default)(this,"_iconSettings",{}),(0,x.default)(this,"_isActive",!1),(0,x.default)(this,"_isCollapsed",!1),(0,x.default)(this,"_itemContainerElement",null),(0,x.default)(this,"_level",void 0),(0,x.default)(this,"_name",""),(0,x.default)(this,"_navItemDescriptor",void 0),(0,x.default)(this,"_navItemNumber",void 0),(0,x.default)(this,"_orderGroup",void 0),(0,x.default)(this,"_orderHint",void 0),(0,x.default)(this,"_type",null),(0,x.default)(this,"_collapseKey",null),(0,x.default)(this,"_isNewLeftNavParent",void 0),this._driver=t,this._eventStream=(0,C.default)(),this._level=n||0,this._navItemNumber=++H,this._orderGroup=r,this._isNewLeftNavParent=!I.default.shouldAddNavItemsInline()&&1===this._level,this._isNewLeftNavParent?this._element=this._setupParentElement():this._element=this._setupChildElement()}return(0,k.default)(e,[{key:"addNavItem",value:function(t,r){var n=this,o=this._type===F.default.GROUPER?this._level:this._level+1,i=new e(this._driver,t,o);return i.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(function(){return n._addNavItemElement(i)}),i.setNavItemDescriptor(r),this._isNewLeftNavParent&&this._createExpandoParent(),i}},{key:"destroy",value:function(){this._element.remove(),this._accessoryViewController&&this._accessoryViewController.destroy(),this._eventStream&&this._eventStream.end(),this._expandoElement&&this._expandoElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getNavItemDescriptor",value:function(){return this._navItemDescriptor}},{key:"getOrderGroup",value:function(){return this._orderGroup}},{key:"getOrderHint",value:function(){return this._orderHint}},{key:"getName",value:function(){return this._name}},{key:"isCollapsed",value:function(){return this._isCollapsed}},{key:"remove",value:function(){this.destroy()}},{key:"setActive",value:function(e){if(this._element&&this._type!==F.default.LINK&&this._type!==F.default.MANAGE&&this._isActive!==e&&!this._isNewLeftNavParent){var t=(0,T.default)(this._element,".TO");e?(this._element.classList.add("ain"),t.classList.add("nZ"),t.classList.add("aiq")):(this._element.classList.remove("ain"),t.classList.remove("nZ"),t.classList.remove("aiq")),this._setHeights(),this._isActive=e}}},{key:"setCollapsed",value:function(e){this._isCollapsed=e,this._isCollapsible()&&(e?this._collapse():this._expand());try{var t="inboxsdk__navitem_collapsed__"+this._collapseKey;this._isCollapsed?localStorage.setItem(t,"true"):localStorage.removeItem(t)}catch(e){console.error("Caught error",e)}}},{key:"setNavItemDescriptor",value:function(e){var t=this;e.takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).onValue(function(e){return t._updateValues(e)})}},{key:"toggleCollapse",value:function(){this.setCollapsed(!this._isCollapsed)}},{key:"_addNavItemElement",value:function(e){var t=this._getItemContainerElement(),r=(0,A.default)(e.getElement(),t.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);t.insertBefore(e.getElement(),r);var n=this._type===F.default.GROUPER||this._isNewLeftNavParent?this._level-1:this._level,o=e.getElement();I.default.shouldAddNavItemsInline()?(0,T.default)(o,".TN").style.marginLeft=a()*n+"px":(0,T.default)(o,".TN").style.marginLeft=6*n+"px",this._setHeights()}},{key:"_collapse",value:function(){if(this._isCollapsed=!0,this._isNewLeftNavParent)this._element.classList.remove("Xr");else{var e=this._expandoElement;if(e)e.classList.remove("aih"),e.classList.add("aii");else if(this._type===F.default.GROUPER){var t=this._element.firstElementChild;t&&t.classList.remove("air")}this._itemContainerElement&&(this._itemContainerElement.style.display="none"),this._setHeights()}this._eventStream.emit({eventName:"collapsed"})}},{key:"_createAccessory",value:function(e){switch(e.type){case"CREATE":this._createCreateAccessory(e);break;case"ICON_BUTTON":this._createIconButtonAccessory(e);break;case"DROPDOWN_BUTTON":this._createDropdownButtonAccessory(e);break;case"SETTINGS_BUTTON":this._driver.getLogger().deprecationWarning("SettingsButtonAccessoryDescriptor","DropdownButtonAccessoryDescriptor"),this._createDropdownButtonAccessory(i(i({},e),{},{type:"DROPDOWN_BUTTON"}))}}},{key:"_createCreateAccessory",value:function(e){this._createPlusButtonAccessory(e)}},{key:"_createDropdownButtonAccessory",value:function(e){if(this._isNewLeftNavParent){var t=i({},e);t.buttonView=new O.default,t.dropdownViewDriverClass=V.default,t.dropdownPositionOptions={position:"right",hAlign:"left",vAlign:"top"},t.dropdownShowFunction=function(e){var r=e.dropdown;r.el.style.marginLeft="24px",t.onClick({dropdown:r})};var r=new N.default(t);this._accessoryViewController=r;var n=(0,T.default)(this._element,".Yh"),o=n.parentNode;if(o){var a;(a=t.buttonView.getElement().classList).add.apply(a,(0,w.default)(n.classList)),o.replaceChild(t.buttonView.getElement(),n),this._iconSettings.iconElement=null}}else{var s=i({},e);s.buttonView=new R.default,s.dropdownViewDriverClass=V.default,s.dropdownPositionOptions={position:"bottom",hAlign:"left",vAlign:"top"};var l=I.default.getLeftNavContainerElement();if(!l)throw new Error("leftNavContainer not found");s.dropdownShowFunction=function(e){if(l.classList.contains("bhZ")){var t=S.fromEvents(e.dropdown,"destroy");(0,D.default)(l,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(t).toProperty(function(){return null}).onValue(function(){l.classList.contains("bym")||l.classList.add("bym")}),t.onValue(function(){l.classList.remove("bym")})}s.onClick(e),e.dropdown.on("destroy",function(){s.buttonView.deactivate()})};var u=new N.default(s);this._accessoryViewController=u;var c=(0,T.default)(this._element,".TO");c.addEventListener("mouseenter",function(){return c.classList.add("inboxsdk__navItem_hover")}),c.addEventListener("mouseleave",function(){return c.classList.remove("inboxsdk__navItem_hover")});(0,T.default)(this._element,".TN").appendChild(s.buttonView.getElement()),this._setupContextClickHandler(u)}}},{key:"_createExpando",value:function(){var e=this;if(this._type!==F.default.GROUPER){var t=this._expandoElement=document.createElement("div");t.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),t.setAttribute("role","link"),t.title="Expand ".concat(this._name||""),t.addEventListener("click",function(t){e.toggleCollapse(),t.stopPropagation()});var r=this._element.querySelector(".TN.aik");r&&r.insertAdjacentElement("afterbegin",t),this._isCollapsed?this._collapse():this._expand()}}},{key:"_createExpandoParent",value:function(){var e=(0,T.default)(this._element,".XR");e.style.visibility="visible",this._expandoElement=e,this._isCollapsed?this._collapse():this._expand()}},{key:"_createIconButtonAccessory",value:function(e){if(this._driver.getLogger().deprecationWarning("IconButtonAccessoryDescriptor accessory for a parent level NavItemView","CreateAccessoryDescriptor or DropdownButtonAccessoryDescriptor"),!this._isNewLeftNavParent){var t=i(i({},e),{},{buttonColor:"pureIcon"});t.buttonView=new M.default(t),this._accessoryViewController=new B.default(t);(0,T.default)(this._element,".TN").appendChild(t.buttonView.getElement())}}},{key:"_createItemContainerElement",value:function(){var e=this._itemContainerElement=document.createElement("div");return e.classList.add("inboxsdk__navItem_container"),this._element.appendChild(e),this._isCollapsible()&&(this._isCollapsed?this._collapse():this._expand()),e}},{key:"_createLinkButtonAccessory",value:function(e){var t=document.createElement("div");t.setAttribute("class","inboxsdk__navItem_link");var r=document.createElement("a");r.classList.add("CK"),r.textContent=e.name,t.appendChild(r),r.href="#",r.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.onClick()}),(0,T.default)(this._element,".aio").appendChild(t)}},{key:"_createPlusButtonAccessory",value:function(e){if(this._isNewLeftNavParent){var t=i({},e);t.buttonView=new L.default,this._accessoryViewController=new B.default(t);var r=(0,T.default)(this._element,".Yh"),n=r.parentNode;if(n){var o;(o=t.buttonView.getElement().classList).add.apply(o,(0,w.default)(r.classList)),n.replaceChild(t.buttonView.getElement(),r),this._iconSettings.iconElement=null}}else{var a=i({},e);a.buttonView=new P.default,this._accessoryViewController=new B.default(a);(0,T.default)(this._element,".TN").appendChild(a.buttonView.getElement())}}},{key:"_expand",value:function(){if(this._isNewLeftNavParent)this._element.classList.add("Xr");else{var e=this._expandoElement;if(e)e.classList.add("aih"),e.classList.remove("aii");else if(this._type===F.default.GROUPER){var t=this._element.firstElementChild;t&&t.classList.add("air")}
this._itemContainerElement&&(this._itemContainerElement.style.display=""),this._setHeights()}this._isCollapsed=!1,this._eventStream.emit({eventName:"expanded"})}},{key:"_getItemContainerElement",value:function(){if(this._isNewLeftNavParent)return(0,T.default)(this._element,".TK");var e=this._itemContainerElement;return e||(e=this._createItemContainerElement(),this._createExpando()),e}},{key:"_isCollapsible",value:function(){return Boolean(this._expandoElement)||this._type===F.default.GROUPER}},{key:"_makeEventMapper",value:function(e){return function(t){return t.stopPropagation(),t.preventDefault(),{eventName:e,domEvent:t}}}},{key:"_setHeights",value:function(){if(1!=this._level){var e=(0,T.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";var t=this._element.clientHeight,r=e.clientHeight;this._element.style.height=r+"px",this._element.style.overflow="visible",this._element.style.marginBottom=t-r+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}}},{key:"_setHighlight",value:function(e){this._element&&this._type!==F.default.LINK&&this._type!==F.default.MANAGE&&(e?(0,T.default)(this._element,".TO").classList.add("NQ"):(0,T.default)(this._element,".TO").classList.remove("NQ"))}},{key:"_setupContextClickHandler",value:function(e){var t=this;S.fromEvents(this._element,"contextmenu").takeWhile(function(){return t._accessoryViewController===e}).onValue(function(t){t.stopPropagation(),t.preventDefault(),e.showDropdown()})}},{key:"_setupChildElement",value:function(){var e=this,t=document.createElement("div");t.setAttribute("class","aim inboxsdk__navItem"),t.innerHTML=['<div class="TO">','<div class="TN aik">','<div class="qj" style="">',"</div>",'<div class="aio aip">','<span class="nU" role="link">',"</span>",'<span class="bsU">',"</span>","</div>","</div>","</div>"].join("");var r=(0,T.default)(t,".TO");return S.merge([S.fromEvents(r,"mouseenter").map(this._makeEventMapper("mouseenter")),S.fromEvents(r,"mouseleave").map(this._makeEventMapper("mouseleave"))]).onValue(function(t){e._updateHighlight(t)}),this._eventStream.plug(S.fromEvents(r,"click").map(this._makeEventMapper("click"))),t}},{key:"_setupParentElement",value:function(){var e=this,t=document.createElement("div");t.className="Xa wT W8 XJ inboxsdk__navItem",t.innerHTML=['<div class="V6 CL Y2">','<div class="XR" role="button" tabindex="0" type="button" style="visibility: hidden">',"</div>",'<span class="XS">','<span class="WW inboxsdk__navItem_name" role="heading" aria-level="2">',"</span>",'<span class="XU" aria-hidden="true" style="display: none">',"</span>","</span>",'<div class="Yh">',"</div>","</div>",'<div class="V3 ada">','<div class="wT">','<div class="TK">',"</div>","</div>","</div>"].join("");var r=(0,T.default)(t,".V3");S.fromEvents(r,"scroll").debounce(10).onValue(function(){r.scrollTop>0?r.classList.add("adh"):r.classList.remove("adh")});var n=(0,T.default)(t,".XR");S.fromEvents(n,"click").map(this._makeEventMapper("click")).onValue(function(){e.toggleCollapse()});var o=(0,T.default)(t,".V6.CL");return this._eventStream.plug(S.fromEvents(o,"click").map(this._makeEventMapper("click"))),t}},{key:"_setupGrouper",value:function(){var e=this,t=this._element.firstElementChild;t&&(t.classList.add("n4"),t.addEventListener("click",function(t){t.stopPropagation(),e.toggleCollapse()}),this._isCollapsed?this._collapse():this._expand()),(0,T.default)(this._element,".qj").innerHTML='<div class="G-asx T-I-J3 J-J5-Ji">&nbsp;</div>'}},{key:"_updateAccessory",value:function(e){this._accessory!==e&&(this._accessoryViewController&&(this._accessoryViewController.destroy(),this._accessoryViewController=null),e&&this._createAccessory(e),this._accessory=e)}},{key:"_updateClickability",value:function(e){e.type===F.default.LINK||e.type===F.default.MANAGE?this._element.classList.add("inboxsdk__navItem_nonClickable"):this._element.classList.remove("inboxsdk__navItem_nonClickable")}},{key:"_updateHighlight",value:function(e){switch(e.eventName){case"mouseenter":this._setHighlight(!0);break;case"mouseleave":this._setHighlight(!1)}}},{key:"_updateIcon",value:function(e){var t=this._isNewLeftNavParent?(0,T.default)(this._element,".Yh"):(0,T.default)(this._element,".qj");if(e.iconElement)return void(0,U.default)(t,e.iconElement,"BEFORE_NAME"!==e.iconPosition);if((0,q.default)(this._iconSettings,t,"BEFORE_NAME"!==e.iconPosition,e.iconClass,e.iconUrl),e.backgroundColor){var r=e.backgroundColor;t.style.borderColor=r}}},{key:"_updateName",value:function(e){if(this._name!==e){var t=(0,T.default)(this._element,".inboxsdk__navItem_name");t.textContent=e,t.setAttribute("title",e),this._expandoElement&&(this._expandoElement.title="Expand ".concat(e)),this._name=e}}},{key:"_updateOrder",value:function(e){this._element.setAttribute("data-group-order-hint",""+this._orderGroup),this._element.setAttribute("data-insertion-order-hint",""+this._navItemNumber),e.orderHint=e.orderHint||0===e.orderHint?e.orderHint:y.default,e.orderHint!==this._orderHint&&(this._element.setAttribute("data-order-hint",""+e.orderHint),this._eventStream.emit({eventName:"orderChanged"})),this._orderHint=e.orderHint}},{key:"_updateRole",value:function(e){var t=(0,T.default)(this._element,".V6.CL");e?t.setAttribute("role","link"):(t.setAttribute("role","group"),t.classList.add("X9"))}},{key:"_updateSubtitle",value:function(e){this._isNewLeftNavParent||e.accessory&&!["SETTINGS_BUTTON","DROPDOWN_BUTTON"].includes(e.accessory.type)&&e.type!==F.default.GROUPER||((0,T.default)(this._element,".bsU").innerHTML+=(0,E.default)(b||(b=(0,g.default)(["",""])),e.subtitle||""))}},{key:"_updateType",value:function(e){if(this._element&&(e=e||F.default.NAVIGATION,this._type!==e)){var t=this._element.querySelector(".inboxsdk__navItem_name");switch(e){case F.default.GROUPER:case F.default.NAVIGATION:t&&"SPAN"===t.tagName||((0,T.default)(this._element,".nU").innerHTML+=(0,E.default)(v||(v=(0,g.default)(['<span class="inboxsdk__navItem_name">',"</span>"])),this._name));break;case F.default.LINK:case F.default.MANAGE:t&&"A"===t.tagName||((0,T.default)(this._element,".nU").innerHTML+=(0,E.default)(_||(_=(0,g.default)(['<a href="#" class="CK inboxsdk__navItem_name">',"</a>"])),this._name))}this._type=e}}},{key:"_updateValues",value:function(e){if(this._navItemDescriptor=e,null==this._collapseKey&&(this._collapseKey=e.key||"".concat(e.name),this._isCollapsed="true"===localStorage.getItem("inboxsdk__navitem_collapsed__"+this._collapseKey)),this._updateType(e.type),this._updateName(e.name),this._updateSubtitle(e),this._updateOrder(e),this._isNewLeftNavParent&&this._updateRole(e.routeID),this._type===F.default.GROUPER)return void this._setupGrouper();this._updateAccessory(e.accessory),this._updateIcon(e),this._updateClickability(e)}}]),e}();r.default=W},{"../../../constants/nav-item-types":657,"../../../driver-common/render-custom-icon":838,"../../../driver-common/update-icon":842,"../../../lib/dom/get-insert-before-element":854,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/basic-button-view-controller":939,"../../../widgets/buttons/dropdown-button-view-controller":940,"../gmail-element-getter":696,"../widgets/buttons/button-view":762,"../widgets/buttons/create-accessory-button-view":763,"../widgets/buttons/create-parent-accessory-button-view":764,"../widgets/buttons/more-dropdown-button-view":767,"../widgets/buttons/more-parent-accessory-button-view":768,"../widgets/gmail-dropdown-view":770,"@babel/runtime-corejs2/core-js/number/max-safe-integer":7,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/helpers/toConsumableArray":56,"@babel/runtime-corejs2/helpers/typeof":57,"auto-html":89,kefir:327,"kefir-bus":324}],750:[function(e,t,r){"use strict";function n(){this._routeNameToRouteIDMap=null,this._compatibleRouteIDMap=null,this._setupRouteNameToRouteIDMap(),this._setupCompatibleRouteIDMap()}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/object/assign")),s=i(e("@babel/runtime-corejs2/core-js/object/values")),l=i(e("lodash/includes")),u=e("../../../../constants/router");(0,a.default)(n.prototype,{NativeRouteIDs:u.NATIVE_ROUTE_IDS,NativeListRouteIDs:u.NATIVE_LIST_ROUTE_IDS,RouteTypes:u.ROUTE_TYPES,isListRouteName:function(e){var t=this.getRouteID(e);return!!t&&(0,l.default)((0,s.default)(u.NATIVE_LIST_ROUTE_IDS),t)},isSettingsRouteName:function(e){return this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.SETTINGS},isContactRouteName:function(e){return this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.CONTACTS||this._routeNameToRouteIDMap[e]===this.NativeRouteIDs.CONTACT},getRouteID:function(e){var t=this._routeNameToRouteIDMap[e];return t||null},getRouteName:function(e){for(var t in this._routeNameToRouteIDMaps)if(this._routeNameToRouteIDMap[t]===e)return t;return null},isNativeRoute:function(e){return!!this._routeNameToRouteIDMap[e]},getCompatibleRouteID:function(e){return this._compatibleRouteIDMap[e]||e},_setupRouteNameToRouteIDMap:function(){this._routeNameToRouteIDMap={inbox:this.NativeRouteIDs.INBOX,section_query:this.NativeRouteIDs.SEARCH,all:this.NativeRouteIDs.ALL_MAIL,imp:this.NativeRouteIDs.IMPORTANT,contacts:this.NativeRouteIDs.CONTACTS,contact:this.NativeRouteIDs.CONTACT,sent:this.NativeRouteIDs.SENT,starred:this.NativeRouteIDs.STARRED,snoozed:this.NativeRouteIDs.SNOOZED,drafts:this.NativeRouteIDs.DRAFTS,label:this.NativeRouteIDs.LABEL,category:this.NativeRouteIDs.LABEL,search:this.NativeRouteIDs.SEARCH,"advanced-search":this.NativeRouteIDs.SEARCH,trash:this.NativeRouteIDs.TRASH,spam:this.NativeRouteIDs.SPAM,apps:this.NativeRouteIDs.SEARCH,circle:this.NativeRouteIDs.LABEL,settings:this.NativeRouteIDs.SETTINGS,chats:this.NativeRouteIDs.CHATS}},_setupCompatibleRouteIDMap:function(){this._compatibleRouteIDMap={},this._compatibleRouteIDMap[this.NativeRouteIDs.INBOX]="inbox/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.ALL_MAIL]="all/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SENT]="sent/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.STARRED]="starred/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.DRAFTS]="drafts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.LABEL]="label/:labelName/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.TRASH]="trash/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SPAM]="spam/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.IMPORTANT]="imp/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.SEARCH]="search/:query/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.THREAD]=this.NativeRouteIDs.THREAD,this._compatibleRouteIDMap[this.NativeRouteIDs.CHATS]="chats/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CHAT]=this.NativeRouteIDs.CHAT,this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACTS]="contacts/p:page",this._compatibleRouteIDMap[this.NativeRouteIDs.CONTACT]=this.NativeRouteIDs.CONTACT,this._compatibleRouteIDMap[this.NativeRouteIDs.SETTINGS]=this.NativeRouteIDs.SETTINGS}})},{"../../../../constants/router":658,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/values":21,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/includes":493}],751:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/freeze")),a=o(e("@babel/runtime-corejs2/core-js/date/now")),s=o(e("@babel/runtime-corejs2/core-js/parse-int")),l=o(e("@babel/runtime-corejs2/core-js/object/create")),u=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=o(e("@babel/runtime-corejs2/helpers/createClass")),d=o(e("@babel/runtime-corejs2/helpers/defineProperty")),f=o(e("lodash/includes")),p=o(e("lodash/last")),m=o(e("lodash/once")),h=o(e("kefir")),b=o(e("kefir-stopper")),v=o(e("kefir-bus")),_=e("querystring"),g=o(e("asap")),y=e("ud"),w=o(e("../../../../lib/dom/make-element-child-stream")),j=o(e("../../../../lib/dom/make-element-view-stream")),k=o(e("../../../../lib/dom/make-mutation-observer-chunked-stream")),x=o(e("../../../../lib/dom/get-insert-before-element")),E=o(e("../gmail-row-list-view")),S=o(e("../gmail-thread-view")),C=o(e("../gmail-collapsible-section-view")),I=o(e("../../gmail-element-getter")),A=e("../../../../lib/dom/simulate-mouse-event"),T=o(e("../../../../lib/dom/querySelectorOrFail")),D=function(){function e(t,r,n){var o=this,s=t.urlObject,l=t.type,c=t.routeID,p=t.cachedRouteData;(0,u.default)(this,e),(0,d.default)(this,"_type",void 0),(0,d.default)(this,"_hash",void 0),(0,d.default)(this,"_name",void 0),(0,d.default)(this,"_paramsArray",void 0),(0,d.default)(this,"_customRouteID",void 0),(0,d.default)(this,"_stopper",(0,b.default)()),(0,d.default)(this,"_rowListViews",void 0),(0,d.default)(this,"_gmailRouteProcessor",void 0),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_eventStream",void 0),(0,d.default)(this,"_customViewElement",void 0),(0,d.default)(this,"_threadView",void 0),(0,d.default)(this,"_sectionsContainer",void 0),(0,d.default)(this,"_hasAddedCollapsibleSection",void 0),(0,d.default)(this,"_cachedRouteData",void 0),(0,d.default)(this,"getParams",(0,m.default)(function(){var e;if(o._customRouteID)e=o._getCustomParams();else{e=o._getNativeParams();var t=o.getRouteID();if(t){var r=o._extractParamKeysFromRouteID(t),n={};r.forEach(function(t){e[t]&&(n[t]=e[t])}),e=n}}return(0,i.default)(e)})),(0,d.default)(this,"_getThreadContainerElement",(0,m.default)(function(){return I.default.getThreadContainerElement()})),this._type=l,this._hash=s.hash,this._name=s.name,this._paramsArray=s.params,this._customRouteID=c,this._cachedRouteData=p,this._stopper=(0,b.default)(),this._rowListViews=[],this._gmailRouteProcessor=r,this._driver=n,this._eventStream=(0,v.default)(),this._hasAddedCollapsibleSection=!1,"CUSTOM"===this._type?(this._setupCustomViewElement(),n.getStopper().takeUntilBy(this._stopper.delay(0)).onValue(function(){n.showNativeRouteView(),window.location.hash="#inbox"})):(0,f.default)(["NATIVE","CUSTOM_LIST"],this._type)&&this._setupSubViews(),"CUSTOM_LIST"===this._type&&h.default.later(500).takeUntilBy(this._stopper).onValue(function(){var e=n.getLastCustomThreadListActivity();(!e||e.customRouteID!==o._customRouteID||(0,a.default)()-e.timestamp>5e3)&&o.refresh()})}return(0,c.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._eventStream.end(),this._customViewElement&&this._customViewElement.remove();var e=this._rowListViews;this._rowListViews=[],e.forEach(function(e){e.destroy()}),this._threadView&&(this._threadView.destroy(),this._threadView=null)}},{key:"getHash",value:function(){return this._hash}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"getCustomViewElement",value:function(){return this._customViewElement}},{key:"getRowListViews",value:function(){return this._rowListViews}},{key:"getThreadView",value:function(){return this._threadView}},{key:"getType",value:function(){return"OTHER_APP_CUSTOM"===this._type?"CUSTOM":this._type}},{key:"isCustomRouteBelongingToApp",value:function(){return"CUSTOM"===this._type}},{key:"addCollapsibleSection",value:function(e,t){return this._addCollapsibleSection(e,t,!0)}},{key:"addSection",value:function(e,t){return this._addCollapsibleSection(e,t,!1)}},{key:"_addCollapsibleSection",value:function(e,t,r){this._hasAddedCollapsibleSection=!0;var n=new C.default(this._driver,t,this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH,r),o=this._getSectionsContainer();return n.getEventStream().filter(function(e){return"update"===e.type&&"orderHint"===e.property}).onValue(function(){var e=o.children,t=(0,x.default)(n.getElement(),e,["data-group-order-hint","data-order-hint"]);t?o.insertBefore(n.getElement(),t):o.appendChild(n.getElement())}),n.setCollapsibleSectionDescriptorProperty(e),n}},{key:"_setupCustomViewElement",value:function(){this._customViewElement=document.createElement("div"),this._customViewElement.classList.add("inboxsdk__custom_view_element"),this._monitorLeftNavHeight(),this._setCustomViewElementHeight()}},{key:"_monitorLeftNavHeight",value:function(){var e=this,t=I.default.getLeftNavHeightElement();t&&(0,k.default)(t,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue(function(){e._setCustomViewElementHeight()})}},{key:"_setCustomViewElementHeight",value:function(){var e=I.default.getLeftNavHeightElement(),t=I.default.getGtalkButtons(),r=this._customViewElement;if(!e||!r)throw new Error("Should not happen");r.style.height="".concat((0,s.default)(e.style.height,10)+(t?t.offsetHeight:0),"px")}},{key:"_setupSubViews",value:function(){var e=this;(0,g.default)(function(){e._eventStream&&(e._setupRowListViews(),e._setupContentAndSidebarView(),e._setupScrollStream())})}},{key:"_setupRowListViews",value:function(){var e=this,t=I.default.getRowListElements();Array.prototype.forEach.call(t,function(t){e._processRowListElement(t)})}},{key:"_processRowListElement",value:function(e){var t=e.parentElement;if(!t)throw new Error("no rootElement");var r=new E.default(t,this,this._driver);this._rowListViews.push(r),this._eventStream.emit({eventName:"newGmailRowListView",view:r})}},{key:"_setupContentAndSidebarView",value:function(){var e=this._getThreadContainerElement();if(e){var t=new S.default(e,this,this._driver);this._threadView=t,this._eventStream.emit({eventName:"newGmailThreadView",view:t})}else{var r=document.querySelector("div[role=main] .aia");r&&this._startMonitoringPreviewPaneForThread(r)}}},{key:"_setupScrollStream",value:function(){var e=this,t=I.default.getScrollContainer(),r=this._cachedRouteData.scrollTop;t&&this._hasAddedCollapsibleSection&&(r&&(t.scrollTop=r),h.default.fromEvents(t,"scroll").throttle(100).map(function(e){return e.target.scrollTop}).takeUntilBy(this._stopper).onValue(function(t){e._cachedRouteData.scrollTop=t}))}},{key:"_startMonitoringPreviewPaneForThread",value:function(e){var t=this,r=(0,T.default)(e,"table.Bs > tr"),n=(0,w.default)(r).filter(function(e){return!!e.el.querySelector(".if")});this._eventStream.plug(n.flatMap((0,j.default)(function(e){return new S.default(e,t,t._driver,!0)})).map(function(e){return t._threadView=e,{eventName:"newGmailThreadView",view:e}}))}},{key:"_getSectionsContainer",value:function(){var e=document.querySelector("div[role='main']");if(!e)throw new Error("should not happen");var t=e.querySelector(".inboxsdk__custom_sections");return t?t.classList.contains("Wc")&&!this._isSearchRoute()&&t.classList.remove("Wc"):(t=this._sectionsContainer=document.createElement("div"),t.classList.add("inboxsdk__custom_sections"),e.insertBefore(t,e.firstChild)),t}},{key:"_getCustomParams",value:function(){var e=this,t=(0,l.default)(null);if(!this._customRouteID)throw new Error("Should not happen, can't get custom params for non-custom view");return this._customRouteID.split("/").slice(1).forEach(function(r,n){":"===r[0]&&(r=r.substring(1),e._paramsArray[n]&&(t[r]=e._paramsArray[n]))}),t}},{key:"_getNativeParams",value:function(){return this._isSearchRoute()?this._getSearchRouteParams():this._isListRoute()?this._getListRouteParams():this._isThreadRoute()?this._getThreadRouteParams():this._isSettingsRoute()?this._getSettingsRouteParams():{}}},{key:"_isSearchRoute",value:function(){return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.SEARCH}},{key:"getRouteType",value:function(){return(0,f.default)(["CUSTOM","OTHER_APP_CUSTOM"],this._type)?this._gmailRouteProcessor.RouteTypes.CUSTOM:this._isListRoute()?this._gmailRouteProcessor.RouteTypes.LIST:this._isThreadRoute()?this._gmailRouteProcessor.RouteTypes.THREAD:this._isSettingsRoute()?this._gmailRouteProcessor.RouteTypes.SETTINGS:this._gmailRouteProcessor.RouteTypes.UNKNOWN}},{key:"_isThreadRoute",value:function(){return!!this._getThreadContainerElement()}},{key:"_isListRoute",value:function(){var e=I.default.getRowListElements();return("CUSTOM_LIST"===this._type||this._gmailRouteProcessor.isListRouteName(this._name))&&e&&e.length>0}},{key:"_isSettingsRoute",value:function(){return this._gmailRouteProcessor.isSettingsRouteName(this._name)}},{key:"_getSearchRouteParams",value:function(){return{query:this._paramsArray[0],includesDriveResults:"apps"===this._name,page:this._getPageParam()}}},{key:"_getListRouteParams",value:function(){var e={page:this._getPageParam()};return this.getRouteID()===this._gmailRouteProcessor.NativeRouteIDs.LABEL&&this._paramsArray[0]&&(e.labelName=this._paramsArray[0]),e}},{key:"_getThreadRouteParams",value:function(){if(this._paramsArray&&this._paramsArray.length>0){var e=(0,p.default)(this._paramsArray);if(e&&(16===e.length||"#"===e[0]))return{threadID:e.replace("#","")}}var t,r=this._getThreadContainerElement();if(r)try{t=this._driver.getPageCommunicator().getCurrentThreadID(r)}catch(e){}return t||(t=(0,_.parse)(document.location.search,null,null).th||""),{threadID:t}}},{key:"_getSettingsRouteParams",value:function(){return{tabName:this._paramsArray[0]}}},{key:"_getPageParam",value:function(){for(var e=1;e<this._paramsArray.length;e++)if(this._paramsArray[e].match(/p\d+/))return(0,s.default)(this._paramsArray[e].replace(/[a-zA-Z]/,""),10);return 1}},{key:"getRouteID",value:function(){return this._customRouteID?this._customRouteID:this._isThreadRoute()?this._gmailRouteProcessor.NativeRouteIDs.THREAD:this._gmailRouteProcessor.getRouteID(this._name)}},{key:"refresh",value:function(){var e=I.default.getToolbarElement().querySelector("div.T-I.nu");if(e){var t=document.activeElement,r=e.className;(0,A.simulateClick)(e),e.className=r,t?t.focus():e.blur()}}},{key:"setFullWidth",value:function(e){}},{key:"_extractParamKeysFromRouteID",value:function(e){return e.split("/").filter(function(e){return":"===e[0]}).map(function(e){return e.substring(1)})}}]),e}(),M=(0,y.defn)(t,D);r.default=M},{"../../../../lib/dom/get-insert-before-element":854,"../../../../lib/dom/make-element-child-stream":859,"../../../../lib/dom/make-element-view-stream":861,"../../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../../lib/dom/querySelectorOrFail":868,"../../../../lib/dom/simulate-mouse-event":874,"../../gmail-element-getter":696,"../gmail-collapsible-section-view":715,"../gmail-row-list-view":752,"../gmail-thread-view":757,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/create":10,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/includes":493,"lodash/last":511,"lodash/once":516,querystring:579,ud:625}],752:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/set")),a=o(e("@babel/runtime-corejs2/core-js/map")),s=o(e("@babel/runtime-corejs2/core-js/parse-int")),l=o(e("@babel/runtime-corejs2/core-js/array/from")),u=o(e("@babel/runtime-corejs2/helpers/slicedToArray")),c=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),d=o(e("@babel/runtime-corejs2/helpers/createClass")),f=o(e("@babel/runtime-corejs2/helpers/defineProperty")),p=e("ud"),m=o(e("lodash/find")),h=o(e("lodash/zip")),b=(o(e("asap")),o(e("assert"))),v=o(e("kefir")),_=o(e("kefir-bus")),g=(o(e("../../../../common/get-or-fail")),o(e("../../../lib/delay-asap"))),y=o(e("../../../lib/dom/querySelectorOrFail")),w=o(e("./gmail-toolbar-view")),j=o(e("./gmail-thread-row-view")),k=(o(e("../../../lib/stream-wait-for")),o(e("../../../lib/dom/make-element-child-stream"))),x=(o(e("../../../lib/dom/make-element-view-stream")),/\bx7\b/),E=function(){function e(t,r,n){var o=this;(0,c.default)(this,e),(0,f.default)(this,"_element",void 0),(0,f.default)(this,"_gmailDriver",void 0),(0,f.default)(this,"_routeViewDriver",void 0),(0,f.default)(this,"_pendingExpansions",void 0),(0,f.default)(this,"_pendingExpansionsSignal",void 0),(0,f.default)(this,"_toolbarView",void 0),(0,f.default)(this,"_threadRowViewDrivers",new i.default),(0,f.default)(this,"_eventStreamBus",void 0),(0,f.default)(this,"_rowViewDriverStream",void 0),(0,f.default)(this,"_stopper",void 0),(0,f.default)(this,"_elementsToViews",new a.default),(0,f.default)(this,"_selectionMutationObserver",void 0),(0,f.default)(this,"_selectedThreadRowViews",new i.default),(0,f.default)(this,"_batchedSignalThreadRowViewSelectionChangeScheduled",!1),this._eventStreamBus=(0,_.default)(),this._stopper=this._eventStreamBus.ignoreValues().beforeEnd(function(){return null}),this._gmailDriver=n,this._element=t,this._routeViewDriver=r,this._selectionMutationObserver=new MutationObserver(function(e){for(var t=!1,r=0,n=e.length;r<n;r++){var i=e[r],a=i.target,s=x.test(i.oldValue),l=x.test(a.className);if(s!==l){var u=o._elementsToViews.get(a);u&&(t=!0,l?o._selectedThreadRowViews.add(u):o._selectedThreadRowViews.delete(u))}}t&&o._gmailDriver.signalThreadRowViewSelectionChange()}),this._pendingExpansions=new a.default,this._pendingExpansionsSignal=(0,_.default)(),this._pendingExpansionsSignal.bufferBy(this._pendingExpansionsSignal.flatMap(g.default)).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(this._expandColumnJob.bind(this)),this._setupToolbarView(),this._startWatchingForRowViews()}return(0,d.default)(e,[{key:"destroy",value:function(){this._selectionMutationObserver.disconnect(),this._threadRowViewDrivers.forEach(function(e){return e.destroy()}),this._eventStreamBus.end(),this._toolbarView&&this._toolbarView.destroy(),this._selectedThreadRowViews.size&&(this._selectedThreadRowViews.clear(),this._gmailDriver.signalThreadRowViewSelectionChange())}},{key:"getElement",value:function(){return this._element}},{key:"getRouteViewDriver",value:function(){return this._routeViewDriver}},{key:"getToolbarView",value:function(){return this._toolbarView}},{key:"getSelectedThreadRowViewDrivers",value:function(){return this._selectedThreadRowViews}},{key:"getThreadRowViewDrivers",value:function(){return this._threadRowViewDrivers}},{key:"getRowViewDriverStream",value:function(){return this._rowViewDriverStream}},{key:"getEventStream",value:function(){return this._eventStreamBus}},{key:"_setupToolbarView",value:function(){var e=this._findToolbarElement();this._toolbarView=e?new w.default(e,this._gmailDriver,this._routeViewDriver,this):null}},{key:"_findToolbarElement",value:function(){var e=this,t=this._element.querySelector("[gh=mtb]");if(t)return t;var r=(0,m.default)(document.querySelectorAll("[gh=tm]"),function(t){return t.parentElement.parentElement===e._element.parentElement.parentElement.parentElement.parentElement.parentElement||t.parentElement.parentElement===e._element.parentElement});return r?r.querySelector("[gh=mtb]"):null}},{key:"_fixColumnWidths",value:function(e){if(e&&e.parentElement){var t=e.parentElement.firstElementChild;if(t!==e&&t){var r=t.querySelectorAll("table.cf > colgroup > col"),n=e.querySelectorAll("table.cf > colgroup > col");b.default.strictEqual(r.length,n.length),(0,h.default)(r,n).forEach(function(e){var t=(0,u.default)(e,2),r=t[0];t[1].style.width=r.style.width})}}}},{key:"expandColumn",value:function(e,t){var r=this._pendingExpansions.get(e);(!r||t>r)&&(this._pendingExpansions.set(e,t),this._pendingExpansionsSignal.emit())}},{key:"_expandColumnJob",value:function(){var e=this;this._pendingExpansions.forEach(function(t,r){Array.prototype.forEach.call(e._element.querySelectorAll("table.cf > colgroup > "+r),function(e){var r=(0,s.default)(e.style.width,10);(isNaN(r)||r<t)&&(e.style.width=t+"px")})}),this._pendingExpansions.clear()}},{key:"_batchedSignalThreadRowViewSelectionChange",value:function(){var e=this;this._batchedSignalThreadRowViewSelectionChangeScheduled||(this._batchedSignalThreadRowViewSelectionChangeScheduled=!0,(0,g.default)(null).takeUntilBy(this._stopper).onValue(function(){e._batchedSignalThreadRowViewSelectionChangeScheduled=!1,e._gmailDriver.signalThreadRowViewSelectionChange()}))}},{key:"_startWatchingForRowViews",value:function(){var e=this,t=(0,l.default)(this._element.querySelectorAll("div.Cp")),r=v.default.merge(t.map(k.default)).flatMap(function(t){e._fixColumnWidths(t.el);var r=(0,y.default)(t.el,"table > tbody");return(0,k.default)(r).takeUntilBy(t.removalStream).filter(function(e){return e.el.id})}),n=v.default.later(2);this._rowViewDriverStream=r.map(function(t){var r=t.el;e._selectionMutationObserver.observe(r,{attributes:!0,attributeFilter:["class"],attributeOldValue:!0});var n=new j.default(r,e,e._gmailDriver);return e._elementsToViews.set(r,n),r.classList.contains("x7")&&(e._selectedThreadRowViews.add(n),e._batchedSignalThreadRowViewSelectionChange()),t.removalStream.take(1).onValue(function(){e._selectedThreadRowViews.has(n)&&(e._selectedThreadRowViews.delete(n),e._batchedSignalThreadRowViewSelectionChange()),e._elementsToViews.delete(r),n.destroy()}),n}).flatMap(function(e){return e.getAlreadyHadModifications()?n.flatMap(function(){return e.waitForReady()}).takeUntilBy(e.getStopper()):e.waitForReady().takeUntilBy(e.getStopper())}).takeUntilBy(this._stopper),this._rowViewDriverStream.onValue(function(t){return e._addThreadRowView(t)})}},{key:"_addThreadRowView",value:function(e){var t=this;this._threadRowViewDrivers.add(e),e.getStopper().takeUntilBy(this._stopper).onValue(function(){t._threadRowViewDrivers.delete(e)})}}]),e}(),S=(0,p.defn)(t,E);r.default=S},{"../../../../common/get-or-fail":642,"../../../lib/delay-asap":850,"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-element-view-stream":861,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/stream-wait-for":901,"./gmail-thread-row-view":754,"./gmail-toolbar-view":759,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,asap:83,assert:85,kefir:327,"kefir-bus":324,"lodash/find":484,"lodash/zip":532,ud:625}],753:[function(e,t,r){"use strict";function n(e,t){var r=void 0!==s&&e[l]||e["@@iterator"];if(!r){if(u(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?a(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=e("@babel/runtime-corejs2/core-js/array/from"),s=e("@babel/runtime-corejs2/core-js/symbol"),l=e("@babel/runtime-corejs2/core-js/symbol/iterator"),u=e("@babel/runtime-corejs2/core-js/array/is-array"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=d(e("@babel/runtime-corejs2/helpers/createClass")),m=d(e("@babel/runtime-corejs2/helpers/defineProperty")),h=d(e("kefir-stopper")),b=function(){function e(t,r){(0,f.default)(this,e),(0,m.default)(this,"_stopper",(0,h.default)()),(0,m.default)(this,"_driver",void 0),(0,m.default)(this,"_insertElementContainer",null),this._driver=t,this._setup(r)}return(0,p.default)(e,[{key:"destroy",value:function(){this._stopper.destroy(),this._insertElementContainer&&(this._insertElementContainer.remove(),this._insertElementContainer=null)}},{key:"_setup",value:function(e){var t=this,r=this._driver.getTagTree().getAllByTag("supportMenu"),n=r.subscribe(function(r){r.forEach(function(r){"add"===r.type?t._addSupportElement(r.value.getValue(),e):"remove"===r.type&&t._insertElementContainer&&(t._insertElementContainer.remove(),t._insertElementContainer=null)})});this._stopper.onValue(function(){return n.unsubscribe()})}},{key:"_addSupportElement",value:function(e,t){var r,o=this,i=document.createElement("div"),a=e.children.item(0).attributes,s=n(a);try{for(s.s();!(r=s.n()).done;){var l=r.value;if("aria-label"!==l.name)if("class"!==l.name)i.setAttribute(l.name,l.value);else{var u="".concat(l.value," inboxsdk__support_menuItem");i.setAttribute(l.name,u)}}}catch(e){s.e(e)}finally{s.f()}i.append(t.element);var c,d=null,f=n(e.children);try{for(f.s();!(c=f.n()).done;){var p=c.value;"separator"===p.getAttribute("role")&&(d=p)}}catch(e){f.e(e)}finally{f.f()}d?d.insertAdjacentElement("beforebegin",i):e.append(i),i.onclick=function(r){r.preventDefault(),r.stopPropagation(),t.onClick(),o._closeSupportMenu(e)},i.onkeypress=function(r){"Enter"===r.key&&(t.onClick(),o._closeSupportMenu(e))}}},{key:"_closeSupportMenu",value:function(e){if("true"!=e.getAttribute("aria-hidden")){var t=e.previousElementSibling;t&&t.click()}}}]),e}();r.default=b},{"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"kefir-stopper":326}],754:[function(e,t,r){"use strict";function n(e){this.focus(),e.stopImmediatePropagation()}function o(e){var t=this.firstElementChild.contains(e.target),r=!t&&this!==e.target;if(!t&&(e.stopImmediatePropagation(),!r||"mouseover"==e.type)){var n=document.createEvent("MouseEvents");n.initMouseEvent(e.type,e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.parentElement.dispatchEvent(n)}}function i(){setTimeout(function(){var e=document.querySelectorAll("tr[data-inboxsdk-thread-row]");Array.prototype.forEach.call(e,function(e){var t=q.get(e);t&&a(t)})},15)}function a(e){for(var t=0;t<e.label.unclaimed.length;t++){e.label.unclaimed[t].remove()}e.label.unclaimed.length=0;for(var r=0;r<e.button.unclaimed.length;r++){e.button.unclaimed[r].remove()}e.button.unclaimed.length=0;for(var n=0;n<e.image.unclaimed.length;n++){e.image.unclaimed[n].remove()}e.image.unclaimed.length=0;for(var o=0;o<e.replacedDate.unclaimed.length;o++){e.replacedDate.unclaimed[o].remove()}e.replacedDate.unclaimed.length=0;for(var i=0;i<e.replacedDraftLabel.unclaimed.length;i++){e.replacedDraftLabel.unclaimed[i].remove()}e.replacedDraftLabel.unclaimed.length=0}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.removeAllThreadRowUnclaimedModifications=i,r.default=void 0;var u=l(e("@babel/runtime-corejs2/regenerator")),c=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=l(e("@babel/runtime-corejs2/helpers/slicedToArray")),f=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=l(e("@babel/runtime-corejs2/helpers/createClass")),m=l(e("@babel/runtime-corejs2/helpers/defineProperty")),h=l(e("@babel/runtime-corejs2/core-js/weak-map")),b=l(e("@babel/runtime-corejs2/core-js/array/from")),v=l(e("@babel/runtime-corejs2/core-js/object/assign")),_=l(e("@babel/runtime-corejs2/core-js/promise")),g=l(e("lodash/once")),y=l(e("lodash/flatten")),w=l(e("lodash/includes")),j=l(e("lodash/intersection")),k=l(e("lodash/uniqBy")),x=l(e("lodash/flatMap")),E=e("ud"),S=l(e("assert")),C=l(e("kefir")),I=l(e("asap")),A=(l(e("kefir-bus")),l(e("../../../lib/dom/querySelectorOrFail"))),T=l(e("../../../lib/dom/make-mutation-observer-chunked-stream")),D=l(e("../../../lib/dom/insert-element-in-order")),M=l(e("kefir-cast")),R=l(e("../../../lib/delay-asap")),O=l(e("kefir-stopper")),P=l(e("../widgets/gmail-dropdown-view")),L=l(e("../../../widgets/buttons/dropdown-view")),V=l(e("../widgets/gmail-label-view")),N=l(e("../widgets/gmail-action-button-view")),B=l(e("../../../driver-common/update-icon")),q=(0,E.defonce)(t,function(){return new h.default}),U=function(){function e(t,r,n){if((0,f.default)(this,e),(0,m.default)(this,"_elements",void 0),(0,m.default)(this,"_modifications",void 0),(0,m.default)(this,"_alreadyHadModifications",void 0),(0,m.default)(this,"_rowListViewDriver",void 0),(0,m.default)(this,"_driver",void 0),(0,m.default)(this,"_userView",void 0),(0,m.default)(this,"_cachedThreadID",void 0),(0,m.default)(this,"_cachedSyncThreadID",void 0),(0,m.default)(this,"_cachedSyncDraftIDPromise",void 0),(0,m.default)(this,"_stopper",(0,O.default)()),(0,m.default)(this,"_refresher",void 0),(0,m.default)(this,"_subjectRefresher",void 0),(0,m.default)(this,"_imageRefresher",void 0),(0,m.default)(this,"_counts",void 0),(0,m.default)(this,"_isVertical",void 0),(0,m.default)(this,"_isDestroyed",!1),(0,S.default)(t.hasAttribute("id"),"check element is main thread row"),this._isVertical=2===(0,j.default)((0,b.default)(t.classList),["zA","apv"]).length,this._isVertical){var o=t.nextElementSibling;if(!o)throw new Error("threadRow2 not found");var i=o.nextElementSibling,a=i&&i.classList.contains("apw");this._elements=a?[t,t.nextElementSibling,t.nextElementSibling.nextElementSibling]:[t,t.nextElementSibling]}else this._elements=[t];var s=q.get(this._elements[0]);s?(this._modifications=s,this._alreadyHadModifications=!0):(this._alreadyHadModifications=!1,this._modifications={label:{unclaimed:[],claimed:[]},action:{unclaimed:[],claimed:[]},button:{unclaimed:[],claimed:[]},image:{unclaimed:[],claimed:[]},replacedDate:{unclaimed:[],claimed:[]},replacedDraftLabel:{unclaimed:[],claimed:[]}},q.set(this._elements[0],this._modifications)),this._rowListViewDriver=r,this._driver=n,this._userView=null,this._cachedThreadID=null,this._refresher=null,this._subjectRefresher=null,this._imageRefresher=null,this._counts=null,this._elements[0].setAttribute("data-inboxsdk-thread-row","true")}return(0,p.default)(e,[{key:"destroy",value:function(){this._elements.length&&(this._isDestroyed=!0,this._modifications.label.unclaimed=this._modifications.label.claimed.concat(this._modifications.label.unclaimed),this._modifications.label.claimed.length=0,this._modifications.action.unclaimed=this._modifications.action.claimed.concat(this._modifications.action.unclaimed),this._modifications.action.claimed.length=0,this._modifications.button.unclaimed=this._modifications.button.claimed.concat(this._modifications.button.unclaimed),this._modifications.button.claimed.length=0,this._modifications.image.unclaimed=this._modifications.image.claimed.concat(this._modifications.image.unclaimed),this._modifications.image.claimed.length=0,this._modifications.replacedDate.unclaimed=this._modifications.replacedDate.claimed.concat(this._modifications.replacedDate.unclaimed),this._modifications.replacedDate.claimed.length=0,this._modifications.replacedDraftLabel.unclaimed=this._modifications.replacedDraftLabel.claimed.concat(this._modifications.replacedDraftLabel.unclaimed),this._modifications.replacedDraftLabel.claimed.length=0,(0,x.default)(this._elements,function(e){return(0,b.default)(e.getElementsByClassName("inboxsdk__thread_row_addition"))}).forEach(function(e){e.remove()}),this._stopper.destroy(),this._elements.length=0)}},{key:"getElement",value:function(){return this._elements[0]}},{key:"_removeUnclaimedModifications",value:function(){a(this._modifications)}},{key:"getAlreadyHadModifications",value:function(){return this._alreadyHadModifications}},{key:"waitForReady",value:function(){var e=this,t=[0,10,100,1e3,15e3];return function r(){if(e._threadIdReady())return(0,I.default)(function(){e._elements.length&&e._removeUnclaimedModifications()}),C.default.constant(e);var n=t.shift();return void 0==n?(console.log("Should not happen: ThreadRowViewDriver never became ready",e),C.default.never()):C.default.later(n).flatMap(r)}()}},{key:"setUserView",value:function(e){this._userView=e}},{key:"getCounts",value:function(){var e=this._counts;if(!e){var t=(0,A.default)(this._elements[0],"td div.yW");if(this._driver.isUsingSyncAPI()){var r=t.querySelectorAll(".boq").length,n=t.querySelector(".bx0"),o=n&&n.innerHTML?+n.innerHTML:r?0:1;e=this._counts={messageCount:o,draftCount:r}}else{var i=t.innerHTML.split(/<font color=[^>]+>[^>]+<\/font>/),a=(0,d.default)(i,2),s=a[0],l=a[1],u=s.replace(/<span\b[^>]*>.*?<\/span>/g,""),c=u.match(/\((\d+)\)/),f=c?+c[1]:s?1:0,p=l&&l.match(/\((\d+)\)/),m=p?+p[1]:null!=l?1:0;e=this._counts={messageCount:f,draftCount:m}}}return e}},{key:"_expandColumn",value:function(e,t){this._rowListViewDriver.expandColumn(e,t)}},{key:"addLabel",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addLabel called on destroyed thread row");var r=(0,M.default)(C.default,e).takeUntilBy(this._stopper).toProperty(),n=null;r.combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var r=(0,d.default)(e,1),o=r[0];if(o){if(!n){if(!(n=t._modifications.label.unclaimed.shift())){var i=new V.default({classes:["inboxsdk__thread_row_label"]}),a=i.getElement();n={gmailLabelView:i,remove:a.remove.bind(a)}}t._modifications.label.claimed.push(n)}n.gmailLabelView.updateLabelDescriptor(o);var s=t._getLabelParent();s!==n.gmailLabelView.getElement().parentElement&&s.insertAdjacentElement("afterbegin",n.gmailLabelView.getElement())}else n&&(n.remove(),t._modifications.label.claimed.splice(t._modifications.label.claimed.indexOf(n),1),n=null)})}},{key:"addImage",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addImage called on destroyed thread row");var r=(0,M.default)(C.default,e).toProperty().combine(C.default.merge([this._getRefresher(),this._getSubjectRefresher(),this._getImageContainerRefresher()])).takeUntilBy(this._stopper),n=null;r.onValue(function(e){var r=(0,d.default)(e,1),o=r[0];if(o){n||(n=t._modifications.image.unclaimed.shift(),n||(n={iconSettings:{},iconWrapper:document.createElement("div"),remove:function(){this.iconWrapper.remove()}},n.iconWrapper.className="inboxsdk__thread_row_icon_wrapper"),t._modifications.image.claimed.push(n));var i=n,a=i.iconSettings,s=i.iconWrapper;(0,B.default)(a,s,!1,o.imageClass,o.imageUrl);(3===t._elements.length?t._elements[2]:t._elements[0]).classList.add("inboxsdk__thread_row_image_added"),o.tooltip?s.setAttribute("data-tooltip",o.tooltip):s.removeAttribute("data-tooltip");var l=t._getLabelParent();l.contains(s)||(0,A.default)(l,".y6").insertAdjacentElement("beforebegin",s)}else n&&(n.remove(),t._modifications.image.claimed.splice(t._modifications.image.claimed.indexOf(n),1),n=null)})}},{key:"addButton",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addButton called on destroyed thread row");if(1==this._elements.length){var r=null,i=null,a=(0,M.default)(C.default,e).toProperty().takeUntilBy(this._stopper);a.merge(this._stopper).onValue(function(e){e||r&&(r.close(),r=null)}),this._stopper.onValue(function(){i&&i.buttonSpan&&(i.buttonSpan.onclick=null)}),a.combine(this._getRefresher()).onValue(function(e){var a=(0,d.default)(e,1),s=a[0],l=s;if(l){l.className&&(l.iconClass=l.className,delete l.className);var u,c,f=t._elements[0].querySelector("ul[role=toolbar]");i||(i=t._modifications.button.unclaimed.shift(),i||(f?(u=document.createElement("li"),u.classList.add("bqX")):(u=document.createElement("span"),u.classList.add("T-KT")),u.classList.add("inboxsdk__thread_row_button"),l.title?u.setAttribute("title",l.title):u.removeAttribute("title"),u.setAttribute("tabindex","-1"),u.setAttribute("data-order-hint",String(l.orderHint||0)),u.addEventListener("onmousedown",n),c={},i={buttonSpan:u,iconSettings:c,remove:u.remove.bind(u)}),t._modifications.button.claimed.push(i));var p=f?null:(0,A.default)(t._elements[0],"td.apU.xY, td.aqM.xY");u=i.buttonSpan,c=i.iconSettings,l.onClick&&(u.onclick=function(e){var n={dropdown:null,threadRowView:t._userView};if(l.hasDropdown){if(r)return t._elements[0].classList.remove("inboxsdk__dropdown_active"),t._elements[0].classList.remove("buL"),r.close(),void(r=null);t._elements[0].classList.add("inboxsdk__dropdown_active"),t._elements[0].classList.add("buL"),n.dropdown=r=new L.default(new P.default,u,null),r.setPlacementOptions({position:"bottom",hAlign:"left",vAlign:"top"}),r.on("destroy",function(){setTimeout(function(){t._elements[0].classList.remove("inboxsdk__dropdown_active"),t._elements[0].classList.remove("buL"),r=null},1)})}l.onClick.call(null,n)}),(0,B.default)(c,u,!1,l.iconClass,l.iconUrl),f&&u.parentElement!==f?(0,D.default)(f,u,void 0,!0):p&&u.parentElement!==p&&((0,D.default)(p,u),t._expandColumn("col.y5",26*p.children.length),p.onmouseover=p.onclick=o)}else i&&(i.remove(),t._modifications.button.claimed.splice(t._modifications.button.claimed.indexOf(i),1),i=null)})}}},{key:"addActionButton",value:function(e){var t=this;if(1===this._elements.length){var r=(0,M.default)(C.default,e).takeUntilBy(this._stopper).toProperty(),n=null;this._stopper.onEnd(function(){n&&n.gmailActionButtonView.setOnClick(null)}),r.takeUntilBy(this._stopper).onValue(function(e){if(e&&"LINK"!==e.type)return void console.error("Only type=LINK is currently supported");if(e){if(!n){if(!(n=t._modifications.action.unclaimed.shift())){var r=new N.default,o=r.getElement();n={gmailActionButtonView:r,remove:o.remove.bind(o)}}t._modifications.action.claimed.push(n)}n.gmailActionButtonView.updateDescriptor(e);var i=e.url,a=e.onClick;n.gmailActionButtonView.setOnClick(function(e){e.stopPropagation(),window.open(i,"_blank"),a&&a.call(null,{})});var s=t._elements[0].querySelector("td.a4W .a4X .aKS")||t._elements[0].querySelector("td.a4W div.xS");if(!s)throw new Error("Failed to find actionParentDiv");(0,w.default)(s.children,n.gmailActionButtonView.getElement())||s.insertBefore(n.gmailActionButtonView.getElement(),s.firstChild)}else n&&(n.remove(),t._modifications.action.claimed.splice(t._modifications.action.claimed.indexOf(n),1),n=null)})}}},{key:"addAttachmentIcon",value:function(e){var t=this;if(!this._elements.length)return void console.warn("addAttachmentIcon called on destroyed thread row");var r,n=(0,g.default)(function(){var e=document.createElement("img");return e.src="images/cleardot.gif",e}),o=(0,g.default)(function(){return document.createElement("div")}),i=!1;(0,M.default)(C.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var a=(0,d.default)(e,1),s=a[0],l=(0,A.default)(t._elements[0],"td.yf.xY");if(s){var u=null!=s.iconHtml?o():n();s.tooltip?u.setAttribute("data-tooltip",s.tooltip):u.removeAttribute("data-tooltip"),u.className=null!=s.iconHtml?"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_iconWrapper "+(s.iconClass||""):"inboxsdk__thread_row_addition inboxsdk__thread_row_attachment_icon "+(s.iconClass||""),null!=s.iconHtml?(l.contains(n())&&n().remove(),u.innerHTML=s.iconHtml):r!=s.iconUrl&&(l.contains(o())&&o().remove(),u.style.background=s.iconUrl?"url("+s.iconUrl+") no-repeat 0 0":"",r=s.iconUrl),l.contains(u)||(l.appendChild(u),i=!0,t._expandColumn("col.yg",16*l.children.length),t._elements.length>1&&t._fixDateColumnWidth()),l.classList.add("inboxsdk__thread_row_attachment_icons_present")}else i&&(o().remove(),n().remove(),i=!1,l.querySelector(".inboxsdk__thread_row_attachment_icon")||l.classList.remove("inboxsdk__thread_row_attachment_icons_present"))})}},{key:"_fixDateColumnWidth",value:function(){var e=this;(0,I.default)(function(){if(e._elements.length){var t=e._elements[0].querySelector("td.xW, td.yf > div.apm");if(t){var r=t.querySelector(".inboxsdk__thread_row_custom_date")||t.firstElementChild;if(r&&r instanceof HTMLElement){var n=e._elements[0].querySelectorAll("td.yf > img").length;e._expandColumn("col.xX",r.offsetWidth+8+2+20+16*n)}}}})}},{key:"replaceDraftLabel",value:function(e){var t=this;if(!this._elements.length)return void console.warn("replaceDraftLabel called on destroyed thread row");var r,n,o;(0,M.default)(C.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var i=(0,d.default)(e,1),a=i[0],s=(0,A.default)(t._elements[0],"td > div.yW"),l=s.parentElement;if(!l)throw new Error("Should not happen");if(a){a=(0,v.default)({count:1},a),r||(r=t._modifications.replacedDraftLabel.unclaimed.shift(),r||(r={el:(0,v.default)(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_label"}),remove:function(){this.el.remove()}}),t._modifications.replacedDraftLabel.claimed.push(r));var u=!(0,w.default)(l.children,r.el);if(u||!n){r.el.innerHTML=s.innerHTML;var c=(0,b.default)(r.el.querySelectorAll(".boq"));if(c.length>0)c.forEach(function(e){return e.remove()}),n=(0,v.default)(document.createElement("span"),{className:"boq"}),r.el.appendChild(n);else{if(!(n=r.el.querySelector("font")))return;var f=n.nextElementSibling;f&&f.remove()}n.classList.add("inboxsdk__thread_row_custom_draft_part"),o=(0,v.default)(document.createElement("span"),{className:"inboxsdk__thread_row_custom_draft_count"}),r.el.appendChild(o)}n.textContent=a.text,o.textContent=1!==a.count?" (".concat(a.count,")"):"",u&&l.insertBefore(r.el,s)}else r&&(r.remove(),t._modifications.replacedDraftLabel.claimed.splice(t._modifications.replacedDraftLabel.claimed.indexOf(r),1),r=null)})}},{key:"replaceDate",value:function(e){var t=this;if(!this._elements.length)return void console.warn("replaceDate called on destroyed thread row");var r;(0,M.default)(C.default,e).toProperty().combine(this._getRefresher()).takeUntilBy(this._stopper).onValue(function(e){var n=(0,d.default)(e,1),o=n[0],i=(0,A.default)(t._elements[0],"td.xW, td.yf > div.apm");i.firstElementChild,o?(r||(r=t._modifications.replacedDate.unclaimed.shift(),r||(r={el:(0,v.default)(document.createElement("span"),{className:"inboxsdk__thread_row_custom_date"}),remove:function(){this.el.remove(),i.classList.remove("inboxsdk__thread_row_custom_date_container")}}),t._modifications.replacedDate.claimed.push(r)),r.el.textContent=o.text,o.tooltip?(r.el.setAttribute("data-tooltip",o.tooltip),r.el.setAttribute("aria-label",o.tooltip)):(r.el.removeAttribute("data-tooltip"),r.el.removeAttribute("aria-label")),r.el.style.color=o.textColor||"",(0,w.default)(i.children,r.el)||(i.insertBefore(r.el,i.firstChild),i.classList.add("inboxsdk__thread_row_custom_date_container")),t._fixDateColumnWidth()):r&&(r.remove(),t._modifications.replacedDate.claimed.splice(t._modifications.replacedDate.claimed.indexOf(r),1),r=null)})}},{key:"getEventStream",value:function(){return this._stopper}},{key:"getStopper",value:function(){return this._stopper}},{key:"getSubject",value:function(){return this._elements.length>1?(0,A.default)(this._elements[1],"div.xS div.xT div.y6 > span[id]").textContent:(0,A.default)(this._elements[0],"td.a4W div.xS div.xT div.y6 > span[id]").textContent}},{key:"getDateString",value:function(){return(0,A.default)(this._elements[0],"td.xW > span[title]:not(.inboxsdk__thread_row_custom_date), td.yf.apt > div.apm > span[title]:not(.inboxsdk__thread_row_custom_date)").title}},{key:"_threadIdReady",value:function(){return!!this._getThreadID()}},{key:"_getThreadID",value:function(){var e=this;if(this._cachedThreadID)return this._cachedThreadID;if(this._driver.isUsingSyncAPI()){var t=(0,y.default)(this._elements.map(function(e){return(0,b.default)(e.querySelectorAll("[data-thread-id][data-legacy-thread-id]"))})).filter(Boolean)[0];if(t)return this._cachedSyncThreadID=t.getAttribute("data-thread-id").replace("#",""),this._cachedThreadID=t.getAttribute("data-legacy-thread-id").replace("#",""),this._cachedThreadID;var r=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);this._cachedSyncThreadID=r,r&&this._driver.getOldGmailThreadIdFromSyncThreadId(r).then(function(t){e._cachedThreadID=t})}else this._cachedThreadID=this._driver.getThreadRowIdentifier().getThreadIdForThreadRow(this,this._elements);return this._cachedThreadID}},{key:"getThreadID",value:function(){var e=this._getThreadID();if(!e)throw new Error("Should not happen: thread id was null");return e}},{key:"getSyncThreadID",value:function(){return _.default.resolve(this._cachedSyncThreadID)}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getThreadID());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDraftID",value:function(){if(this._cachedSyncDraftIDPromise)return this._cachedSyncDraftIDPromise;if(this._driver.isUsingSyncAPI()){var e=(0,y.default)(this._elements.map(function(e){return(0,b.default)(e.querySelectorAll("[data-standalone-draft-id]"))})).filter(Boolean)[0];this._cachedSyncDraftIDPromise=_.default.resolve(e?e.getAttribute("data-standalone-draft-id").replace("#msg-a:",""):null)}else this._cachedSyncDraftIDPromise=this._driver.getThreadRowIdentifier().getDraftIdForThreadRow(this);return this._cachedSyncDraftIDPromise}},{key:"getVisibleDraftCount",value:function(){return this.getCounts().draftCount}},{key:"getVisibleMessageCount",value:function(){return this.getCounts().messageCount}},{key:"getContacts",value:function(){var e=this._elements[0].querySelectorAll("[email]"),t=(0,b.default)(e).map(function(e){return{emailAddress:e.getAttribute("email"),name:e.getAttribute("name")}});return(0,k.default)(t,function(e){return e.emailAddress})}},{key:"isSelected",value:function(){return!!this._elements[0].querySelector("div[role=checkbox][aria-checked=true]")}},{key:"_getLabelParent",value:function(){return this._elements.length>1?(0,A.default)(this._elements[2===this._elements.length?0:2],"div.apu"):(0,A.default)(this._elements[0],"td.a4W div.xS div.xT")}},{key:"_getWatchElement",value:function(){return 1===this._elements.length?this._elements[0]:this._elements[0].children[2]}},{key:"_getRefresher",value:function(){var e=this._refresher;return e||(e=this._refresher=(0,T.default)(this._getWatchElement(),{childList:!0}).map(function(){return null}).takeUntilBy(this._stopper).toProperty(function(){return null})),e}},{key:"_getSubjectRefresher",value:function(){var e=this._subjectRefresher;if(!e)if(this._isVertical)e=this._subjectRefresher=C.default.constant(null);else{var t=this._getWatchElement(),r=(0,A.default)(t,".y6");e=this._subjectRefresher=(0,T.default)(r,{childList:!0}).map(function(){return null}).takeUntilBy(this._stopper).toProperty(function(){return null})}return e}},{key:"_getImageContainerRefresher",value:function(){var e=this._imageRefresher;if(!e)if(this._isVertical){var t=3===this._elements.length?this._elements[2]:this._elements[0],r=(0,T.default)(t,{attributes:!0,attributeFilter:["class"]});e=this._imageRefresher=r.bufferBy(r.flatMapLatest(function(){return(0,R.default)()})).filter(function(){return t.querySelectorAll(".inboxsdk__thread_row_icon_wrapper").length>0&&!t.classList.contains("inboxsdk__thread_row_image_added")}).map(function(){return null}).takeUntilBy(this._stopper).toProperty(function(){return null})}else e=this._imageRefresher=C.default.constant(null);return e}}]),e}(),F=(0,E.defn)(t,U);r.default=F},{"../../../driver-common/update-icon":842,"../../../lib/delay-asap":850,"../../../lib/dom/insert-element-in-order":856,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/dropdown-view":941,"../widgets/gmail-action-button-view":769,"../widgets/gmail-dropdown-view":770,"../widgets/gmail-label-view":771,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"@babel/runtime-corejs2/regenerator":59,asap:83,assert:85,kefir:327,"kefir-bus":324,"kefir-cast":325,"kefir-stopper":326,"lodash/flatMap":487,"lodash/flatten":488,"lodash/includes":493,"lodash/intersection":494,"lodash/once":516,"lodash/uniqBy":529,ud:625}],755:[function(e,t,r){(function(n){(function(){"use strict";var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a,s=i(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),l=i(e("@babel/runtime-corejs2/core-js/date/now")),u=i(e("@babel/runtime-corejs2/core-js/map")),c=i(e("@babel/runtime-corejs2/core-js/set")),d=i(e("@babel/runtime-corejs2/core-js/json/stringify")),f=i(e("@babel/runtime-corejs2/core-js/array/from")),p=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=i(e("@babel/runtime-corejs2/helpers/createClass")),h=i(e("@babel/runtime-corejs2/helpers/defineProperty")),b=i(e("lodash/findIndex")),v=i(e("asap")),_=e("ud"),g=i(e("auto-html")),y=i(e("kefir")),w=i(e("kefir-stopper")),j=i(e("kefir-bus")),k=i(e("react")),x=i(e("react-dom")),E=i(e("../../../../common/find-parent")),S=(i(e("../../../lib/delay-asap")),i(e("../../../lib/from-event-target-capture")),i(e("order-manager"))),C=i(e("../../../lib/idMap")),I=i(e("../../../lib/incrementName")),A=i(e("../../../lib/dom/querySelectorOrFail")),T=i(e("../../../lib/dom/make-mutation-observer-chunked-stream")),D=i(e("../../../lib/dom/make-element-child-stream")),M=e("../../../lib/dom/simulate-mouse-event"),R=i(e("../../../lib/fake-window-resize")),O=i(e("../../../driver-common/sidebar/AppSidebar")),P=i(e("../../../driver-common/sidebar/ContentPanelViewDriver")),L=i(e("../gmail-element-getter")),V=i(e("./gmail-thread-sidebar-view/add-icon-area")),N=i(e("./gmail-app-sidebar-view/primary/add-to-icon-area")),B=function(){function e(t,r,n,o){(0,p.default)(this,e),(0,h.default)(this,"_stopper",(0,w.default)()),(0,h.default)(this,"_driver",void 0),(0,h.default)(this,"_instanceId",void 0),this._driver=t;var i=n||r;if(!i)throw new Error("should not happen");var a=i.getAttribute("data-sdk-sidebar-instance-id");null!=a?this._instanceId=a:this._createElement(r,n,o)}return(0,m.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"_getShouldAppSidebarOpen",value:function(){return"false"!==n.localStorage.getItem("inboxsdk__app_sidebar_should_open")}},{key:"_setShouldAppSidebarOpen",value:function(e){try{n.localStorage.setItem("inboxsdk__app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_createElement",value:function(e,t,r){var o,i,p,m=this;this._instanceId="".concat((0,l.default)(),"-").concat(Math.random());var h=t||e;if(!h)throw new Error("should not happen");h.setAttribute("data-sdk-sidebar-instance-id",this._instanceId),this._stopper.onValue(function(){h.removeAttribute("data-sdk-sidebar-instance-id")});var _=document.createElement("div");_.className=(0,C.default)("app_sidebar_container");var w,P=new u.default,B=!1,q=!1,U=(0,j.default)();if(this._stopper.onEnd(function(){U.end()}),t){var F=L.default.getMainContentBodyContainerElement();if(F){if(!(w=F.parentElement))throw new Error("should not happen");w.classList.add("container_app_sidebar_in_use"),(0,A.default)(t,".J-KU-Jz").insertAdjacentElement("beforebegin",_),t.classList.add("app_sidebar_visible"),t.classList.add((0,C.default)("app_sidebar_in_use")),w.classList.add("container_app_sidebar_visible"),_.textContent="x";var H=_.getBoundingClientRect();_.textContent="",t.classList.remove("app_sidebar_visible"),w.classList.remove("container_app_sidebar_visible");var z=window.innerWidth>=1024&&window.innerHeight>=600;!n._APP_SIDEBAR_TEST&&(0==H.width||0==H.height||z&&Math.floor(H.right)>Math.floor(window.innerWidth))?this._driver.getLogger().error(new Error("SDK sidebar inserted into add-ons sidebar was not visible"),{rect:{top:H.top,bottom:H.bottom,left:H.left,right:H.right,width:H.width,height:H.height},window:{innerWidth:window.innerWidth,innerHeight:window.innerHeight}}):q=!0,q||(w&&w.classList.remove("container_app_sidebar_in_use"),t.classList.remove((0,C.default)("app_sidebar_in_use")))}}var W=q?t:null,G=q?t:e;if(!G)throw new Error("should not happen");if(q||(G.insertBefore(_,G.firstElementChild),G.classList.add((0,C.default)("app_sidebar_in_use"))),!document.body.querySelector("."+(0,C.default)("app_sidebar_waiting_platform"))){var K=document.createElement("div");K.className=(0,C.default)("app_sidebar_waiting_platform"),document.body.appendChild(K)}if(W)o=function(){return _},_.classList.add("addon_sidebar");else{var $=(0,E.default)(G,function(e){return"visible"!==window.getComputedStyle(e).overflowY});o=$?function(){return $}:void 0}var J=new c.default,Y=new S.default({get:function(){try{return JSON.parse(n.localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set:function(e){try{n.localStorage.setItem("inboxsdk__sidebar_ordering",(0,d.default)(e))}catch(e){console.error("failed to set sidebar order data",e)}}});U.bufferWithTimeOrCount(150,100).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(function(){var e=_.getBoundingClientRect(),t=e.top+_.scrollTop,r=t+e.height,n=(0,f.default)(_.querySelectorAll(".".concat((0,C.default)("app_sidebar_content_panel"),".").concat((0,C.default)("expanded")," .").concat((0,C.default)("app_sidebar_content_panel_top_line")))),o=n.find(function(e){var n=e.getBoundingClientRect();return n.bottom>t&&n.bottom<r});if(o){var a=(o.getAttribute("data-instance-id"),o.getAttribute("data-app-name"));if(!a)return;var s=P.get(a);if(!s||!i)return
;var l=i.querySelector(".sidebar_button_container_active");l&&l.classList.remove("sidebar_button_container_active"),s.classList.add("sidebar_button_container_active")}});var Q=function(e){e&&(p=e)},Z=function e(){x.default.render(k.default.createElement(O.default,{ref:Q,panels:Y.getOrderedItems().map(function(e){return e.value}),onMoveEnd:function(t,r,n,o){Y.moveItem(n,o),e()},onExpandedToggle:function(){U.emit(null)},container:o}),_,function(){U.emit(null)})};if(Z(),y.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_ordering"===e.key}).takeUntilBy(this._stopper).onValue(function(){Y.reload(),Z()}),this._stopper.onValue(function(){x.default.unmountComponentAtNode(_),_.remove(),G.classList.remove((0,C.default)("app_sidebar_in_use")),G.classList.remove("app_sidebar_visible"),i&&i.remove();var e=L.default.getMainContentBodyContainerElement();e&&(w=e.parentElement)&&(w.classList.remove("container_app_sidebar_in_use"),w.classList.remove("container_app_sidebar_visible"))}),y.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").filter(function(e){return e.detail.sidebarId===m._instanceId}).takeUntilBy(this._stopper).onValue(function(e){for(var t=e.detail.id;J.has(t);)t=(0,I.default)(t);J.add(t);var n=e.detail.appName;Y.addItem({groupId:e.detail.appId,id:t,orderHint:e.detail.orderHint,value:{id:t,appName:n,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}}),Z(),W&&(i=W.querySelector("."+(0,C.default)("sidebar_iconArea")),i||(i=document.createElement("div"),i.className=(0,C.default)("sidebar_iconArea"),(0,V.default)(i,W,m._stopper)),(0,v.default)(function(){if(!i)throw new Error("should not happen");var t,o=e.detail.instanceId,l=e.detail.appIconUrl,u=P.get(n);if(u){var c=Number(u.getAttribute("data-count"))||1;u.setAttribute("data-count",String(c+1)),t=u}else if(t=document.createElement("div"),t.className=(0,C.default)("sidebar_button_container"),t.setAttribute("data-app-name",n),t.setAttribute("data-count",String(1)),t.innerHTML=(0,g.default)(a||(a=(0,s.default)(['\n              <button class="inboxsdk__button_icon" type="button" data-tooltip="','">\n                <img class="inboxsdk__button_iconImg" src="','">\n              </button>\n              <div class="inboxsdk__button_selectedIndicator"></div>\n            '])),n,l),e.detail.primaryColor&&((0,A.default)(t,".inboxsdk__button_selectedIndicator").style.backgroundColor=e.detail.primaryColor),P.set(n,t),(0,A.default)(t,"button").addEventListener("click",function(e){e.stopPropagation();var r=i?i.querySelector(".sidebar_button_container_active"):null;if(r&&r.classList.remove("sidebar_button_container_active"),r===t)W&&W.classList.remove("app_sidebar_visible"),w&&w.classList.remove("container_app_sidebar_visible"),m._setShouldAppSidebarOpen(!1);else{if(W&&W.classList.add("app_sidebar_visible"),t.classList.add("sidebar_button_container_active"),w&&w.classList.add("container_app_sidebar_visible"),m._setShouldAppSidebarOpen(!0),W){var n=W.querySelector(".J-KU-KO");n&&(0,M.simulateClick)(n),(0,R.default)();var a=W.firstElementChild;if(!a)return;var s=a.firstElementChild,l=s;if(!l)return;"none"!==l.style.display&&(B=!0,(0,T.default)(l,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).map(function(){return"none"===l.style.display}).filter(Boolean).take(1).delay(150).takeUntilBy(m._stopper).onValue(function(){B=!1}))}p.openPanel(o),p.scrollPanelIntoView(o,!0)}},!0),i&&(0,N.default)(Y,n,t,i),r&&r.fixWidths(),m._getShouldAppSidebarOpen()){var d=i.querySelector(".sidebar_button_container_active");d||(t.classList.add("sidebar_button_container_active"),W&&W.classList.add("app_sidebar_visible"),w&&w.classList.add("container_app_sidebar_visible"),(0,R.default)())}}))}),y.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").filter(function(e){return e.detail.sidebarId===m._instanceId}).takeUntilBy(this._stopper).onValue(function(e){var t=Y.getOrderedItems(),r=(0,b.default)(t,function(t){return t.value.instanceId===e.detail.instanceId});if(-1===r)throw new Error("should not happen: failed to find orderItem");Y.updateItemValueByIndex(r,{id:t[r].value.id,appId:e.detail.appId,appName:e.detail.appName||e.detail.title,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}),Z()}),y.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").filter(function(e){return e.detail.sidebarId===m._instanceId}).takeUntilBy(this._stopper).onValue(function(e){var t=Y.getOrderedItems(),n=(0,b.default)(t,function(t){return t.value.instanceId===e.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");if(J.delete(t[n].id),Y.removeItemByIndex(n),0===Y.getOrderedItems().length?m.destroy():Z(),W&&(i=W.querySelector("."+(0,C.default)("sidebar_iconArea")))){r&&r.fixWidths();var o=e.detail.appName,a=P.get(o);if(a){var s=Number(a.getAttribute("data-count"));if(s<=1){var l=_.querySelector(".sidebar_button_container_active");a.remove(),P.delete(o),a===l&&(W&&(W.classList.remove("app_sidebar_visible"),w&&w.classList.remove("container_app_sidebar_visible")),m._setShouldAppSidebarOpen(!1))}else 2===s?a.removeAttribute("data-count"):a.setAttribute("data-count",String(s-1))}}}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue(function(e){p.scrollPanelIntoView(e.detail.instanceId)}),y.default.fromEvents(document.body,"inboxsdkSidebarPanelClose").takeUntilBy(this._stopper).onValue(function(e){p.closePanel(e.detail.instanceId)}),W){var X=(0,A.default)(W,".J-KU-Jz");(0,D.default)(X).flatMap(function(e){var t=e.el;e.removalStream;return(0,T.default)(t,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).map(function(){return"none"!==t.style.display})}).takeUntilBy(this._stopper).onValue(function(e){if(e){if(w&&w.classList.add("container_addon_sidebar_visible"),B){var t=W.querySelector(".J-KU-KO");return void(t&&(0,M.simulateClick)(t))}m._setShouldAppSidebarOpen(!1);var r=i?i.querySelector(".sidebar_button_container_active"):null;r&&(W.classList.remove("app_sidebar_visible"),r.classList.remove("sidebar_button_container_active"),w&&w.classList.remove("container_app_sidebar_visible"))}else w&&w.classList.remove("container_addon_sidebar_visible")})}W&&y.default.fromEvents(_,"scroll").takeUntilBy(this._stopper).onValue(function(){U.emit(null)})}},{key:"addSidebarContentPanel",value:function(e){var t=new P.default(this._driver,e,this._instanceId);return this._stopper.takeUntilBy(t.getStopper()).onValue(function(){t.remove()}),t}}]),e}(),q=(0,_.defn)(t,B);r.default=q}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../common/find-parent":640,"../../../driver-common/sidebar/AppSidebar":840,"../../../driver-common/sidebar/ContentPanelViewDriver":841,"../../../lib/delay-asap":850,"../../../lib/dom/make-element-child-stream":859,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/fake-window-resize":877,"../../../lib/from-event-target-capture":878,"../../../lib/idMap":882,"../../../lib/incrementName":884,"../gmail-element-getter":696,"./gmail-app-sidebar-view/primary/add-to-icon-area":708,"./gmail-thread-sidebar-view/add-icon-area":756,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,asap:83,"auto-html":89,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/findIndex":485,"order-manager":537,react:606,"react-dom":584,ud:625}],756:[function(e,t,r){"use strict";function n(e,t,r){var n=t.firstElementChild;if(n){var i=n.firstElementChild,a=i;if(a){var s=t.querySelector(c);if(s){var d=(0,u.default)(a,{attributes:!0,attributeFilter:["style"]}).toProperty(function(){return null}).map(function(){return"none"!==a.style.display}).takeUntilBy(r),f=(0,u.default)(s,{attributes:!0,attributeFilter:["role"]}).toProperty(function(){return null}).filter(function(){return"tablist"===s.getAttribute("role")}).takeUntilBy(r);s.insertAdjacentElement("beforebegin",e),l.default.combine([d.filter(function(e){return!e}),f]).onValue(function(){s.insertAdjacentElement("afterbegin",e),o(e,s,l.default.merge([d.filter(Boolean),r]))}),d.filter(Boolean).onValue(function(){var t=document.createElement("div");t.innerHTML=a.innerHTML,t.classList.add("inboxsdk__addon_icon_loading"),s.insertAdjacentElement("beforebegin",e),e.insertAdjacentElement("afterend",t),l.default.merge([d.filter(function(e){return!e}),r]).take(1).onValue(function(){t.remove()})})}}}}function o(e,t,r){(0,u.default)(t,{childList:!0}).filter(function(){return e.parentElement!==t}).takeUntilBy(r).onValue(function(){t.insertAdjacentElement("afterbegin",e)})}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=e("ud"),l=a(e("kefir")),u=(a(e("kefir-stopper")),a(e("../../../../lib/dom/make-mutation-observer-chunked-stream"))),c=(a(e("../../../../lib/dom/querySelectorOrFail")),"[role=tablist],.J-KU-Jg"),d=(0,s.defn)(t,n);r.default=d},{"../../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,ud:625}],757:[function(e,t,r){"use strict";function n(e,t){var r=void 0!==s&&e[l]||e["@@iterator"];if(!r){if(u(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){d=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(d)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?a(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=e("@babel/runtime-corejs2/core-js/array/from"),s=e("@babel/runtime-corejs2/core-js/symbol"),l=e("@babel/runtime-corejs2/core-js/symbol/iterator"),u=e("@babel/runtime-corejs2/core-js/array/is-array"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/regenerator")),p=d(e("@babel/runtime-corejs2/core-js/set")),m=d(e("@babel/runtime-corejs2/core-js/number/min-safe-integer")),h=d(e("@babel/runtime-corejs2/core-js/promise")),b=d(e("@babel/runtime-corejs2/core-js/array/from")),v=d(e("@babel/runtime-corejs2/helpers/toConsumableArray")),_=d(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),g=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),y=d(e("@babel/runtime-corejs2/helpers/createClass")),w=d(e("@babel/runtime-corejs2/helpers/defineProperty")),j=(d(e("lodash/constant")),d(e("asap")),d(e("pdelay"))),k=e("ud"),x=(d(e("util")),d(e("kefir"))),E=(e("querystring"),d(e("kefir-bus"))),S=d(e("kefir-stopper")),C=d(e("../../../../common/find-parent")),I=d(e("../../../lib/dom/make-mutation-observer-chunked-stream")),A=d(e("../../../lib/dom/querySelectorOrFail")),T=d(e("../../../lib/idMap")),D=d(e("../../../views/SimpleElementView")),M=d(e("../../../views/conversations/custom-message-view")),R=(d(e("../../../lib/delay-asap")),d(e("../gmail-element-getter"))),O=d(e("./gmail-message-view")),P=d(e("./gmail-toolbar-view")),L=(d(e("./gmail-thread-sidebar-view")),d(e("./gmail-thread-view/width-manager"))),V=!1,N=function(){function e(t,r,n){var o=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,g.default)(this,e),(0,w.default)(this,"_element",void 0),(0,w.default)(this,"_routeViewDriver",void 0),(0,w.default)(this,"_driver",void 0),(0,w.default)(this,"_isPreviewedThread",void 0),(0,w.default)(this,"_eventStream",void 0),(0,w.default)(this,"_stopper",(0,S.default)()),(0,w.default)(this,"_threadSidebar",null),(0,w.default)(this,"_widthManager",null),(0,w.default)(this,"_toolbarView",void 0),(0,w.default)(this,"_messageViewDrivers",void 0),(0,w.default)(this,"_newMessageMutationObserver",void 0),(0,w.default)(this,"_readyStream",void 0),(0,w.default)(this,"_threadID",void 0),(0,w.default)(this,"_syncThreadID",void 0),(0,w.default)(this,"_customMessageViews",new p.default),(0,w.default)(this,"_hiddenCustomMessageViews",new p.default),(0,w.default)(this,"_hiddenCustomMessageNoticeProvider",void 0),(0,w.default)(this,"_hiddenCustomMessageNoticeElement",void 0),(0,w.default)(this,"_resolveUnmountHiddenNoticePromise",void 0),this._element=t,this._routeViewDriver=r,this._driver=n,this._isPreviewedThread=i,this._eventStream=(0,E.default)(),this._messageViewDrivers=[],this._logAddonElementInfo().catch(function(e){return o._driver.getLogger().error(e)});var a,s=this._driver.waitForGlobalSidebarReady().merge(this._driver.delayToTimeAfterReady(15e3).flatMap(function(){return x.default.constantError(new Error("15 second timeout while waiting for sidebar fired"))})).take(1).takeErrors(1).flatMapErrors(function(e){return o._driver.getLogger().error(e),x.default.constant(null)}).toProperty();a=1===n.getOpts().REQUESTED_API_VERSION&&n.isUsingSyncAPI()?x.default.combine([s,x.default.fromPromise(this.getThreadIDAsync())]):s,this._readyStream=a.map(function(){return o._setupToolbarView(),o._setupMessageViewStream(),null}).takeUntilBy(this._stopper).toProperty(),this._listenToExpandCollapseAll(),this._stopper.take(1).onValue(function(){o._resolveUnmountHiddenNoticePromise&&o._resolveUnmountHiddenNoticePromise()})}return(0,y.default)(e,[{key:"getMessageViewDriverStream",value:function(){return x.default.constant(this._messageViewDrivers).flatten().merge(this._eventStream.filter(function(e){return"internal"===e.type&&"messageCreated"===e.eventName}).map(function(e){return e.view}))}},{key:"isLoadingStub",value:function(){return!1}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getElement",value:function(){return this._element}},{key:"getRouteViewDriver",value:function(){return this._routeViewDriver}},{key:"getIsPreviewedThread",value:function(){return this._isPreviewedThread}},{key:"getToolbarView",value:function(){return this._toolbarView}},{key:"getMessageViewDrivers",value:function(){return this._messageViewDrivers}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._toolbarView&&this._toolbarView.destroy(),this._threadSidebar&&this._threadSidebar.destroy(),this._messageViewDrivers.forEach(function(e){e.destroy()}),this._messageViewDrivers.length=0,this._newMessageMutationObserver&&this._newMessageMutationObserver.disconnect();var e,t=n(this._customMessageViews);try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(e){t.e(e)}finally{t.f()}}},{key:"addSidebarContentPanel",value:function(e){return this._driver.getGlobalSidebar().addThreadSidebarContentPanel(e,this)}},{key:"addNoticeBar",value:function(){var e=document.createElement("div");e.className=(0,T.default)("thread_noticeBar");var t=this._element.querySelector(".if > .nH");if(!t)throw new Error("Failed to find subject container");t.insertAdjacentElement("afterend",e);var r=new D.default(e);return this._stopper.takeUntilBy(x.default.fromEvents(r,"destroy")).onValue(function(){return r.destroy()}),r}},{key:"registerHiddenCustomMessageNoticeProvider",value:function(e){this._hiddenCustomMessageNoticeProvider=e}},{key:"addCustomMessage",value:function(e){var t=this,r=this._element.parentElement;if(!r)throw new Error("missing parent element");var o=new M.default(e,function(){t._readyStream.onValue((0,_.default)(f.default.mark(function e(){var i,a,s,l,u,c,d,p,g;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t._element.querySelector("[role=list]")){e.next=3;break}return e.abrupt("return");case 3:return a=m.default,l=!1,e.t0=[],e.t1=v.default,e.next=9,h.default.all(t._messageViewDrivers.map(function(){var e=(0,_.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDate();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=0;case 5:return e.t1=e.t0,e.t2="HIDDEN"===t.getViewState(),e.t3=t.getElement(),e.abrupt("return",{sortDatetime:e.t1,isHidden:e.t2,element:e.t3});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 9:if(e.t2=e.sent,e.t3=(0,e.t1)(e.t2),e.t4=(0,v.default)((0,b.default)(t._customMessageViews).filter(function(e){return e!==o&&e.getElement().parentElement}).map(function(e){var t=e.getSortDate();return{sortDatetime:(t?t.getTime():null)||0,isHidden:e.getElement().classList.contains("inboxsdk__custom_message_view_hidden"),element:e.getElement()}})),u=e.t0.concat.call(e.t0,e.t3,e.t4).sort(function(e,t){return e.sortDatetime-t.sortDatetime}),c=o.getSortDate()){e.next=16;break}return e.abrupt("return");case 16:d=n(u),e.prev=17,d.s();case 19:if((p=d.n()).done){e.next=28;break}if(g=p.value,l=g.isHidden,!(c.getTime()>=a&&c.getTime()<=g.sortDatetime)){e.next=25;break}return s=g.element,e.abrupt("break",28);case 25:a=g.sortDatetime;case 26:e.next=19;break;case 28:e.next=33;break;case 30:e.prev=30,e.t5=e.catch(17),d.e(e.t5);case 33:return e.prev=33,d.f(),e.finish(33);case 36:s?s.insertAdjacentElement("beforebegin",o.getElement()):i.insertAdjacentElement("beforeend",o.getElement()),l&&t._setupHiddenCustomMessage(o),r.classList.add("inboxsdk__thread_view_with_custom_view");case 39:case"end":return e.stop()}},e,null,[[17,30,33,36]])})))});return this._customMessageViews.add(o),o.on("destroy",function(){t._customMessageViews.delete(o),t._customMessageViews.size>0?r.classList.add("inboxsdk__thread_view_with_custom_view"):r.classList.remove("inboxsdk__thread_view_with_custom_view")}),o}},{key:"_setupHiddenCustomMessage",value:function(e){var t=this;this._hiddenCustomMessageViews.add(e),e.getElement().classList.add("inboxsdk__custom_message_view_hidden");var r=this._element.querySelector(".adv"),n=!0;if(!r){n=!1;var o=(0,b.default)(this._element.querySelectorAll(".kQ"));if(o.length<2)return;r=o[1]}(0,I.default)(r,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(x.default.merge([this._stopper,x.default.fromEvents(e,"destroy")])).filter(function(){return r&&!r.classList.contains("kQ")}).onValue(function(){e.getElement().classList.remove("inboxsdk__custom_message_view_hidden"),t._hiddenCustomMessageNoticeElement&&t._hiddenCustomMessageNoticeElement.remove(),t._hiddenCustomMessageNoticeElement=null}),this._updateHiddenNotice(r,n),x.default.fromEvents(e,"destroy").takeUntilBy(this._stopper).take(1).onValue(function(){t._hiddenCustomMessageViews.delete(e),r&&t._updateHiddenNotice(r,n)})}},{key:"_updateHiddenNotice",value:function(e,t){var r=this,n=this._hiddenCustomMessageNoticeElement;n&&(n.remove(),this._hiddenCustomMessageNoticeElement=null,this._resolveUnmountHiddenNoticePromise&&this._resolveUnmountHiddenNoticePromise());var o=this._hiddenCustomMessageNoticeProvider;if(o){var i=this._hiddenCustomMessageNoticeElement=document.createElement("span");i.classList.add("inboxsdk__custom_message_view_app_notice_content");var a=this._hiddenCustomMessageViews.size,s=null;if(t){var l=(0,A.default)(e,".adx span");if(s=Number(l.innerHTML),isNaN(s))throw new Error("Couldn't find number of native hidden messages in dom structure")}var u=o(a,s,new h.default(function(e){r._resolveUnmountHiddenNoticePromise=e}));if(u){if(i.appendChild(u),!t){var c=document.createElement("span");c.classList.add("adx");(0,A.default)(e,".G3").appendChild(c)}var d=(0,A.default)(e,".adx");d.classList.add("inboxsdk__custom_message_view_app_notice_container"),d.appendChild(i)}}}},{key:"getSubject",value:function(){var e=this._element.querySelector(".ha h2");return e?e.textContent:""}},{key:"getInternalID",value:function(){return this._syncThreadID||this.getThreadID()}},{key:"getThreadID",value:function(){if(this._threadID)return this._threadID;var e;if(this._driver.isUsingSyncAPI()){var t=this._element.querySelector("[data-thread-perm-id]");if(!t)throw new Error("threadID element not found");if(!(this._syncThreadID=t.getAttribute("data-thread-perm-id")))throw new Error("syncThreadID attribute with no value");if(!(e=t.getAttribute("data-legacy-thread-id"))){var r=new Error("Failed to get id for thread: data-legacy-thread-id attribute missing");this._driver.getLogger().error(r)}}if(!e)if(this._isPreviewedThread)e=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0);else{var n=this._routeViewDriver?this._routeViewDriver.getParams():null;if(!n||!n.threadID){var o=new Error("Failed to get id for thread");throw this._driver.getLogger().error(o),o}e=n.threadID}return this._threadID=e,e}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,_.default)(f.default.mark(function e(){var t,r,n,o,i;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._driver.isUsingSyncAPI()){e.next=14;break}if(r=this._element.querySelector("[data-thread-perm-id]")){e.next=4;break}throw new Error("threadID element not found");case 4:if(n=this._syncThreadID=r.getAttribute("data-thread-perm-id")){e.next=7;break}throw new Error("syncThreadID attribute with no value");case 7:if(this._threadID=t=r.getAttribute("data-legacy-thread-id"),t){e.next=12;break}return e.next=11,this._driver.getOldGmailThreadIdFromSyncThreadId(n);case 11:this._threadID=t=e.sent;case 12:e.next=27;break;case 14:if(!this._isPreviewedThread){e.next=18;break}t=this._driver.getPageCommunicator().getCurrentThreadID(this._element,!0),e.next=26;break;case 18:if(!(o=this._routeViewDriver?this._routeViewDriver.getParams():null)||!o.threadID){e.next=23;break}t=o.threadID,e.next=26;break;case 23:throw i=new Error("Failed to get id for thread"),this._driver.getLogger().error(i),i;case 26:this._threadID=t;case 27:if(!this._threadID){e.next=31;break}return e.abrupt("return",this._threadID);case 31:throw new Error("Failed to get id for thread");case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"addLabel",value:function(){var e=this._element.querySelector(".ha .J-J5-Ji");if(!e)throw new Error("Thread view label container not found");var t=document.createElement("span");e.appendChild(t);var r=new D.default(t),n=new MutationObserver(function(r){r.some(function(e){return"childList"===e.type&&e.removedNodes&&e.removedNodes.length&&e.removedNodes.length>0})&&(e.contains(t)||e.appendChild(t))});return n.observe(e,{childList:!0}),this._stopper.takeUntilBy(x.default.fromEvents(r,"destroy")).onValue(function(){return r.destroy()}),x.default.fromEvents(r,"destroy").take(1).onValue(function(){n.disconnect()}),r}},{key:"_setupToolbarView",value:function(){var e=this._findToolbarElement();if(!e)throw new Error("No toolbar element found");var t=e.parentElement;t&&t.classList.add("inboxsdk__thread_toolbar_parent"),this._toolbarView=new P.default(e,this._driver,this._routeViewDriver,this)}},{key:"_findToolbarElement",value:function(){for(var e=document.querySelectorAll("[gh=tm]"),t=0;t<e.length;t++)if(this._isToolbarContainerRelevant(e[t]))return e[t].querySelector("[gh=mtb]");return null}},{key:"_isToolbarContainerRelevant",value:function(e){return e.parentElement.parentElement===this._element.parentElement.parentElement||("main"!==e.parentElement.getAttribute("role")&&"main"!==this._element.parentElement.getAttribute("role")||!("main"!==e.parentElement.getAttribute("role")||!e.parentElement.querySelector(".if")||e.parentElement.querySelector(".if").parentElement!==this._element))}},{key:"_setupMessageViewStream",value:function(){var e=this._element.querySelector(".h7");if(!e){var t=this;return void setTimeout(function(){t._element&&t._setupMessageViewStream()},500)}var r=e.parentElement;this._initializeExistingMessages(r),this._observeNewMessages(r)}},{key:"_initializeExistingMessages",value:function(e){var t=this,r=e.children;Array.prototype.forEach.call(r,function(e){t._createMessageView(e)})}},{key:"_observeNewMessages",value:function(e){this._newMessageMutationObserver=new MutationObserver(this._handleNewMessageMutations.bind(this)),this._newMessageMutationObserver.observe(e,{childList:!0})}},{key:"_handleNewMessageMutations",value:function(e){var t=this;e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,function(e){e.classList.contains("inboxsdk__custom_message_view")||t._createMessageView(e)})})}},{key:"_createMessageView",value:function(e){var t=new O.default(e,this,this._driver);this._eventStream.plug(t.getEventStream()),this._messageViewDrivers.push(t),this._eventStream.emit({type:"internal",eventName:"messageCreated",view:t})}},{key:"_setupWidthManager",value:function(){var e=this._widthManager;if(!e){var t=R.default.getAddonSidebarContainerElement();if(!t)throw new Error("addonSidebarElement not found");var r=R.default.getMainContentBodyContainerElement();if(!r)throw new Error("mainContentBodyContainerElement not found");var n=r.parentElement;if(!n)throw new Error("mainContentBodyContainerElement has no parent element");this._widthManager=e=new L.default(n,t)}return e}},{key:"getReadyStream",value:function(){return this._readyStream}},{key:"_logAddonElementInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,_.default)(f.default.mark(function e(){var t,r,n=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=R.default.getAddonSidebarContainerElement();if(!e)return null;var t={parent:e.parentElement?"none"===e.parentElement.style.display:null,self:"none"===e.style.display,children:(0,b.default)(e.children).map(function(e){return e.style?"none"===e.style.display:null})},r=e.getBoundingClientRect();return{isDisplayNone:t,size:{width:r.width,height:r.height}}},!V){e.next=3;break}return e.abrupt("return");case 3:return r={time:{}},r.time[0]=t(),e.next=7,h.default.all([30,5e3].map(function(){var e=(0,_.default)(f.default.mark(function e(o){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,j.default)(o);case 2:if(!n._stopper.stopped){e.next=4;break}return e.abrupt("return");case 4:r.time[o]=t();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 7:if(!this._stopper.stopped){e.next=9;break}return e.abrupt("return");case 9:this._driver.getLogger().eventSdkPassive("gmailSidebarElementInfo",r),V=!0;case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"_listenToExpandCollapseAll",value:function(){var e=this,t=this._element.querySelector("img.gx");if(t){var r=(0,C.default)(t,function(e){return"button"===e.getAttribute("role")});r&&x.default.merge([x.default.fromEvents(r,"click"),x.default.fromEvents(r,"keydown").filter(function(e){return 13===e.which})]).takeUntilBy(this._stopper).onValue(function(){var t,r=n(e._customMessageViews);try{for(r.s();!(t=r.n()).done;){t.value.expand()}}catch(e){r.e(e)}finally{r.f()}})}var o=this._element.querySelector("img.gq");if(o){var i=(0,C.default)(o,function(e){return"button"===e.getAttribute("role")});i&&x.default.merge([x.default.fromEvents(i,"click"),x.default.fromEvents(i,"keydown").filter(function(e){return 13===e.which})]).takeUntilBy(this._stopper).onValue(function(){var t,r=n(e._customMessageViews);try{for(r.s();!(t=r.n()).done;){t.value.collapse()}}catch(e){r.e(e)}finally{r.f()}})}}}]),e}(),B=(0,k.defn)(t,N);r.default=B},{"../../../../common/find-parent":640,"../../../lib/delay-asap":850,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/idMap":882,"../../../views/SimpleElementView":920,"../../../views/conversations/custom-message-view":927,"../gmail-element-getter":696,"./gmail-message-view":746,"./gmail-thread-sidebar-view":755,"./gmail-thread-view/width-manager":758,"./gmail-toolbar-view":759,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/number/min-safe-integer":8,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56,"@babel/runtime-corejs2/regenerator":59,asap:83,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/constant":477,pdelay:545,querystring:579,ud:625,util:629}],758:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/toConsumableArray")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("../../../../lib/idMap")),c=function(){function e(t,r){(0,a.default)(this,e),(0,l.default)(this,"_contentContainerEl",void 0),(0,l.default)(this,"_addonSidebarContainerEl",void 0),this._contentContainerEl=t,this._addonSidebarContainerEl=r}return(0,s.default)(e,[{key:"fixWidths",value:function(){var e=this._addonSidebarContainerEl.querySelector("[role=tablist]");if(e){if(this._addonSidebarContainerEl.classList.contains((0,u.default)("app_sidebar_in_use")))return void this._contentContainerEl.classList.remove((0,u.default)("container_app_sidebar_no_icons"));!(0,i.default)(e.children).some(function(e){return"none"!==e.style.display})?this._contentContainerEl.classList.add((0,u.default)("container_app_sidebar_no_icons")):this._contentContainerEl.classList.remove((0,u.default)("container_app_sidebar_no_icons"))}}}]),e}();r.default=c},{"../../../../lib/idMap":882,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56}],759:[function(e,t,r){"use strict";function n(e,t){var r=i(e);if(a){var n=a(e);t&&(n=n.filter(function(t){return s(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,_.default)(e,t,r[t])}):l?u(e,l(r)):n(Object(r)).forEach(function(t){c(e,t,s(r,t))})}return e}
var i=e("@babel/runtime-corejs2/core-js/object/keys"),a=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),u=e("@babel/runtime-corejs2/core-js/object/define-properties"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/core-js/set")),p=d(e("@babel/runtime-corejs2/core-js/json/stringify")),m=d(e("@babel/runtime-corejs2/core-js/array/from")),h=d(e("@babel/runtime-corejs2/core-js/object/assign")),b=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),v=d(e("@babel/runtime-corejs2/helpers/createClass")),_=d(e("@babel/runtime-corejs2/helpers/defineProperty")),g=(d(e("lodash/uniq")),d(e("lodash/escape"))),y=d(e("asap")),w=e("ud"),j=d(e("kefir")),k=d(e("kefir-stopper")),x=d(e("../../../lib/stream-wait-for")),E=d(e("../../../lib/dom/make-mutation-observer-stream")),S=d(e("../../../lib/dom/insert-element-in-order")),C=d(e("../../../../common/isElementVisible")),I=d(e("../gmail-element-getter")),A=d(e("../widgets/buttons/button-view")),T=d(e("../widgets/gmail-dropdown-view")),D=d(e("../../../widgets/buttons/basic-button-view-controller")),M=d(e("../../../widgets/buttons/dropdown-button-view-controller")),R=d(e("./gmail-thread-view")),O=d(e("./gmail-row-list-view")),P=e("../../../constants/toolbars"),L=d(e("../../../lib/logger")),V=function(){function e(t,r,n,o){var i=this;if((0,b.default)(this,e),(0,_.default)(this,"_element",void 0),(0,_.default)(this,"_driver",void 0),(0,_.default)(this,"_ready",void 0),(0,_.default)(this,"_stopper",void 0),(0,_.default)(this,"_routeViewDriver",void 0),(0,_.default)(this,"_buttonViewControllers",new f.default),(0,_.default)(this,"_moreMenuItems",[]),(0,_.default)(this,"_toolbarState",void 0),(0,_.default)(this,"_threadViewDriver",void 0),(0,_.default)(this,"_rowListViewDriver",void 0),(0,_.default)(this,"_isUpdateButtonClassesScheduled",!1),(0,_.default)(this,"_moreMenuItemsContainer",null),this._element=t,this._driver=r,this._stopper=(0,k.default)(),this._routeViewDriver=n,this._getMoveSectionElement()?this._ready=j.default.constant(this):this._ready=(0,x.default)(function(){return!!i._getMoveSectionElement()}).takeUntilBy(this._stopper).map(function(){return i}).toProperty(),this._ready.onValue(function(){i._startMonitoringMoreMenu(),i._determineToolbarState(),i._determineToolbarIconMode(),i._setupToolbarStateMonitoring()}),o instanceof R.default)this._threadViewDriver=o,this._ready.onValue(function(){i._element.setAttribute("data-thread-toolbar","true")});else{if(!(o instanceof O.default))throw new Error("Invalid parent");this._rowListViewDriver=o,this._ready.onValue(function(){i._element.setAttribute("data-rowlist-toolbar","true")})}}return(0,v.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"getElement",value:function(){return this._element}},{key:"getRouteViewDriver",value:function(){return this._routeViewDriver}},{key:"getThreadViewDriver",value:function(){return this._threadViewDriver}},{key:"isForRowList",value:function(){return null!=this._rowListViewDriver}},{key:"isForThread",value:function(){return null!=this._threadViewDriver}},{key:"getThreadRowViewDrivers",value:function(){return this._rowListViewDriver?this._rowListViewDriver.getThreadRowViewDrivers():(console.error("missing this._rowListViewDriver"),new f.default)}},{key:"addButton",value:function(e,t){var r=this,n=(0,k.default)();this._stopper.takeUntilBy(n).onValue(function(){n.destroy()});var o=(this._driver.getAppId(),P.SECTION_NAMES);return this._ready.takeUntilBy(n).onValue(function(){if(e.section===o.OTHER){var i={buttonDescriptor:e};r._moreMenuItems.push(i),r._addToOpenMoreMenu(e),n.onValue(function(){r._moreMenuItems=r._moreMenuItems.filter(function(e){return e!==i}),r._addMoreItems()})}else{var a=r._getSectionElement(e.section,o);if(a){var s=r._createButtonViewController(e);r._buttonViewControllers.add(s),n.onValue(function(){r._buttonViewControllers.delete(s),s.destroy()}),s.getView().getElement().__addButton_ownedByExtension=!0,s.getView().getElement().setAttribute("data-add-button-debug",(0,p.default)({id:t,title:e.title,hasThreadViewDriver:r.isForThread(),hasRowListViewDriver:r.isForRowList()})),s.getView().getElement().setAttribute("data-order-hint",String(e.orderHint||0)),(0,S.default)(a,s.getView().getElement()),j.default.merge([j.default.constant(-1),j.default.later(1e3,1e3)]).map(function(t){return{delay:t,duplicates:(0,m.default)(a.children).filter(function(e){return s.getView().getElement().getAttribute("data-rowlist-toolbar")===e.getAttribute("data-rowlist-toolbar")&&s.getView().getElement().getAttribute("data-toolbar-expanded")===e.getAttribute("data-toolbar-expanded")}).filter(function(e){return e.hasAttribute("data-add-button-debug")}).map(function(e){return(0,h.default)({ownedByExtension:!!e.__addButton_ownedByExtension},JSON.parse(e.getAttribute("data-add-button-debug")||"null"))}).filter(function(t){return t.title===e.title})}}).filter(function(e){return e.duplicates.length>1}).take(1).takeUntilBy(r._stopper).onValue(function(e){var t=e.delay,n=e.duplicates;L.default.error(new Error("Duplicate toolbar button"),{delay:t,duplicates:n,dataThreadToolbar:r._element.getAttribute("data-thread-toolbar"),dataRowlistToolbar:r._element.getAttribute("data-rowlist-toolbar")})}),r._updateButtonClasses(r._element),s.getView().setEnabled("EXPANDED"===r._toolbarState)}}}),{getStopper:function(){return n},destroy:function(){n.destroy()}}}},{key:"waitForReady",value:function(){return this._ready}},{key:"_createButtonViewController",value:function(e){var t=this._getButtonView(e);e.buttonView=t;return e.hasDropdown?new M.default({buttonView:t,dropdownViewDriverClass:T.default,dropdownShowFunction:e.onClick,dropdownPositionOptions:{position:"bottom",hAlign:"left"}}):new D.default(e)}},{key:"_getButtonView",value:function(e){var t=new A.default(o(o({},e),{},{noArrow:!0}));return this._rowListViewDriver?(t.getElement().setAttribute("data-rowlist-toolbar","true"),t.getElement().setAttribute("data-toolbar-expanded","true")):this._threadViewDriver&&t.getElement().setAttribute("data-thread-toolbar","true"),t.getElement().setAttribute("role","button"),t}},{key:"_startMonitoringMoreMenu",value:function(){var e=this,t=this._element.querySelector(".nf[role=button]");t&&(0,E.default)(t,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty(function(){return null}).takeUntilBy(this._stopper).map(function(){return t.getAttribute("aria-expanded")}).onValue(function(t){"true"!==t?e._clearMoreItems():e._addMoreItems()})}},{key:"_determineToolbarState",value:function(){var e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");"none"===e.style.display?this._toolbarState="COLLAPSED":this._toolbarState="EXPANDED"}},{key:"_determineToolbarIconMode",value:function(){var e=this._getMoveSectionElement();if(!e)throw new Error("No move section element");var t=(0,m.default)(e.querySelectorAll("[role=button]:not(.inboxsdk__button)")).some(function(e){return e.hasAttribute("title")||e.hasAttribute("data-tooltip")});this._element.setAttribute("data-toolbar-icononly",t?"true":"false")}},{key:"_setupToolbarStateMonitoring",value:function(){var e=this,t=this._getMoveSectionElement();if(!t)throw new Error("No move section element");(0,E.default)(t,{attributes:!0,attributeFilter:["style"]}).takeUntilBy(this._stopper).onValue(function(t){t.target instanceof HTMLElement&&"none"===t.target.style.display?e._toolbarState="COLLAPSED":e._toolbarState="EXPANDED",e._updateButtonClasses(e._element),e._updateButtonEnabledState()})}},{key:"_getSectionElement",value:function(e,t){switch(e){case t.INBOX_STATE:return this._getArchiveSectionElement();case t.METADATA_STATE:return this._getMoveSectionElement();default:return null}}},{key:"_getArchiveSectionElement",value:function(){return this._getSectionElementForButtonSelector(".ar9, .aFh, .aFj, .lR, .nN, .nX, .aFk")}},{key:"_getCheckboxSectionElement",value:function(){return this._getSectionElementForButtonSelector(".T-Jo-auh")}},{key:"_getMoveSectionElement",value:function(){return this._getSectionElementForButtonSelector(".asb, .ase, .ns, .mw")}},{key:"_getSectionElementForButtonSelector",value:function(e){for(var t=this._element.querySelectorAll(".G-Ni"),r=0;r<t.length;r++)if(t[r].querySelector(e))return t[r];return null}},{key:"_updateButtonClasses",value:function(e){var t=this;this._isUpdateButtonClassesScheduled||(this._isUpdateButtonClassesScheduled=!0,(0,y.default)(function(){"EXPANDED"===t._toolbarState?e.setAttribute("data-toolbar-expanded","true"):"COLLAPSED"===t._toolbarState&&e.setAttribute("data-toolbar-expanded","false");var r=e.querySelectorAll(".G-Ni > [role=button]");Array.prototype.forEach.call(r,function(e){for(var t=e,r=0;r<1e5;r++){if(!t.previousElementSibling){e.classList.remove("T-I-Js-Gs");break}if(!t.previousElementSibling.classList.contains("inboxsdk__button")){e.classList.add("T-I-Js-Gs");break}if((0,C.default)(t.previousElementSibling)){e.classList.add("T-I-Js-Gs");break}t=t.previousElementSibling}t=e;for(var n=0;n<1e5;n++){if(!t.nextElementSibling){e.classList.remove("T-I-Js-IF");break}if(!t.nextElementSibling.classList.contains("inboxsdk__button")){e.classList.add("T-I-Js-IF");break}if((0,C.default)(t.nextElementSibling)){e.classList.add("T-I-Js-IF");break}t=t.nextElementSibling}}),t._isUpdateButtonClassesScheduled=!1}))}},{key:"_updateButtonEnabledState",value:function(){var e="EXPANDED"===this._toolbarState;this._buttonViewControllers.forEach(function(t){t.getView().setEnabled(e)})}},{key:"_addMoreItems",value:function(){var e=this;this._clearMoreItems(),"EXPANDED"===this._toolbarState&&this._moreMenuItems.forEach(function(t){e._addToOpenMoreMenu(t.buttonDescriptor)})}},{key:"_clearMoreItems",value:function(){this._moreMenuItemsContainer&&(this._moreMenuItemsContainer.remove(),this._moreMenuItemsContainer=null)}},{key:"_addToOpenMoreMenu",value:function(e){var t=I.default.getActiveMoreMenu();if(t){var r=this._getMoreMenuItemsContainer(t),n=this._getMoreMenuItemElement(e);(0,S.default)(r,n)}}},{key:"_getMoreMenuItemsContainer",value:function(e){if(this._moreMenuItemsContainer)return this._moreMenuItemsContainer;var t=this._moreMenuItemsContainer=document.createElement("div");return t.setAttribute("data-group-order-hint",this._driver.getAppId()),t.innerHTML='<div class="J-Kh"></div>',(0,S.default)(e,t),t}},{key:"_getMoreMenuItemElement",value:function(e){var t=document.createElement("div");return t.setAttribute("class","J-N inboxsdk__menuItem"),t.setAttribute("role","menuitem"),t.setAttribute("data-order-hint",String(e.orderHint||0)),t.innerHTML=['<div class="J-N-Jz" style="-webkit-user-select: none;">',e.iconUrl?'<img class="J-N-JX" src="'+(0,g.default)(e.iconUrl)+'" />':"",e.iconClass?'<span class="inboxsdk__icon J-N-JX '+(0,g.default)(e.iconClass)+'"></span>':"",(0,g.default)(e.title),"</div>"].join(""),t.addEventListener("mouseenter",function(e){return t.classList.add("J-N-JT")}),t.addEventListener("mouseleave",function(e){return t.classList.remove("J-N-JT")}),t.addEventListener("click",function(t){e.onClick&&e.onClick({})}),t}},{key:"destroy",value:function(){var e=this._element;this._threadViewDriver?this._element.removeAttribute("data-thread-toolbar"):this._rowListViewDriver&&this._element.removeAttribute("data-rowlist-toolbar"),this._clearMoreItems(),this._stopper.destroy(),this._updateButtonClasses(e)}}]),e}(),N=(0,w.defn)(t,V);r.default=N},{"../../../../common/isElementVisible":646,"../../../constants/toolbars":659,"../../../lib/dom/insert-element-in-order":856,"../../../lib/dom/make-mutation-observer-stream":863,"../../../lib/logger":891,"../../../lib/stream-wait-for":901,"../../../widgets/buttons/basic-button-view-controller":939,"../../../widgets/buttons/dropdown-button-view-controller":940,"../gmail-element-getter":696,"../widgets/buttons/button-view":762,"../widgets/gmail-dropdown-view":770,"./gmail-row-list-view":752,"./gmail-thread-view":757,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83,kefir:327,"kefir-stopper":326,"lodash/escape":482,"lodash/uniq":528,ud:625}],760:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=l(e("kefir")),p=l(e("kefir-bus")),m=l(e("../../../lib/dom/get-insert-before-element")),h=l(e("../../../lib/dom/make-mutation-observer-chunked-stream")),b=(l(e("../../../lib/dom/make-mutation-observer-stream")),l(e("../../../lib/dom/querySelectorOrFail"))),v=l(e("../../../../common/find-parent")),_=(l(e("../gmail-element-getter")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("./gmail-nav-item-view"))),g=function(){function e(t,r,n){var o=this;(0,u.default)(this,e),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_element",void 0),(0,d.default)(this,"_navItemName",void 0),(0,d.default)(this,"_activeMarkerElement",null),(0,d.default)(this,"_eventStream",void 0),(0,d.default)(this,"_elementBus",void 0),(0,d.default)(this,"_elementStream",void 0),(0,d.default)(this,"_isActive",!1),(0,d.default)(this,"_itemContainerElement",null),this._driver=t,this._element=r,this._eventStream=(0,p.default)(),this._elementBus=(0,p.default)(),this._elementStream=this._elementBus.toProperty(function(){return o._element}),this._navItemName=n;var i=this._element.parentElement;i&&(0,h.default)(i,{childList:!0}).map(function(){return i.querySelector('.aim a[href*="#'.concat(o._navItemName,'"]'))}).filter(Boolean).map(function(e){return(0,v.default)(e,function(e){return e.classList.contains("aim")})}).filter(Boolean).filter(function(e){return e!==o._element}).onValue(function(e){if(e){var t=o._itemContainerElement;t&&(t.remove(),o._itemContainerElement=null),o._elementBus.emit(e)}}),this._elementStream.onValue(function(e){o._element=e,o._monitorElementForActiveChanges(),o.setActive(o._isActive)})}return(0,c.default)(e,[{key:"destroy",value:function(){this._element.classList.remove("inboxsdk__navItem_claimed"),this._eventStream.end(),this._elementBus.end(),this._activeMarkerElement&&this._activeMarkerElement.remove(),this._itemContainerElement&&this._itemContainerElement.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"addNavItem",value:function(e,t){var r=this,n=new _.default(this._driver,e,2);return f.default.merge([n.getEventStream().filter(function(e){return"orderChanged"===e.eventName}),this._elementStream]).onValue(function(){return r._addNavItemElement(n)}),n.setNavItemDescriptor(t),n}},{key:"setActive",value:function(e){this._isActive=e;var t=(0,b.default)(this._element,".TO");e?(this._element.classList.add("ain"),t.classList.add("nZ"),t.classList.add("aiq")):(this._element.classList.remove("ain"),t.classList.remove("nZ"),t.classList.remove("aiq")),this._setHeights()}},{key:"toggleCollapse",value:function(){this._toggleCollapse()}},{key:"setCollapsed",value:function(e){localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]=e,this._element.querySelector(".inboxsdk__expando")&&(e?this._collapse():this._expand())}},{key:"remove",value:function(){}},{key:"_monitorElementForActiveChanges",value:function(){var e=this;this._element.classList.add("inboxsdk__navItem_claimed");var t=this._element,r=(0,h.default)(t,{attributes:!0,attributeFilter:["class"]}).takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).toProperty(function(){return[]}).map(function(){return t});r.filter(function(e){return e.classList.contains("ain")}).onValue(function(){return e._createActiveMarkerElement()}),r.filter(function(e){return!e.classList.contains("ain")}).onValue(function(){return e._removeActiveMarkerElement()})}},{key:"_addNavItemElement",value:function(e){var t=this._getItemContainerElement(),r=(0,m.default)(e.getElement(),t.children,["data-group-order-hint","data-order-hint","data-insertion-order-hint"]);t.insertBefore(e.getElement(),r);var n=e.getElement();(0,b.default)(n,".TN").style.marginLeft=(0,_.getLeftIndentationPaddingValue)()+"px",this._setHeights()}},{key:"_getItemContainerElement",value:function(){var e=this._itemContainerElement;return e||(e=this._itemContainerElement=this._element.querySelector(".inboxsdk__navItem_container"))||(e=this._createItemContainerElement(),this._createExpando()),e}},{key:"_createItemContainerElement",value:function(){var e=this._itemContainerElement=document.createElement("div");return e.classList.add("inboxsdk__navItem_container"),this._element.appendChild(e),e}},{key:"_createExpando",value:function(){var e=this,t=this._element.querySelector("a"),r=document.createElement("div");r.setAttribute("class","TH aih J-J5-Ji inboxsdk__expando"),r.setAttribute("role","link"),r.title="Expand ".concat(t?t.title||t.textContent:""),r.addEventListener("click",function(t){e._toggleCollapse(),t.stopPropagation(),t.preventDefault(),t.stopImmediatePropagation()},!0);var n=this._element.querySelector(".TN");n&&n.insertAdjacentElement("afterbegin",r),"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?this._collapse():this._expand()}},{key:"_toggleCollapse",value:function(){if(!this._element.querySelector(".inboxsdk__expando"))return void("collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="expanded":localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]="collapsed");"collapsed"===localStorage["inboxsdk__nativeNavItem__state_"+this._navItemName]?this._expand():this._collapse()}},{key:"_collapse",value:function(){var e=(0,b.default)(this._element,".inboxsdk__expando");e.classList.remove("aih"),e.classList.add("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display="none"),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"collapsed"),this._eventStream.emit({eventName:"collapsed"}),this._setHeights()}},{key:"_expand",value:function(){var e=(0,b.default)(this._element,".inboxsdk__expando");e.classList.add("aih"),e.classList.remove("aii"),this._itemContainerElement&&(this._itemContainerElement.style.display=""),localStorage.setItem("inboxsdk__nativeNavItem__state_"+this._navItemName,"expanded"),this._eventStream.emit({eventName:"expanded"}),this._setHeights()}},{key:"_isExpanded",value:function(){return!!this._element.querySelector(".inboxsdk__expando.aih")}},{key:"_setHeights",value:function(){var e=(0,b.default)(this._element,".TO");if(this._element.classList.contains("ain")&&this._itemContainerElement){this._element.style.height="";var t=this._element.clientHeight,r=e.clientHeight;this._element.style.height=r+"px",this._element.style.overflow="visible",this._element.style.marginBottom=t-r+"px"}else this._element.style.height="",this._element.style.overflow="",this._element.style.marginBottom=""}},{key:"_createActiveMarkerElement",value:function(){this._removeActiveMarkerElement();var e=this._activeMarkerElement=document.createElement("div");e.classList.add("inboxsdk__navItem_marker"),e.classList.add("ain"),e.innerHTML="&nbsp;",this._element.insertBefore(e,this._element.firstElementChild)}},{key:"_removeActiveMarkerElement",value:function(){var e=this._activeMarkerElement;e&&(e.remove(),this._activeMarkerElement=null)}}]),e}();r.default=g},{"../../../../common/find-parent":640,"../../../lib/dom/get-insert-before-element":854,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/make-mutation-observer-stream":863,"../../../lib/dom/querySelectorOrFail":868,"../gmail-element-getter":696,"./gmail-nav-item-view":749,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324}],761:[function(e,t,r){"use strict";e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=void 0;var n={default:{INACTIVE_CLASS:"T-I-ax7",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-Kq"},flatIcon:{INACTIVE_CLASS:"J-Z-I",HOVER_CLASS:"J-Z-I-JW",ACTIVE_CLASS:"J-Z-I-KO"},pureIcon:{INACTIVE_CLASS:"inboxsdk__button_pureIcon_inactive",HOVER_CLASS:"inboxsdk__button_pureIcon_hover",ACTIVE_CLASS:"inboxsdk__button_pureIcon_active"},blue:{INACTIVE_CLASS:"T-I-atl",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},red:{INACTIVE_CLASS:"T-I-KE",HOVER_CLASS:"T-I-JW",ACTIVE_CLASS:"T-I-JO"},green:{INACTIVE_CLASS:"inboxsdk__button_green_inactive",HOVER_CLASS:"inboxsdk__button_green_hover",ACTIVE_CLASS:"inboxsdk__button_green_active"}},o=n;r.default=o},{"@babel/runtime-corejs2/core-js/object/define-property":12}],762:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=l(e("lodash/includes")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),m=l(e("kefir-bus")),h=l(e("../../../../lib/logger")),b=e("../../../../lib/dom/simulate-mouse-event"),v=l(e("../../../../lib/dom/keyboard-shortcut-stream")),_=l(e("./button-color-classes")),g=function(){function e(t){(0,u.default)(this,e),(0,d.default)(this,"_element",document.createElement("div")),(0,d.default)(this,"_innerElement",document.createElement("div")),(0,d.default)(this,"_textElement",void 0),(0,d.default)(this,"_iconElement",void 0),(0,d.default)(this,"_iconImgElement",void 0),(0,d.default)(this,"_iconClass",void 0),(0,d.default)(this,"_iconUrl",void 0),(0,d.default)(this,"_title",void 0),(0,d.default)(this,"_tooltip",void 0),(0,d.default)(this,"_hasDropdown",void 0),(0,d.default)(this,"_buttonColor",void 0),(0,d.default)(this,"_isEnabled",void 0),(0,d.default)(this,"_keyboardShortcutHandle",void 0),(0,d.default)(this,"_eventStream",void 0),this._hasDropdown=!1,this._isEnabled=!1!==t.enabled,this._iconClass=t.iconClass,this._iconUrl=t.iconUrl,this._title=t.text||t.title,this._tooltip=t.tooltip||t.title,this._hasDropdown=!!t.hasDropdown,this._buttonColor=t.buttonColor||"default",this._keyboardShortcutHandle=t.keyboardShortcutHandle,this._createElement(t),this._eventStream=(0,m.default)(),this._setupEventStream(),this._setupAestheticEvents(),!1!==t.enabled&&this._setupKeyboardShortcutEvent()}return(0,c.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){this.addClass(_.default[this._buttonColor].ACTIVE_CLASS),this.addClass(_.default[this._buttonColor].HOVER_CLASS)}},{key:"deactivate",value:function(){this.removeClass(_.default[this._buttonColor].ACTIVE_CLASS),this.removeClass(_.default[this._buttonColor].HOVER_CLASS)}},{key:"addClass",value:function(e){this._element.classList.add(e)}},{key:"removeClass",value:function(e){this._element.classList.remove(e)}},{key:"simulateHover",value:function(){(0,b.simulateHover)(this._element)}},{key:"setEnabled",value:function(e){this._setEnabled(e)}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"update",value:function(e){if(!e)return void(this._element.style.display="none");"none"===this._element.style.display&&(this._element.style.display=""),e.buttonColor!=this._buttonColor&&this._buttonColor&&this._updateButtonColor(e.buttonColor),e.title!=this._title&&this._updateTitle(e.title),e.tooltip!=this._tooltip&&this._updateTooltip(e.tooltip),e.iconUrl!=this._iconUrl&&this._updateIconUrl(e.iconUrl),e.iconClass!=this._iconClass&&this._updateIconClass(e.iconClass),!1!==e.enabled&&!0!==e.enabled||this._setEnabled(e.enabled)}},{key:"_createElement",value:function(e){this._setupMainElement(e),this._setupInnerElement(e),this._createTextElement(),this._createIconElement()}},{key:"_setupMainElement",value:function(e){this._element.setAttribute("class","T-I J-J5-Ji ar7 inboxsdk__button "+_.default[this._buttonColor].INACTIVE_CLASS),e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),e.hasButtonToRight&&this._element.classList.add("T-I-Js-IF"),e.hasButtonToLeft&&this._element.classList.add("T-I-Js-Gs"),(e.tooltip||e.title)&&this._element.setAttribute("data-tooltip",String(e.tooltip||e.title)),!1===e.enabled&&this._element.classList.add("inboxsdk__button_disabled")}},{key:"_setupInnerElement",value:function(e){this._innerElement.classList.add("asa"),this._hasDropdown&&!e.noArrow&&(this._innerElement.innerHTML='<div class="G-asx T-I-J3 - J-J5-Ji">&nbsp;</div>'),this._element.appendChild(this._innerElement)}},{key:"_createTextElement",value:function(){if(this._title)if(this._textElement=document.createElement("span"),this._textElement.setAttribute("class","inboxsdk__button_text"),this._textElement.textContent=this._title,this._iconElement){var e=this._iconElement.parentElement;if(!e)throw new Error("Could not find parent");e.insertBefore(this._textElement,this._iconElement.nextSibling)}else this._innerElement.insertBefore(this._textElement,this._innerElement.firstElementChild)}},{key:"_createIconElement",value:function(){if(this._iconClass||this._iconUrl){var e=this._iconElement=document.createElement("div");e.classList.add("inboxsdk__button_icon"),this._iconClass&&(e.innerHTML="&nbsp;",e.setAttribute("class","inboxsdk__button_icon "+this._iconClass)),this._iconUrl&&this._createIconImgElement(),this._innerElement.insertBefore(e,this._innerElement.firstElementChild)}}},{key:"_createIconImgElement",value:function(){this._iconElement||this._createIconElement();var e=this._iconElement;if(!e)throw new Error("Should not happen");""!==e.innerHTML&&(e.innerHTML="");var t=this._iconImgElement=document.createElement("img");t.classList.add("inboxsdk__button_iconImg"),this._iconUrl?t.src=this._iconUrl:h.default.error(new Error("_createIconImgElement should not be called with null _iconUrl")),e.appendChild(t)}},{key:"_updateButtonColor",value:function(e){this._element.classList.remove(_.default[this._buttonColor].INACTIVE_CLASS),this._buttonColor=e,this._element.classList.add(_.default[this._buttonColor].INACTIVE_CLASS)}},{key:"_updateTitle",value:function(e){!this._title&&e?(this._title=e,this._createTextElement()):this._title&&!e&&this._textElement?(this._textElement.remove(),this._textElement=void 0,this._title=e):this._textElement&&(this._textElement.textContent=e,this._title=e)}},{key:"_updateTooltip",value:function(e){this._tooltip=e,e?this._element.setAttribute("data-tooltip",e):this._element.removeAttribute("data-tooltip")}},{key:"_updateIconUrl",value:function(e){this._iconUrl=e,this._iconImgElement&&!e?(this._iconImgElement.remove(),this._iconImgElement=void 0):!this._iconImgElement&&e&&this._createIconImgElement(),this._iconImgElement&&e&&(this._iconImgElement.src=e)}},{key:"_updateIconClass",value:function(e){!this._iconElement||e||this._iconUrl?!this._iconElement&&e&&this._createIconElement():(this._iconElement.remove(),this._iconElement=void 0),this._iconClass=e,this._iconElement&&this._iconElement.setAttribute("class","inboxsdk__button_icon "+(e||""))}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}),this._isEnabled&&this._setupKeyboardShortcutEvent())}},{key:"_setupEventStream",value:function(){var e=this,t=p.fromEvents(this._element,"click");t.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(t.filter(function(){return e.isEnabled()}).map(function(e){return{eventName:"click",domEvent:e}}));var r=function(e){return(0,f.default)([32,13],e.which)},n=p.fromEvents(this._element,"keydown").filter(function(){return e.isEnabled()}),o=n.filter(r);this._eventStream.plug(o.map(function(e){return{eventName:"click",domEvent:e}})),o.onValue(function(e){e.stopPropagation(),e.preventDefault()})}},{key:"_setupKeyboardShortcutEvent",value:function(){var e=this._keyboardShortcutHandle;e&&this._eventStream.plug((0,v.default)(e.chord).takeUntilBy(this._eventStream.filter(function(e){return"enabledChanged"===e.eventName&&!1===e.isEnabled})).map(function(e){return{eventName:"click",domEvent:e}}))}},{key:"_setupAestheticEvents",value:function(){var e=this;p.fromEvents(this._element,"mouseenter").filter(function(){return e.isEnabled()}).onValue(function(){e._element.classList.add(_.default[e._buttonColor].HOVER_CLASS),e._element.classList.add("inboxsdk__button_hover")}),p.fromEvents(this._element,"mouseleave").onValue(function(){e._element.classList.remove(_.default[e._buttonColor].HOVER_CLASS),e._element.classList.remove("inboxsdk__button_hover")}),p.fromEvents(this._element,"focus").onValue(function(){e._element.classList.add("T-I-JO")}),p.fromEvents(this._element,"blur").onValue(function(){e._element.classList.remove("T-I-JO")})}}]),e}();r.default=g},{"../../../../lib/dom/keyboard-shortcut-stream":858,"../../../../lib/dom/simulate-mouse-event":874,"../../../../lib/logger":891,"./button-color-classes":761,"@babel/runtime-corejs2/core-js/object/define-property":12,
"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324,"lodash/includes":493}],763:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),p=l(e("kefir-bus")),m=l(e("kefir-stopper")),h=function(){function e(){(0,u.default)(this,e),(0,d.default)(this,"_element",document.createElement("div")),(0,d.default)(this,"_eventStream",(0,p.default)()),(0,d.default)(this,"_stopper",(0,m.default)()),this._setupElement(),this._setupEventStream()}return(0,c.default)(e,[{key:"update",value:function(){}},{key:"setEnabled",value:function(){throw new Error("not implemented")}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){var e=this._element.firstElementChild;e&&e.classList.add("aj1")}},{key:"deactivate",value:function(){var e=this._element.firstElementChild;e&&e.classList.remove("aj1")}},{key:"_setupElement",value:function(){this._element.setAttribute("class","nL aig"),this._element.setAttribute("style","left: 7px"),this._element.innerHTML=['<div class="pM aRw" style="display: inline-flex; margin-left: 16px;" role="button">','<div class="p6">','<div class="p8">▼</div>',"</div>","</div>"].join("")}},{key:"_setupEventStream",value:function(){var e=f.fromEvents(this._element,"click");e.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(e.map(function(e){return{eventName:"click",domEvent:e}}))}}]),e}();r.default=h},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324,"kefir-stopper":326}],764:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),p=l(e("kefir-bus")),m=l(e("kefir-stopper")),h=function(){function e(){(0,u.default)(this,e),(0,d.default)(this,"_element",document.createElement("div")),(0,d.default)(this,"_eventStream",(0,p.default)()),(0,d.default)(this,"_stopper",(0,m.default)()),this._setupElement(),this._setupEventStream()}return(0,c.default)(e,[{key:"activate",value:function(){var e=this._element.firstElementChild;e&&e.classList.add("aj1")}},{key:"deactivate",value:function(){var e=this._element.firstElementChild;e&&e.classList.remove("aj1")}},{key:"destroy",value:function(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"setEnabled",value:function(){throw new Error("not implemented")}},{key:"update",value:function(){}},{key:"_setupElement",value:function(){this._element.setAttribute("class","Yh inboxsdk__navItem_parent_accessory_button"),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),this._element.setAttribute("type","button")}},{key:"_setupEventStream",value:function(){var e=f.fromEvents(this._element,"click");e.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(e.map(function(e){return{eventName:"click",domEvent:e}}))}}]),e}();r.default=h},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324,"kefir-stopper":326}],765:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,f.default)(e);if(t){var o=(0,f.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,d.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/inherits")),d=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),f=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),p=s(e("../../../../lib/dom/generic-button-view")),m=function(e){function t(){(0,l.default)(this,t);var e=document.createElement("div");return e.setAttribute("class","aAE qi J-J5-Ji J-JN-M-I"),e.innerHTML='<div class="J-J5-Ji J-JN-M-I-JG">&nbsp;</div>',e.addEventListener("mouseenter",function(){e.classList.add("J-JN-M-I-JW")}),e.addEventListener("mouseleave",function(){e.classList.remove("J-JN-M-I-JW")}),r.call(this,e)}(0,c.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"activate",value:function(){this.getElement().classList.add("J-JN-M-I-JO"),this.getElement().classList.add("J-JN-M-I-Kq")}},{key:"deactivate",value:function(){this.getElement().classList.remove("J-JN-M-I-JO"),this.getElement().classList.remove("J-JN-M-I-Kq")}}]),t}(p.default);r.default=m},{"../../../../lib/dom/generic-button-view":853,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],766:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=l(e("lodash/includes")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),m=l(e("kefir-bus")),h=function(){function e(t){(0,u.default)(this,e),(0,d.default)(this,"_element",document.createElement("button")),(0,d.default)(this,"_title",void 0),(0,d.default)(this,"_tooltip",void 0),(0,d.default)(this,"_buttonColor",void 0),(0,d.default)(this,"_eventStream",(0,m.default)()),(0,d.default)(this,"_isEnabled",void 0),this._isEnabled=!1!==t.enabled,this._title=t.text||t.title,this._tooltip=t.tooltip||t.title,this._buttonColor=t.buttonColor||"default",this._createElement(t),this._eventStream=(0,m.default)(),this._setupEventStream()}return(0,c.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"setEnabled",value:function(e){this._setEnabled(e)}},{key:"update",value:function(){throw new Error("not implemented")}},{key:"isEnabled",value:function(){return this._isEnabled}},{key:"_createElement",value:function(e){e.isPrimary&&this._element.classList.add("J-at1-auR"),this._element.innerText=e.text||e.title||"",e.tooltip&&this._element.setAttribute("aria-label",e.tooltip),this._element.setAttribute("role","button"),this._element.setAttribute("tabindex","0"),(e.tooltip||e.title)&&this._element.setAttribute("data-tooltip",String(e.tooltip||e.title))}},{key:"_setEnabled",value:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._isEnabled?this._element.classList.remove("inboxsdk__button_disabled"):this._element.classList.add("inboxsdk__button_disabled"),this._eventStream.emit({eventName:"enabledChanged",isEnabled:this._isEnabled}))}},{key:"_setupEventStream",value:function(){var e=this,t=p.fromEvents(this._element,"click");t.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(t.filter(function(){return e.isEnabled()}).map(function(e){return{eventName:"click",domEvent:e}}));var r=function(e){return(0,f.default)([32,13],e.which)},n=p.fromEvents(this._element,"keydown").filter(function(){return e.isEnabled()}),o=n.filter(r);this._eventStream.plug(o.map(function(e){return{eventName:"click",domEvent:e}})),o.onValue(function(e){e.stopPropagation(),e.preventDefault()})}}]),e}();r.default=h},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324,"lodash/includes":493}],767:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("../../../../lib/dom/generic-button-view")),b=function(e){function t(){var e;(0,l.default)(this,t),e=r.call(this,document.createElement("div")),(0,m.default)((0,c.default)(e),"_isActive",!1);var n=e._element;n.setAttribute("class","nL aig");var o=document.createElement("div");return o.setAttribute("class","pM aj0"),n.appendChild(o),n.addEventListener("click",function(){e._isActive=!0}),n.addEventListener("mouseenter",function(){o.classList.add("aj1")}),n.addEventListener("mouseleave",function(){e._isActive||o.classList.remove("aj1")}),e}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"activate",value:function(){this.getElement().children[0].classList.add("aj1")}},{key:"deactivate",value:function(){this.getElement().children[0].classList.remove("aj1"),this._isActive=!1}}]),t}(h.default);r.default=b},{"../../../../lib/dom/generic-button-view":853,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],768:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/inherits")),c=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),d=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),f=s(e("./create-parent-accessory-button-view")),p=function(e){function t(){var e;return(0,l.default)(this,t),e=r.call(this),e.getElement().style.backgroundImage="url(https://www.gstatic.com/images/icons/material/system_gm/2x/more_vert_black_20dp.png)",e}(0,u.default)(t,e);var r=n(t);return t}(f.default);r.default=p},{"./create-parent-accessory-button-view":764,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],769:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=o(e("lodash/isEqual")),c=o(e("../../../lib/dom/querySelectorOrFail")),d=function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"_element",void 0),(0,s.default)(this,"_actionDescriptor",void 0),this._element=document.createElement("div"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.className="inboxsdk__gmail_action ",this._element.innerHTML="\n\t\t\t<div>\n\t\t\t</div>",this._actionDescriptor=null}return(0,a.default)(e,[{key:"getElement",value:function(){return this._element}},{key:"updateDescriptor",value:function(e){if(!e)return void(this._actionDescriptor=e);(0,u.default)(this._actionDescriptor,e)||(this._updateTitle(e.title),this._element.className="inboxsdk__gmail_action "+(e.className||""),this._actionDescriptor=e)}},{key:"setOnClick",value:function(e){this._element.onclick=e}},{key:"_updateTitle",value:function(e){this._actionDescriptor&&this._actionDescriptor.title===e||((0,c.default)(this._element,"div").textContent=e)}}]),e}(),f=(0,l.defn)(t,d);r.default=f},{"../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/isEqual":501,ud:625}],770:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=o(e("../../../lib/dom/block-and-reemit-keyboard-events")),u=function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"_containerElement",void 0),(0,s.default)(this,"_contentElement",void 0),this._containerElement=document.createElement("div"),this._containerElement.setAttribute("class","inboxsdk__menu"),this._contentElement=document.createElement("div"),this._contentElement.setAttribute("class","inboxsdk__menuContent"),this._containerElement.appendChild(this._contentElement),(0,l.default)(this._containerElement)}return(0,a.default)(e,[{key:"destroy",value:function(){this._containerElement.remove()}},{key:"getContainerElement",value:function(){return this._containerElement}},{key:"getContentElement",value:function(){return this._contentElement}}]),e}();r.default=u},{"../../../lib/dom/block-and-reemit-keyboard-events":851,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],771:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/assign")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=e("ud"),c=o(e("lodash/isEqual")),d=o(e("../../../driver-common/update-icon")),f=o(e("../../../lib/dom/querySelectorOrFail")),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),(0,l.default)(this,"_element",void 0),(0,l.default)(this,"_labelDescriptor",void 0),(0,l.default)(this,"_iconSettings",void 0),this._element=document.createElement("div"),this._element.className="inboxsdk__gmail_label ar as "+(t.classes||[]).join(" "),this._element.innerHTML='\n\t\t\t<div class="at">\n\t\t\t\t<div class="au">\n\t\t\t\t\t<div class="av"></div>\n\t\t\t\t</div>\n\t\t\t</div>',this._labelDescriptor={},this._iconSettings={}}return(0,s.default)(e,[{key:"getElement",value:function(){return this._element}},{key:"updateLabelDescriptor",value:function(e){this._handleNewLabelDescriptor(e)}},{key:"_handleNewLabelDescriptor",value:function(e){if(!e)return void(this._labelDescriptor={});e=(0,i.default)({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)",maxWidth:"90px"},e),(0,c.default)(this._labelDescriptor,e)||((0,d.default)(this._iconSettings,(0,f.default)(this._element,".at"),!1,e.iconClass,e.iconUrl,void 0,e.iconHtml),e.iconClass||e.iconUrl||e.iconHtml?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(e.backgroundColor),this._updateForegroundColor(e.foregroundColor),this._updateIconBackgroundColor(e.iconBackgroundColor),this._updateTitle(e.title),this._updateTextMaxWidth(e.maxWidth),this._labelDescriptor=e)}},{key:"_updateTextMaxWidth",value:function(e){this._labelDescriptor.maxWidth!==e&&((0,f.default)(this._element,".av").style.maxWidth=e)}},{key:"_updateBackgroundColor",value:function(e){if(this._labelDescriptor.backgroundColor!==e){var t=(0,f.default)(this._element,".at");t.style.backgroundColor=e,t.style.borderColor=e,(0,f.default)(this._element,".au").style.borderColor=e}}},{key:"_updateForegroundColor",value:function(e){this._labelDescriptor.foregroundColor!==e&&((0,f.default)(this._element,".at").style.color=e)}},{key:"_updateIconBackgroundColor",value:function(e){var t=this.getElement().querySelector(".inboxsdk__button_icon");t&&(t.style.backgroundColor=e||"")}},{key:"_updateTitle",value:function(e){this._labelDescriptor.title!==e&&((0,f.default)(this._element,".av").textContent=e,this._element.children[0].setAttribute("data-tooltip",e))}}]),e}(),m=(0,u.defn)(t,p);r.default=m},{"../../../driver-common/update-icon":842,"../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/isEqual":501,ud:625}],772:[function(e,t,r){"use strict";function n(e,t){var r=i(e);if(a){var n=a(e);t&&(n=n.filter(function(t){return s(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,m.default)(e,t,r[t])}):l?u(e,l(r)):n(Object(r)).forEach(function(t){c(e,t,s(r,t))})}return e}var i=e("@babel/runtime-corejs2/core-js/object/keys"),a=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),u=e("@babel/runtime-corejs2/core-js/object/define-properties"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=d(e("@babel/runtime-corejs2/helpers/createClass")),m=d(e("@babel/runtime-corejs2/helpers/defineProperty")),h=d(e("lodash/sortBy")),b=(d(e("kefir")),d(e("kefir-bus"))),v=e("ud"),_=d(e("./buttons/modal-button-view")),g=d(e("../../../widgets/buttons/basic-button-view-controller")),y=d(e("../../../lib/dom/querySelectorOrFail")),w=function(){function e(t){(0,f.default)(this,e),(0,m.default)(this,"_eventStream",void 0),(0,m.default)(this,"_modalContainerElement",void 0),this._setupModalContainerElement(t),this._processOptions(t),this._eventStream=(0,b.default)(),this._setupEventStream()}return(0,p.default)(e,[{key:"destroy",value:function(){this._modalContainerElement.remove(),this._eventStream.end()}},{key:"getModalContainerElement",value:function(){return this._modalContainerElement}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"_processOptions",value:function(e){this.setTitle(e.title),this.setContentElement(e.el),this.setButtons(e.buttons||[]),this.setChromeClass(e.chrome,e.showCloseButton,(e.buttons||[]).length>0)}},{key:"setTitle",value:function(e){var t=(0,y.default)(this._modalContainerElement,"[role=heading]");e?(t.style.display="",t.textContent=e):t.style.display="none"}},{key:"setContentElement",value:function(e){var t=(0,y.default)(this._modalContainerElement,".inboxsdk__modal_content");t.innerHTML="","string"==typeof e?t.innerHTML=e:e instanceof Element&&t.appendChild(e)}},{key:"setButtons",value:function(e){var t=(0,y.default)(this._modalContainerElement,".inboxsdk__modal_buttons");t.innerHTML="",0===e.length?(t.style.display="none",this._modalContainerElement.classList.add("inboxsdk__modal_content_no_buttons")):(t.style.display="",this._modalContainerElement.classList.remove("inboxsdk__modal_content_no_buttons")),(0,h.default)(e,function(e){return e.orderHint||0}).forEach(this._addButton.bind(this,t))}},{key:"setChromeClass",value:function(e,t,r){this._modalContainerElement.classList.remove("inboxsdk__modal_hideSides"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideTop"),this._modalContainerElement.classList.remove("inboxsdk__modal_hideBottom"),!1===e&&(this._modalContainerElement.classList.add("inboxsdk__modal_hideSides"),t||this._modalContainerElement.classList.add("inboxsdk__modal_hideTop"),r||this._modalContainerElement.classList.add("inboxsdk__modal_hideBottom"))}},{key:"_setupModalContainerElement",value:function(e){var t=e.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var r='\n    <div class="Kj-JD inboxsdk__modal_container" tabindex="0" role="alertdialog">\n      <div class="Kj-JD-K7 Kj-JD-K7-GIHV4 inboxsdk__modal_toprow '.concat(t,'">\n        <span class="Kj-JD-K7-K0" role="heading"></span>\n        <span class="Kj-JD-K7-Jq inboxsdk__modal_close" tabindex="0" role="button"></span>\n      </div>\n      <div class="Kj-JD-Jz inboxsdk__modal_content">\n      </div>\n      <div class="Kj-JD-Jl inboxsdk__modal_buttons"></div>\n    </div>\n    ');this._modalContainerElement.innerHTML=r}},{key:"_addButton",value:function(e,t){var r=o({},t);["blue","red","green"].includes(t.color)&&t.color;r.isPrimary="PRIMARY_ACTION"===t.type;var n=new _.default(r);r.buttonView=n;new g.default(r);"PRIMARY_ACTION"===t.type?e.insertBefore(n.getElement(),e.firstElementChild):e.appendChild(n.getElement())}},{key:"_setupEventStream",value:function(){var e=this;(0,y.default)(this._modalContainerElement,".inboxsdk__modal_close").addEventListener("click",function(t){e._eventStream.emit({eventName:"closeClick",domEvent:t})})}}]),e}(),j=(0,v.defn)(t,w);r.default=j},{"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/basic-button-view-controller":939,"./buttons/modal-button-view":766,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"lodash/sortBy":519,ud:625}],773:[function(e,t,r){"use strict";function n(e){return'\n    <div class="inboxsdk__mole_view_inner">\n      '.concat(o(e),'\n      <div class="inboxsdk__mole_view_content"></div>\n    </div>\n  ')}function o(e){return!1===e.chrome?"":'<div class="inboxsdk__mole_view_titlebar">\n    <div class="inboxsdk__mole_title_buttons">\n      <img class="Hl" src="images/cleardot.gif" alt="Minimize" aria-label="Minimize" data-tooltip-delay="800" data-tooltip="Minimize"><img class="Hk" id=":rp" src="images/cleardot.gif" alt="Minimize" aria-label="Maximize" data-tooltip-delay="800" data-tooltip="Maximize">\x3c!--<img class="Hq aUG" src="images/cleardot.gif" alt="Pop-out" aria-label="Full-screen (Shift for Pop-out)" data-tooltip-delay="800" data-tooltip="Full-screen (Shift for Pop-out)">--\x3e<img class="Ha" src="images/cleardot.gif" alt="Close" aria-label="Close" data-tooltip-delay="800" data-tooltip="Close">\n    </div>\n    <h2 class="inboxsdk__mole_default"></h2>\n    <h2 class="inboxsdk__mole_minimized"></h2>\n    </div>'}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/core-js/object/assign")),l=a(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=a(e("@babel/runtime-corejs2/helpers/createClass")),c=a(e("@babel/runtime-corejs2/helpers/defineProperty")),d=a(e("lodash/last")),f=e("ud"),p=a(e("kefir")),m=a(e("kefir-bus")),h=a(e("kefir-stopper")),b=a(e("../../../lib/stream-wait-for")),v=a(e("../../../lib/dom/querySelectorOrFail")),_=a(e("../../../../common/find-parent")),g=a(e("../gmail-element-getter")),y=function(){function e(t,r){var o=this;if((0,l.default)(this,e),(0,c.default)(this,"_driver",void 0),(0,c.default)(this,"_eventStream",(0,m.default)()),(0,c.default)(this,"_stopper",(0,h.default)()),(0,c.default)(this,"_element",void 0),this._driver=t,this._element=(0,s.default)(document.createElement("div"),{className:"inboxsdk__mole_view "+(r.className||""),innerHTML:n(r)}),!1===r.chrome)this._element.classList.add("inboxsdk__mole_view_chromeless");else{(0,v.default)(this._element,".inboxsdk__mole_view_titlebar").addEventListener("click",function(e){o.setMinimized(!o.getMinimized()),e.preventDefault(),e.stopPropagation()});(0,v.default)(this._element,".Hl").addEventListener("click",function(e){o.setMinimized(!0),e.preventDefault(),e.stopPropagation()});(0,v.default)(this._element,".Hk").addEventListener("click",function(e){o.setMinimized(!1),e.preventDefault(),e.stopPropagation()});(0,v.default)(this._element,".Ha").addEventListener("click",function(e){o.destroy(),e.preventDefault(),e.stopPropagation()}),r.titleEl?this._setTitleEl(r.titleEl):this.setTitle(r.title||""),r.minimizedTitleEl&&this._setMinimizedTitleEl(r.minimizedTitleEl);var i=r.titleButtons;if(i){var a=(0,v.default)(this._element,".inboxsdk__mole_title_buttons"),u=a.lastElementChild;i.forEach(function(e){var t=document.createElement("img");e.iconClass&&(t.className=e.iconClass),t.setAttribute("data-tooltip",e.title),t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.onClick.call(null)}),t.src=e.iconUrl,a.insertBefore(t,u)})}}(0,v.default)(this._element,".inboxsdk__mole_view_content").appendChild(r.el)}return(0,u.default)(e,[{key:"show",value:function(){var e=this,t=function(t){t.insertBefore(e._element,(0,d.default)(t.children));var r=(0,_.default)(t,function(e){return"DIV"===e.nodeName&&e.classList.contains("dw")});r&&r.classList.add("inboxsdk__moles_in_use")},r=g.default.getMoleParent();if(r)t(r);else{var n=(0,b.default)(function(){return g.default.getMoleParent()}).takeUntilBy(this._stopper).onValue(t)
;p.default.fromPromise(g.default.waitForGmailModeToSettle()).flatMap(function(){return e._driver.delayToTimeAfterReady(1e4)}).takeUntilBy(n).takeUntilBy(this._stopper).onValue(function(){e._driver.getLogger().eventSdkActive("mole parent force load"),e._driver.openNewComposeViewDriver().then(function(e){e.close()})})}}},{key:"setMinimized",value:function(e){if(e)this._element.classList.add("inboxsdk__minimized"),this._eventStream.emit({eventName:"minimize"});else{this._element.classList.remove("inboxsdk__minimized");var t=this._element.parentElement;t&&this._element.getBoundingClientRect().left<0&&t.insertBefore(this._element,(0,d.default)(t.children)),this._eventStream.emit({eventName:"restore"})}}},{key:"getMinimized",value:function(){return this._element.classList.contains("inboxsdk__minimized")}},{key:"setTitle",value:function(e){var t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");t&&(t.textContent=e)}},{key:"_setTitleEl",value:function(e){var t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_default");t&&(t.textContent="",t.appendChild(e))}},{key:"_setMinimizedTitleEl",value:function(e){var t=this._element.querySelector(".inboxsdk__mole_view_titlebar h2.inboxsdk__mole_minimized");t&&(this._element.classList.add("inboxsdk__mole_use_minimize_title"),t.textContent="",t.appendChild(e))}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"destroy",value:function(){this._element.remove(),this._eventStream.end(),this._stopper.destroy()}}]),e}(),w=(0,f.defn)(t,y);r.default=w},{"../../../../common/find-parent":640,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/stream-wait-for":901,"../gmail-element-getter":696,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/last":511,ud:625}],774:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/assign")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("lodash/sortBy")),c=o(e("lodash/escape")),d=o(e("asap")),f=(o(e("kefir")),o(e("kefir-bus"))),p=o(e("kefir-stopper")),m=o(e("../../../lib/dom/querySelectorOrFail")),h=o(e("./buttons/button-view")),b=o(e("../../../widgets/buttons/basic-button-view-controller")),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),(0,l.default)(this,"_element",void 0),(0,l.default)(this,"_eventStream",(0,f.default)()),(0,l.default)(this,"_stopper",(0,p.default)()),this._setupElement(t)}return(0,s.default)(e,[{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._element.remove()}},{key:"getElement",value:function(){return this._element}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"anchor",value:function(e,t){if(e&&this._element){var r,n=e.getBoundingClientRect(),o=this._element.getBoundingClientRect();if(t&&t.position)switch(t.position){case"top":r={type:"top",value:this._getTopPositionBoundingBox(n,o)};break;case"bottom":r={type:"bottom",value:this._getBottomPositionBoundingBox(n,o)}}r||(r=this._getAutomaticPlacementBoundingBox(n,o));var i=this._containBoundingBox(r.value,t&&t.offset);this._setPositionAtBoundingBox(i),this._setArrowPosition(r.type,i,n)}}},{key:"getContainerElement",value:function(){return this._element}},{key:"getContentElement",value:function(){return(0,m.default)(this._element,".aRM")}},{key:"close",value:function(){this.destroy()}},{key:"_setupElement",value:function(e){var t=this;if(this._element=document.createElement("div"),this._element.setAttribute("class","inboxsdk__tooltip"),e.el){this._element.innerHTML='<div class="T-P aRL">\n\t\t\t\t\t\t<div class="T-P-Jz-UR">\n\t\t\t\t\t\t\t<div class="aRM" tabindex="0">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">\n\t\t\t\t\t\t\t<div class="T-P-atD"></div>\n\t\t\t\t\t\t\t<div class="T-P-atC"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>',this._element.classList.add("inboxdk__tooltip_content"),(0,m.default)(this._element,".aRM").appendChild(e.el)}else{var r=['<div class="T-P aRL">','<div class="T-P-Jz-UR">','<div class="aRM" tabindex="0">','<div class="aVn inboxsdk__tooltip_image">',"</div>",'<div class="aRR">',(0,c.default)(e.title||""),"</div>",'<div class="aRQ">',(0,c.default)(e.subtitle||""),"</div>",'<div class="inboxsdk__tooltip_button">',"</div>","</div>","</div>",'<div class="T-P-aut-UR T-P-aut inboxsdk__tooltip_close" aria-label="Close" role="button"></div>','<div class="T-P-hFsbo-UR T-P-hFsbo T-P-atB inboxsdk__tooltip_arrow">','<div class="T-P-atD"></div>','<div class="T-P-atC"></div>',"</div>","</div>"].join("");this._element.innerHTML=r;var n=this._element.querySelector(".inboxsdk__tooltip_close");if(n&&n.addEventListener("click",function(e){t.destroy()}),e.imageUrl){var o=document.createElement("img");o.src=e.imageUrl,(0,m.default)(this._element,".inboxsdk__tooltip_image").appendChild(o),o.addEventListener("load",function(e){(0,d.default)(function(){t._eventStream.emit({eventName:"imageLoaded"})})})}if(e.button){var a=(0,i.default)({},e.button);a.buttonColor="blue";var s=a.onClick;a.onClick=function(){t.destroy(),s&&s()},a.buttonView=new h.default(a);new b.default(a);(0,m.default)(this._element,".inboxsdk__tooltip_button").appendChild(a.buttonView.getElement())}}}},{key:"_getAutomaticPlacementBoundingBox",value:function(e,t){var r=[{type:"top",value:this._getTopPositionBoundingBox(e,t)},{type:"left",value:this._getLeftPositionBoundingBox(e,t)},{type:"right",value:this._getRightPositionBoundingBox(e,t)},{type:"bottom",value:this._getBottomPositionBoundingBox(e,t)}];return this._figureOutBestBoundingBox(r)}},{key:"_getTopPositionBoundingBox",value:function(e,t){var r=e.top-t.height-9,n=e.left+e.width/2-t.width/2;return[{x:n,y:r},{x:n+t.width,y:r+t.height}]}},{key:"_getRightPositionBoundingBox",value:function(e,t){var r=e.right+9,n=e.top+e.height/2-t.height/2;return[{x:r,y:n},{x:r+t.width,y:n+t.height}]}},{key:"_getBottomPositionBoundingBox",value:function(e,t){var r=e.bottom+9,n=e.left+e.width/2-t.width/2;return[{x:n,y:r},{x:n+t.width,y:r+t.height}]}},{key:"_getLeftPositionBoundingBox",value:function(e,t){var r=e.left-9-t.width,n=e.top+e.height/2-t.height/2;return[{x:r,y:n},{x:r+t.width,y:n+t.height}]}},{key:"_figureOutBestBoundingBox",value:function(e){for(var t=0;t<e.length;t++)e[t].smallestDistance=this._getSmallestDistance(e[t]);return(0,u.default)(e,function(e){return e.smallestDistance}).reverse()[0]}},{key:"_getSmallestDistance",value:function(e){var t=[e.value[0].y,e.value[0].x,document.body.clientWidth-e.value[1].x,document.body.clientHeight-e.value[1].y];return(0,u.default)(t,function(e){return e})[0]}},{key:"_containBoundingBox",value:function(e,t){var r=e[1].y-e[0].y,n=e[1].x-e[0].x;return e[0].y<-1?(e[0].y=0,e[1].y=e[0].y+r):e[1].y>document.body.clientHeight&&(e[0].y=document.body.clientHeight-r,e[1].y=e[0].y+r),e[0].x<-1?(e[0].x=0,e[1].x=e[0].x+n):e[1].x>document.body.clientWidth&&(e[0].x=document.body.clientWidth-n-20,e[1].x=e[0].x+n),t&&(t.left&&(e[0].x+=t.left,e[1].x+=t.left),t.top&&(e[0].y+=t.top,e[1].y+=t.top)),e}},{key:"_setPositionAtBoundingBox",value:function(e){this._element.style.left=e[0].x+"px",this._element.style.top=e[0].y+"px"}},{key:"_setArrowPosition",value:function(e,t,r){var n={};switch(e){case"top":n.top=t[1].y,n.left=r.left+r.width/2;break;case"left":n.top=(t[0].y+t[1].y)/2-9,n.left=t[1].x;break;case"right":n.top=(t[0].y+t[1].y)/2-9,n.left=t[0].x-9+1;break;case"bottom":n.top=t[0].y-9+1,n.left=(t[0].x+t[1].x)/2}var o=(0,m.default)(this._element,".inboxsdk__tooltip_arrow");o.style.left=n.left+"px",o.style.top=n.top+"px"}}]),e}();r.default=v},{"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/basic-button-view-controller":939,"./buttons/button-view":762,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/escape":482,"lodash/sortBy":519}],775:[function(e,t,r){(function(t){(function(){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/toConsumableArray")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=(o(e("kefir")),o(e("kefir-bus"))),c=o(e("../../../lib/fake-window-resize")),d=function(){function e(r){var n=this;(0,a.default)(this,e),(0,l.default)(this,"_element",void 0),(0,l.default)(this,"_eventStream",void 0),(0,l.default)(this,"_resizeObserver",void 0),this._eventStream=(0,u.default)();var o=t.ResizeObserver;o&&(this._resizeObserver=new o(function(){n.setTopMessageBarHeight()})),r.takeUntilBy(this._eventStream.filter(function(){return!1}).beforeEnd(function(){return null})).onValue(function(e){if(e){if(e){var t=n._element;t||(t=n._element=document.createElement("div"),t.classList.add("inboxsdk__topMessageBar"),document.body.insertBefore(t,document.body.firstChild),document.body.classList.add("inboxsdk__hasTopMessageBar"),(0,c.default)()),e.el!==t.children[0]&&(t.innerHTML="",e.el&&(t.appendChild(e.el),n._resizeObserver&&n._resizeObserver.observe(t),n.setTopMessageBarHeight()))}}else n._element&&(n._element.remove(),n._element=null)})}return(0,s.default)(e,[{key:"destroy",value:function(){this._element&&(this._element.remove(),this._element=null),this._eventStream.end(),this._resizeObserver&&this._resizeObserver.disconnect(),0===document.querySelectorAll(".inboxsdk__topMessageBar").length?document.body.classList.remove("inboxsdk__hasTopMessageBar"):this.setTopMessageBarHeight(),(0,c.default)()}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"remove",value:function(){this.destroy()}},{key:"setTopMessageBarHeight",value:function(){var e=(0,i.default)(document.querySelectorAll(".inboxsdk__topMessageBar")),t=e.reduce(function(e,t){return e+t.offsetHeight},0);document.body.style.setProperty("--inboxsdk__topMessageBar-height","".concat(t,"px"))}}]),e}();r.default=d}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../lib/fake-window-resize":877,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56,kefir:327,"kefir-bus":324}],776:[function(e,t,r){"use strict";function n(e,t,r){var n=new a.default(e,0);return(0,u.default)(t).take(1).map(function(e){return e.el.getValue()}).onValue(function(e){if(n.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(function(){return(0,s.default)(r,n.getElement())}),!e.contains(r)){var t=e.querySelectorAll(".inboxsdk__navItem_appContainer");if(t.length>0){t[t.length-1].insertAdjacentElement("afterend",r)}else{var o=(0,l.default)(e,'ul > li > img[src*="ic_draft"]'),i=o.parentElement&&o.parentElement.parentElement;if(!i)throw new Error("could not locate insertion point");i.insertAdjacentElement("afterend",r)}}(0,s.default)(r,n.getElement())}),n}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=(i(e("kefir")),i(e("./views/inboxNavItemView"))),s=i(e("../../lib/dom/insert-element-in-order")),l=i(e("../../lib/dom/querySelectorOrFail")),u=i(e("../../lib/toItemWithLifetimeStream"))},{"../../lib/dom/insert-element-in-order":856,"../../lib/dom/querySelectorOrFail":868,"../../lib/toItemWithLifetimeStream":902,"./views/inboxNavItemView":826,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],777:[function(e,t,r){"use strict";function n(e,t){var r=null,n=e.getBCCRow(),o=(0,a.default)();return t.takeUntilBy(e.getStopper()).takeUntilBy(o).onValue(function(e){r&&(r.remove(),r=null),e&&(r=s(e),n.insertAdjacentElement("afterend",r))}),o.merge(e.getStopper()).take(1).onValue(function(){r&&(r.remove(),r=null)}),function(){o.destroy()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=(i(e("closest-ng")),i(e("kefir")),i(e("kefir-stopper"))),s=function(e){var t=e.labelText,r=e.el,n=document.createElement("div"),o=document.createElement("span"),i=document.createElement("div");return n.classList.add("inboxsdk__recipient_row"),o.classList.add("inboxsdk__recipient_label"),i.classList.add("inboxsdk__recipient_content"),t&&(o.textContent=t,n.appendChild(o)),r&&(i.appendChild(r),n.appendChild(i)),n}},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"closest-ng":105,kefir:327,"kefir-stopper":326}],778:[function(e,t,r){"use strict";function n(e,t,r){if((0,s.default)((0,a.default)(u.NATIVE_ROUTE_IDS),t))throw new Error("NativeRouteIDs are not currently supported in Inbox");if(!e.getCustomRouteIDs().has(t))throw new Error("Invalid routeID: ".concat(t));return"#"+(0,l.default)(t,r)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/object/values")),s=i(e("lodash/includes")),l=i(e("../../lib/populateRouteID")),u=e("../../constants/router")},{"../../constants/router":658,"../../lib/populateRouteID":894,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/values":21,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/includes":493}],779:[function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!e.getElementById("inboxsdk__style")){var t=e.createElement("style");if(t.id="inboxsdk__style",l.onValue(function(e){t.textContent=(0,s.default)(e)}),!e.head)throw new Error("missing head");e.head.appendChild(t)}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("ud-kefir")),s=i(e("../../lib/rewriteCssWithIdMap")),l=(0,
a.default)(t,".inboxsdk__appButton_container {\n  position: absolute;\n  right: 192px;\n  top: 16px;\n  white-space: nowrap;\n}\n\n.inboxsdk__appButton {\n  position: relative;\n  line-height: 0;\n  margin-right: 16px;\n  display: inline-block;\n}\n\n.inboxsdk__appButton .inboxsdk__button_iconImg {\n  width: 24px;\n  height: 24px;\n}\n\n.inboxsdk__appButton.inboxsdk__button_icon.inboxsdk__active,\n.inboxsdk__appButton.inboxsdk__button_icon:focus {\n  outline: none;\n}\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon::before,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon::before,\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon::before,\n.inboxsdk__appButton.inboxsdk__button_icon::before {\n  content: ' ';\n  position: absolute;\n  top: -4px;\n  bottom: -4px;\n  left: -4px;\n  right: -4px;\n  margin: auto;\n  padding: 4px;\n  border-radius: 50%;\n}\n.inboxsdk__appButton.inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__appButton.inboxsdk__button_icon:focus::before {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n.inboxsdk__list_toolbar > .inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon:focus::before,\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon:focus::before {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n\n.inboxsdk__appButton_tooltip_container {\n  outline: none;\n  right: 30px;\n  position: fixed;\n  z-index: 25;\n  text-align: center;\n}\n\n.inboxsdk__appButton_tooltip {\n  display: inline-block;\n  max-width: 500px;\n  white-space: initial;\n  text-align: center;\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  background: white;\n}\n\n.inboxsdk__compose_actionToolbar {\n  display: inline-block;\n}\n\n/* custom view */\n\n.inboxsdk__custom_view {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  /* needs to take up the whole screen so that it blocks clicks to elements behind it. */\n  display: flex;\n  display: -webkit-flex;\n  min-height: 100%;\n  background: rgb(242, 242, 242);\n}\n\n.IDMAP_custom_view_container {\n  margin-top: 56px;\n}\n\n.IDMAP_custom_view_min_margins {\n  flex: 1;\n  -webkit-flex: 1;\n  min-width: 0;\n}\n\n/* sidebar */\n\n.IDMAP_app_sidebar {\n  background: #f2f2f2;\n  position: fixed;\n  top: 56px;\n  bottom: 0;\n  right: 0;\n  width: 232px;\n  z-index: 5;\n}\n\n.IDMAP_app_sidebar_main {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  overflow-y: auto;\n}\n\n.IDMAP_app_sidebar_content_area {\n  padding: 12px 8px;\n}\n\n.IDMAP_app_sidebar_container[data-open='false'] {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_area_padding {\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  background: #f2f2f2;\n}\n\n/* thread sidebar icon */\n\n.IDMAP_sidebar_iconArea {\n  position: absolute;\n  right: -16px;\n\n  /* needed to prevent rendering bug in chrome where the element is\n  visibly duplicated when the parent becomes position:fixed. */\n  will-change: top;\n}\n\n.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon {\n  margin-top: 10px;\n  transition: box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n  transition-delay: 0.01s;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.14), 0 4px 8px rgba(0, 0, 0, 0.28);\n  border: none;\n  border-radius: 50%;\n  background: #fff;\n  height: 26px;\n  width: 26px;\n  overflow: hidden;\n  padding: 0;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {\n  box-shadow: 0 0 6px rgba(0, 0, 0, 0.16), 0 6px 12px rgba(0, 0, 0, 0.32);\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_iconImg {\n  width: 26px;\n  height: 26px;\n}\n\n.inboxsdk__button_icon {\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n  cursor: pointer;\n  position: relative;\n}\n\n.inboxsdk__button_iconImg {\n  user-drag: none;\n  -moz-user-select: none;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon {\n  display: inline-block;\n  position: relative;\n  width: 24px;\n  height: 24px;\n  opacity: 0.6;\n  margin: 8px 12px 4px 2px;\n  vertical-align: middle;\n}\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon.inboxsdk__active,\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:hover,\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:focus {\n  opacity: 1;\n  outline: none;\n}\n.inboxsdk__compose_actionToolbar\n  .inboxsdk__button_icon.inboxsdk__active::before,\n.inboxsdk__compose_actionToolbar .inboxsdk__button_icon:focus::before {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n\n.inboxsdk__compose_actionToolbar .inboxsdk__button_iconImg {\n  width: 24px;\n  height: 24px;\n  vertical-align: middle;\n}\n\n.inboxsdk__compose_customSendContainer {\n  display: inline-block;\n  margin: 0;\n  line-height: 2.8;\n}\n\n.inboxsdk__recipient_row {\n  padding: 0 20px;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex: 0 0 auto;\n  flex: 0 0 auto;\n}\n\n.inboxsdk__recipient_row > .inboxsdk__recipient_label {\n  color: #757575;\n  display: inline-block;\n  padding-right: 6px;\n  padding-top: 9px;\n  min-width: 34px;\n  -webkit-flex-grow: 0;\n  flex-grow: 0;\n}\n\n.inboxsdk__recipient_row > .inboxsdk__recipient_content {\n  display: flex;\n  -webkit-flex: 1;\n  flex: 1;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  position: relative;\n  padding: 7px 0;\n  min-height: 35px;\n  box-sizing: border-box;\n}\n\n.inboxsdk__compose_forceRecipientRowHidden {\n  display: none !important;\n}\n\n.inboxsdk__list_toolbar > .inboxsdk__button_icon {\n  display: inline-block;\n  margin-left: 8px;\n  vertical-align: middle;\n  width: 24px;\n  height: 24px;\n  opacity: 0.6;\n  background-position: center;\n  -webkit-mask-position: center;\n  mask-position: center;\n}\n\n.inboxsdk__list_toolbar > .inboxsdk__button_icon.inboxsdk__active,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon:focus,\n.inboxsdk__list_toolbar > .inboxsdk__button_icon:hover {\n  outline: none;\n  opacity: 1;\n}\n\n.inboxsdk__list_toolbar > .inboxsdk__button_icon > img {\n  max-width: 24px;\n  max-height: 24px;\n}\n\n.inboxsdk__dropdown {\n  padding: 0;\n  margin: 0;\n  overflow: visible;\n  z-index: 100;\n  outline: none;\n}\n.inboxsdk__dropdown_content {\n  background: #fff;\n  color: #212121;\n  min-width: 1em;\n  min-height: 1em;\n  padding: 0;\n  margin: 0;\n  box-shadow: 0 0 6px rgba(0, 0, 0, 0.16), 0 6px 12px rgba(0, 0, 0, 0.32);\n  border-radius: 2px;\n  position: relative;\n}\n\n.inboxsdk__tooltip {\n  z-index: 1300;\n  position: fixed;\n  /*transition: left 200ms ease, top 200ms ease;*/\n  background: white;\n  min-width: 1em;\n  min-height: 1em;\n  padding: 29px 36px 32px;\n  text-align: center;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  font: normal normal normal normal 16px / normal arial, sans-serif;\n}\n\n.inboxsdk__tooltip.inboxsdk__tooltip_chromeless {\n  padding: 0;\n}\n\n.inboxsdk__tooltip > .inboxsdk__close_button {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n}\n\n.inboxsdk__tooltip h1 {\n  color: #333;\n  font-size: 18px;\n  font-weight: normal;\n  margin: 13px 0 0;\n}\n\n.inboxsdk__tooltip .inboxsdk__subtitle {\n  color: #777;\n  font-size: 13px;\n  margin: 3px 0 14px 0;\n}\n\n.inboxsdk__tooltip_arrow {\n  z-index: 1301;\n  position: fixed;\n  width: 0;\n  height: 0;\n  border: none;\n  border-color: white; /* You can override this to change the tooltip's color! */\n}\n.inboxsdk__tooltip_arrow::before {\n  content: ' ';\n  position: absolute;\n  border: 8px solid;\n}\n.inboxsdk__tooltip_arrow::after {\n  content: ' ';\n  position: absolute;\n  border: 7px solid;\n  border-color: transparent;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__top::before {\n  border-bottom-width: 0;\n  border-color: rgba(0, 0, 0, 0.2) transparent;\n  left: -9px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__top::after {\n  border-bottom-width: 0;\n  border-top-color: inherit;\n  border-bottom-color: inherit;\n  left: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__bottom::before {\n  border-top-width: 0;\n  border-color: rgba(0, 0, 0, 0.2) transparent;\n  top: -8px;\n  left: -9px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__bottom::after {\n  border-top-width: 0;\n  border-top-color: inherit;\n  border-bottom-color: inherit;\n  top: -7px;\n  left: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__left {\n}\n.inboxsdk__tooltip_arrow.inboxsdk__left::before {\n  border-right-width: 0;\n  border-color: transparent rgba(0, 0, 0, 0.2);\n  top: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__left::after {\n  border-right-width: 0;\n  border-left-color: inherit;\n  border-right-color: inherit;\n  top: -7px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__right {\n}\n.inboxsdk__tooltip_arrow.inboxsdk__right::before {\n  border-left-width: 0;\n  border-color: transparent rgba(0, 0, 0, 0.2);\n  top: -8px;\n  left: -8px;\n}\n.inboxsdk__tooltip_arrow.inboxsdk__right::after {\n  border-left-width: 0;\n  border-left-color: inherit;\n  border-right-color: inherit;\n  top: -7px;\n  left: -7px;\n}\n\n.inboxsdk__tooltip_img {\n  max-width: 500px;\n  max-height: 300px;\n}\n\n/* modal */\n.inboxsdk__modal_fullscreen {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 503;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-align-items: center;\n  align-items: center;\n  padding: 110px 50px 50px 50px;\n  pointer-events: none;\n}\n.inboxsdk__modal_container {\n  position: relative;\n  background: #fff;\n  color: #000;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(0, 0, 0, 0.333);\n  outline: 0;\n  padding: 30px 42px;\n  pointer-events: auto;\n}\n.inboxsdk__modal_toprow [role='heading'] {\n  font-size: 16px;\n  line-height: 24px;\n  margin: 0 0 16px;\n  font: bold 1em arial, sans-serif;\n  padding-right: 20px;\n}\n.inboxsdk__modal_content {\n  margin: 30px 0;\n  line-height: 1.4em;\n  word-wrap: break-word;\n  font: normal 0.8em arial, sans-serif;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless\n  .inboxsdk__modal_container {\n  padding-left: 0;\n  padding-right: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless\n  .inboxsdk__modal_content {\n  margin-left: 0;\n  margin-right: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)\n  .inboxsdk__modal_container {\n  padding-top: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)\n  .inboxsdk__modal_content {\n  margin-top: 0;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_hasButtons)\n  .inboxsdk__modal_container {\n  padding-bottom: 0;\n}\n.inboxsdk__modal_fullscreen:not(.inboxsdk__modal_hasButtons)\n  .inboxsdk__modal_content {\n  margin-bottom: 0;\n}\n.inboxsdk__modal_buttons input {\n  margin-right: 5px;\n}\n.inboxsdk__modal_buttons input.inboxsdk__primary {\n  margin-right: 7px;\n}\n.inboxsdk__modal_toprow .inboxsdk__close_button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  margin: 17px;\n}\n.inboxsdk__modal_fullscreen.inboxsdk__modal_chromeless:not(.inboxsdk__modal_showCloseButton)\n  .inboxsdk__modal_toprow\n  .inboxsdk__close_button {\n  display: none;\n}\n.inboxsdk__modal_toprow.inboxsdk__modal_toprow--constrain-title-width {\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__modal_toprow--constrain-title-width > span[role='heading'] {\n  -webkit-flex: 1;\n  flex: 1;\n  width: 0;\n  word-wrap: break-word;\n}\n\n.inboxsdk__attachment_card {\n  cursor: pointer;\n  display: inline-block;\n  position: relative;\n  text-decoration: none;\n  vertical-align: top;\n  margin-right: 12px;\n  margin-bottom: 12px;\n\n  box-shadow: 0 0 1px rgba(0, 0, 0, 0.11), 0 1px 2px rgba(0, 0, 0, 0.22);\n  box-sizing: border-box;\n  overflow: hidden;\n  height: 88px;\n  width: 132px;\n  z-index: 0;\n  justify-content: center;\n  background: rgba(0, 0, 0, 0.03);\n  border-radius: 2px;\n  transition: background-color 0.15s cubic-bezier(0.4, 0, 0.2, 1),\n    box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1),\n    outline-color 0.15s cubic-bezier(0.4, 0, 0.2, 1);\n  border: 1px solid transparent;\n  outline: 1px solid transparent;\n}\n.inboxsdk__attachment_card:hover {\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.13), 0 3px 6px rgba(0, 0, 0, 0.26);\n}\n.inboxsdk__attachment_card:active,\n.inboxsdk__attachment_card:focus {\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.15), 0 5px 10px rgba(0, 0, 0, 0.3);\n  border-color: #f2f2f2;\n  outline-color: #4285f4;\n}\n.inboxsdk__attachment_card_nohover,\n.inboxsdk__attachment_card_hover_overlay {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  padding: 12px;\n}\n.inboxsdk__attachment_card .inboxsdk__attachment_card_hover_overlay {\n  background: rgba(255, 255, 255, 0.7);\n}\n.inboxsdk__attachment_card .inboxsdk__attachment_card_hover_overlay,\n.inboxsdk__attachment_card:hover .inboxsdk__attachment_card_nohover {\n  display: none;\n}\n.inboxsdk__attachment_card:hover .inboxsdk__attachment_card_hover_overlay {\n  display: block;\n}\n.inboxsdk__attachment_card_buttons {\n  line-height: normal;\n  position: absolute;\n  bottom: 6px;\n  left: 12px;\n  right: 6px;\n}\n.inboxsdk__attachment_card_button {\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.6);\n  border: 1px solid #c6c6c6;\n  border-radius: 3px;\n  margin-right: 3px;\n  box-sizing: content-box;\n  width: 30px;\n  height: 24px;\n  padding: 0;\n  color: #333;\n  vertical-align: top;\n  text-align: center;\n}\n.inboxsdk__attachment_card_button:hover {\n  background: rgba(0, 0, 0, 0.8);\n  border-color: rgba(0, 0, 0, 0.8);\n}\n.inboxsdk__attachment_card_button > div {\n  height: 21px;\n  width: 21px;\n  display: inline-block;\n  vertical-align: middle;\n}\n.inboxsdk__attachment_card_button > img {\n  max-height: 16px;\n  max-width: 16px;\n}\n.inboxsdk__attachment_card_title {\n  margin-top: 2px;\n  line-height: 20px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  color: #212121;\n}\n.inboxsdk__attachment_card_description {\n  color: #757575;\n  line-height: 16px;\n  margin-top: 23px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.inboxsdk__attachment_card_description > img {\n  display: inline-block;\n  margin-right: 8px;\n  vertical-align: middle;\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: 16px;\n  height: 16px;\n  width: 16px;\n}\n.inboxsdk__attachment_card_description > span {\n  vertical-align: middle;\n}\n\n.inboxsdk__attachment_overlay_button {\n  border: none;\n  cursor: pointer;\n  margin-left: 8px;\n  background-color: rgba(255, 255, 255, 0);\n  box-sizing: border-box;\n  border-radius: 2px;\n  height: 40px;\n  min-width: 40px;\n  padding: 8px 0;\n  color: #333;\n  vertical-align: middle;\n  text-align: center;\n  opacity: 0.87;\n  transition: background-color 0.1s, opacity 0.1s;\n}\n.inboxsdk__attachment_overlay_button:hover,\n.inboxsdk__attachment_overlay_button:focus {\n  outline: none;\n  opacity: 1;\n  color: rgba(255, 255, 255, 1);\n  background-color: rgba(255, 255, 255, 0.25);\n}\n.inboxsdk__attachment_overlay_button > img {\n  display: inline-block;\n  vertical-align: middle;\n  height: 24px;\n  width: 24px;\n}\n\n.inboxsdk__search_suggestion_group {\n  border-top: 1px solid #ddd;\n  margin-top: 6px;\n  padding-top: 6px;\n}\n\n/*\nWhen we're displaying custom results alongside Inbox's native results,\nwe need to put some padding/margin/border above the first group of custom results\nto separate them from the native ones. When Inbox doesn't have any results to show,\nhowever, we need to remove all that visual separation. Since the first group\nof custom results will also be the first element in the container in that case\nfirst-child will do the trick.\n*/\n.inboxsdk__search_suggestion_group:first-child {\n  border-top: 0;\n  margin-top: 0;\n  padding-top: 0;\n}\n\n.inboxsdk__search_suggestion {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  min-height: 37px;\n  padding: 5px 24px;\n  box-sizing: border-box;\n  cursor: pointer;\n  overflow: hidden;\n}\n\n.inboxsdk__search_suggestion.inboxsdk__selected {\n  background-color: rgba(0, 0, 0, 0.03);\n}\n\n.inboxsdk__search_suggestion > img {\n  opacity: 0.6;\n  flex-shrink: 0;\n  border-radius: 12px;\n  height: 24px;\n  width: 24px;\n  margin-right: 24px;\n  -webkit-user-drag: none;\n}\n\n.inboxsdk__search_suggestion > span {\n  display: flex;\n  flex-direction: column;\n  min-width: 0;\n}\n\n.inboxsdk__search_suggestion_name {\n  font-weight: bold;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n.inboxsdk__search_suggestion_desc {\n  color: #757575;\n  font-size: 0.95em;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  overflow: hidden;\n}\n\n.inboxsdk__thread_row_force_toolbar_visible {\n  display: block !important;\n}\n\n.inboxsdk__inbox_thread_row_label {\n  border-radius: 2px;\n  display: -webkit-flex;\n  font-size: 11px;\n  display: flex;\n  margin-right: 0.333em;\n  outline: 1px solid transparent;\n  padding: 0 8px;\n  -webkit-flex: 0 0 auto;\n  flex: 0 0 auto;\n  -webkit-align-items: center;\n  align-items: center;\n}\n\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_icon,\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_iconImg {\n  height: 11px;\n  width: 11px;\n}\n\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_icon {\n  margin-right: 5px;\n}\n\n.inboxsdk__inbox_thread_row_label .inboxsdk__button_iconImg {\n  position: absolute;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  width: 20px;\n  min-width: 20px;\n  min-height: 20px;\n  margin-right: 5px;\n  position: relative;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_icon {\n  height: 20px;\n  width: 20px;\n  margin-top: -10px;\n  position: absolute;\n  top: 50%;\n  overflow: hidden;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  height: 20px;\n  width: 20px;\n}\n\n.inboxsdk__thread_row_draft_label_replaced\n  > span:not(.inboxsdk__thread_row_custom_draft_label) {\n  display: none;\n}\n\n.inboxsdk__thread_row_custom_draft_label {\n  color: rgb(210, 63, 49);\n}\n\n.inboxsdk__thread_row_draft_count_replaced\n  span:not(.inboxsdk__thread_row_custom_draft_count) {\n  display: none;\n}\n\n.inboxsdk__thread_row_custom_draft_count {\n  color: rgb(117, 117, 117);\n  font-weight: normal;\n  -webkit-flex-shrink: 0;\n  flex-shrink: 0;\n}\n\n.inboxsdk__navItem_appContainer {\n  border-bottom: 1px solid #ddd;\n  box-sizing: border-box;\n  list-style: none;\n  padding: 0 0 8px 0;\n  margin: 13px 0;\n  position: relative;\n}\n\n.inboxsdk__navItem_appContainer:empty {\n  display: none;\n}\n\n.inboxsdk__navItem_appContainer:focus,\n.inboxsdk__navItem_wrapper:focus,\n.inboxsdk__navItem_name:focus,\n.inboxsdk__navItem_subNav:focus {\n  outline: none;\n}\n\n.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren)\n  > .inboxsdk__navItem_subNav,\n.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander,\n.inboxsdk__navItem_wrapper:not(.inboxsdk__navItem_hasChildren)\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander\n  > svg {\n  display: none;\n}\n\n.inboxsdk__navItem {\n  cursor: pointer;\n  align-items: center;\n  -webkit-align-items: center;\n  display: -webkit-flex;\n  display: flex;\n  padding-left: 16px;\n  padding-right: 12px;\n}\n\n.inboxsdk__navItem:not(.inboxsdk__navItem_link):hover {\n  background-color: rgba(0, 0, 0, 0.03);\n  border-radius: 2px;\n}\n\n.inboxsdk__navItem:focus {\n  background-color: rgba(0, 0, 0, 0.05);\n  outline: 2px solid transparent;\n}\n\n.inboxsdk__navItem.inboxsdk__navItem_active {\n  background-color: rgba(0, 0, 0, 0.05);\n  border-radius: 2px;\n  color: #212121;\n  font-weight: bold;\n}\n\n.inboxsdk__navItem_expander {\n  position: relative;\n  width: 24px;\n  height: 24px;\n  margin-right: 24px;\n  border-radius: 50%;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n}\n\n.inboxsdk__navItem_expander:hover {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n\n.inboxsdk__navItem_expander > svg {\n  width: 100%;\n  height: 100%;\n  transition: transform 150ms ease-out;\n}\n\n.inboxsdk__navItem_expander > svg > polygon {\n  fill: #616161;\n}\n\n.inboxsdk__navItem_wrapper.inboxsdk__navItem_collapsed\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander\n  > svg {\n  transform: rotate(-90deg);\n}\n\n.inboxsdk__navItem_name {\n  display: inline-block;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  -webkit-flex: 1;\n  flex: 1;\n}\n\n.inboxsdk__navItem_hasIcon > .inboxsdk__navItem_name {\n  padding-left: 24px;\n}\n\n.inboxsdk__navItem_level0:not(.inboxsdk__navItem_disabled):not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)\n  > .inboxsdk__navItem:not(.inboxsdk__navItem_hasIcon),\n.inboxsdk__navItem_level1:not(.inboxsdk__navItem_hasChildren):not(.inboxsdk__navItem_hasColor)\n  > .inboxsdk__navItem:not(.inboxsdk__navItem_hasIcon) {\n  padding-left: 64px;\n}\n\n.inboxsdk__navItem_link > .inboxsdk__navItem_name {\n  color: #3c80f6;\n}\n\n.inboxsdk__navItem_link:hover > .inboxsdk__navItem_name,\n.inboxsdk__navItem_link:focus > .inboxsdk__navItem_name,\n.inboxsdk__navItem_link:active > .inboxsdk__navItem_name {\n  color: #1c3aa9;\n}\n\n.inboxsdk__navItem .inboxsdk__button_icon,\n.inboxsdk__navItem .inboxsdk__button_iconImg {\n  width: 24px;\n  height: 24px;\n}\n\n.inboxsdk__navItem > .inboxsdk__navItem_accessory .inboxsdk__button_icon,\n.inboxsdk__navItem > .inboxsdk__navItem_accessory .inboxsdk__button_iconImg {\n  width: 18px;\n  height: 18px;\n}\n\n.inboxsdk__navItem > .inboxsdk__navItem_accessory {\n  line-height: 18px;\n  display: none;\n}\n\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon:focus {\n  outline: 2px solid transparent;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem,\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem:hover,\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled > .inboxsdk__navItem:focus,\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled\n  > .inboxsdk__navItem:active {\n  background-color: transparent;\n  border-radius: 0;\n  outline: none;\n  font-size: 0.9em;\n  font-weight: normal;\n  line-height: 24px;\n  white-space: normal;\n  outline: none;\n  cursor: default;\n  padding-left: 16px;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled {\n  border-top: 1px solid #ddd;\n  margin: 13px 0;\n  padding-top: 13px;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled:first-child {\n  border-top: none;\n  margin-top: 0;\n  padding-top: 0;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled:last-child {\n  margin-bottom: 0;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_disabled\n  > .inboxsdk__navItem\n  > .inboxsdk__button_icon {\n  display: none;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_expander {\n  display: none;\n}\n\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem:hover\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem:focus\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level0.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem:active\n  > .inboxsdk__navItem_name {\n  color: #616161;\n}\n\n.inboxsdk__navItem_wrapper.inboxsdk__navItem_hasAccessory\n  > .inboxsdk__navItem\n  > .inboxsdk__navItem_accessory {\n  display: block;\n  position: relative;\n}\n\n.inboxsdk__navItem_accessory > .inboxsdk__button_icon {\n  opacity: 0;\n}\n\n.inboxsdk__navItem:hover\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon,\n.inboxsdk__navItem.inboxsdk__navItem_active\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon {\n  opacity: 0.6;\n}\n\n.inboxsdk__navItem\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon:hover,\n.inboxsdk__navItem\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon:focus,\n.inboxsdk__navItem\n  > .inboxsdk__navItem_accessory\n  > .inboxsdk__button_icon.inboxsdk__active {\n  opacity: 1;\n}\n\n.inboxsdk__navItem_subNav,\n.inboxsdk__navItem_subNavInner {\n  overflow: hidden;\n}\n\n.inboxsdk__navItem_subNav {\n  transition: height 150ms ease-in-out;\n}\n\n.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren\n  .inboxsdk__navItem_subNav {\n  padding-left: 48px;\n}\n\n.inboxsdk__navItem_level2.inboxsdk__navItem_hasChildren\n  .inboxsdk__navItem_subNav {\n  padding-left: 34px;\n}\n\n.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem_subNav {\n  padding-left: 48px;\n}\n\n.inboxsdk__navItem_level2 {\n  line-height: 26px;\n}\n\n.inboxsdk__navItem_level2 .inboxsdk__navItem_expander {\n  margin-right: 10px;\n}\n\n.inboxsdk__navItem_level1.inboxsdk__navItem_hasChildren\n  > .inboxsdk__navItem_hasIcon\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level2\n  > .inboxsdk__navItem_hasIcon\n  > .inboxsdk__navItem_name,\n.inboxsdk__navItem_level3\n  > .inboxsdk__navItem_hasIcon\n  > .inboxsdk__navItem_name {\n  padding-left: 10px;\n}\n\n.inboxsdk__navItem_level2 > .inboxsdk__navItem .inboxsdk__button_icon,\n.inboxsdk__navItem_level2 > .inboxsdk__navItem .inboxsdk__button_iconImg,\n.inboxsdk__navItem_level3 > .inboxsdk__navItem .inboxsdk__button_icon,\n.inboxsdk__navItem_level3 > .inboxsdk__navItem .inboxsdk__button_iconImg {\n  width: 18px;\n  height: 18px;\n}\n\n/* appid warning inbox specific parts */\n.inboxsdk__appid_warning {\n  margin: 68px 240px -68px;\n}\n.inboxsdk__appid_warning .inboxsdk__close_button {\n  float: right;\n}\n\n/* mole */\n\n.inboxsdk__mole_view {\n  box-sizing: border-box;\n  direction: ltr;\n  margin-right: 15px;\n  display: table-cell;\n}\n\n.inboxsdk__mole_view_mid {\n  position: relative;\n}\n\n.inboxsdk__mole_view_inner {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  outline: none;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.45);\n  border-top-left-radius: 7.5px;\n  border-top-right-radius: 7.5px;\n  transform: translateZ(0);\n  background: white;\n  /* copied from the compose's CSS */\n  max-height: calc(100vh - 56px - 20px - 24px - 1px - 8px);\n}\n\n.inboxsdk__mole_view_titlebar {\n  background: #424242;\n  color: #fff;\n  height: 18px;\n  line-height: 18px;\n  outline: none;\n  padding: 11px 20px;\n  transform: translateZ(0);\n  border-top-left-radius: 5px;\n  border-top-right-radius: 5px;\n  display: -webkit-flex;\n  display: flex;\n}\n\n.inboxsdk__mole_view_title {\n  display: inline-block;\n  flex: 1;\n  -webkit-flex: 1;\n  height: 18px;\n  overflow: hidden;\n  padding: 0 10px 0 0;\n  text-overflow: ellipsis;\n  vertical-align: top;\n  white-space: nowrap;\n\n  /* Because of flex, the title can become wider than this if the mole contents are */\n  width: 98px;\n}\n\n.inboxsdk__mole_title_buttons > button {\n  height: 24px;\n  width: 24px;\n  opacity: 0.6;\n  padding: 0 0 3px 7px;\n\n  margin-right: 4px;\n  vertical-align: top;\n\n  user-drag: none;\n  -webkit-user-drag: none;\n  user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  -moz-user-select: none;\n\n  outline: none;\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n}\n\n.inboxsdk__mole_title_buttons > button:focus,\n.inboxsdk__mole_title_buttons > button:hover {\n  opacity: 1;\n  outline: none;\n}\n\n.inboxsdk__mole_title_buttons\n  > button.inboxsdk__mole_custom_title_button\n  > img {\n  width: 18px;\n  height: 18px;\n}\n\n.inboxsdk__mole_view.inboxsdk__minimized .inboxsdk__mole_view_content {\n  display: none;\n}\n")},{"../../lib/rewriteCssWithIdMap":896,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"ud-kefir":624}],780:[function(e,t,r){"use strict";function n(e){var t=new a.default("appToolbarLocation");return t.run("children check",function(){if(e.childElementCount<2)throw new Error("expected more children")}),t.run("position check",function(){var t=e.getBoundingClientRect();if(t.top>100)throw new Error("expected element to border top of screen");if(window.innerWidth-t.right>100)throw new Error("expected element to border right side of screen");if(t.width>500)throw new Error("expected element to span only the right of the screen");if(t.height>150)throw new Error("expected element to span only the right of the screen")}),{elements:{chatSidebarButton:t.run("chatSidebarButton",function(){return(0,s.default)(e,'div[role=button][jsaction*="global.toggle_chat_roster"]')})},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../../../../lib/ErrorCollector")),s=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],781:[function(e,t,r){"use strict";function n(e){var t=new a.default("attachmentCard");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});return{elements:{},attributes:{type:"FILE"},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../../../../lib/ErrorCollector"));i(e("../../../../lib/dom/querySelectorOne")),i(e("bignumber.js"))},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"bignumber.js":99}],782:[function(e,t,r){(function(n){(function(){"use strict";function o(e){var t=new l.default("attachmentOverlay");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var r=t.run("downloadButton",function(){var t=s.default.toArray(Array.prototype.slice.call(e.querySelectorAll("div[role=button][tabindex][data-tooltip]:not([aria-disabled=true]):not([aria-pressed]):not([aria-expanded])")),s.default.compose(s.default.filter(function(e){return 1===e.childElementCount&&0===e.firstElementChild.childElementCount}),s.default.filter(function(e){if(n.document){return!(e.getBoundingClientRect().top>100)}return e.parentElement.classList.contains("ndfHFb-c4YZDc-Wrql6b-C7uZwb-b0t70b")}),s.default.filter(function(e){var t=Array.prototype.indexOf.call(e.parentElement.children,e),r=Array.prototype.filter.call(e.parentElement.children,function(e,r){return r>t&&"DIV"===e.nodeName})[0];return r&&"true"===r.getAttribute("aria-haspopup")}),s.default.take(1)))[0];if(!t)throw new Error("Failed to find element");if("Print"===t.getAttribute("aria-label"))throw new Error("Found print button instead");return t});return{elements:{downloadButton:r,buttonContainer:r?r.parentElement:null},attributes:{},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("transducers.js")),l=a(e("../../../../lib/ErrorCollector")),u=(a(e("../../../../lib/dom/querySelectorOne")),e("ud")),c=(0,
u.defn)(t,o);r.default=c}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"transducers.js":623,ud:625}],783:[function(e,t,r){"use strict";function n(e){var t=new a.default("chatSidebar");return t.run("position:fixed",function(){if("fixed"!==getComputedStyle(e.parentElement).position)throw new Error("expected position:fixed in parent")}),t.run("id",function(){if(!e.id)throw new Error("expected id")}),{elements:{},attributes:{},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("../../../../lib/ErrorCollector")),s=(i(e("../../../../lib/dom/querySelectorOne")),e("ud")),l=(0,s.defn)(t,n);r.default=l},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,ud:625}],784:[function(e,t,r){"use strict";function n(e){var t=new s.default("compose"),r="dialog"!==e.getAttribute("role"),n=t.run("send button",function(){return(0,l.default)(e,'div[jstcache] > div[role=button][jsaction$=".send"], div[jstcache] > div[role=button][disabled]:not([title]):not([data-tooltip])')}),o=t.run("attach button",function(){return(0,l.default)(e,'div[role=button][jsaction$=".attach"]')}),i=t.run("body",function(){return(0,l.default)(e,'div[contenteditable][g_editable], div[id][tabindex][aria-label][jsaction*=".quick_compose_handle_input"]')}),c=r?null:t.run("subject",function(){var t=(0,l.default)(e,'div[jstcache][jsan] > div > input[type=text][title][placeholder][jsaction*="input:"]');if(!(t instanceof HTMLInputElement))throw new Error("Wrong type");return t}),d=r?t.run("pop-out button",function(){return(0,l.default)(e,'button[jsaction$=".quick_compose_popout_mole"]')}):null,f=t.run("discard button",function(){return(0,l.default)(e,'button[jsaction$=".discard_draft"]')}),p=r?null:t.run("title bar",function(){return(0,l.default)(e,'div[jsaction$=".focus_mole"]')}),m=r?null:t.run("fullscreen button",function(){return(0,l.default)(e,'button[jsaction$=".toggle_full_screen"]')}),h=r?null:t.run("fullscreen button image",function(){return(0,l.default)(e,'button[jsaction$=".toggle_full_screen"] img')}),b=r?null:t.run("close button",function(){return(0,l.default)(e,'div[jstcache][jsan][jsaction] > button[jsaction$=".close_mole"]')}),v=r?null:t.run("minimize button",function(){return(0,l.default)(e,'div[jstcache][jsan][jsaction] > button[jsaction$=".minimize_mole"]')}),_=r?null:t.run("minimize button image",function(){return(0,l.default)(e,'div[jstcache][jsan][jsaction] > button[jsaction$=".minimize_mole"] img')}),g=r?null:t.run("body placeholder",function(){var e=i&&i.previousElementSibling;if(!(e instanceof HTMLElement)||"LABEL"!==e.nodeName)throw new Error("compose body placeholder wrong type ".concat(e?e.nodeName:"undefined"));return e}),y=e.querySelector("div[role=button][jsaction*=toggle_custom_from_menu]"),w=y?t.run("from picker email span",function(){return(0,l.default)(y,"span")}):null,j=r?null:t.run("recipient fields",function(){var t=e.querySelectorAll("input[type=text][role=combobox]");if(3!=t.length)throw new Error("Found ".concat(t.length," recipient fields, expected 3"));return t}),k=j||[],x=(0,a.default)(k,3),E=x[0],S=x[1],C=x[2],I=r?null:t.run("toggle cc/bcc button",function(){return(0,l.default)(e,'button[jsaction*=".toggle_cc_bcc"]')}),A=r?null:t.run("to row",function(){if(!E)throw new Error("Could not locate To input");var e=(0,u.default)(E,'div > button[jsaction$=".toggle_cc_bcc"] + div'),t=e&&e.parentElement;if(!(t instanceof HTMLElement))throw new Error("Could not locate To row");return t}),T=r?null:t.run("cc row",function(){if(!S)throw new Error("Could not locate CC input");var e=(0,u.default)(S,"div[class] > label + div"),t=e&&e.parentElement;if(!(t instanceof HTMLElement))throw new Error("Could not locate CC row");return t}),D=r?null:t.run("bcc row",function(){if(!C)throw new Error("Could not locate BCC input");var e=(0,u.default)(C,"div[class] > label + div"),t=e&&e.parentElement;if(!(t instanceof HTMLElement))throw new Error("Could not locate BCC row");return t});return{elements:{sendBtn:n,attachBtn:o,body:i,subject:c,popOutBtn:d,discardBtn:f,titleBar:p,toggleFullscreenButton:m,toggleFullscreenButtonImage:h,closeBtn:b,minimizeBtn:v,minimizeBtnImage:_,bodyPlaceholder:g,fromPicker:y,fromPickerEmailSpan:w,toInput:E,ccInput:S,bccInput:C,toRow:A,ccRow:T,bccRow:D,toggleCcBccButton:I},attributes:{isInline:r},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=i(e("../../../../lib/ErrorCollector")),l=i(e("../../../../lib/dom/querySelectorOne")),u=i(e("closest-ng")),c=e("ud"),d=(0,c.defn)(t,n);r.default=d},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"closest-ng":105,ud:625}],785:[function(e,t,r){"use strict";function n(e){var t=new s.default("compose");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var r=t.run("message id",function(){var t=/msg-[^:]+:[^:\d]*\d+/.exec(e.getAttribute("data-msg-id")||"");if(!t)throw new Error("message id regex failed");return t[0]}),n=t.run("heading",function(){var t=e.querySelector("div[role=heading]");if(!t)throw new Error("failed to find heading");return t}),o=e.querySelector("div[role=heading] ~ div:not(:empty)"),i=e.querySelector('div[jsaction$=".message_toggle_collapse"]'),u=null!=o&&(null==i||"heading"===i.getAttribute("role")),c=u?"EXPANDED":null!=o?"COLLAPSED":"HIDDEN",d=u&&n&&!n.querySelector("span[email]"),f=!d&&n&&o?t.run("sender",function(){return(0,l.default)(n,"[email]:first-child")}):null,p=d?null:e.querySelectorAll("[role=heading] [email]:not(:first-child), [role=heading] + div [email]"),m=d||!o||"EXPANDED"!==c?null:t.run("attachments area",function(){var e=(0,a.default)(o.parentElement.querySelectorAll("section:last-child"));if(!e)throw new Error("element not found");return e});return{elements:{heading:n,body:o,sender:f,toggleCollapse:i,attachmentsArea:m},attributes:{loaded:u,viewState:c,inboxMessageId:r,recipientElements:p,isDraft:d},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("lodash/last")),s=i(e("../../../../lib/ErrorCollector")),l=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/last":511}],786:[function(e,t,r){"use strict";function n(e){var t=[];e.childElementCount<2&&t.push("expected more children");var r=e.getBoundingClientRect();return r.top>100&&t.push("expected element to border top of screen"),window.innerWidth-r.right>100&&t.push("expected element to border right side of screen"),window.innerHeight-r.bottom>100&&t.push("expected element to border bottom side of screen"),{elements:{},score:0===t.length?1:0,errors:t}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;i(e("../../../../lib/ErrorCollector")),i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],787:[function(e,t,r){"use strict";function n(e){var t=new a.default("searchBar"),r=e.getBoundingClientRect();return t.run("position check",function(){if(r.top>100)throw new Error("expected element to border top of screen")}),{elements:{searchInput:t.run("searchInput",function(){return(0,s.default)(e,"div[role=search] input[role=combobox]")})},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../../../../lib/ErrorCollector")),s=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],788:[function(e,t,r){"use strict";function n(e){var t=new l.default("threadRow"),r=!e.hasAttribute("aria-multiselectable");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var n=t.run("subject",function(){return(0,u.default)(e,'div[jsaction][jslog] > div:not(:first-child):not(:last-child) > div > div[class]:not([style]):not(:first-child) > div:not(:first-child):not(:last-child) > div:not([style]):not(:first-child):not(:last-child):not([class*="inboxsdk"])')}),o=t.run("checkbox",function(){return(0,u.default)(e,"div[jsaction] > div > div[jsaction] > div[role=checkbox]")}),i=t.run("recipients",function(){return e.querySelectorAll("div[jsaction] > div:not(:first-child):not(:last-child) > div > div > span[email]")}),d=t.run("isOnlyDraft",function(){return!(i&&i.length>0)}),f=t.run("draftLabels",function(){var t=e.querySelectorAll("div[jsaction] > div:not(:first-child):not(:last-child) > div > div > span");return(0,a.default)(t).filter(function(e){var t=getComputedStyle(e).getPropertyValue("color"),r=c.exec(t);if(!r)throw new Error("Failed to read color string");var n=+r[1],o=+r[2],i=+r[3];return n>200&&o<100&&i<100})}),p=t.run("recipientParent",function(){if(i&&i.length>0)return i[0].parentElement;if(!(f&&f.length>0))throw new Error("Could not locate draft labels");return f[0].parentElement}),m=t.run("thread id",function(){var t=/thread-[^:]+:[^:\d]*(\d+)/.exec(e.getAttribute("data-item-id")||"");if(!t)throw new Error("thread row id regex failed");return t[0]}),h=t.run("messageCountParent",function(){return p&&p.nextElementSibling}),b=t.run("visibleMessageCount",function(){var e=h&&h.querySelector("span"),t=e&&/^\((\d+)\)$/.exec(e.textContent);return t?(0,s.default)(t[1]):1}),v=t.run("visibleDraftCount",function(){if(d&&b)return b;if(!f)throw new Error("Could not locate draft labels");return f.length}),_=t.run("contacts",function(){return i?(0,a.default)(i).map(function(e){var t=e.getAttribute("email");return t?{name:null,emailAddress:t}:null}).filter(Boolean):null}),g=t.run("labelParent",function(){return(0,u.default)(e,"div[jsaction][jslog] > div:not(:first-child):not(:last-child) > div > div[class]:not([style]):not(:first-child) > div:not(:first-child):not(:last-child)")}),y=t.run("toolbar",function(){return(0,u.default)(e,"div[jsaction] div[jsaction] > ul[aria-label]")}),w={subject:n,checkbox:o,labelParent:g,toolbar:y,recipientParent:p,messageCountParent:h},j=1-t.errorCount()/t.runCount();return{elements:w,attributes:{isOnlyDraft:d,inBundle:r,inboxThreadId:m,visibleMessageCount:b,visibleDraftCount:v,contacts:_},score:j,errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("@babel/runtime-corejs2/core-js/parse-int")),l=i(e("../../../../lib/ErrorCollector")),u=i(e("../../../../lib/dom/querySelectorOne")),c=/^rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],789:[function(e,t,r){"use strict";function n(e){var t=new a.default("thread"),r=!e.hasAttribute("aria-multiselectable");t.run("tabindex",function(){if(!e.hasAttribute("tabindex"))throw new Error("expected tabindex")});var n=t.run("thread id",function(){var t=/thread-[^:]+:[^:\d]*(\d+)/.exec(e.getAttribute("data-item-id")||"");if(!t)throw new Error("thread id regex failed");return t[0]}),o=t.run("heading",function(){return e.querySelector("div[role=heading]")}),i=o?t.run("stickyHeading",function(){var e=o.firstElementChild;if(e instanceof HTMLDivElement)return e;throw new Error("child missing")}):null,l=i?t.run("toolbar",function(){return(0,s.default)(i,"ul")}):null,u=t.run("list",function(){return e.querySelector("div[role=list]")});return{elements:{heading:o,stickyHeading:i,toolbar:l,list:u},attributes:{inBundle:r,inboxThreadId:n},score:1-t.errorCount()/t.runCount(),errors:t.getErrorLogs()}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("../../../../lib/ErrorCollector")),s=i(e("../../../../lib/dom/querySelectorOne"))},{"../../../../lib/ErrorCollector":843,"../../../../lib/dom/querySelectorOne":867,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],790:[function(e,t,r){"use strict";function n(e,t){var r=function(e){var t=e.el,r=e.removalStream;return{el:t.getValue(),removalStream:r}},n=(0,f.default)(t.getAllByTag("inlineCompose")).map(r),o=(0,f.default)(t.getAllByTag("regularCompose")).map(r),i=(0,f.default)(t.getAllByTag("fullscreenCompose")).map(r),h=l.default.merge([n,o.merge(i).flatMap((0,p.default)())]),b=h.map(function(t){var r=t.el,n=t.removalStream,o=(0,m.default)(r);o.errors.length&&e.getLogger().errorSite(new Error("parse errors (compose)"),{score:o.score,errors:o.errors,html:(0,c.default)(r)});var i=new d.default(e,r,o);return n.take(1).onValue(function(){return i.removedFromDOM()}),i});return new u.default({scheduler:t.getAllByTag("inlineCompose").getScheduler(),read:function(){return new a.default},listen:function(t,r){t(new a.default);var n=b.observe({value:function(e){r.add(e),e.getStopper().onValue(function(){r.remove(e)})},error:function(t){function r(){return{mainLength:document.querySelectorAll("[role=main]").length,regularLength:document.querySelectorAll("body > div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,noJsActionLength:document.querySelectorAll("body > div[id] > div[id][class]:not([role]) > div[class] > div[id]").length,noNotLength:document.querySelectorAll("body > div[id][jsaction] > div[id][class] > div[class] > div[id]").length,noBodyDirectChildLength:document.querySelectorAll("body div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,noBodyLength:document.querySelectorAll("div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id]").length,classLength:document.querySelectorAll("div.ek div.md > div").length,classEkLength:document.querySelectorAll(".ek").length,classMdLength:document.querySelectorAll(".md").length,composeHtml:(0,s.default)(document.querySelectorAll("body > div[id][jsaction] > div[id][class]:not([role]) > div[class] > div[id], div.ek div.md > div")).map(function(e){return(0,c.default)(e)})}}var n=r();e.getLogger().error(t,n),setTimeout(function(){var t=r();e.getLogger().eventSdkPassive("waitfor compose data",{startStatus:n,waitTime:18e4,laterStatus:t})},18e4)}});return function(){n.unsubscribe()}}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/set")),s=i(e("@babel/runtime-corejs2/core-js/array/from")),l=i(e("kefir")),u=i(e("live-set")),c=i(e("../../../common/censorHTMLtree")),d=i(e("./views/inbox-compose-view")),f=i(e("../../lib/toItemWithLifetimeStream")),p=i(e("../../lib/dom/make-element-stream-merger")),m=i(e("./detection/compose/parser"))},{"../../../common/censorHTMLtree":637,"../../lib/dom/make-element-stream-merger":860,"../../lib/toItemWithLifetimeStream":902,"./detection/compose/parser":784,"./views/inbox-compose-view":815,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"live-set":332}],791:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,c.default)(s.default.mark(function e(t,r){var n,o,i,a,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.default,e.t1="https://inbox.google.com/sync".concat((0,p.default)(),"/i/fd"),e.next=4,t.getPageCommunicator().getXsrfToken();case 4:return e.t2=e.sent,e.next=7,t.getPageCommunicator().getBtaiHeader();case 7:return e.t3=e.sent,e.t4={"Content-Type":"application/json","X-Framework-Xsrf-Token":e.t2,"X-Gmail-BTAI":e.t3,"X-Google-BTD":"1"},e.t5=(0,l.default)({1:[{1:r,3:[]}]}),e.t6={method:"POST",url:e.t1,headers:e.t4,data:e.t5},e.next=13,(0,e.t0)(e.t6);case 13:if(n=e.sent,o=n.text,i=(0,m.extractMessageIdsFromThreadResponse)(o),a=(0,u.default)(i,1),c=a[0],c){e.next=18;break}throw new Error("Failed to find inbox message ID for thread");case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/core-js/json/stringify")),u=a(e("@babel/runtime-corejs2/helpers/slicedToArray")),c=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=e("ud"),f=a(e("../../driver-common/inboxAjax")),p=a(e("../../driver-common/getAccountUrlPart")),m=e("./inboxResponseProcessor"),h=(0,d.defn)(t,n);r.default=h},{"../../driver-common/getAccountUrlPart":830,"../../driver-common/inboxAjax":837,"./inboxResponseProcessor":797,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"@babel/runtime-corejs2/regenerator":59,ud:625}],792:[function(e,t,r){"use strict";function n(e){return e instanceof window.CSSMediaRule?(0,c.default)(e.cssRules,n):e instanceof window.CSSStyleRule?[e]:[]}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("@babel/runtime-corejs2/core-js/parse-float")),l=i(e("lodash/difference")),u=i(e("lodash/once")),c=i(e("lodash/flatMap")),d=i(e("lodash/last")),f=i(e("transducers.js")),p=i(e("postcss-selector-parser")),m=i(e("../../lib/logger")),h=i(e("../../lib/dom/querySelectorOrFail")),b=(0,p.default)(),v=(0,u.default)(function(){function e(t){switch(t.type){case"root":case"selector":return(0,c.default)(t.nodes,e);case"class":return[t.value];default:return[]}}var t=(0,a.default)((0,h.default)(document,"[role=application]").classList).map(function(e){return new RegExp("\\."+e+"\\b")});if(0===t.length)throw new Error("no class names on element");var r=f.default.toArray(Array.prototype.slice.call(document.styleSheets),f.default.compose(f.default.filter(function(e){try{return e.cssRules&&e.cssRules.length}catch(e){return!1}}),f.default.mapcat(function(e){return Array.prototype.slice.call(e.cssRules||[])}),f.default.mapcat(n),f.default.filter(function(e){return t.some(function(t){return t.test(e.selectorText)})}),f.default.filter(function(e){return e.style["margin-left"]&&e.style["margin-right"]}))),o=f.default.toArray(Array.prototype.slice.call(r),f.default.compose(f.default.filter(function(e){return(0,s.default)(e.style["margin-left"])>(0,s.default)(e.style["margin-right"])}),f.default.take(1)))[0],i=f.default.toArray(Array.prototype.slice.call(r),f.default.compose(f.default.filter(function(e){return(0,s.default)(e.style["margin-left"])<(0,s.default)(e.style["margin-right"])}),f.default.take(1)))[0];if(!o||!i){var u=new Error("Failed to parse element CSS rules");throw m.default.error(u,{rulesCount:r.length,hasOnlyNavSidebarRule:!!o,hasOnlyChatSidebarRule:!!i}),u}var p=e(b.process(o.selectorText).res),v=e(b.process(i.selectorText).res),_=(0,l.default)(v,p),g=(0,l.default)(p,v),y=(0,d.default)(p)===(0,d.default)(v)?(0,d.default)(p):null;return 1===_.length&&1===g.length&&y||m.default.error(new Error("Failed to find sidebar classnames"),{onlyNavSidebarRuleClassNames:p,onlyChatSidebarRuleClassNames:v,chatSidebarClassNames:_,navSidebarClassNames:g,centerListClassName:y}),{chat:_[0],nav:g[0],centerList:y}}),_=v;r.default=_},{"../../lib/dom/querySelectorOrFail":868,"../../lib/logger":891,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-float":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/difference":480,"lodash/flatMap":487,"lodash/last":511,"lodash/once":516,"postcss-selector-parser":547,"transducers.js":623}],793:[function(e,t,r){"use strict";function n(e,t){var r=void 0!==l&&e[u]||e["@@iterator"];if(!r){if(c(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){d=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(d)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?s(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t,r){if((0,m.default)((0,p.default)(v.NATIVE_ROUTE_IDS),t))throw new Error("NativeRouteIDs are not currently supported in Inbox");if(!e.getCustomRouteIDs().has(t)){var o="#"===t[0];o&&(t=t.slice(1));var i=!1;if(!r){var a,s=n(e.getCustomRouteIDs());try{for(s.s();!(a=s.n()).done;){var l=a.value;if((0,b.default)(l,t)){i=!0;break}}}catch(e){s.e(e)}finally{s.f()}}if(!i)throw new Error("Invalid routeID: ".concat(t));o||e.getLogger().deprecationWarning('Router.goto resolved routeID without "#" prefix')}document.location.hash=(0,h.default)(t,r)}var s=e("@babel/runtime-corejs2/core-js/array/from"),l=e("@babel/runtime-corejs2/core-js/symbol"),u=e("@babel/runtime-corejs2/core-js/symbol/iterator"),c=e("@babel/runtime-corejs2/core-js/array/is-array"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=a;var p=f(e("@babel/runtime-corejs2/core-js/object/values")),m=f(e("lodash/includes")),h=f(e("../../lib/populateRouteID")),b=f(e("../../lib/routeIDmatchesHash")),v=e("../../constants/router")},{"../../constants/router":658,"../../lib/populateRouteID":894,"../../lib/routeIDmatchesHash":897,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/values":21,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/includes":493}],794:[function(e,t,r){"use strict";function n(e,t,r){(0,l.default)(r.style,{opacity:"0",transform:"",transition:"opacity 100ms"}),r.removeAttribute("data-inboxsdk-id"),d.default.fromEvents(r,"transitionend").merge(d.default.later(200)).takeUntilBy(h.filter(function(e){return null!=e})).onValue(function(){(0,l.default)(r.style,{display:"none",opacity:"",transition:""})})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/core-js/object/assign")),u=i(e("@babel/runtime-corejs2/core-js/json/stringify")),c=i(e("@babel/runtime-corejs2/core-js/date/now")),d=i(e("kefir")),f=i(e("../../lib/stream-wait-for")),p=(i(e("../../lib/dom/querySelectorOrFail")),i(e("../../lib/dom/make-mutation-observer-chunked-stream"))),m=(0,f.default)(function(){return document.querySelector("body > div[id][jsaction] > div[id] > div[class][jsaction][aria-hidden]")}).map(function(e){var t=e.parentElement;if(!t)throw new Error("Should not happen");var r=t.querySelector(".inboxsdk__butterbar");return r||(r=document.createElement("div"),r.className=e.className+" inboxsdk__butterbar",r.style.display="none",t.insertBefore(r,e.nextSibling)),{noticeContainer:t,googleNotice:e,sdkNotice:r}}).toProperty(),h=m.flatMapLatest(function(e){var t=e.sdkNotice;return(0,p.default)(t,{attributes:!0,attributeFilter:["data-inboxsdk-id"]}).map(function(){return t.getAttribute("data-inboxsdk-id")})}),b=h.filter(function(e){return null==e}),v=b,_=function(){function e(){(0,a.default)(this,e),v.onValue(function(){})}return(0,s.default)(e,[{key:"getNoticeAvailableStream",value:function(){return v}},{key:"getSharedMessageQueue",value:function(){var e=document.head.getAttribute("data-inboxsdk-butterbar-queue");return e?JSON.parse(e):[]}},{key:"setSharedMessageQueue",value:function(e){var t=(0,u.default)(e);document.head.setAttribute("data-inboxsdk-butterbar-queue",t)}},{key:"showMessage",value:function(e){var t=(0,c.default)()+"-"+Math.random();return m.take(1).onValue(function(r){var n=(r.noticeContainer,r.googleNotice),o=r.sdkNotice;o.className=n.className,o.classList.add("inboxsdk__butterbar"),e.html?o.innerHTML=e.html:e.el?(o.innerHTML="",o.appendChild(e.el)):o.textContent=e.text,e.className&&o.classList.add(e.className),"block"===o.style.display&&"1"===getComputedStyle(o).opacity?((0,l.default)(o.style,{opacity:"0",transform:"none",transition:"none"}),o.offsetHeight,(0,l.default)(o.style,{opacity:"1",transition:""})):((0,l.default)(o.style,{opacity:"0",transform:"",transition:"",display:"block"}),o.offsetHeight,(0,l.default)(o.style,{opacity:"1",transform:"none"})),o.setAttribute("data-inboxsdk-id",t)}),{destroy:function(){m.take(1).onValue(function(r){var o=r.noticeContainer,i=r.googleNotice,a=r.sdkNotice;a.getAttribute("data-inboxsdk-id")===t&&(e.className&&a.classList.remove(e.className),n(o,i,a))})}}}},{key:"hideGmailMessage",value:function(){}}]),e}();r.default=_},{"../../lib/dom/make-mutation-observer-chunked-stream":862,"../../lib/dom/querySelectorOrFail":868,"../../lib/stream-wait-for":901,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],795:[function(e,t,r){(function(n){(function(){"use strict";function o(e,t){var r=void 0!==b&&e[v]||e["@@iterator"];if(!r){if(_(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?h(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){var r=u(e);if(c){var n=c(e);t&&(n=n.filter(function(t){return d(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){(0,A.default)(e,t,r[t])}):f?p(e,f(r)):s(Object(r)).forEach(function(t){m(e,t,d(r,t))})}return e}var u=e("@babel/runtime-corejs2/core-js/object/keys"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),f=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),p=e("@babel/runtime-corejs2/core-js/object/define-properties"),m=e("@babel/runtime-corejs2/core-js/object/define-property"),h=e("@babel/runtime-corejs2/core-js/array/from"),b=e("@babel/runtime-corejs2/core-js/symbol"),v=e("@babel/runtime-corejs2/core-js/symbol/iterator"),_=e("@babel/runtime-corejs2/core-js/array/is-array"),g=e("@babel/runtime-corejs2/helpers/interopRequireDefault");m(r,"__esModule",{value:!0}),r.default=void 0;var y=g(e("@babel/runtime-corejs2/regenerator")),w=g(e("@babel/runtime-corejs2/core-js/weak-map")),j=g(e("@babel/runtime-corejs2/core-js/set")),k=g(e("@babel/runtime-corejs2/core-js/object/assign")),x=g(e("@babel/runtime-corejs2/core-js/array/from")),E=g(e("@babel/runtime-corejs2/core-js/promise")),S=g(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),C=g(e("@babel/runtime-corejs2/helpers/classCallCheck")),I=g(e("@babel/runtime-corejs2/helpers/createClass")),A=g(e("@babel/runtime-corejs2/helpers/defineProperty")),T=g(e("lodash/once")),D=(g(e("lodash/constant")),g(e("lodash/includes"))),M=(g(e("auto-html")),g(e("kefir"))),R=g(e("kefir-bus")),O=g(e("kefir-stopper")),P=e("ud"),L=g(e("live-set")),V=(g(e("live-set/filter")),g(e("live-set/merge"))),N=g(e("live-set/flatMap")),B=g(e("live-set/mapWithRemoval")),q=g(e("live-set/toValueObservable")),U=g(e("./makePageParserTree")),F=(g(e("../../lib/logger")),g(e("../../lib/toItemWithLifetimeStream"))),H=e("../../lib/inject-script"),z=g(e("../../lib/from-event-target-capture")),W=g(e("bimapcache")),G=g(e("./getInboxMessageIdForInboxThreadId")),K=g(e("../../driver-common/getGmailMessageIdForSyncMessageId")),$=g(e("../../driver-common/getThreadIdFromMessageId")),J=g(e("../../driver-common/gmailAjax")),Y=g(e("../../driver-common/getAccountUrlPart")),Q=g(e("../../lib/dom/simulate-key")),Z=g(e("../../lib/dom/set-css")),X=g(e("../../lib/dom/querySelectorOrFail")),ee=g(e("./custom-style")),te=(g(e("../../../common/censorHTMLstring")),
g(e("../../../common/censorHTMLtree"))),re=g(e("./getComposeViewDriverLiveSet")),ne=g(e("./addNavItem")),oe=g(e("../../lib/dom/querySelectorOne")),ie=g(e("../../lib/idMap")),ae=g(e("../../lib/dom/make-mutation-observer-chunked-stream")),se=g(e("./getSidebarClassnames")),le=g(e("./inbox-butter-bar-driver")),ue=g(e("./createLink")),ce=g(e("./gotoView")),de=g(e("./detection/thread/parser")),fe=g(e("./detection/thread-row/parser")),pe=g(e("./detection/message/parser")),me=g(e("./detection/attachmentCard/parser")),he=g(e("./detection/attachmentOverlay/parser")),be=g(e("./detection/nativeDrawer/parser")),ve=g(e("./detection/searchBar/parser")),_e=g(e("./detection/chatSidebar/parser")),ge=g(e("./detection/appToolbarLocation/parser")),ye=g(e("./setupRouteViewDriverStream")),we=g(e("./views/inbox-thread-view")),je=g(e("./views/inbox-thread-row-view")),ke=g(e("./views/inbox-message-view")),xe=g(e("./views/inbox-attachment-card-view")),Ee=g(e("./views/inbox-attachment-overlay-view")),Se=g(e("./views/inbox-chat-sidebar-view")),Ce=g(e("./views/InboxToolbarView")),Ie=g(e("./views/InboxMoleViewDriver")),Ae=g(e("./views/inbox-app-sidebar-view")),Te=g(e("./registerSearchSuggestionsProvider")),De=g(e("./views/inbox-app-toolbar-button-view")),Me=g(e("./inbox-page-communicator")),Re=g(e("./views/inbox-modal-view")),Oe=g(e("./views/inbox-drawer-view")),Pe=g(e("./views/inbox-backdrop")),Le=function(){function e(t,r,o,i,a,s){var l=this;(0,C.default)(this,e),(0,A.default)(this,"_appId",void 0),(0,A.default)(this,"_logger",void 0),(0,A.default)(this,"_opts",void 0),(0,A.default)(this,"_envData",void 0),(0,A.default)(this,"_stopper",void 0),(0,A.default)(this,"onready",void 0),(0,A.default)(this,"_page",void 0),(0,A.default)(this,"_routeViewDriverStream",void 0),(0,A.default)(this,"_rowListViewDriverStream",void 0),(0,A.default)(this,"_composeViewDriverLiveSet",void 0),(0,A.default)(this,"_threadRowViewDriverLiveSet",void 0),(0,A.default)(this,"_threadViewDriverLiveSet",void 0),(0,A.default)(this,"_messageViewDriverLiveSet",void 0),(0,A.default)(this,"_attachmentCardViewDriverLiveSet",void 0),(0,A.default)(this,"_attachmentOverlayViewDriverLiveSet",void 0),(0,A.default)(this,"_chatSidebarViewLiveSet",void 0),(0,A.default)(this,"_toolbarViewDriverLiveSet",void 0),(0,A.default)(this,"_currentRouteViewDriver",void 0),(0,A.default)(this,"_threadViewElements",new w.default),(0,A.default)(this,"_messageViewElements",new w.default),(0,A.default)(this,"_butterBarDriver",new le.default),(0,A.default)(this,"_butterBar",void 0),(0,A.default)(this,"_pageCommunicator",void 0),(0,A.default)(this,"_lastInteractedAttachmentCardView",null),(0,A.default)(this,"_lastInteractedAttachmentCardViewSet",(0,R.default)()),(0,A.default)(this,"_appSidebarView",null),(0,A.default)(this,"_customRouteIDs",new j.default),(0,A.default)(this,"_navMenuContainer",void 0),(0,A.default)(this,"_threadIdStats",void 0),(0,A.default)(this,"getGmailMessageIdForSyncMessageId",void 0),(0,A.default)(this,"getInboxMessageIdForInboxThreadId",void 0),(0,A.default)(this,"getThreadIdFromMessageId",void 0),(0,A.default)(this,"getGmailActionToken",(0,T.default)((0,S.default)(y.default.mark(function e(){var t,r;return y.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.default)({url:"https://mail.google.com/mail".concat((0,Y.default)(),"/"),xhrFields:{withCredentials:!0},canRetry:!0});case 2:if(t=e.sent,r=t.text.match(/var GM_ACTION_TOKEN=("[^"]+")/)){e.next=6;break}throw new Error("Could not find GM_ACTION_TOKEN");case 6:return e.abrupt("return",JSON.parse(r[1]));case 7:case"end":return e.stop()}},e)})))),(0,ee.default)(),this._appId=t,this._logger=i,this._opts=a,this._envData=s,this._stopper=(0,O.default)(),this._pageCommunicator=new Me.default,this._page=(0,U.default)(this,document),this._stopper.onValue(function(){return l._page.dump()}),this.onready=(0,H.injectScript)().then(function(){l._logger.setUserEmailAddress(l.getUserEmailAddress())}),this._setupThreadIdStats(),n.localStorage&&n.localStorage.removeItem("inboxsdk__cached_gmail_and_inbox_message_ids");var u=new W.default({key:"inboxsdk__cached_gmail_and_inbox_message_ids_2",getAfromB:function(e){return(0,K.default)(l,e)},getBfromA:function(){throw new Error("should not happen")}});this.getGmailMessageIdForSyncMessageId=function(e){return u.getAfromB(e)};var c=new W.default({key:"inboxsdk__cached_inbox_message_and_inbox_thread_ids",getAfromB:function(e){return l._threadIdStats.threadRows.threadsWithFetch+=1,(0,G.default)(l,e)},getBfromA:function(){throw new Error("should not happen")}});this.getInboxMessageIdForInboxThreadId=function(e){return c.getAfromB(e)};var d=new W.default({key:"inboxsdk__cached_thread_and_message_ids",getAfromB:function(e){return(0,$.default)(l,e)},getBfromA:function(){throw new Error("should not happen")}});this.getThreadIdFromMessageId=function(e){return d.getAfromB(e)},this._threadRowViewDriverLiveSet=(0,B.default)(this._page.tree.getAllByTag("collapsedThreadRow"),function(e,t){var r=e.getValue(),n=(0,fe.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (threadRow)"),{score:n.score,errors:n.errors,html:(0,te.default)(r)});var o=new je.default(r,l,n);return t.then(function(){o.destroy()}),o}),this._threadViewDriverLiveSet=(0,N.default)(this._page.tree.getAllByTag("thread"),function(e){var t=e.getValue(),r=(0,de.default)(t);return r.errors.length&&l._logger.errorSite(new Error("parse errors (thread)"),{score:r.score,errors:r.errors,html:(0,te.default)(t)}),new L.default({read:function(){throw new Error},listen:function(e,n){e(new j.default);var o=(0,O.default)();return function e(i){i||(r=(0,de.default)(t),r.errors.length>0&&l._logger.errorSite(new Error("thread reparse errors"),{score:r.score,errors:r.errors,html:(0,te.default)(t)}));var a=new we.default(t,l,r);a.getStopper().takeUntilBy(o).onValue(function(){n.remove(a),e(!1)}),o.takeUntilBy(a.getStopper()).onValue(function(){a.destroy()}),n.add(a)}(!0),function(){o.destroy()}}})}),this._messageViewDriverLiveSet=(0,N.default)(this._page.tree.getAllByTag("message"),function(e){var t=e.getValue(),r=(0,pe.default)(t);return r.errors.length>0&&l._logger.errorSite(new Error("parse errors (message)"),{score:r.score,errors:r.errors,html:(0,te.default)(t)}),r.attributes.isDraft?L.default.constant(new j.default):new L.default({read:function(){throw new Error},listen:function(e,n){e(new j.default);var o=(0,O.default)();return function e(i){i||(r=(0,pe.default)(t),r.errors.length>0&&l._logger.errorSite(new Error("message reparse errors"),{score:r.score,errors:r.errors,html:(0,te.default)(t)}));var a=new ke.default(t,l,r);a.getStopper().takeUntilBy(o).onValue(function(){n.remove(a),e(!1)}),o.takeUntilBy(a.getStopper()).onValue(function(){a.destroy()}),n.add(a)}(!0),function(){o.destroy()}}})}),this._attachmentCardViewDriverLiveSet=(0,B.default)(this._page.tree.getAllByTag("attachmentCard"),function(e,t){var r=e.getValue(),n=(0,me.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (attachmentCard)"),{score:n.score,errors:n.errors,html:(0,te.default)(r)});var o=new xe.default({element:r,parsed:n},l);return t.then(function(){o.destroy()}),o}),this._attachmentOverlayViewDriverLiveSet=(0,N.default)(this._page.tree.getAllByTag("attachmentOverlay"),function(e){var t=e.getValue(),r=(0,he.default)(t);r.errors.length&&l._logger.errorSite(new Error("parse errors (attachmentOverlay)"),{score:r.score,errors:r.errors,html:(0,te.default)(t)});var n=l.getLastInteractedAttachmentCardView();return n?new L.default({read:function(){throw new Error},listen:function(e){var o=new Ee.default(l,t,r,n);return e(new j.default([o])),function(){o.destroy()}}}):(l._logger.error(new Error("Encountered overlay without knowing cardView")),L.default.constant(new j.default))}),this._attachmentOverlayViewDriverLiveSet.subscribe({}),this._composeViewDriverLiveSet=(0,re.default)(this,this._page.tree),this._chatSidebarViewLiveSet=(0,B.default)(this._page.tree.getAllByTag("chatSidebar"),function(e,t){var r=e.getValue(),n=(0,_e.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (chatSidebar)"),{score:n.score,errors:n.errors,html:(0,te.default)(r)});var o=new Se.default(r,n);return t.then(function(){o.destroy()}),o}),this._chatSidebarViewLiveSet.subscribe({}),this._routeViewDriverStream=(0,ye.default)(this),this._routeViewDriverStream.takeUntilBy(this._stopper).onValue(function(e){l._currentRouteViewDriver=e}),this._rowListViewDriverStream=M.default.never(),M.default.later(3e4).takeUntilBy((0,F.default)(this._page.tree.getAllByTag("appToolbarLocation"))).onValue(function(){l._logger.errorSite(new Error("Failed to find appToolbarLocation"))}),(0,q.default)(this._page.tree.getAllByTag("searchBar")).subscribe(function(e){var t=e.value,r=t.getValue(),n=(0,ve.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (searchBar)"),{score:n.score,errors:n.errors,html:(0,te.default)(r)})}),M.default.later(3e4).takeUntilBy((0,F.default)(this._page.tree.getAllByTag("searchBar"))).onValue(function(){l._logger.errorSite(new Error("Failed to find searchBar"))}),(0,q.default)(this._page.tree.getAllByTag("nativeDrawer")).subscribe(function(e){var t=e.value,r=t.getValue(),n=(0,be.default)(r);n.errors.length&&l._logger.errorSite(new Error("parse errors (nativeDrawer)"),{score:n.score,errors:n.errors,html:(0,te.default)(r)})});var f=null;this._threadViewDriverLiveSet.subscribe(function(e){e.forEach(function(e){if("add"===e.type){var t=e.value;f&&f.removePanels(),f=t}})}),this._toolbarViewDriverLiveSet=(0,V.default)([(0,B.default)(this._page.tree.getAllByTag("listToolBar"),function(e,t){var r=e.getValue(),n=new Ce.default(r,l,null);return t.then(function(){n.destroy()}),n}),(0,B.default)(this._threadViewDriverLiveSet,function(e,t){var r=e.getToolbarElement(),n=new Ce.default(r,l,e);return t.then(function(){n.destroy()}),n})])}return(0,I.default)(e,[{key:"_setupThreadIdStats",value:function(){var e=this;this._resetThreadIdStats(),setInterval(function(){if(0!==e._threadIdStats.threadRows.totalCalls){var t=e._threadIdStats.threadRows,r={};r.threadRows=(0,k.default)({},t,{totalThreads:t.totalThreads.size,threadsWithoutGmailId:t.threadsWithoutGmailId.size}),e._logger.eventSdkPassive("inboxThreadIdStats",r),e._resetThreadIdStats()}},36e5)}},{key:"_resetThreadIdStats",value:function(){this._threadIdStats={threadRows:{totalThreads:new j.default,totalCalls:0,threadsWithoutGmailId:new j.default,callsWithoutGmailId:0,threadsWithFetch:0}}}},{key:"trackThreadRowIdCall",value:function(e,t){this._threadIdStats.threadRows.totalCalls+=1,this._threadIdStats.threadRows.totalThreads.add(t),e||(this._threadIdStats.threadRows.callsWithoutGmailId+=1,this._threadIdStats.threadRows.threadsWithoutGmailId.add(t))}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getAppId",value:function(){return this._appId}},{key:"getOpts",value:function(){return this._opts}},{key:"getLogger",value:function(){return this._logger}},{key:"getStopper",value:function(){return this._stopper}},{key:"getRouteViewDriverStream",value:function(){return this._routeViewDriverStream}},{key:"getCurrentRouteViewDriver",value:function(){return this._currentRouteViewDriver}},{key:"getRowListViewDriverStream",value:function(){return M.default.never()}},{key:"getComposeViewDriverLiveSet",value:function(){return this._composeViewDriverLiveSet}},{key:"getComposeViewDriverStream",value:function(){return(0,F.default)(this._composeViewDriverLiveSet).map(function(e){return e.el})}},{key:"getThreadRowViewDriverLiveSet",value:function(){return this._threadRowViewDriverLiveSet}},{key:"getThreadRowViewDriverStream",value:function(){return(0,F.default)(this._threadRowViewDriverLiveSet).map(function(e){return e.el})}},{key:"getThreadViewDriverStream",value:function(){return(0,F.default)(this._threadViewDriverLiveSet).map(function(e){return e.el})}},{key:"getMessageViewDriverStream",value:function(){return(0,F.default)(this._messageViewDriverLiveSet).map(function(e){return e.el})}},{key:"getAttachmentCardViewDriverStream",value:function(){return(0,F.default)(this._attachmentCardViewDriverLiveSet).map(function(e){return e.el})}},{key:"getButterBarDriver",value:function(){return this._butterBarDriver}},{key:"getButterBar",value:function(){return this._butterBar}},{key:"setButterBar",value:function(e){this._butterBar=e}},{key:"getPageCommunicator",value:function(){return this._pageCommunicator}},{key:"getThreadViewElementsMap",value:function(){return this._threadViewElements}},{key:"getMessageViewElementsMap",value:function(){return this._messageViewElements}},{key:"getTagTree",value:function(){return this._page.tree}},{key:"getCustomRouteIDs",value:function(){return this._customRouteIDs}},{key:"getCurrentChatSidebarView",value:function(){var e=(0,x.default)(this._chatSidebarViewLiveSet.values())[0];if(!e)throw new Error("No chat sidebar found");return e}},{key:"getAppSidebarView",value:function(){return this._appSidebarView||(this._appSidebarView=new Ae.default(this)),this._appSidebarView}},{key:"getChatSidebarButton",value:function(){var e=(0,x.default)(this._page.tree.getAllByTag("appToolbarLocation").values())[0],t=e?(0,ge.default)(e.getValue()):null,r=t?t.elements.chatSidebarButton:null;if(!r)throw new Error("No chat sidebar button found");return r}},{key:"getLastInteractedAttachmentCardView",value:function(){return this._lastInteractedAttachmentCardView}},{key:"setLastInteractedAttachmentCardView",value:function(e){var t=this;this._lastInteractedAttachmentCardViewSet.emit(),this._lastInteractedAttachmentCardView=e,e&&e.getStopper().merge((0,z.default)(document.body,"click")).take(1).takeUntilBy(this._lastInteractedAttachmentCardViewSet).takeUntilBy(this._stopper).onValue(function(){t._lastInteractedAttachmentCardView=null})}},{key:"openNewComposeViewDriver",value:function(){var e=this.getNextComposeViewDriver();return(0,oe.default)(document.body,'nav[role=banner] ~ div[aria-expanded] button:not([tabindex="-1"])').click(),e}},{key:"getNextComposeViewDriver",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return M.default.stream(function(t){var r=e._composeViewDriverLiveSet.subscribe({next:function(e){var r=e.filter(function(e){return"add"===e.type})[0];if(r){if("add"!==r.type)throw new Error("should not happen");t.value(r.value)}},complete:t.end});return function(){return r.unsubscribe()}}).merge(M.default.later(t,new Error("Reached timeout while waiting for getNextComposeViewDriver"))).beforeEnd(function(){return new Error("Driver was shut down before a new compose was found")}).flatMap(function(e){return e instanceof Error?M.default.constantError(e):M.default.constant(e)}).take(1).takeErrors(1).toPromise()}},{key:"activateShortcut",value:function(e,t,r){console.warn("activateShortcut not implemented")}},{key:"getUserEmailAddress",value:function(){var e=document.head.getAttribute("data-inboxsdk-user-email-address");if(null==e)throw new Error("should not happen");return e}},{key:"isConversationViewDisabled",value:function(){return E.default.resolve(!1)}},{key:"getUserLanguage",value:function(){return this._pageCommunicator.getUserLanguage()}},{key:"getUserContact",value:function(){return{emailAddress:this.getUserEmailAddress(),name:this.getUserEmailAddress()}}},{key:"getAccountSwitcherContactList",value:function(){return console.log("getAccountSwitcherContactList not implemented"),[this.getUserContact()]}},{key:"registerThreadButton",value:function(e){var t=this,r=(0,O.default)(),n=function(e){r.takeUntilBy(e.getStopper()).onValue(function(){e.destroy()})},o=(0,q.default)(this._toolbarViewDriverLiveSet).subscribe(function(r){var o=r.value;if(o.isForThread()){if(!e.positions||(0,D.default)(e.positions,"THREAD")){if("OTHER"===e.threadSection)return void console.warn("registerThreadButton does not support OTHER section items in Inbox yet.");n(o.addButton(l(l({},e),{},{onClick:function(t){e.onClick({position:"THREAD",dropdown:t.dropdown,selectedThreadViewDrivers:[o.getThreadViewDriver()],selectedThreadRowViewDrivers:[]})}})))}}else if(o.isForRowList()&&(!e.positions||(0,D.default)(e.positions,"LIST"))){if("OTHER"===e.listSection)return void console.warn("registerThreadButton does not support OTHER section items in Inbox yet.");n(o.addButton(l(l({},e),{},{onClick:function(r){e.onClick({position:"LIST",dropdown:r.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:t.getSelectedThreadRowViewDrivers()})}})))}});if(r.onValue(function(){o.unsubscribe()}),!e.positions||(0,D.default)(e.positions,"ROW")){var i=(0,q.default)(this._threadRowViewDriverLiveSet).subscribe(function(t){var r=t.value;n(r.addToolbarButton(l(l({},e),{},{onClick:function(t){e.onClick({position:"ROW",dropdown:t.dropdown,selectedThreadViewDrivers:[],selectedThreadRowViewDrivers:[r]})}})))});r.onValue(function(){i.unsubscribe()})}return function(){r.destroy()}}},{key:"getSelectedThreadRowViewDrivers",value:function(){return(0,x.default)(this.getThreadRowViewDriverLiveSet().values()).filter(function(e){return e.isSelected()})}},{key:"addNavItem",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,S.default)(y.default.mark(function e(t,r){return y.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._navMenuContainer||(this._navMenuContainer=document.createElement("div"),this._navMenuContainer.classList.add("inboxsdk__navItem_appContainer")),e.abrupt("return",(0,ne.default)(r,this._page.tree.getAllByTag("leftNav"),this._navMenuContainer));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"addSupportItem",value:function(e){}},{key:"getSentMailNativeNavItem",value:function(){return new E.default(function(e,t){})}},{key:"createLink",value:function(e,t){return(0,ue.default)(this,e,t)}},{key:"goto",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,S.default)(y.default.mark(function e(t,r){return y.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,ce.default)(this,t,r);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"addCustomRouteID",value:function(e){var t=this;return this._customRouteIDs.add(e),this._pageCommunicator.registerAllowedHashLinkStartTerm(e.split("/")[0]),function(){t._customRouteIDs.delete(e)}}},{key:"addCustomListRouteID",value:function(e,t){return console.log("addCustomListRouteID not implemented"),function(){}}},{key:"showCustomRouteView",value:function(e){var t=document.querySelector("body > .inboxsdk__custom_view");if(!t){var r=t=document.createElement("div");t.className="inboxsdk__custom_view";var n=(0,se.default)(),o=n.chat,i=n.nav;(0,Z.default)("custom_view_base_margins","\n        .inboxsdk__custom_view.".concat(i||"nav_sidebar"," >\n        .").concat((0,ie.default)("custom_view_container"),".").concat((0,ie.default)("custom_view_min_margins")," {\n          margin-left: 232px;\n        }\n        .inboxsdk__custom_view.").concat(o||"chat_sidebar"," >\n        .").concat((0,ie.default)("custom_view_container"),".").concat((0,ie.default)("custom_view_min_margins")," {\n          margin-right: 232px;\n        }\n      "));var a=(0,X.default)(document,"body > div[class][id][jsaction][jslog]");(0,ae.default)(a,{attributes:!0,attributeFilter:["class"]}).toProperty(function(){return null}).onValue(function(){[o,i].filter(Boolean).forEach(function(e){a.classList.contains(e)?r.classList.add(e):r.classList.remove(e)})}),document.body.appendChild(t)}t.innerHTML="",t.appendChild(e),t.style.display="",document.body.classList.add("inboxsdk__custom_view_active");var s=document.querySelector("[id][jsaction] > div[token][class]");s&&(s.style.display="none")}},{key:"showNativeRouteView",value:function(){document.body.classList.remove("inboxsdk__custom_view_active");var e=document.querySelector("body > .inboxsdk__custom_view");e&&(e.style.display="none",e.innerHTML="");var t=document.querySelector("[id][jsaction] > div[token][class]");t&&(t.style.display="")}},{key:"setShowNativeNavMarker",value:function(e){}},{key:"setShowNativeAddonSidebar",value:function(e){}},{key:"registerSearchSuggestionsProvider",value:function(e){(0,Te.default)(this,e)}},{key:"registerSearchQueryRewriter",value:function(e){console.log("registerSearchQueryRewriter not implemented")}},{key:"addToolbarButtonForApp",value:function(e){return new De.default(e,this._page.tree.getAllByTag("appToolbarLocation"),this._page.tree.getAllByTag("searchBar")).waitForReady()}},{key:"addGlobalSidebarContentPanel",value:function(e){return E.default.resolve(null)}},{key:"isRunningInPageContext",value:function(){return!(!n.gbar||!n.gbar._CONFIG)}},{key:"showAppIdWarning",value:function(){var e=document.createElement("div");e.className="inboxsdk__appid_warning",e.innerHTML='\n  <button type="button" value="" title="Close" class="inboxsdk__close_button"></button>\n  <div class="inboxsdk__appid_warning_main">\n    <div class="topline">InboxSDK Developer Warning: Invalid AppId</div>\n    <div>You\'ve loaded the InboxSDK with an unregistered appId. Registration is free but necessary to load the SDK.</div>\n  </div>\n  <a class="inboxsdk__appid_register" target="_blank" href="https://www.inboxsdk.com/register">Register Your App</a>\n  ',document.body.insertBefore(e,document.body.firstChild);var t=e.querySelector(".inboxsdk__close_button");if(!t)throw new Error("Should not happen");t.addEventListener("click",function(t){e.remove()})}},{key:"openDraftByMessageID",value:function(e){throw new Error("Not implemented")}},{key:"createMoleViewDriver",value:function(e){return new Ie.default(e,this)}},{key:"createModalViewDriver",value:function(e){return new Re.default(e)}},{key:"createTopMessageBarDriver",value:function(e){throw new Error("Not implemented")}},{key:"createDrawerViewDriver",value:function(e){var t=new Oe.default(e);return M.default.fromESObservable(this._page.tree.getAllByTag("nativeDrawer")).takeUntilBy(t.getClosingStream()).onValue(function(e){var r,n=o(e);try{for(n.s();!(r=n.n()).done;){if("add"===r.value.type){t.close();break}}}catch(e){n.e(e)}finally{n.f()}}),t}},{key:"createBackdrop",value:function(e,t){return new Pe.default(e,t)}},{key:"closeOpenThread",value:function(){(0,Q.default)(document.body,27,27)}},{key:"registerThreadRowViewSelectionHandler",value:function(e){return function(){}}}]),e}(),Ve=(0,P.defn)(t,Le);r.default=Ve}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/censorHTMLstring":636,"../../../common/censorHTMLtree":637,"../../driver-common/getAccountUrlPart":830,"../../driver-common/getGmailMessageIdForSyncMessageId":831,"../../driver-common/getThreadIdFromMessageId":835,"../../driver-common/gmailAjax":836,"../../lib/dom/make-mutation-observer-chunked-stream":862,"../../lib/dom/querySelectorOne":867,"../../lib/dom/querySelectorOrFail":868,"../../lib/dom/set-css":870,"../../lib/dom/simulate-key":873,"../../lib/from-event-target-capture":878,"../../lib/idMap":882,"../../lib/inject-script":885,"../../lib/logger":891,"../../lib/toItemWithLifetimeStream":902,"./addNavItem":776,"./createLink":778,"./custom-style":779,"./detection/appToolbarLocation/parser":780,"./detection/attachmentCard/parser":781,"./detection/attachmentOverlay/parser":782,"./detection/chatSidebar/parser":783,"./detection/message/parser":785,"./detection/nativeDrawer/parser":786,"./detection/searchBar/parser":787,"./detection/thread-row/parser":788,"./detection/thread/parser":789,"./getComposeViewDriverLiveSet":790,"./getInboxMessageIdForInboxThreadId":791,"./getSidebarClassnames":792,"./gotoView":793,"./inbox-butter-bar-driver":794,"./inbox-page-communicator":796,"./makePageParserTree":798,"./registerSearchSuggestionsProvider":800,"./setupRouteViewDriverStream":802,"./views/InboxMoleViewDriver":804,"./views/InboxToolbarView":806,"./views/inbox-app-sidebar-view":807,"./views/inbox-app-toolbar-button-view":808,"./views/inbox-attachment-card-view":810,"./views/inbox-attachment-overlay-view":811,"./views/inbox-backdrop":812,"./views/inbox-chat-sidebar-view":813,"./views/inbox-drawer-view":817,"./views/inbox-message-view":820,"./views/inbox-modal-view":821,"./views/inbox-thread-row-view":823,"./views/inbox-thread-view":824,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,"auto-html":89,bimapcache:100,kefir:327,"kefir-bus":324,"kefir-stopper":326,"live-set":332,"live-set/filter":329,"live-set/flatMap":330,"live-set/mapWithRemoval":333,"live-set/merge":334,"live-set/toValueObservable":335,"lodash/constant":477,"lodash/includes":493,"lodash/once":516,ud:625}],796:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/core-js/object/assign")),u=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=s(e("@babel/runtime-corejs2/helpers/createClass")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("kefir")),h=s(e("../../lib/common-page-communicator")),b=function(e){function t(){return(0,u.default)(this,t),r.apply(this,arguments)}(0,d.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"getDraftIDForComposeView",value:function(e){e.hasAttribute("data-inboxsdk-draft-id")||e.dispatchEvent(new CustomEvent("inboxSDKgetDraftIDforComposeView",{bubbles:!0,cancelable:!1,detail:null}));var t=e.getAttribute("data-inboxsdk-draft-id");if(!t)throw new Error("could not find draft ID");return t}},{key:"notifyEmailSending",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKcomposeViewIsSending",{bubbles:!1,cancelable:!1,detail:null}))}},{key:"notifyEmailSendCanceled",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKcomposeViewSendCanceled",{bubbles:!1,cancelable:!1,detail:null}))}},{key:"clickAndGetNewIframeSrc",value:function(e){var t=m.default.fromEvents(e,"inboxSDKclickAndGetNewIframeSrcResult").take(1).flatMap(function(e){var t=e.detail;return"success"===t.type?m.default.constant(t.src):m.default.constantError((0,l.default)(new Error(t.message),{stack:t.stack}))}).toPromise();return e.dispatchEvent(new CustomEvent("inboxSDKclickAndGetNewIframeSrc",{bubbles:!0,cancelable:!1,detail:null})),t}},{key:"fakeWindowResize",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKinboxFakeWindowResize",{bubbles:!1,cancelable:!1,detail:null}))}}]),t}(h.default);r.default=b},{"../../lib/common-page-communicator":847,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327}],797:[function(e,t,r){"use strict";function n(e){var t=JSON.parse(e),r=t&&t[2]&&t[2][0]&&t[2][0][3];if(!r)throw new Error("Failed to process thread response");return r.map(function(e){return e[1]}).filter(Boolean)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.extractMessageIdsFromThreadResponse=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],798:[function(e,t,r){"use strict";function n(e,t){var r=a(e);if(s){var n=s(e);t&&(n=n.filter(function(t){return l(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,p.default)(e,t,r[t])}):u?c(e,u(r)):n(Object(r)).forEach(function(t){d(e,t,l(r,t))})}return e}function i(e,t){function r(e){return n?o(o({},e),{},{logError:function(e,t){var r={el:t,html:t?(0,v.default)(t):null};n.getLogger().errorSite(e,r)}}):e}var n=e,i=new m.default(t,r(b.default));return _.changes().onValue(function(e){console.log("replacing PageParserTree options"),i.replaceOptions(r(e))}),i}var a=e("@babel/runtime-corejs2/core-js/object/keys"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),c=e("@babel/runtime-corejs2/core-js/object/define-properties"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=i;var p=f(e("@babel/runtime-corejs2/helpers/defineProperty")),m=f(e("page-parser-tree")),h=f(e("ud-kefir")),b=f(e("./pageParserOptions")),v=f(e("../../../common/censorHTMLtree")),_=(0,h.default)(t,b.default)},{"../../../common/censorHTMLtree":637,"./pageParserOptions":799,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"page-parser-tree":543,"ud-kefir":624}],799:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("../../lib/logger")),a=o(e("../../../common/censorHTMLtree")),s=o(e("transducers.js")),l=o(e("lodash/find")),u=o(e("lodash/uniq")),c=o(e("closest-ng")),d={tags:{message:{ownedBy:["thread"]},attachmentCard:{ownedBy:["message","threadRow","bundleRow"]},inlineCompose:{ownedBy:["thread"]}},finders:{leftNav:{interval:function(e,t){return 0===e&&t<6e4?300:12e4},fn:function(e){return e.querySelectorAll("nav[aria-hidden]:not([role]) div[role=menu]")}},thread:{fn:function(e){return e.querySelectorAll('div[aria-expanded=true][data-item-id*="thread-"], div.scroll-list-item-open[data-item-id*="thread-"]')}},message:{fn:function(e){return e.querySelectorAll('div[role=listitem][aria-expanded][data-msg-id*="msg-"]')}},attachmentCard:{fn:function(e){
return e.querySelectorAll('\n          div[data-msg-id] section > div > div[tabindex][title],\n          div[jsaction*="update_chip_carousel_arrows"] div[role=listitem][tabindex][jsaction]\n        ')}},attachmentOverlay:{fn:function(){var e=s.default.compose(s.default.filter(function(e){return"none"!==e.style.display}),s.default.mapcat(function(e){return Array.prototype.slice.call(e.contentDocument.querySelectorAll("div[role=dialog]:not([aria-hidden=true])"))}));return function(t){return s.default.toArray(Array.prototype.slice.call(t.querySelectorAll("iframe[frameborder]:not([src])")),e)}}()},nativeDrawer:{fn:function(e){var t=e.querySelector('div[jsaction="global.exit_full_screen"] div[role=dialog][aria-busy=true] div[role=link][jsaction$=".open_local_file_picker"]');if(t){var r=(0,c.default)(t,"[role=dialog]");if(r)return[r]}return[]}},searchBar:{interval:function(e,t){return 0===e&&t<6e4?300:12e4},fn:function(e){return e.querySelectorAll('nav[role=banner] div[jsaction*="scroll_to_top"] > :last-child > div:empty + div:not(:empty)')}},searchAutocompleteResults:{fn:function(e){return e.querySelectorAll('div[jsaction*="clickonly:global.empty_space_click"] div[role=listbox] ul:last-of-type')}},chatSidebar:{interval:function(e){return 0===e?5e3:12e4},fn:function(e){return[e.querySelector("#in")].filter(Boolean)}},appToolbarLocation:{interval:function(e,t){return 0===e&&t<6e4?300:12e4},fn:function(e){var t=e.querySelector('div[role=button][jsaction*="global.toggle_chat_roster"]'),r=t?t.parentElement.parentElement.parentElement:null;return r?[r]:[]}},inlineCompose:{fn:function(e){var t=Array.prototype.filter.call(e.querySelectorAll('div[role=main] div[role=list] div[role=listitem] div[jsvs] button[jsaction$=".quick_compose_popout_mole"]'),function(e){return"none"!==e.style.display}).map(function(e){return(0,c.default)(e,"[jsvs]")}),r=Array.prototype.map.call(e.querySelectorAll('div[role=main] div[role=list] ~ div div[jsvs] div[role=textbox][contenteditable=true][tabindex="0"], div[role=main] div[role=listitem][aria-multiselectable] div[jsvs] div[role=textbox][contenteditable=true][tabindex="0"]'),function(e){return(0,c.default)(e,"[jsvs]")});return(0,u.default)(t.concat(r))}},regularCompose:{fn:function(e){return Array.prototype.filter.call(e.querySelectorAll("div[role=dialog]:not(.inboxsdk__mole_view)"),function(e){return e.querySelector('div[jsaction^="compose"][jsaction$=".focus_mole"]')&&!(0,c.default)(e,'div[tabindex][jsaction*="exit_full_screen"]')})}},fullscreenCompose:{fn:function(e){return Array.prototype.filter.call(e.querySelectorAll('div[tabindex][jsaction*="exit_full_screen"] div[role=dialog]'),function(e){return e.querySelector('div[jsaction^="compose"][jsaction$=".focus_mole"]')})}}},watchers:[{sources:[null],tag:"leftNav",selectors:["body","[id][jsaction]","nav[aria-hidden]:not([role])","div[role=menu]"]},{sources:[null],tag:"topRow",selectors:["body","[id][jsaction]","div[jsaction]:not([role])","*",{$or:[["[role=main]"],[":not([role])","*","[role=main]"]]},"[role=application]","[role=list]","*","*",".scroll-list-section-body","[role=listitem]"]},{sources:["topRow"],tag:"bundleRow",selectors:[{$filter:function(e){return!/thread-/.test(e.getAttribute("data-item-id")||"")}}]},{sources:["topRow"],tag:"threadRow",selectors:[{$filter:function(e){return/thread-/.test(e.getAttribute("data-item-id")||"")}}]},{sources:["bundleRow"],tag:"threadRow",selectors:[{$watch:{attributeFilter:["aria-expanded"],cond:"[aria-expanded=true]"}},"[role=list]","*",":not([id])","*","*","[role=listitem]"]},{sources:["threadRow"],tag:"collapsedThreadRow",selectors:[{$watch:{attributeFilter:["class"],cond:":not(.scroll-list-item-open), .scroll-list-item-measuring-open"}},":first-child",{$map:function(e){return e.parentElement}}]},{sources:["threadRow"],tag:"thread",selectors:[{$watch:{attributeFilter:["class"],cond:".scroll-list-item-open"}}]},{sources:["thread"],tag:"message",selectors:["*",":not([role=heading])","[role=list]","div",{$watch:{attributeFilter:["role","data-msg-id"],cond:"[role=listitem][data-msg-id]"}}]},{sources:["message"],tag:"attachmentCard",selectors:["*","*","section","*",{$filter:function(e){return"none"!==e.style.display}},"div[tabindex]",{$filter:function(e){return"none"!==e.style.display}}]},{sources:["bundleRow","threadRow"],tag:"attachmentCard",selectors:["*","[jsaction]","[role=list][jsaction]","*","div[role=listitem]",{$watch:{attributeFilter:["tabindex"],cond:"[tabindex]"}},{$filter:function(e){return"none"!==e.style.display}}]},{sources:[null],tag:"attachmentOverlay",selectors:["body","iframe[id][frameborder]:not([src])",{$map:function(e){return e.contentDocument&&e.contentDocument.body}},"div[aria-label][role=dialog]",{$watch:{attributeFilter:["aria-hidden"],cond:":not([aria-hidden=true])"}}]},{sources:[null],tag:"chatSidebar",selectors:["body","[id][jsaction]","div[id]","div[class]","div.in#in"]},{sources:[null],tag:"searchAutocompleteResults",selectors:["body","[id][jsaction]","[id][jsaction]","div[class]","div[class]","[role=listbox]","ul:last-of-type"]},{sources:["thread"],tag:"inlineCompose",selectors:["*",":not([role=heading])",":not([role=list])","*","[jsvs]",{$map:function(e){var t=(0,l.default)(e.children,function(e){return"BUTTON"===e.nodeName});if(t)return t;var r=e.querySelector('div[jsaction="global.none"] > div[role=button]');if(r)return r.parentElement;i.default.error(new Error("inline compose button not found"),{el:e,html:(0,a.default)(e)})}},{$watch:{attributeFilter:["style"],cond:function(e){return"none"!==e.style.display}}},{$map:function(e){return e.parentElement}}]},{sources:[null],tag:"regularCompose",selectors:["body","div[id][jsaction]","div[id][class]:not([role])","div[class]","div[id]","div[jstcache][class]:not([aria-hidden]):not([tabindex])",{$map:function(e){var t=e.querySelector("div[role=dialog]:not(.inboxsdk__mole_view)");return t||i.default.error(new Error("compose dialog element not found"),{html:(0,a.default)(e)}),t}}]},{sources:[null],tag:"fullscreenCompose",selectors:["body","[id][jsaction]","div[id]:not([jsaction])",'div[tabindex][jsaction*="exit_full_screen"]',"*","*","*","*","*","[role=dialog]:not(.inboxsdk__drawer_view)"]},{sources:["searchBar"],tag:"listToolBar",selectors:[{$map:function(e){return e.parentElement}},"div:empty + div:not(:empty) + div","ul[jsaction]"]}]},f=d;r.default=f},{"../../../common/censorHTMLtree":637,"../../lib/logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"closest-ng":105,"lodash/find":484,"lodash/uniq":528,"transducers.js":623}],800:[function(e,t,r){"use strict";function n(e,t){var r=a(e);if(s){var n=s(e);t&&(n=n.filter(function(t){return l(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):u?c(e,u(r)):n(Object(r)).forEach(function(t){d(e,t,l(r,t))})}return e}function i(e,t){var r=(0,w.default)(),n=A();return(0,j.default)(e.getTagTree().getAllByTag("searchBar")).flatMap(function(e){var t=e.el,r=e.removalStream,n=(0,E.default)(t.getValue()).elements.searchInput;return n instanceof HTMLInputElement?y.default.constant({searchInput:n,searchInputRemovalStream:r}):y.default.never()}).flatMap(function(t){var r=t.searchInput,n=t.searchInputRemovalStream;return(0,j.default)(e.getTagTree().getAllByTag("searchAutocompleteResults")).takeUntilBy(n).map(function(e){var t=e.el,o=e.removalStream;return{searchInput:r,searchInputRemovalStream:n,resultsEl:t.getValue(),resultsElRemovalStream:o}})}).flatMap(function(e){var t=e.searchInput,r=e.searchInputRemovalStream,n=e.resultsEl,o=e.resultsElRemovalStream,i=y.default.fromEvents(t,"input").takeUntilBy(r).takeUntilBy(o),a=y.default.fromEvents(t,"keydown").filter(function(e){var t=e.keyCode;return 13===t||9===t}).takeUntilBy(r).takeUntilBy(o);return i.map(function(e){return{event:e,searchInput:t,resultsEl:n,inputStream:i,enterAndTabPresses:a,resultsElRemovalStream:o}})}).flatMapLatest(function(r){var n=e.getPageCommunicator().ajaxInterceptStream.filter(function(e){return"searchSuggestionsReceieved"===e.type}),i=y.default.merge([r.inputStream.take(1).flatMap(function(){return n}),r.inputStream.filter(function(e){return""===e.target.value}),r.resultsElRemovalStream]).take(1);return y.default.combine([y.default.fromPromise(g.default.resolve(t(r.event.target.value))),n.take(1)]).takeUntilBy(i).map(function(e){var t=(0,b.default)(e,2),n=t[0];t[1];return o(o({},r),{},{removalStream:i,results:n})})}).takeUntilBy(r).flatMap(function(t){var r=t.resultsEl,n=t.searchInput,o=t.resultsElRemovalStream,i=t.removalStream,a=t.enterAndTabPresses,s=t.results;try{var l=(0,S.default)(e,s);return y.default.constant({resultsEl:r,searchInput:n,resultsElRemovalStream:o,removalStream:i,enterAndTabPresses:a,results:l})}catch(e){return y.default.constantError(e)}}).filter(function(e){return e.results.length>0}).onError(function(t){return e.getLogger().error(t)}).onValue(function(t){var r=t.resultsEl,o=t.searchInput,i=t.resultsElRemovalStream,a=t.removalStream,s=t.enterAndTabPresses,l=t.results;(0,C.default)({resultsEl:r,resultsElRemovalStream:i,searchInput:o});var u=D({driver:e,searchInput:o,removalStream:a,results:l,providerOrder:n});(0,x.default)(r,u),r.style.display="block",r.style.padding="6px 0",a.onValue(function(){u.remove(),(""===o.value||r.matches(":empty"))&&(r.style.display="none")}),s.takeUntilBy(a).take(1).onValue(function(){r.style.display="none"}),(0,k.default)(r,{childList:!0}).takeUntilBy(s).takeUntilBy(a).onValue(function(){r.style.display="block",u.parentElement!==r&&(0,x.default)(r,u)})}),function(){return r.destroy()}}var a=e("@babel/runtime-corejs2/core-js/object/keys"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),c=e("@babel/runtime-corejs2/core-js/object/define-properties"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=i;var p,m,h=f(e("@babel/runtime-corejs2/helpers/defineProperty")),b=f(e("@babel/runtime-corejs2/helpers/slicedToArray")),v=f(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),_=f(e("@babel/runtime-corejs2/core-js/parse-int")),g=f(e("@babel/runtime-corejs2/core-js/promise")),y=f(e("kefir")),w=(f(e("kefir-bus")),f(e("kefir-stopper"))),j=f(e("../../lib/toItemWithLifetimeStream")),k=f(e("../../lib/dom/make-mutation-observer-chunked-stream")),x=(f(e("../../lib/from-event-target-capture")),f(e("../../lib/dom/insert-element-in-order"))),E=f(e("./detection/searchBar/parser")),S=f(e("../../lib/copyAndValidateAutocompleteResults")),C=f(e("./setupCustomAutocompleteSelectionHandling")),I=f(e("auto-html")),A=function(){var e=document,t=e.documentElement;if(!t)throw new Error;var r=t.getAttribute("data-inboxsdk-search-provider-count"),n=(r?(0,_.default)(r)+1:0).toString();return t.setAttribute("data-inboxsdk-search-provider-count",n),n},T=function(e){var t=e.driver,r=e.searchInput,n=e.result;e.event;"function"==typeof n.onClick&&n.onClick(),"string"==typeof n.externalURL&&window.open(n.externalURL),n.routeName&&n.routeParams&&t.goto(n.routeName,n.routeParams),"string"==typeof n.searchTerm&&(r.value=n.searchTerm,r.dispatchEvent(new Event("input")))},D=function(e){var t=e.driver,r=e.searchInput,n=e.removalStream,o=e.results,i=e.providerOrder,a=document.createElement("div");return a.setAttribute("data-order-hint",i),a.classList.add("inboxsdk__search_suggestion_group"),o.forEach(function(e){var o=document.createElement("li"),i=e.description||e.descriptionHTML?(0,I.default)(p||(p=(0,v.default)(['\n      <span class="inboxsdk__search_suggestion_desc">\n        ',"\n      </span>\n    "])),e.description||{__html:e.descriptionHTML}):"";o.classList.add("inboxsdk__search_suggestion"),o.innerHTML=(0,I.default)(m||(m=(0,v.default)(['\n      <img src="','">\n      <span>\n        <span class="inboxsdk__search_suggestion_name" role="option">\n          ',"\n        </span>\n        ","\n      </span>\n    "])),e.iconUrl||"//www.gstatic.com/images/icons/material/system/2x/search_black_24dp.png",e.name||{__html:e.nameHTML},{__html:i}),y.default.fromEvents(o,"click").takeUntilBy(n).onValue(function(n){return T({driver:t,searchInput:r,result:e,event:n})}),a.appendChild(o)}),a}},{"../../lib/copyAndValidateAutocompleteResults":848,"../../lib/dom/insert-element-in-order":856,"../../lib/dom/make-mutation-observer-chunked-stream":862,"../../lib/from-event-target-capture":878,"../../lib/toItemWithLifetimeStream":902,"./detection/searchBar/parser":787,"./setupCustomAutocompleteSelectionHandling":801,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"auto-html":89,kefir:327,"kefir-bus":324,"kefir-stopper":326}],801:[function(e,t,r){"use strict";function n(e){var t=e.resultsEl,r=e.resultsElRemovalStream,n=e.searchInput;if(!t.hasAttribute(d)){t.setAttribute(d,"true");var o=n.parentElement;if(!o)throw new Error;var i=(0,u.default)(o,"keydown").takeUntilBy(r),a=i.filter(function(e){return 38===e.keyCode}),s=i.filter(function(e){return 40===e.keyCode}),l=i.filter(function(e){return 13===e.keyCode});a.onValue(function(e){var r=m(t),n=t.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected"),o=n&&(0,c.default)(n,".inboxsdk__search_suggestion_group");if(!r)if(n&&o&&n.matches(":first-child")&&o.matches(":first-of-type"))n.classList.remove("inboxsdk__selected");else if(p(t)&&!n){e.stopPropagation();var i=t.querySelector(".inboxsdk__search_suggestion_group:last-of-type > .inboxsdk__search_suggestion:last-child");i&&i.classList.add("inboxsdk__selected")}else if(n&&o)if(e.stopPropagation(),n.classList.remove("inboxsdk__selected"),n.matches(":first-child")){var a=o.previousElementSibling,s=a&&a.querySelector(".inboxsdk__search_suggestion:last-child");s&&s.classList.add("inboxsdk__selected")}else{var l=n.previousElementSibling;l&&l.classList.add("inboxsdk__selected")}}),s.onValue(function(e){var r=m(t),n=t.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected"),o=n&&(0,c.default)(n,".inboxsdk__search_suggestion_group");if(!r||r.matches(":last-of-type"))if(r)h(t);else if(n&&o&&n.matches(":last-child")&&o.matches(":last-of-type"))e.stopPropagation(),n.classList.remove("inboxsdk__selected");else if(n){if(n&&o)if(e.stopPropagation(),n.classList.remove("inboxsdk__selected"),n.matches(":last-child")){var i=o.nextElementSibling,a=i&&i.querySelector(".inboxsdk__search_suggestion:first-child");a&&a.classList.add("inboxsdk__selected")}else{var s=n.nextElementSibling;s&&s.classList.add("inboxsdk__selected")}}else{if(f(t))return;h(t)}}),l.onValue(function(e){var r=t.querySelector(".inboxsdk__search_suggestion.inboxsdk__selected");r&&(e.stopPropagation(),r.dispatchEvent(new MouseEvent("click")))}),i.onEnd(function(){return t.removeAttribute(d)}),b(t,r)}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/array/from")),s=i(e("@babel/runtime-corejs2/core-js/parse-float")),l=i(e("kefir")),u=i(e("../../lib/from-event-target-capture")),c=i(e("closest-ng")),d="data-inboxsdk-selection-master-claimed",f=function(e){return e.querySelectorAll("li:not(.inboxsdk__search_suggestion)").length>0},p=function(e){return e.querySelectorAll(".inboxsdk__search_suggestion").length>0},m=function(e){var t=e.querySelectorAll("li:not(.inboxsdk__search_suggestion)");return(0,a.default)(t).find(function(e){var t=getComputedStyle(e),r=t.backgroundColor,n=r.match(/([\d.]+)/g);return n&&(0,s.default)(n[3])>0})},h=function(e){var t=e.querySelector(".inboxsdk__search_suggestion_group:first-of-type > .inboxsdk__search_suggestion:first-child");t&&t.classList.add("inboxsdk__selected")},b=function(e,t){l.default.fromEvents(e,"mouseover").takeUntilBy(t).map(function(e){var t=e.target;return(0,c.default)(t,".inboxsdk__search_suggestion:not(.inboxsdk__selected)")}).filter(Boolean).onValue(function(t){var r=e.querySelectorAll(".inboxsdk__search_suggestion.inboxsdk__selected");(0,a.default)(r).forEach(function(e){return e.classList.remove("inboxsdk__selected")}),t.classList.add("inboxsdk__selected")}),l.default.fromEvents(e,"mouseout").takeUntilBy(t).map(function(e){var t=e.target;return(0,c.default)(t,".inboxsdk__search_suggestion.inboxsdk__selected")}).filter(Boolean).onValue(function(e){return e.classList.remove("inboxsdk__selected")})}},{"../../lib/from-event-target-capture":878,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-float":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"closest-ng":105,kefir:327}],802:[function(e,t,r){"use strict";function n(e,t){var r=void 0!==l&&e[u]||e["@@iterator"];if(!r){if(c(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){d=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(d)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?s(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){var t=e.getCustomRouteIDs(),r=null;return e.getStopper().onValue(function(){r&&r.destroy()}),p.default.merge([p.default.merge([p.default.fromEvents(document,"inboxSDKpushState"),p.default.fromEvents(window,"popstate")]).map(function(e){return document.location.href}),p.default.fromEvents(window,"hashchange").map(function(e){return e.newURL}).filter(function(e){return/#/.test(e)})]).toProperty(function(){return document.location.href}).map(function(e){var r=/#([^?]*)/.exec(e);if(!r)return{type:"NATIVE"};var o,i=r[1],a=n(t);try{for(a.s();!(o=a.n()).done;){var s=o.value,l=(0,b.default)(s,i);if(l)return{hash:i,type:"CUSTOM",routeID:l}}}catch(e){a.e(e)}finally{a.f()}return{type:"OTHER_APP_CUSTOM"}}).map(function(t){return"CUSTOM"===t.type?new m.default(t.routeID,t.hash):"NATIVE"===t.type?(e.showNativeRouteView(),new h.default("NATIVE")):"OTHER_APP_CUSTOM"===t.type?new h.default("OTHER_APP_CUSTOM"):(e.getLogger().error(new Error("should not happen")),new h.default("UNKNOWN"))}).map(function(e){return r&&r.destroy(),r=e,e})}var s=e("@babel/runtime-corejs2/core-js/array/from"),l=e("@babel/runtime-corejs2/core-js/symbol"),u=e("@babel/runtime-corejs2/core-js/symbol/iterator"),c=e("@babel/runtime-corejs2/core-js/array/is-array"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=a;var p=f(e("kefir")),m=(f(e("./inbox-driver")),f(e("./views/inbox-route-view")),f(e("./views/inbox-custom-route-view"))),h=f(e("./views/inbox-dummy-route-view")),b=f(e("../../lib/routeIDmatchesHash"))},{"../../lib/routeIDmatchesHash":897,"./inbox-driver":795,"./views/inbox-custom-route-view":816,"./views/inbox-dummy-route-view":819,"./views/inbox-route-view":822,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],803:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/assign")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=e("ud"),c=o(e("lodash/isEqual")),d=o(e("../../../driver-common/update-icon")),f=o(e("../../../lib/dom/querySelectorOrFail")),p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),(0,l.default)(this,"_element",void 0),(0,l.default)(this,"_labelDescriptor",void 0),(0,l.default)(this,"_iconSettings",void 0),this._element=document.createElement("div"),this._element.className="inboxsdk__inbox_thread_row_label "+(t.classes||[]).join(" "),this._element.innerHTML="<span></span>",this._labelDescriptor={},this._iconSettings={}}return(0,s.default)(e,[{key:"getElement",value:function(){return this._element}},{key:"updateLabelDescriptor",value:function(e){this._handleNewLabelDescriptor(e)}},{key:"_handleNewLabelDescriptor",value:function(e){if(!e)return void(this._labelDescriptor={});e=(0,i.default)({foregroundColor:"rgb(102, 102, 102)",backgroundColor:"rgb(221, 221, 221)"},e),(0,c.default)(this._labelDescriptor,e)||((0,d.default)(this._iconSettings,this._element,!1,e.iconClass,e.iconUrl),e.iconClass||e.iconUrl?this._element.classList.add("inboxsdk__label_has_icon"):this._element.classList.remove("inboxsdk__label_has_icon"),this._updateBackgroundColor(e.backgroundColor),this._updateForegroundColor(e.foregroundColor),this._updateIconBackgroundColor(e.iconBackgroundColor),this._updateTitle(e.title),this._labelDescriptor=e)}},{key:"_updateBackgroundColor",value:function(e){this._labelDescriptor.backgroundColor!==e&&(this._element.style.backgroundColor=e)}},{key:"_updateForegroundColor",value:function(e){this._labelDescriptor.foregroundColor!==e&&(this._element.style.color=e)}},{key:"_updateIconBackgroundColor",value:function(e){var t=this.getElement().querySelector(".inboxsdk__button_icon");t&&(t.style.backgroundColor=e||"")}},{key:"_updateTitle",value:function(e){this._labelDescriptor.title!==e&&((0,f.default)(this._element,"span").textContent=e)}}]),e}(),m=(0,u.defn)(t,p);r.default=m},{"../../../driver-common/update-icon":842,"../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/isEqual":501,ud:625}],804:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,d.default)(e);if(t){var o=(0,d.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,c.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e){return!e.classList.contains("inboxsdk__mole_view")&&e.hasAttribute("jsaction")}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/inherits")),c=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),d=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),f=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),p=l(e("@babel/runtime-corejs2/helpers/createClass")),m=l(e("@babel/runtime-corejs2/helpers/defineProperty")),h=l(e("asap")),b=e("ud"),v=l(e("lodash/find")),_=l(e("react")),g=l(e("react-dom")),y=l(e("kefir")),w=l(e("kefir-stopper")),j=l(e("../../../lib/dom/make-mutation-observer-chunked-stream")),k=l(e("../../../lib/dom/querySelectorOrFail")),x=l(e("../../../lib/from-event-target-capture")),E=l(e("../../../lib/react/ElementContainer")),S=l(e("../../../lib/dom/reemitClickEventForReact")),C=l(e("kefir-bus")),I=function(){function e(t,r){(0,f.default)(this,e),(0,m.default)(this,"_driver",void 0),(0,m.default)(this,"_options",void 0),(0,m.default)(this,"_stopper",(0,w.default)()),(0,m.default)(this,"_eventStream",(0,C.default)()),(0,m.default)(this,"_element",void 0),(0,m.default)(this,"_title",void 0),this._options=t,this._driver=r,this._element=document.createElement("div"),this._element.className="inboxsdk__mole_view "+(t.className||""),this._element.setAttribute("jsaction","global.none"),this._title=String(this._options.title||""),this._render(),this._element.firstElementChild.style.zIndex="1",y.default.fromEvents(this._element,"click").takeUntilBy(this._stopper).onValue(function(e){(0,S.default)(e)})}return(0,p.default)(e,[{key:"_render",value:function(){var e=this;g.default.render(_.default.createElement(T,{title:this._title,titleEl:this._options.titleEl,el:this._options.el,chrome:this._options.chrome,titleButtons:this._options.titleButtons,minimized:this.getMinimized(),onClose:function(){(0,h.default)(function(){e.destroy()})},onSetMinimize:function(t){return e.setMinimized(t)}}),this._element)}},{key:"show",value:function(){var e=this;if(this._element.parentElement)throw new Error("show was called twice");var t=document.getElementById("OPOhoe");if(!t){var r=new Error("could find element to insert moleview into");throw this._driver.getLogger().error(r),r}t.insertBefore(this._element,t.firstElementChild),(0,h.default)(function(){e._setupWidth()}),(0,j.default)(t,{childList:!0}).takeUntilBy(this._stopper).onValue(function(r){r.some(function(e){return Array.prototype.some.call(e.addedNodes,function(e){return 1===e.nodeType&&!e.classList.contains("inboxsdk__mole_view")})})&&t.insertBefore(e._element,t.firstElementChild),e._setupWidth()}),(0,j.default)(this._options.el,{attributes:!0,attributeFilter:["class","style"]}).takeUntilBy(this._stopper).onValue(function(){e._setupWidth()}),y.default.fromEvents(this._element,"click").merge((0,x.default)(this._element,"focus")).takeUntilBy(this._stopper).onValue(function(){e._bringToFront()})}},{key:"_setupWidth",value:function(){var e=this,t=(0,k.default)(this._element,".inboxsdk__mole_view_inner").getBoundingClientRect().width;(0,h.default)(function(){e._element.style.width=t+"px";var r=e._element.parentElement;r&&Array.prototype.indexOf.call(r.children,e._element)===r.children.length-2?e._element.style.paddingLeft=t+"px":e._element.style.paddingLeft=""})}},{key:"_bringToFront",value:function(){var e=this;if(!this._element.classList.contains("inboxsdk__mole_at_front")){this._element.classList.add("inboxsdk__mole_at_front");var t=this._element.parentElement;if(!(t instanceof HTMLElement))throw new Error("mole not in document");var r=Array.prototype.indexOf.call(t.children,this._element);if(r<0)throw new Error("should not happen");var n=t.children.length,o=(0,v.default)(t.children,i);o&&o.dispatchEvent(new FocusEvent("focus")),Array.prototype.forEach.call(t.children,function(t,o){if(t.classList.contains("inboxsdk__mole_view")){t!==e._element&&t.classList.remove("inboxsdk__mole_at_front");var i=(0,v.default)(t.children,function(e){return e.style.zIndex});i&&(i.style.zIndex=String(o>r?n-(o-r):n))}}),y.default.merge([o?(0,x.default)(o,"focus"):null,(0,j.default)(t,{childList:!0}).filter(function(e){return e.some(function(e){return e.addedNodes.length>0})})].concat(Array.prototype.map.call(t.children,function(e){var t=(0,v.default)(e.children,function(e){return e.style.zIndex});if(!t)return null;var r=t.style.zIndex;return(0,j.default)(t,{attributes:!0,attributeFilter:["style"]}).filter(function(){return t.style.zIndex!==r})})).filter(Boolean)).takeUntilBy(this._stopper).take(1).onValue(function(){e._element.classList.contains("inboxsdk__mole_at_front")&&(e._element.classList.remove("inboxsdk__mole_at_front"),Array.prototype.forEach.call(t.children,function(e){if(!i(e)){var t=(0,v.default)(e.children,function(e){return e.style.zIndex});t&&(t.style.zIndex="1")}}))})}}},{key:"setTitle",value:function(e){this._title=String(e),this._render()}},{key:"setMinimized",value:function(e){e?(this._element.classList.add("inboxsdk__minimized"),this._render(),this._eventStream.emit({eventName:"minimize"})):(this._element.classList.remove("inboxsdk__minimized"),this._render(),this._eventStream.emit({eventName:"restore"}))}},{key:"getMinimized",value:function(){return this._element.classList.contains("inboxsdk__minimized")}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"destroy",value:function(){g.default.unmountComponentAtNode(this._element),this._stopper.destroy(),this._eventStream.end(),this._element.remove()}}]),e}(),A=(0,b.defn)(t,I);r.default=A;var T=function(e){function t(){return(0,f.default)(this,t),r.apply(this,arguments)}(0,u.default)(t,e);var r=n(t);return(0,p.default)(t,[{key:"render",value:function(){var e=this,t=null;if(!1!==this.props.chrome){var r;r=this.props.minimized&&this.props.minimizedTitleEl?_.default.createElement(E.default,{className:"inboxsdk__mole_view_title",el:this.props.minimizedTitleEl}):this.props.titleEl?_.default.createElement(E.default,{className:"inboxsdk__mole_view_title",el:this.props.titleEl}):_.default.createElement("div",{className:"inboxsdk__mole_view_title"},this.props.title);var n=(this.props.titleButtons||[]).map(function(e,t){return _.default.createElement("button",{type:"button",key:t,title:e.title,className:"inboxsdk__mole_custom_title_button",onClick:function(t){t.stopPropagation(),e.onClick()}},_.default.createElement("img",{className:e.iconClass,src:e.iconUrl,alt:"","aria-hidden":"true"}))});t=_.default.createElement("div",{className:"inboxsdk__mole_view_titlebar",onClick:function(){e.props.minimized&&e.props.onSetMinimize(!1)}},r,_.default.createElement("div",{className:"inboxsdk__mole_title_buttons"},_.default.createElement("button",{type:"button",style:{display:this.props.minimized?"none":""},title:"Minimize",onClick:function(){return e.props.onSetMinimize(!0)}},_.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_minimize_white_18dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_minimize_white_18dp.png"})),_.default.createElement("button",{type:"button",style:{display:this.props.minimized?"":"none"},title:"Expand",onClick:function(){return e.props.onSetMinimize(!1)}},_.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_maximize_white_18dp_2x.png 2x",alt:"","aria-hidden":"true",src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_maximize_white_18dp.png"})),n,_.default.createElement("button",{type:"button",title:"Close",onClick:function(){return e.props.onClose()}},_.default.createElement("img",{srcSet:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/btw_ic_close_white_12dp_2x.png 2x",alt:"","aria-hidden":"true",
src:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/1x/btw_ic_close_white_12dp.png"}))))}return _.default.createElement("div",{className:"inboxsdk__mole_view_mid"},_.default.createElement("div",{className:"inboxsdk__mole_view_inner"},t,_.default.createElement(E.default,{className:"inboxsdk__mole_view_content",el:this.props.el})))}}]),t}(_.default.Component)},{"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/dom/reemitClickEventForReact":869,"../../../lib/from-event-target-capture":878,"../../../lib/react/ElementContainer":895,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,asap:83,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/find":484,react:606,"react-dom":584,ud:625}],805:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=o(e("lodash/includes")),c=o(e("kefir")),d=o(e("kefir-stopper")),f=o(e("../../../lib/from-event-target-capture")),p=o(e("../../../widgets/buttons/dropdown-view")),m=o(e("./inbox-dropdown-view")),h=o(e("../../../lib/dom/insert-element-in-order")),b=0,v=function(){function e(t,r,n){var o=this;(0,i.default)(this,e),(0,s.default)(this,"_stopper",(0,d.default)()),(0,s.default)(this,"_buttonEl",void 0);var a=this._buttonEl=document.createElement("li");a.setAttribute("role","button"),a.setAttribute("data-insertion-order-hint",String(b++)),a.setAttribute("data-group-order-hint",r),a.tabIndex=0,a.className="inboxsdk__button_icon";var l=document.createElement("img");l.className="inboxsdk__button_iconImg";var v=function(e){},_=!1,g=null;c.default.merge([c.default.fromEvents(a,"click"),(0,f.default)(a,"keyup").filter(function(e){return(0,u.default)([32,13],e.which)})]).onValue(function(e){if(e.preventDefault(),e.stopPropagation(),_){if(g)return void g.close();o._buttonEl.classList.add("inboxsdk__active"),g=new p.default(new m.default,a),g.setPlacementOptions({position:"bottom",hAlign:"right",vAlign:"top",buffer:10}),g.on("destroy",function(){o._buttonEl.classList.remove("inboxsdk__active"),g=null})}v({dropdown:g})});var y=null;_=t.hasDropdown,a.title=t.title,a.className="inboxsdk__button_icon "+(t.iconClass||""),v=t.onClick,t.iconUrl?(l.src=t.iconUrl,a.appendChild(l)):l.remove();var w=t.orderHint||0;y!==w&&(y=w,a.setAttribute("data-order-hint",String(w)),(0,h.default)(n,a,void 0,!0)),this._stopper.onValue(function(){a.remove(),g&&g.close()})}return(0,a.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}}]),e}(),_=(0,l.defn)(t,v);r.default=_},{"../../../lib/dom/insert-element-in-order":856,"../../../lib/from-event-target-capture":878,"../../../widgets/buttons/dropdown-view":941,"./inbox-dropdown-view":818,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,"lodash/includes":493,ud:625}],806:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=(o(e("kefir")),o(e("kefir-stopper"))),c=o(e("./InboxToolbarButtonView")),d=function(){function e(t,r,n){(0,i.default)(this,e),(0,s.default)(this,"_stopper",(0,u.default)()),(0,s.default)(this,"_el",void 0),(0,s.default)(this,"_driver",void 0),(0,s.default)(this,"_inboxThreadView",void 0),this._el=t,this._driver=r,this._inboxThreadView=n,this._el.classList.add("inboxsdk__list_toolbar")}return(0,a.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getThreadRowViewDrivers",value:function(){return this._driver.getThreadRowViewDriverLiveSet().values()}},{key:"getRouteViewDriver",value:function(){return this._driver.getCurrentRouteViewDriver()}},{key:"isForRowList",value:function(){return null==this._inboxThreadView}},{key:"isForThread",value:function(){return null!=this._inboxThreadView}},{key:"getThreadViewDriver",value:function(){if(!this._inboxThreadView)throw new Error("this toolbarview is not for a thread");return this._inboxThreadView}},{key:"addButton",value:function(e,t){var r=new c.default(e,this._driver.getAppId(),this._el);return this._stopper.takeUntilBy(r.getStopper()).onValue(function(){r.destroy()}),r}}]),e}(),f=(0,l.defn)(t,d);r.default=f},{"./InboxToolbarButtonView":805,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,ud:625}],807:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/set")),a=o(e("@babel/runtime-corejs2/core-js/json/stringify")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/defineProperty")),c=o(e("lodash/findIndex")),d=e("ud"),f=(o(e("auto-html")),o(e("kefir"))),p=o(e("kefir-stopper")),m=o(e("react")),h=o(e("react-dom")),b=(o(e("../../../lib/fake-window-resize")),o(e("../../../../common/find-parent"))),v=o(e("../getSidebarClassnames")),_=(o(e("../../../lib/delay-asap")),o(e("../waitForAnimationClickBlockerGone"))),g=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),y=o(e("../../../lib/from-event-target-capture")),w=o(e("order-manager")),j=o(e("../../../lib/idMap")),k=o(e("../../../lib/dom/querySelectorOrFail")),x=o(e("../../../lib/incrementName")),E=o(e("../../../driver-common/sidebar/AppSidebar")),S=o(e("../../../driver-common/sidebar/ContentPanelViewDriver")),C=function(){function e(t){var r=this;(0,s.default)(this,e),(0,u.default)(this,"_stopper",(0,p.default)()),(0,u.default)(this,"_driver",void 0),(0,u.default)(this,"_el",void 0),(0,u.default)(this,"_mainParent",void 0),(0,u.default)(this,"_openOrOpeningProp",void 0),this._driver=t;var n=document.querySelector("."+(0,j.default)("app_sidebar_container"));n?this._el=n:this._createElement();var o=(0,b.default)((0,k.default)(document,"[role=application]"),function(e){return e.parentElement===document.body});if(!o){var i=new Error("Failed to find main parent");throw this._driver.getLogger().errorSite(i),i}this._mainParent=o,this._openOrOpeningProp=(0,g.default)(this._el,{attributes:!0,attributeFilter:["data-open","data-is-opening"]}).toProperty(function(){return null}).map(function(){return"true"===r._el.getAttribute("data-open")||"true"===r._el.getAttribute("data-is-opening")}).skipDuplicates()}return(0,l.default)(e,[{key:"destroy",value:function(){this._stopper.destroy()}},{key:"open",value:function(){this._setShouldAppSidebarOpen(!0),this._setOpenedNow(!0)}},{key:"close",value:function(){this._setShouldAppSidebarOpen(!1),this._setOpenedNow(!1)}},{key:"getOpenOrOpeningStream",value:function(){return this._openOrOpeningProp}},{key:"_getShouldAppSidebarOpen",value:function(){return"true"===localStorage.getItem("inboxsdk__app_sidebar_should_open")}},{key:"_setShouldAppSidebarOpen",value:function(e){try{localStorage.setItem("inboxsdk__app_sidebar_should_open",String(e))}catch(e){console.error("error saving",e)}}},{key:"_createElement",value:function(){var e=this,t=this._el=document.createElement("div");if(t.className=(0,j.default)("app_sidebar_container"),t.setAttribute("data-open","false"),t.setAttribute("data-is-opening","false"),document.body.appendChild(t),!document.body.querySelector("."+(0,j.default)("app_sidebar_waiting_platform"))){var r=document.createElement("div");r.className=(0,j.default)("app_sidebar_waiting_platform"),document.body.appendChild(r)}(0,y.default)(this._driver.getChatSidebarButton(),"click").filter(function(){return"true"===t.getAttribute("data-open")&&"SIDEBAR"===e._driver.getCurrentChatSidebarView().getMode()}).takeUntilBy(this._stopper).onValue(function(t){t.stopImmediatePropagation(),e._setShouldAppSidebarOpen(!1),e._setOpenedNow(!1)}),this._driver.getCurrentChatSidebarView().getModeStream().changes().takeUntilBy(this._stopper).onValue(function(r){"SIDEBAR"===r?(e._setShouldAppSidebarOpen(!1),e._setOpenedNow(!1)):"true"===t.getAttribute("data-open")&&e._setOpenedNow(!0)});var n,o=new i.default,s=new w.default({get:function(){try{return JSON.parse(localStorage.getItem("inboxsdk__sidebar_ordering")||"null")}catch(e){console.error("failed to read sidebar order data",e)}},set:function(e){try{localStorage.setItem("inboxsdk__sidebar_ordering",(0,a.default)(e))}catch(e){console.error("failed to set sidebar order data",e)}}}),l=function(e){e&&(n=e)},u=function r(){h.default.render(m.default.createElement(E.default,{ref:l,panels:s.getOrderedItems().map(function(e){return e.value}),onClose:function(){e._setShouldAppSidebarOpen(!1),e._setOpenedNow(!1)},onOutsideClick:function(){e._driver.closeOpenThread()},onMoveEnd:function(e,t,n,o){s.moveItem(n,o),r()}}),t)};u(),f.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_ordering"===e.key}).takeUntilBy(this._stopper).onValue(function(){s.reload(),u()}),this._stopper.onValue(function(){h.default.unmountComponentAtNode(t),t.remove()}),f.default.fromEvents(document.body,"inboxsdkNewSidebarPanel").takeUntilBy(this._stopper).onValue(function(e){for(var t=e.detail.id;o.has(t);)t=(0,x.default)(t);o.add(t),s.addItem({groupId:e.detail.appId,id:t,orderHint:e.detail.orderHint,value:{id:t,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}}),u()}),f.default.fromEvents(document.body,"inboxsdkUpdateSidebarPanel").takeUntilBy(this._stopper).onValue(function(e){var t=s.getOrderedItems(),r=(0,c.default)(t,function(t){return t.value.instanceId===e.detail.instanceId});if(-1===r)throw new Error("should not happen: failed to find orderItem");s.updateItemValueByIndex(r,{id:t[r].value.id,appId:e.detail.appId,instanceId:e.detail.instanceId,title:e.detail.title,iconClass:e.detail.iconClass,iconUrl:e.detail.iconUrl,hideTitleBar:e.detail.hideTitleBar,el:e.target}),u()}),f.default.fromEvents(document.body,"inboxsdkRemoveSidebarPanel").takeUntilBy(this._stopper).onValue(function(t){var r=s.getOrderedItems(),n=(0,c.default)(r,function(e){return e.value.instanceId===t.detail.instanceId});if(-1===n)throw new Error("should not happen: failed to find orderItem");o.delete(r[n].id),s.removeItemByIndex(n),0===s.getOrderedItems().length&&e._setOpenedNow(!1),u()}),f.default.fromEvents(document.body,"inboxsdkSidebarPanelScrollIntoView").takeUntilBy(this._stopper).onValue(function(e){n.scrollPanelIntoView(e.detail.instanceId)})}},{key:"_setOpenedNow",value:function(e){this._el.setAttribute("data-open",String(e));var t=(0,v.default)(),r=t.chat;r&&(e?"SIDEBAR"===this._driver.getCurrentChatSidebarView().getMode()||this._mainParent.classList.contains(r)||(this._mainParent.classList.add(r),this._driver.getPageCommunicator().fakeWindowResize()):"SIDEBAR"!==this._driver.getCurrentChatSidebarView().getMode()&&this._mainParent.classList.contains(r)&&(this._mainParent.classList.remove(r),this._driver.getPageCommunicator().fakeWindowResize()))}},{key:"_setOpenedAfterAnimation",value:function(e){var t=this;this._el.setAttribute("data-is-opening","true"),(0,_.default)().takeUntilBy(this._stopper).takeUntilBy((0,g.default)(this._el,{attributes:!0,attributeFilter:["data-open"]})).onValue(function(){t._setOpenedNow(e)}).onEnd(function(){t._el.setAttribute("data-is-opening","false")})}},{key:"addSidebarContentPanel",value:function(e){var t=new S.default(this._driver,e,"inbox");return("SIDEBAR"===this._driver.getCurrentChatSidebarView().getMode()||this._getShouldAppSidebarOpen())&&this._setOpenedAfterAnimation(!0),this._stopper.takeUntilBy(t.getStopper()).onValue(function(){t.remove()}),t}}]),e}(),I=(0,d.defn)(t,C);r.default=I},{"../../../../common/find-parent":640,"../../../driver-common/sidebar/AppSidebar":840,"../../../driver-common/sidebar/ContentPanelViewDriver":841,"../../../lib/delay-asap":850,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/fake-window-resize":877,"../../../lib/from-event-target-capture":878,"../../../lib/idMap":882,"../../../lib/incrementName":884,"../getSidebarClassnames":792,"../waitForAnimationClickBlockerGone":827,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"auto-html":89,kefir:327,"kefir-stopper":326,"lodash/findIndex":485,"order-manager":537,react:606,"react-dom":584,ud:625}],808:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/parse-int")),a=o(e("@babel/runtime-corejs2/core-js/promise")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/defineProperty")),c=o(e("lodash/find")),d=o(e("lodash/includes")),f=e("ud"),p=o(e("kefir")),m=o(e("kefir-stopper")),h=o(e("../../../widgets/buttons/dropdown-view")),b=o(e("./inbox-app-toolbar-tooltip-view")),v=o(e("../../../lib/toItemWithLifetimeStream")),_=o(e("../../../lib/dom/set-css")),g=function(){function e(t,r,n){var o=this;(0,s.default)(this,e),(0,u.default)(this,"_buttonDescriptor",null),(0,u.default)(this,"_buttonDescriptorStream",void 0),(0,u.default)(this,"_buttonEl",null),(0,u.default)(this,"_activeDropdown",null),(0,u.default)(this,"_stopper",(0,m.default)()),(0,u.default)(this,"_ready",(0,m.default)()),this._buttonDescriptorStream=t.toProperty().takeUntilBy(this._stopper),p.default.combine([(0,v.default)(n).take(1),(0,v.default)(r).take(1)],[],function(e){return e}).map(function(e){return e.el.getValue()}).takeUntilBy(this._stopper).onValue(function(e){return o._adjustSearchBarMargin(e)}),(0,v.default)(r).take(1).map(function(e){return e.el.getValue()}).takeUntilBy(this._stopper).onValue(function(e){return o._setupButton(e)})}return(0,l.default)(e,[{key:"_setupButton",value:function(e){var t=this,r=(0,c.default)(e.children,function(e){return e.classList.contains("inboxsdk__appButton_container")});r||(r=document.createElement("div"),r.className="inboxsdk__appButton_container",e.insertBefore(r,e.firstChild));var n=document.createElement("div");n.tabIndex=0,n.setAttribute("role","button"),n.className="inboxsdk__appButton inboxsdk__button_icon";var o=document.createElement("img");o.className="inboxsdk__button_iconImg",n.appendChild(o),this._buttonDescriptorStream.onValue(function(e){n.title=e.title,o.src=e.iconUrl,o.className="inboxsdk__button_iconImg ".concat(e.iconClass||""),t._buttonDescriptor=e}),p.default.merge([p.default.fromEvents(n,"click"),p.default.fromEvents(n,"keypress").filter(function(e){return(0,d.default)([32,13],e.which)})]).takeUntilBy(this._stopper).onValue(function(e){e.preventDefault(),e.stopPropagation(),t._activeDropdown?t.close():t._buttonDescriptor&&!1===t._buttonDescriptor.hasDropdown?t._buttonDescriptor&&t._buttonDescriptor.onClick&&t._buttonDescriptor.onClick():t.open()}),r.insertBefore(n,r.firstChild),this._buttonEl=n,this._ready.destroy(),this._stopper.onValue(function(){n.remove()})}},{key:"_adjustSearchBarMargin",value:function(e){function t(e){if(document.documentElement.setAttribute(n,String(e)),e<=0)return void(0,_.default)("dynamic_resize_searchbar","");var t=e>r?"!important":"",o=1394+3.575*e,i="\n@media (max-width: ".concat(o,"px) {\n  .").concat(a," {\n    margin-right: ").concat(e,"px").concat(t,";\n  }\n}\n.inboxsdk__appButton_container + * + * ~ *:not(.inboxsdk_escape_mod) {\n  margin-right: ").concat(e,"px").concat(t,";\n}\n");(0,_.default)("dynamic_resize_searchbar",i)}var r=70,n="data-inboxsdk-searchbar-min-margin-right",o=40+(0,i.default)(document.documentElement.getAttribute(n)||"0"),a="inboxsdk__dynamic_resize_searchbar";t(o),e.classList.add(a);var s=e.nextElementSibling;s&&s.classList.add(a),this._stopper.onValue(function(){t((0,i.default)(document.documentElement.getAttribute(n)||"0")-40)})}},{key:"open",value:function(){var e=this;if(!this._activeDropdown){var t=this._buttonEl;if(!t)throw new Error("should not happen");t.classList.add("inboxsdk__active");var r=this._buttonDescriptor||{},n=r.arrowColor,o=this._activeDropdown=new h.default(new b.default(t,n),t);o.once("destroy",function(){e._activeDropdown=null,t.classList.remove("inboxsdk__active")});var i={dropdown:o};this._buttonDescriptor&&this._buttonDescriptor.onClick&&this._buttonDescriptor.onClick.call(null,i)}}},{key:"close",value:function(){this._activeDropdown&&this._activeDropdown.close()}},{key:"waitForReady",value:function(){var e=this;return this._ready.map(function(){return e}).merge(this._stopper.flatMap(function(){return p.default.constantError(new Error("InboxAppToolbarButtonView was destroyed early"))})).take(1).takeErrors(1).toPromise(a.default)}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}}]),e}(),y=(0,f.defn)(t,g);r.default=y},{"../../../lib/dom/set-css":870,"../../../lib/toItemWithLifetimeStream":902,"../../../widgets/buttons/dropdown-view":941,"./inbox-app-toolbar-tooltip-view":809,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,"lodash/find":484,"lodash/includes":493,ud:625}],809:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=(o(e("kefir")),o(e("kefir-stopper"))),c=function(){function e(t,r){(0,i.default)(this,e),(0,s.default)(this,"_stopper",(0,u.default)()),(0,s.default)(this,"_anchorElement",void 0),(0,s.default)(this,"_el",void 0),(0,s.default)(this,"_containerEl",void 0),(0,s.default)(this,"_arrowEl",void 0),this._anchorElement=t,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow inboxsdk__bottom",document.body.appendChild(this._arrowEl),r&&(this._arrowEl.style.borderColor=r),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__appButton_tooltip_container",this._el=document.createElement("div"),this._el.className="inboxsdk__appButton_tooltip",this._el.setAttribute("role","region"),this._containerEl.appendChild(this._el),document.body.appendChild(this._containerEl),this._reposition()}return(0,a.default)(e,[{key:"_reposition",value:function(){var e=this._anchorElement.getBoundingClientRect(),t=e.left+e.width/2;this._arrowEl.style.top="".concat(e.bottom+18,"px"),this._arrowEl.style.right="".concat(window.innerWidth-e.right+e.width/2-this._arrowEl.offsetWidth/2-1,"px"),this._containerEl.style.top="".concat(e.bottom+17,"px"),this._containerEl.style.minWidth="".concat(2*(window.innerWidth-t-30),"px")}},{key:"getDropdownOptions",value:function(){return{manualPosition:!0,extraElementsToIgnore:[this._arrowEl]}}},{key:"getContentElement",value:function(){return this._el}},{key:"getContainerElement",value:function(){return this._containerEl}},{key:"destroy",value:function(){this._containerEl.remove(),this._arrowEl.remove(),this._stopper.destroy()}}]),e}(),d=(0,l.defn)(t,c);r.default=d},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,ud:625}],810:[function(e,t,r){"use strict";function n(e,t){var r=i(e);if(a){var n=a(e);t&&(n=n.filter(function(t){return s(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,y.default)(e,t,r[t])}):l?u(e,l(r)):n(Object(r)).forEach(function(t){c(e,t,s(r,t))})}return e}var i=e("@babel/runtime-corejs2/core-js/object/keys"),a=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),u=e("@babel/runtime-corejs2/core-js/object/define-properties"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f,p,m,h=d(e("@babel/runtime-corejs2/regenerator")),b=d(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),v=d(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),_=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),g=d(e("@babel/runtime-corejs2/helpers/createClass")),y=d(e("@babel/runtime-corejs2/helpers/defineProperty")),w=d(e("lodash/includes")),j=e("ud"),k=d(e("auto-html")),x=d(e("kefir")),E=(d(e("kefir-bus")),d(e("kefir-stopper"))),S=d(e("../../../../common/find-parent")),C=d(e("../../../lib/dom/querySelectorOrFail")),I=function(){function e(t,r){var n=this;(0,_.default)(this,e),(0,y.default)(this,"_stopper",(0,E.default)()),(0,y.default)(this,"_previewClicks",x.default.pool()),(0,y.default)(this,"_element",void 0),(0,y.default)(this,"_driver",void 0),(0,y.default)(this,"_type",void 0),(0,y.default)(this,"_p",void 0),(0,y.default)(this,"_messageViewDriver",void 0),(0,y.default)(this,"_addedButtonDescriptors",[]),(0,y.default)(this,"_overlayView",null),this._driver=r,t.element?(this._element=t.element,this._p=t.parsed,this._type=t.parsed.attributes.type,x.default.merge([x.default.fromEvents(this._element,"click"),x.default.fromEvents(this._element,"keydown")]).takeUntilBy(this._stopper).onValue(function(){n._driver.setLastInteractedAttachmentCardView(n)})):(this._type="CUSTOM",this._createNewElement(t)),this._messageViewDriver=this._findMessageView(),this._messageViewDriver&&this._messageViewDriver.addAttachmentCardViewDriver(this)}return(0,g.default)(e,[{key:"destroy",value:function(){this._p||this._element.remove(),this._stopper.destroy()}},{key:"_findMessageView",value:function(){var e=this._driver.getMessageViewElementsMap(),t=(0,S.default)(this._element,function(t){return e.has(t)});return t?e.get(t):null}},{key:"_createNewElement",value:function(e){var t=this;e.previewUrl?(this._element=document.createElement("a"),this._element.href=e.previewUrl):(this._element=document.createElement("div"),this._element.tabIndex=0),this._element.title=e.title;!function e(r){r.previewThumbnailUrl?(t._element.className="inboxsdk__attachment_card inboxsdk__attachment_card_with_preview",t._element.innerHTML=(0,k.default)(f||(f=(0,v.default)(['\n          <img alt="" aria-hidden="true"\n            style="width: 100%"\n            src="','"\n            >\n          <div class="inboxsdk__attachment_card_hover_overlay">\n            <div class="inboxsdk__attachment_card_title">','</div>\n            <div class="inboxsdk__attachment_card_buttons"></div>\n          </div>\n        '])),r.previewThumbnailUrl,r.title),r.failoverPreviewIconUrl&&x.default.fromEvents((0,C.default)(t._element,"img"),"error").take(1).takeUntilBy(t._stopper).onValue(function(){e(o(o({},r),{},{previewThumbnailUrl:null,iconThumbnailUrl:r.failoverPreviewIconUrl}))})):(t._element.className="inboxsdk__attachment_card",t._element.innerHTML=(0,k.default)(p||(p=(0,v.default)(['\n          <div class="inboxsdk__attachment_card_nohover">\n            <div class="inboxsdk__attachment_card_title">','</div>\n            <div class="inboxsdk__attachment_card_description">\n              <img alt="" aria-hidden="true" src="','">\n              <span>','</span>\n            </div>\n          </div>\n          <div class="inboxsdk__attachment_card_hover_overlay">\n            <div class="inboxsdk__attachment_card_title">','</div>\n            <div class="inboxsdk__attachment_card_buttons"></div>\n          </div>\n        '])),r.title,r.fileIconImageUrl,r.description||"",r.title)),r.buttons.forEach(function(e){t.addButton(e)})}(e),this._previewClicks.plug(x.default.merge([x.default.fromEvents(this._element,"click"),x.default.fromEvents(this._element,"keypress").filter(function(e){return(0,w.default)([32,13],e.which)})])),e.container.appendChild(this._element)}},{key:"getElement",value:function(){return this._element}},{key:"getMessageViewDriver",value:function(){return this._messageViewDriver}},{key:"getStopper",value:function(){return this._stopper}},{key:"getPreviewClicks",value:function(){return this._previewClicks.takeUntilBy(this._stopper)}},{key:"getAttachmentType",value:function(){return this._type}},{key:"getAddedButtonDescriptors",value:function(){return this._addedButtonDescriptors}},{key:"addButton",value:function(e){if(this._addedButtonDescriptors.push(e),!this._p){var t=(0,C.default)(this._element,".inboxsdk__attachment_card_buttons"),r=document.createElement("button");r.className="inboxsdk__attachment_card_button",e.downloadUrl?(r.setAttribute("data-inboxsdk-download-url",e.downloadUrl),r.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault();var r=!1;if(e.onClick&&e.onClick({preventDefault:function(){r=!0}}),!r){var n=document.createElement("a");n.href=e.downloadUrl,e.downloadFilename&&(n.download=e.downloadFilename),n.addEventListener("click",function(e){e.stopPropagation()},!0),e.openInNewTab&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),n.remove()}}),r.innerHTML='\n          <div style="background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAYElEQVQ4y+2UMQ6AQAgEwfhQnnJP4adjc4UxB0ehhXqbULE7BRAUkLu1yQP6OXQveEab1DXTD0O9b53kIui+QReicnJ5lM2gArQA2LLcDCqAXYA2y1SgZ7BV/Lr+6TugB0K2GxxDXjEZAAAAAElFTkSuQmCC)"></div>\n        '):(r.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.onClick&&e.onClick({getDownloadURL:function(){throw new Error("not implemented for artificial sdk-added cardViews!")}})}),r.innerHTML=(0,k.default)(m||(m=(0,v.default)(['\n          <img src="','">\n        '])),e.iconUrl),r.title=e.tooltip),t.appendChild(r)}}},{key:"getTitle",value:function(){return this._element.title}},{key:"getDownloadURL",value:function(){function e(){return t.apply(this,arguments)}var t=(0,b.default)(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._overlayView){e.next=3;break}throw new Error("This method only works during a button onClick callback in Inbox");case 3:return e.abrupt("return",t.getDownloadURL());case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"setOverlay",value:function(e){this._overlayView=e}}]),e}(),A=(0,j.defn)(t,I);r.default=A},{"../../../../common/find-parent":640,"../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/regenerator":59,"auto-html":89,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/includes":493,ud:625}],811:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i,a=o(e("@babel/runtime-corejs2/regenerator")),s=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),l=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),u=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=o(e("@babel/runtime-corejs2/helpers/createClass")),d=o(e("@babel/runtime-corejs2/helpers/defineProperty")),f=e("ud"),p=(o(e("kefir")),o(e("kefir-stopper"))),m=o(e("auto-html")),h=o(e("../../../lib/shared-style")),b=o(e("../../../dom-driver/inbox/custom-style")),v=(e("../../../lib/dom/simulate-mouse-event"),o(e("../../../../common/ajax"))),_=function(){function e(t,r,n,o){var i=this;(0,u.default)(this,e),(0,d.default)(this,"_driver",void 0),(0,d.default)(this,"_el",void 0),(0,d.default)(this,"_p",void 0),(0,d.default)(this,"_cardView",void 0),(0,d.default)(this,"_stopper",(0,p.default)()),this._driver=t,this._el=r,this._p=n,this._cardView=o,(0,h.default)(r.ownerDocument),(0,b.default)(r.ownerDocument),this._cardView.setOverlay(this),this._cardView.getAddedButtonDescriptors().forEach(function(e){i.addButton(e)})}return(0,c.default)(e,[{key:"destroy",value:function(){this._cardView.setOverlay(null),this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"addButton",value:function(e){var t=this,r=this._p.elements,n=r.downloadButton,o=r.buttonContainer;if(!o)throw new Error("Missing buttonContainer, can not add button");var a=document.createElement("button");a.className="inboxsdk__attachment_overlay_button",a.addEventListener("click",function(r){r.stopPropagation(),r.preventDefault(),e.onClick&&e.onClick({getDownloadURL:function(){return t.getDownloadURL()}})}),a.innerHTML=(0,m.default)(i||(i=(0,l.default)(['\n      <img src="','">\n    '])),e.iconUrl),a.setAttribute("data-tooltip-delay","500"),a.setAttribute("data-tooltip-unhoverable","true"),n&&(a.setAttribute("data-tooltip-class",n.getAttribute("data-tooltip-class")||""),a.setAttribute("data-tooltip-align",n.getAttribute("data-tooltip-align")||"")),a.setAttribute("aria-label",e.tooltip),a.setAttribute("data-tooltip",e.tooltip),
o.insertBefore(a,o.lastElementChild),this._stopper.onValue(function(){a.remove()})}},{key:"getDownloadURL",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(a.default.mark(function e(){var t,r,n,o,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.elements.downloadButton){e.next=3;break}throw new Error("Could not find download button element");case 3:return e.next=5,this._driver.getPageCommunicator().clickAndGetNewIframeSrc(t);case 5:return r=e.sent,e.next=8,(0,v.default)({url:r,method:"HEAD"});case 8:return n=e.sent,o=n.xhr,i=o.responseURL,e.abrupt("return",i);case 12:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),g=(0,f.defn)(t,_);r.default=g},{"../../../../common/ajax":634,"../../../dom-driver/inbox/custom-style":779,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/shared-style":899,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/regenerator":59,"auto-html":89,kefir:327,"kefir-stopper":326,ud:625}],812:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=o(e("kefir")),c=o(e("kefir-bus")),d=o(e("kefir-stopper")),f=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;(0,i.default)(this,e),(0,s.default)(this,"_preAutoCloseStream",(0,c.default)()),(0,s.default)(this,"_stopper",(0,d.default)()),(0,s.default)(this,"_el",void 0);var o=this._el=document.createElement("div");if(o.className="inboxsdk__inbox_backdrop",o.style.zIndex=String(r),u.default.fromEvents(o,"click").filter(function(e){var r=!1,n={type:"outsideInteraction",cause:e,cancel:function(){r=!0}};return t._preAutoCloseStream.emit(n),!r}).onValue(function(e){t.destroy()}),!n)throw new Error("no target");n.appendChild(o),this._stopper.onValue(function(){o.classList.remove("inboxsdk__active"),u.default.fromEvents(o,"transitionend").merge(u.default.later(200)).take(1).onValue(function(){o.remove()})}),o.offsetHeight,o.classList.add("inboxsdk__active")}return(0,a.default)(e,[{key:"getElement",value:function(){return this._el}},{key:"getPreAutoCloseStream",value:function(){return this._preAutoCloseStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._preAutoCloseStream.end(),this._stopper.destroy()}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"kefir-stopper":326,ud:625}],813:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/parse-int")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=e("ud"),c=o(e("lodash/once")),d=(o(e("kefir")),o(e("kefir-stopper"))),f=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),p=function(){function e(t,r){var n=this;(0,a.default)(this,e),(0,l.default)(this,"_el",void 0),(0,l.default)(this,"_p",void 0),(0,l.default)(this,"_stopper",(0,d.default)()),(0,l.default)(this,"getModeStream",(0,c.default)(function(){var e=n._el.parentElement;return(0,f.default)(e,{attributes:!0,attributeFilter:["class"]}).toProperty(function(){return null}).map(function(){return n.getMode()}).skipDuplicates().takeUntilBy(n._stopper)})),this._el=t,this._p=r}return(0,s.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._stopper.destroy()}},{key:"getMode",value:function(){var e=this._el.parentElement,t=window.getComputedStyle(e);return 0===(0,i.default)(t.bottom)?"SIDEBAR":(0,i.default)(t.top)>0?"DROPDOWN":"HIDDEN"}}]),e}(),m=(0,u.defn)(t,p);r.default=m},{"../../../lib/dom/make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326,"lodash/once":516,ud:625}],814:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/object/assign")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("lodash/includes")),c=e("ud"),d=o(e("kefir")),f=o(e("../../../lib/from-event-target-capture")),p=o(e("../../../lib/dom/insert-element-in-order")),m=o(e("../../../widgets/buttons/dropdown-view")),h=o(e("./inbox-dropdown-view")),b=o(e("./inbox-tooltip-view")),v=0,_=function(){function e(t,r,n,o){var s=this;(0,a.default)(this,e),(0,l.default)(this,"_composeView",void 0),(0,l.default)(this,"_buttonEl",void 0),(0,l.default)(this,"_tooltip",void 0),this._tooltip=null,this._composeView=t;var c=this._buttonEl=document.createElement("div");c.setAttribute("role","button"),c.setAttribute("data-insertion-order-hint",String(v++)),c.setAttribute("data-group-order-hint",n),c.tabIndex=0,c.className="inboxsdk__button_icon";var b=document.createElement("img");b.className="inboxsdk__button_iconImg";var _=function(e){},g=!1,y=null;d.default.merge([d.default.fromEvents(c,"click"),(0,f.default)(c,"keyup").filter(function(e){return(0,u.default)([32,13],e.which)})]).onValue(function(e){if(e.preventDefault(),e.stopPropagation(),s.closeTooltip(),g){if(y)return void y.close();s._buttonEl.classList.add("inboxsdk__active"),y=new m.default(new h.default,c),y.setPlacementOptions({position:"top",hAlign:"left",vAlign:"bottom",buffer:5}),y.on("destroy",function(){s._buttonEl.classList.remove("inboxsdk__active"),y=null})}_((0,i.default)({dropdown:y},o))});var w=null;r.takeUntilBy(t.getStopper()).onValue(function(e){if(!e)return c.remove(),void(w=null);g=e.hasDropdown,c.title=e.title,c.className="inboxsdk__button_icon "+(e.iconClass||""),_=e.onClick,e.iconUrl?(b.src=e.iconUrl,c.appendChild(b)):b.remove();var r=e.orderHint||0;w!==r&&(w=r,c.setAttribute("data-order-hint",String(r)),(0,p.default)(t.getModifierButtonContainer(),c))}),t.getStopper().onValue(function(){s.closeTooltip(),c.remove(),y&&y.close()})}return(0,s.default)(e,[{key:"showTooltip",value:function(e){var t=this;this._composeView.isInlineReplyForm()&&this._composeView.getElement().focus(),this._tooltip&&this.closeTooltip();var r=this._tooltip=new b.default(this._buttonEl,e);r.getStopper().onValue(function(){t._tooltip===r&&(t._tooltip=null)})}},{key:"closeTooltip",value:function(){this._tooltip&&this._tooltip.destroy()}}]),e}(),g=(0,c.defn)(t,_);r.default=g},{"../../../lib/dom/insert-element-in-order":856,"../../../lib/from-event-target-capture":878,"../../../widgets/buttons/dropdown-view":941,"./inbox-dropdown-view":818,"./inbox-tooltip-view":825,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"lodash/includes":493,ud:625}],815:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i,a=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),s=o(e("@babel/runtime-corejs2/core-js/object/define-property")),l=o(e("@babel/runtime-corejs2/core-js/array/from")),u=o(e("@babel/runtime-corejs2/core-js/promise")),c=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),d=o(e("@babel/runtime-corejs2/helpers/createClass")),f=o(e("@babel/runtime-corejs2/helpers/defineProperty")),p=o(e("lodash/escape")),m=o(e("lodash/find")),h=e("ud"),b=(o(e("closest-ng")),o(e("kefir"))),v=o(e("kefir-stopper")),_=o(e("kefir-bus")),g=o(e("auto-html")),y=(o(e("../../../../common/censorHTMLstring")),o(e("../../../lib/delay-asap"))),w=o(e("../../../lib/array-to-lifetimes")),j=o(e("../../../lib/dom/querySelectorOrFail")),k=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),x=e("../../../lib/dom/simulate-mouse-event"),E=o(e("../../../lib/dom/simulate-key")),S=o(e("../../../lib/dom/insert-html-at-cursor")),C=(o(e("../../../lib/dom/querySelectorOne")),o(e("../../../lib/ErrorCollector")),o(e("../../../lib/handle-compose-link-chips"))),I=o(e("../../../lib/insert-link-chip-into-body")),A=o(e("../../../driver-common/compose/getPresendingStream")),T=o(e("../../../driver-common/compose/getDiscardStream")),D=o(e("../addRecipientRow")),M=o(e("./inbox-compose-button-view")),R=e("../../../lib/dom/get-selection"),O=o(e("../../../driver-common/getGmailThreadIdForRfcMessageId")),P=null,L=function(){function e(t,r,n){var o=this;(0,c.default)(this,e),(0,f.default)(this,"_element",void 0),(0,f.default)(this,"_driver",void 0),(0,f.default)(this,"_eventStream",(0,_.default)()),(0,f.default)(this,"_ajaxInterceptStream",void 0),(0,f.default)(this,"_sendingStream",void 0),(0,f.default)(this,"_stopper",(0,v.default)()),(0,f.default)(this,"_queueDraftSave",void 0),(0,f.default)(this,"_modifierButtonContainer",void 0),(0,f.default)(this,"_lastBodySelectionRange",void 0),(0,f.default)(this,"_draftID",void 0),(0,f.default)(this,"_isMinimized",!1),(0,f.default)(this,"_isFullscreenMode",!1),(0,f.default)(this,"_isPresending",!1),(0,f.default)(this,"_closedProgrammatically",!1),(0,f.default)(this,"_p",void 0),(0,f.default)(this,"_els",void 0),this._element=r,this._driver=t,this._modifierButtonContainer=null,this._lastBodySelectionRange=null,this._p=n,this._els=n.elements;var i=this._els.sendBtn&&this._els.sendBtn.parentElement&&this._els.sendBtn.parentElement.childElementCount;this._driver.getLogger().eventSite("compose open",{errorCount:this._p.errors.length,bottomAreaElementCount:i,isInline:this._p.attributes.isInline});var a=(0,_.default)();this._queueDraftSave=function(){a.emit(null)};var s=this._els.body;s&&(a.bufferBy(a.flatMap(function(){return(0,y.default)(null)})).filter(function(e){return e.length>0}).takeUntilBy(this._stopper).onValue(function(){var e=o._driver.getPageCommunicator().silenceGmailErrorsForAMoment();try{(0,E.default)(s,13,0)}finally{e()}}),b.default.merge([b.default.fromEvents(document.body,"mousedown"),b.default.fromEvents(document.body,"keydown")]).takeUntilBy(this.getStopper()).onValue(function(e){var t=document.getSelection();t.rangeCount>0&&s.contains(t.anchorNode)&&(o._lastBodySelectionRange=t.getRangeAt(0))}),this._eventStream.plug((0,k.default)(s,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"bodyChanged"}}))),b.default.fromEvents(this._element,"closedProgrammatically").takeUntilBy(this._stopper).onValue(function(){o._closedProgrammatically=!0}),this._draftID=this._driver.getPageCommunicator().getDraftIDForComposeView(this.getElement()),this._ajaxInterceptStream=this._driver.getPageCommunicator().ajaxInterceptStream.takeUntilBy(this._stopper).filter(function(e){return e.draftID===o._draftID}),this._setupStreams(),this.getEventStream().takeUntilBy(this._stopper).onValue(function(e){var t=e.eventName;if("presending"===t){o._isPresending=!0;var r=o.getEventStream().filter(function(e){return"sendCanceled"===e.eventName});o._sendingStream=b.default.merge([b.default.combine([o.getEventStream().filter(function(e){return"sending"===e.eventName}),o.getEventStream().filter(function(e){return"sent"===e.eventName})]),o._ajaxInterceptStream.filter(function(e){return"emailSendFailed"===e.type}),b.default.later(6e4).flatMap(function(){return b.default.constantError(new Error("Timed out waiting for ComposeView send"))})]).takeUntilBy(r).takeUntilBy(o._stopper).take(1).takeErrors(1),o._sendingStream.onValue(function(){o._isPresending=!1}).onError(function(e){o._driver.getLogger().error(e)}),o._driver.getPageCommunicator().notifyEmailSending(),o._p.attributes.isInline||b.default.later(5e3).takeUntilBy(o.getEventStream().filter(function(e){return-1!==["sendCanceled","presending"].indexOf(e.eventName)})).onValue(function(){document.contains(o._element)&&o._eventStream.emit({eventName:"sendCanceled"})})}else"sendCanceled"===t&&(o._isPresending=!1,o._driver.getPageCommunicator().notifyEmailSendCanceled())}),(0,C.default)(this);var l=this._els.fromPickerEmailSpan;l&&this._eventStream.plug((0,k.default)(l,{childList:!0,subtree:!0,characterData:!0}).map(function(){return{eventName:"fromContactChanged",data:{contact:o.getFromContact()}}}));var u=this._els.minimizeBtnImage;if(u){var d=function(){return/_maximize_/.test(u.src)},p=(0,k.default)(u,{attributes:!0});p.toProperty(function(){return null}).takeUntilBy(this._stopper).onValue(function(){o._isMinimized=d()}),this._eventStream.plug(p.map(function(){return{eventName:d()?"minimized":"restored"}}))}var m=this._els.toggleFullscreenButtonImage;if(m){var h=function(){return!/_enter_full_screen/.test(m.src)},g=(0,k.default)(m,{attributes:!0});g.toProperty(function(){return null}).takeUntilBy(this._stopper).onValue(function(){o._isFullscreenMode=h()}),this._eventStream.plug(g.map(function(){return{eventName:"fullscreenChanged",data:{fullscreen:h()}}}))}}return(0,d.default)(e,[{key:"removedFromDOM",value:function(){var e=this;this._element.removeAttribute("data-inboxsdk-draft-id");var t=function(){e._eventStream.emit({eventName:"destroy",data:{closedByInboxSDK:e._closedProgrammatically}}),e._eventStream.end(),e._stopper.destroy()};this._isPresending?this._sendingStream&&this._sendingStream.onEnd(t):t()}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"getElement",value:function(){return this._element}},{key:"_informBodyChanged",value:function(){this._els.bodyPlaceholder&&this._els.body&&this._els.body.textContent.length>0&&(this._els.bodyPlaceholder.style.display="none"),this._queueDraftSave()}},{key:"_getAddressChangesStream",value:function(){function e(e,t,r){if(!t)return b.default.never();var n=(0,k.default)(t.parentElement,{childList:!0,attributes:!0,subtree:!0}).merge(b.default.later(0)).map(r);return(0,w.default)(n,function(e){return e.emailAddress}).flatMap(function(t){var r=t.el,n=t.removalStream;return b.default.constant({eventName:e+"ContactAdded",data:{contact:r}}).merge(n.map(function(){return{eventName:e+"ContactRemoved",data:{contact:r}}}))})}var t=this,r=this._els,n=r.toInput,o=r.ccInput,i=r.bccInput;return b.default.merge([e("to",n,function(){return t.getToRecipients()}),e("cc",o,function(){return t.getCcRecipients()}),e("bcc",i,function(){return t.getBccRecipients()})]).takeUntilBy(this._stopper)}},{key:"_setupStreams",value:function(){var e=this;this._eventStream.plug(this._getAddressChangesStream()),this._eventStream.plug((0,A.default)({element:this.getElement(),sendButton:this.getSendButton()})),this._eventStream.plug((0,T.default)({element:this.getElement(),discardButton:this.getDiscardButton()})),this._eventStream.plug(b.default.fromEvents(this.getElement(),"inboxSDKsendCanceled").map(function(){return{eventName:"sendCanceled"}})),this._eventStream.plug(b.default.fromEvents(this.getElement(),"inboxSDKdiscardCanceled").map(function(){return{eventName:"discardCanceled"}})),this._eventStream.plug(this._ajaxInterceptStream.filter(function(e){return"emailSending"===e.type}).map(function(){return{eventName:"sending"}})),this._eventStream.plug(this._ajaxInterceptStream.filter(function(e){return"emailSent"===e.type}).map(function(t){var r={getThreadID:function(){return(0,O.default)(e._driver,t.rfcID)},getMessageID:function(){return e._driver.getGmailMessageIdForSyncMessageId("msg-a:".concat(t.draftID))}};return["gmailThreadId","gmailMessageId","threadID","messageID"].forEach(function(t){(0,s.default)(r,t,{get:function(){throw e._driver.getLogger().deprecationWarning("ComposeView sent event.".concat(t),"ComposeView sent event.getThreadID() or event.getMessageID()"),new Error("Not supported")}})}),{eventName:"sent",data:r}}))}},{key:"getFromContact",value:function(){var e=this._els.fromPickerEmailSpan;if(!e)return this._driver.getUserContact();var t=e.textContent,r=(0,m.default)(this.getFromContactChoices(),function(e){return e.emailAddress===t});if(!r)throw new Error("Failed to find from contact");return r}},{key:"getFromContactChoices",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get from values of inline compose");if(P)return P;var e=this._els.fromPicker;if(!e)return P=[this._driver.getUserContact()];var t=document.activeElement,r=this._element.parentElement.parentElement.firstElementChild,n=r.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'),o=0===n.length;try{if(o&&((0,x.simulateClick)(e),n=r.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]')),0===n.length)return P=[this._driver.getUserContact()];P=(0,l.default)(n).map(function(e){return{name:(0,j.default)(e,"span[title]").title,emailAddress:(0,j.default)(e,"span:not([title])").textContent}})}finally{o&&(0,x.simulateClick)(document.body),t&&t.focus()}return P}},{key:"setFromEmail",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set from value of inline compose");if(this.getFromContact().emailAddress!==e){var t=this._els.fromPicker;if(!t)throw new Error("from picker element not found");var r=document.activeElement,n=this._element.parentElement.parentElement.firstElementChild,o=n.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'),i=0===o.length;try{i&&((0,x.simulateClick)(t),o=n.querySelectorAll('li[role=menuitem][data-jsaction*=".switch_custom_from"]'));var a=(0,m.default)(o,function(t){return t.querySelector("span:not([title])").textContent===e});if(!a)throw new Error("Failed to find from contact to set");(0,x.simulateClick)(a)}finally{i&&(0,x.simulateClick)(t),r&&r.focus()}}}},{key:"focus",value:function(){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.focus();var e=document.getSelection(),t=this._lastBodySelectionRange;t&&e&&(e.removeAllRanges(),e.addRange(t))}},{key:"insertBodyTextAtCursor",value:function(e){return this.insertBodyHTMLAtCursor((0,p.default)(e).replace(/\n/g,"<br>"))}},{key:"insertBodyHTMLAtCursor",value:function(e){var t=(0,S.default)(this.getBodyElement(),e,this._lastBodySelectionRange);return this._informBodyChanged(),t}},{key:"insertLinkIntoBody",value:function(e,t){var r=(0,g.default)(i||(i=(0,a.default)(['<a href="','">',"</a>"])),t,e);return this.insertBodyHTMLAtCursor(r)}},{key:"insertLinkChipIntoBody",value:function(e){var t=(0,I.default)(this,e);return this._informBodyChanged(),t}},{key:"setBodyHTML",value:function(e){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.innerHTML=e,this._informBodyChanged()}},{key:"setBodyText",value:function(e){if(!this._els.body)throw new Error("Compose View missing body element");this._els.body.textContent=e,this._informBodyChanged()}},{key:"_setRecipients",value:function(e,t){var r=e.parentElement;if(!r)throw new Error("Should not happen");for(var n=document.activeElement,o=r.querySelectorAll('[role=button][jsaction*="remove_chip"]').length,i=0;i<o;i++){var a=r.querySelector('[role=button][jsaction*="remove_chip"]');if(!a)break;(0,x.simulateClick)(a)}t.forEach(function(t){e.value=t,e.dispatchEvent(new window.FocusEvent("blur"))}),n&&n.focus()}},{key:"setToRecipients",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");var t=this._els.toInput;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e)}},{key:"setCcRecipients",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");var t=this._els.ccInput;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e);var r=this._els.toggleCcBccButton;e.length&&r&&"none"!==r.style.display&&(0,x.simulateClick)(r)}},{key:"setBccRecipients",value:function(e){if(this._p.attributes.isInline)throw new Error("Can't set recipients of inline compose");var t=this._els.bccInput;if(!t)throw new Error("Compose View missing recipient input");this._setRecipients(t,e);var r=this._els.toggleCcBccButton;e.length&&r&&"none"!==r.style.display&&(0,x.simulateClick)(r)}},{key:"replaceSendButton",value:function(e){var t=this,r=this._p.elements.sendBtn;if(!r)throw new Error("Could not locate send button");r.style.display="none";var n=document.createElement("div");n.classList.add("inboxsdk__compose_customSendContainer"),n.appendChild(e),this._element.setAttribute("data-inboxsdk-send-replaced",""),r.insertAdjacentElement("afterend",n);var o=(0,v.default)();return function(){o.destroy(),n.remove(),t._element.removeAttribute("data-inboxsdk-send-replaced"),r.style.display=""}}},{key:"hideDiscardButton",value:function(){var e=this._p.elements.discardBtn;if(!e)throw new Error("Could not locate discard button");var t=e.previousElementSibling;if(!(t instanceof HTMLElement))throw new Error("Could not locate discard button divider");return e.style.display="none",t.style.display="none",function(){e.style.display="",t.style.display=""}}},{key:"close",value:function(){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose");var e=this._els.closeBtn;e&&(this._element.dispatchEvent(new CustomEvent("closedProgrammatically",{bubbles:!1,cancelable:!1,detail:null})),(0,x.simulateClick)(e))}},{key:"send",value:function(e){e.sendAndArchive;if(!this._els.sendBtn)throw new Error("Compose View missing send element");(0,x.simulateClick)(this._els.sendBtn)}},{key:"discard",value:function(){(0,x.simulateClick)(this.getDiscardButton())}},{key:"setMinimized",value:function(e){if(e!==this.isMinimized()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");var t=this._els.minimizeBtn;if(!t)throw new Error("Could not find minimize button");t.click()}}},{key:"setFullscreen",value:function(e){if(e!==this.isFullscreen()){if(this._p.attributes.isInline)throw new Error("Not implemented for inline compose views");var t=this._els.toggleFullscreenButton;if(!t)throw new Error("Could not find fullscreen button");t.click()}}},{key:"setTitleBarColor",value:function(e){if(this._p.attributes.isInline)throw new Error("Cannot set title bar of inline compose");var t=this._p.elements.titleBar;if(!t)throw new Error("Could not locate compose title bar");return t.style.backgroundColor=e,function(){t.style.backgroundColor=""}}},{key:"setTitleBarText",value:function(e){throw new Error("Not supported in Inbox")}},{key:"addButton",value:function(e,t,r){var n=new M.default(this,e,t,r);return u.default.resolve({buttonViewController:n,buttonDescriptor:{}})}},{key:"getModifierButtonContainer",value:function(){if(this._modifierButtonContainer)return this._modifierButtonContainer;if(this._modifierButtonContainer=this._element.querySelector(".inboxsdk__compose_actionToolbar"),this._modifierButtonContainer)return this._modifierButtonContainer;var e=document.createElement("div");if(e.className="inboxsdk__compose_actionToolbar",!this._p.attributes.isInline){var t=this._els.attachBtn?this._els.attachBtn.nextSibling:null;t instanceof HTMLElement&&"absolute"===t.style.position?t.style.display="none":this._driver.getLogger().error(new Error("Didn't find hiddenAttachBtn"))}var r=this._els.sendBtn;if(!r)throw new Error("Compose View missing send element");var n=r.parentElement;if(!n)throw new Error("Could not find send button parent");return n.insertBefore(e,r.nextSibling),this._modifierButtonContainer=e,e}},{key:"addRecipientRow",value:function(e){if(this._p.attributes.isInline)throw new Error("Cannot add recipient rows to inline compose views");return(0,D.default)(this,e)}},{key:"forceRecipientRowsOpen",value:function(){return console.warn("ComposeView.forceRecipientRowsOpen() is a no-op in Inbox"),function(){}}},{key:"hideNativeRecipientRows",value:function(){if(this._p.attributes.isInline)throw new Error("Cannot hide recipient rows on inline compose views");var e=[this.getToRow(),this.getCCRow(),this.getBCCRow()];return e.forEach(function(e){e.classList.add("inboxsdk__compose_forceRecipientRowHidden")}),function(){e.forEach(function(e){e.classList.remove("inboxsdk__compose_forceRecipientRowHidden")})}}},{key:"hideRecipientArea",value:function(){throw new Error("Not implemented")}},{key:"addOuterSidebar",value:function(e){throw new Error("Not implemented")}},{key:"addInnerSidebar",value:function(e){throw new Error("Not implemented")}},{key:"addComposeNotice",value:function(e){throw new Error("Not implemented")}},{key:"addStatusBar",value:function(e){throw new Error("Not implemented")}},{key:"hideNativeStatusBar",value:function(){throw new Error("Not Implemented")}},{key:"isForward",value:function(){throw new Error("Not Implemented")}},{key:"isReply",value:function(){if(this._p.attributes.isInline)return!0;throw new Error("Not implemented")}},{key:"isInlineReplyForm",value:function(){return this._p.attributes.isInline}},{key:"popOut",value:function(){if(!this._p.attributes.isInline)throw new Error("Can only pop out inline reply compose views");if(!this._els.popOutBtn)throw new Error("Should not happen");(0,x.simulateClick)(this._els.popOutBtn)}},{key:"registerRequestModifier",value:function(e){throw new Error("Not implemented")}},{key:"attachFiles",value:function(e){throw new Error("Not implemented")}},{key:"attachInlineFiles",value:function(e){throw new Error("Not implemented")}},{key:"isFullscreen",value:function(){return this._isFullscreenMode}},{key:"isMinimized",value:function(){return this._isMinimized}},{key:"getSubjectInput",value:function(){return this._els.subject}},{key:"getMetadataFormElement",value:function(){throw new Error("Not supported in Inbox.")}},{key:"getToRow",value:function(){var e=this._els.toRow;if(!e)throw new Error("Could not locate To row");return e}},{key:"getCCRow",value:function(){var e=this._els.ccRow;if(!e)throw new Error("Could not locate CC row");return e}},{key:"getBCCRow",value:function(){var e=this._els.bccRow;if(!e)throw new Error("Could not locate BCC row");return e}},{key:"getBodyElement",value:function(){if(!this._els.body)throw new Error("Compose View missing body element");return this._els.body}},{key:"getHTMLContent",value:function(){return this.getBodyElement().innerHTML}},{key:"getTextContent",value:function(){return this.getBodyElement().textContent}},{key:"getSelectedBodyHTML",value:function(){return(0,R.getSelectedHTMLInElement)(this.getBodyElement(),this._lastBodySelectionRange)}},{key:"getSelectedBodyText",value:function(){return(0,R.getSelectedTextInElement)(this.getBodyElement(),this._lastBodySelectionRange)}},{key:"getSubject",value:function(){var e=this._els.subject;if(!e)throw new Error("InboxSDK: Could not locate subject field");return e.value}},{key:"setSubject",value:function(e){if(this._p.attributes.isInline)throw new Error("setSubject is not supported for inline compose views");if(!this._els.subject)throw new Error("InboxSDK: Could not locate subject field");this._els.subject.value=e}},{key:"_getRecipients",value:function(e){var t=e.parentElement;if(!t)throw new Error("Should not happen");return(0,l.default)(t.children).filter(function(e){return"DIV"===e.nodeName&&e.hasAttribute("email")&&"none"!==e.style.display}).map(function(e){return{emailAddress:e.getAttribute("email")||"",name:e.textContent}})}},{key:"getToRecipients",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");var e=this._els.toInput;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}},{key:"getCcRecipients",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");var e=this._els.ccInput;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}},{key:"getBccRecipients",value:function(){if(this._p.attributes.isInline)throw new Error("Can't get recipients of inline compose");var e=this._els.bccInput;if(!e)throw new Error("Compose View missing recipient input");return this._getRecipients(e)}},{key:"getComposeID",value:function(){throw new Error("This method was discontinued")}},{key:"getInitialMessageID",value:function(){throw new Error("composeView.getInitialMessageID is not implemented in Inbox")}},{key:"getMessageID",value:function(){throw new Error("composeView.getMessageID is not implemented in Inbox")}},{key:"getThreadID",value:function(){return null}},{key:"getCurrentDraftID",value:function(){return u.default.resolve(this._draftID)}},{key:"getDraftID",value:function(){return u.default.resolve(this._draftID)}},{key:"addTooltipToButton",value:function(e,t,r){e.showTooltip(r)}},{key:"closeButtonTooltip",value:function(e){e.closeTooltip()}},{key:"getDiscardButton",value:function(){if(!this._els.discardBtn)throw new Error("Compose View missing discard button");return this._els.discardBtn}},{key:"getSendButton",value:function(){if(!this._els.sendBtn)throw new Error("Compose View missing send button");return this._els.sendBtn}},{key:"ensureAppButtonToolbarsAreClosed",value:function(){}},{key:"ensureFormattingToolbarIsHidden",value:function(){}}]),e}(),V=(0,h.defn)(t,L);r.default=V},{"../../../../common/censorHTMLstring":636,"../../../driver-common/compose/getDiscardStream":828,"../../../driver-common/compose/getPresendingStream":829,"../../../driver-common/getGmailThreadIdForRfcMessageId":832,"../../../lib/ErrorCollector":843,"../../../lib/array-to-lifetimes":846,"../../../lib/delay-asap":850,"../../../lib/dom/get-selection":855,"../../../lib/dom/insert-html-at-cursor":857,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOne":867,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/dom/simulate-key":873,"../../../lib/dom/simulate-mouse-event":874,"../../../lib/handle-compose-link-chips":880,"../../../lib/insert-link-chip-into-body":886,"../addRecipientRow":777,"./inbox-compose-button-view":814,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"auto-html":89,"closest-ng":105,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/escape":482,"lodash/find":484,ud:625}],816:[function(e,t,r){"use strict"
;var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=(o(e("kefir")),o(e("kefir-stopper"))),u=o(e("kefir-bus")),c=o(e("classnames")),d=o(e("../../../lib/idMap")),f=o(e("../../../lib/parseParamsFromRouteID")),p=o(e("../getSidebarClassnames")),m=function(){function e(t,r){(0,i.default)(this,e),(0,s.default)(this,"_routeID",void 0),(0,s.default)(this,"_params",void 0),(0,s.default)(this,"_eventStream",(0,u.default)()),(0,s.default)(this,"_stopper",(0,l.default)()),(0,s.default)(this,"_customViewElement",void 0),this._routeID=t,this._params=(0,f.default)(t,r),this._customViewElement=document.createElement("div"),this.setFullWidth(!0)}return(0,a.default)(e,[{key:"setFullWidth",value:function(e){var t,r=(0,p.default)().centerList||"UNKNOWN_centerList";this._customViewElement.className=(0,c.default)((0,d.default)("custom_view_container"),(t={},(0,s.default)(t,(0,d.default)("custom_view_min_margins"),e),(0,s.default)(t,r,!e),t))}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy(),this._customViewElement.remove()}},{key:"getElement",value:function(){throw new Error("should not happen")}},{key:"getType",value:function(){return"CUSTOM"}},{key:"getRouteType",value:function(){return"CUSTOM"}},{key:"getRouteID",value:function(){return this._routeID}},{key:"getParams",value:function(){return this._params}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getCustomViewElement",value:function(){return this._customViewElement}},{key:"refresh",value:function(){throw new Error("should not happen")}},{key:"getHash",value:function(){throw new Error("should not happen")}},{key:"addCollapsibleSection",value:function(e,t){throw new Error("should not happen")}},{key:"addSection",value:function(e,t){throw new Error("should not happen")}}]),e}();r.default=m},{"../../../lib/idMap":882,"../../../lib/parseParamsFromRouteID":892,"../getSidebarClassnames":792,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,classnames:104,kefir:327,"kefir-bus":324,"kefir-stopper":326}],817:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/parse-int")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=e("ud"),c=o(e("kefir")),d=o(e("kefir-stopper")),f=o(e("kefir-bus")),p=o(e("./inbox-backdrop")),m=o(e("../../../lib/from-event-target-capture")),h=o(e("../../../../common/find-parent")),b="inboxSDKdrawerViewTakingOver",v=function(){function e(t){var r=this;(0,a.default)(this,e),(0,l.default)(this,"_chrome",void 0),(0,l.default)(this,"_exitEl",void 0),(0,l.default)(this,"_containerEl",void 0),(0,l.default)(this,"_el",void 0),(0,l.default)(this,"_backdrop",null),(0,l.default)(this,"_slideAnimationDone",void 0),(0,l.default)(this,"_closing",(0,d.default)()),(0,l.default)(this,"_closed",(0,d.default)()),(0,l.default)(this,"_composeChanges",(0,f.default)()),(0,l.default)(this,"_preAutoCloseStream",(0,f.default)()),this._chrome="boolean"!=typeof t.chrome||t.chrome;var n=document.body,o=null,i=t.composeView,s=t.closeWithCompose;if(i){var u=this._setupComposeInsertionTarget(i,s);n=u.insertionTarget,o=u.composeRect}this._setupElement(t,n);var p=0;if(i){if(!o)throw new Error("should not happen");p=this._setupComposeAnimation(i,o,!0)}this._el.offsetHeight,this._el.classList.add("inboxsdk__active"),this._slideAnimationDone=c.default.fromEvents(this._el,"transitionend").take(1).takeUntilBy(this._closing).map(function(){return null}),i&&this._positionCompose(i,p),(0,m.default)(document,"keydown").filter(function(e){return e.key?"Escape"===e.key:27===e.which}).takeUntilBy(this._closing).onValue(function(e){var t=e.preventDefault;e.preventDefault=function(){return this._defaultPreventedInContext=!0,t.call(this)}}),c.default.fromEvents(document,"keydown").filter(function(e){return e.key?"Escape"===e.key:27===e.which}).filter(function(e){return!e._defaultPreventedInContext}).filter(function(e){var t=!1,n={type:"escape",cause:e,cancel:function(){t=!0}};return r._preAutoCloseStream.emit(n),!t}).takeUntilBy(this._closing).onValue(function(){r.close()})}return(0,s.default)(e,[{key:"_setupComposeInsertionTarget",value:function(e,t){var r=this;if(e.isMinimized())throw new Error("Can't attach DrawerView to minimized ComposeView");if(e.isInlineReplyForm())throw new Error("Can't attach DrawerView to inline ComposeView");e.isFullscreen()&&e.setFullscreen(!1);var n=[c.default.fromEvents(e,"restored"),c.default.later(10).flatMap(function(){return c.default.fromEvents(e,"fullscreenChanged")})];t&&n.push(c.default.fromEvents(e,"destroy"),c.default.fromEvents(e,"minimized")),c.default.merge(n).takeUntilBy(this._closing.merge(this._composeChanges)).onValue(function(){return r.close()});var o=e.getElement(),i=o.getBoundingClientRect(),a=o.offsetParent;if(!(a instanceof HTMLElement))throw new Error("should not happen");var s=(0,h.default)(a,function(e){return"auto"!==window.getComputedStyle(e).getPropertyValue("z-index")&&0===e.getBoundingClientRect().left})||document.body;return o.dispatchEvent(new CustomEvent(b,{bubbles:!1,cancelable:!1,detail:null})),a.dispatchEvent(new CustomEvent(b,{bubbles:!1,cancelable:!1,detail:null})),s.dispatchEvent(new CustomEvent(b,{bubbles:!1,cancelable:!1,detail:null})),s.classList.add("inboxsdk__drawers_in_use"),s.style.zIndex=String(500),a.hasAttribute("data-drawer-old-zindex")||a.setAttribute("data-drawer-old-zindex",a.style.zIndex),a.style.zIndex=String(502),this._closed.takeUntilBy(c.default.fromEvents(s,b)).onValue(function(){s.style.zIndex=""}),this._closed.merge(this._composeChanges).takeUntilBy(c.default.fromEvents(a,b)).onValue(function(){a.style.zIndex=a.getAttribute("data-drawer-old-zindex")||"",a.removeAttribute("data-drawer-old-zindex")}),{composeRect:i,insertionTarget:s}}},{key:"_setupElement",value:function(e,t){var r=this,n=this._backdrop=new p.default(500,t);if(this._preAutoCloseStream.plug(n.getPreAutoCloseStream()),n.getStopper().takeUntilBy(this._closing).onValue(function(){r.close()}),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__drawer_view_container",this._containerEl.style.zIndex=String(501),this._el=document.createElement("div"),this._el.setAttribute("role","dialog"),this._el.tabIndex=0,this._el.className="inboxsdk__drawer_view",e.matchSidebarContentPanelWidth&&this._el.classList.add("inboxsdk__match_sidebar_content_panel_width"),this._containerEl.appendChild(this._el),this._chrome){var o=document.createElement("div");o.className="inboxsdk__drawer_title_bar";var i=document.createElement("button");i.type="button",i.title="Close",i.className="inboxsdk__close_button",i.addEventListener("click",function(e){r.close()}),o.appendChild(i);var a=document.createElement("div");a.className="inboxsdk__drawer_title",a.setAttribute("role","heading"),a.textContent=e.title||"",o.appendChild(a),this._el.appendChild(o)}this._el.appendChild(e.el),t.appendChild(this._containerEl),this._closing.onValue(function(){r._backdrop&&r._backdrop.destroy(),r._el.classList.remove("inboxsdk__active"),c.default.fromEvents(r._el,"transitionend").merge(c.default.later(200)).take(1).onValue(function(){r._closed.destroy(),r._containerEl.remove()})})}},{key:"_setupComposeAnimation",value:function(e,t,r){var n=e.getElement(),o=n.parentElement,a=this._el.getBoundingClientRect(),s=(0,i.default)(o.style.left)||0,l=t.right-s-(window.innerWidth-a.width-24);return l>0&&(o.style.position="relative",o.style.transition="left 150ms cubic-bezier(.4,0,.2,1)",o.style.left="0",r&&o.offsetHeight),l}},{key:"_positionCompose",value:function(e,t){if(t>0){var r=e.getElement(),n=r.parentElement;n.style.left="".concat(-t,"px"),this._closing.takeUntilBy(this._composeChanges).takeUntilBy(c.default.fromEvents(r,b)).onValue(function(){n.style.left="0"}).flatMap(function(){return c.default.fromEvents(n,"transitionend").merge(c.default.later(200))}).merge(this._composeChanges).take(1).takeUntilBy(c.default.fromEvents(r,b)).onValue(function(){n.style.position="",n.style.left="",n.style.transition=""})}}},{key:"associateComposeView",value:function(e,t){this._composeChanges.emit(null);var r=this._setupComposeInsertionTarget(e,t),n=r.insertionTarget,o=r.composeRect;this._backdrop&&n.appendChild(this._backdrop.getElement()),this._containerEl.parentElement!==n&&n.appendChild(this._containerEl);var i=this._setupComposeAnimation(e,o,!1);this._positionCompose(e,i)}},{key:"disassociateComposeView",value:function(){this._composeChanges.emit(null)}},{key:"getSlideAnimationDone",value:function(){return this._slideAnimationDone}},{key:"getClosingStream",value:function(){return this._closing}},{key:"getClosedStream",value:function(){return this._closed}},{key:"getPreAutoCloseStream",value:function(){return this._preAutoCloseStream}},{key:"close",value:function(){this._closing.destroy()}}]),e}(),_=(0,u.defn)(t,v);r.default=_},{"../../../../common/find-parent":640,"../../../lib/from-event-target-capture":878,"./inbox-backdrop":812,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-int":23,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"kefir-stopper":326,ud:625}],818:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=function(){function e(t){(0,i.default)(this,e),(0,s.default)(this,"_containerEl",void 0),(0,s.default)(this,"_contentEl",void 0),this._containerEl=document.createElement("div"),this._containerEl.className="inboxsdk__dropdown "+(t||""),this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__dropdown_content",this._containerEl.appendChild(this._contentEl)}return(0,a.default)(e,[{key:"getContentElement",value:function(){return this._contentEl}},{key:"getContainerElement",value:function(){return this._containerEl}},{key:"destroy",value:function(){this._containerEl.remove()}}]),e}();r.default=l},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],819:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=(o(e("kefir")),o(e("kefir-stopper"))),u=o(e("kefir-bus")),c=function(){function e(t){(0,i.default)(this,e),(0,s.default)(this,"_type",void 0),(0,s.default)(this,"_eventStream",(0,u.default)()),(0,s.default)(this,"_stopper",(0,l.default)()),this._type=t}return(0,a.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy()}},{key:"getElement",value:function(){throw new Error("Should not happen")}},{key:"getType",value:function(){return this._type}},{key:"getRouteType",value:function(){return"UNKNOWN"}},{key:"getRouteID",value:function(){return"UNKNOWN"}},{key:"getParams",value:function(){return{}}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getCustomViewElement",value:function(){return null}},{key:"refresh",value:function(){}},{key:"getHash",value:function(){throw new Error("should not happen")}},{key:"addCollapsibleSection",value:function(e,t){throw new Error("should not happen")}},{key:"addSection",value:function(e,t){throw new Error("should not happen")}},{key:"setFullWidth",value:function(e){throw new Error("should not happen")}}]),e}();r.default=c},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"kefir-stopper":326}],820:[function(e,t,r){"use strict";function n(e,t){var r=h(e);if(b){var n=b(e);t&&(n=n.filter(function(t){return v(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,S.default)(e,t,r[t])}):_?g(e,_(r)):n(Object(r)).forEach(function(t){y(e,t,v(r,t))})}return e}function i(e,t){var r=void 0!==f&&e[p]||e["@@iterator"];if(!r){if(m(e)||(r=a(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?d(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t=u();return function(){var r,n=(0,T.default)(e);if(t){var o=(0,T.default)(this).constructor;r=c(n,arguments,o)}else r=n.apply(this,arguments);return(0,A.default)(this,r)}}function u(){if("undefined"==typeof Reflect||!c)return!1;if(c.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(c(Boolean,[],function(){})),!0}catch(e){return!1}}var c=e("@babel/runtime-corejs2/core-js/reflect/construct"),d=e("@babel/runtime-corejs2/core-js/array/from"),f=e("@babel/runtime-corejs2/core-js/symbol"),p=e("@babel/runtime-corejs2/core-js/symbol/iterator"),m=e("@babel/runtime-corejs2/core-js/array/is-array"),h=e("@babel/runtime-corejs2/core-js/object/keys"),b=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),v=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),_=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),g=e("@babel/runtime-corejs2/core-js/object/define-properties"),y=e("@babel/runtime-corejs2/core-js/object/define-property"),w=e("@babel/runtime-corejs2/helpers/interopRequireDefault");y(r,"__esModule",{value:!0}),r.default=void 0;var j=w(e("@babel/runtime-corejs2/regenerator")),k=w(e("@babel/runtime-corejs2/core-js/array/from")),x=w(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),E=w(e("@babel/runtime-corejs2/helpers/createClass")),S=w(e("@babel/runtime-corejs2/helpers/defineProperty")),C=w(e("@babel/runtime-corejs2/helpers/classCallCheck")),I=w(e("@babel/runtime-corejs2/helpers/inherits")),A=w(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),T=w(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),D=e("ud"),M=(w(e("asap")),w(e("kefir"))),R=w(e("kefir-bus")),O=w(e("bignumber.js")),P=w(e("../../../lib/delay-asap")),L=w(e("../../../../common/censorHTMLtree")),V=w(e("../../../lib/dom/make-mutation-observer-chunked-stream")),N=w(e("./inbox-attachment-card-view")),B=w(e("../../../../common/find-parent")),q=w(e("../detection/message/parser")),U=w(e("../../../lib/safe-event-emitter")),F=function(e){function t(){return(0,C.default)(this,t),r.apply(this,arguments)}(0,I.default)(t,e);var r=l(t);return t}(U.default),H=function(){function e(t,r,n){var o=this;(0,C.default)(this,e),(0,S.default)(this,"_element",void 0),(0,S.default)(this,"_driver",void 0),(0,S.default)(this,"_p",void 0),(0,S.default)(this,"_stopper",void 0),(0,S.default)(this,"_eventStream",(0,R.default)()),(0,S.default)(this,"_threadViewDriver",void 0),(0,S.default)(this,"_attachmentCardViews",[]),this._element=t,this._driver=r,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}),(0,V.default)(this._element,{attributes:!0,attributeFilter:["data-msg-id"]}).toProperty(function(){return null}).map(function(){return o._element.getAttribute("data-msg-id")}).skipDuplicates().changes().onValue(function(){o.destroy()}),(0,V.default)(this._element,{attributes:!0,attributeFilter:["aria-expanded"]}).toProperty(function(){return null}).map(function(){return"true"===o._element.getAttribute("aria-expanded")}).skipDuplicates().changes().takeUntilBy(this._stopper).onValue(function(e){e?o._reparse():o.destroy()}),this._threadViewDriver=this._findThreadView(),this._threadViewDriver&&this._threadViewDriver.addMessageViewDriver(this),this._driver.getMessageViewElementsMap().set(this._element,this),this._monitorEmailAddressHovering()}return(0,E.default)(e,[{key:"_findThreadView",value:function(){var e=this._driver.getThreadViewElementsMap(),t=(0,B.default)(this._element,function(t){return e.has(t)});return t?e.get(t):null}},{key:"_reparse",value:function(){var e=this._p;this._p=(0,q.default)(this._element),this._p.errors.length>0&&this._driver.getLogger().errorSite(new Error("message reparse errors"),{score:this._p.score,errors:this._p.errors,html:(0,L.default)(this._element)}),!e.attributes.loaded&&this._p.attributes.loaded&&this._eventStream.emit({type:"internal",eventName:"messageLoad"}),e.attributes.viewState!==this._p.attributes.viewState&&this._eventStream.emit({eventName:"viewStateChange",oldValue:e.attributes.viewState,newValue:this._p.attributes.viewState})}},{key:"_monitorEmailAddressHovering",value:function(){var e=this;this._eventStream.plug(M.default.fromEvents(this._element,"mouseover").map(function(e){return e.target}).filter(function(e){return e&&e.getAttribute("email")}).map(function(t){var r,n={name:t.textContent,emailAddress:t.getAttribute("email")};if(e._p.elements.sender&&e._p.elements.sender.contains(t))r="sender";else{if(!e._p.attributes.recipientElements||!(0,k.default)(e._p.attributes.recipientElements).some(function(e){return e.contains(t)}))return null;r="recipient"}return{eventName:"contactHover",messageViewDriver:e,contact:n,contactType:r}}).filter())}},{key:"addAttachmentCardViewDriver",value:function(e){var t=this;this._attachmentCardViews.push(e),e.getStopper().takeUntilBy(this._stopper).onValue(function(){t._attachmentCardViews=t._attachmentCardViews.filter(function(t){return t!==e})})}},{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"isLoaded",value:function(){return this._p.attributes.loaded}},{key:"hasOpenReply",value:function(){return!1}},{key:"getMessageID",value:function(){var e=this._p.attributes.inboxMessageId;if(!e)throw new Error("Failed to find message id");/^msg-a:/.test(e)&&console.warn("MessageView.getMessageID() returned an incorrect message ID. This method will be deprecated soon. Use getMessageIDAsync() instead which does not have this problem.");var t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new O.default(t[0]).toString(16)}},{key:"getMessageIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,x.default)(j.default.mark(function e(){var t,r,n,o,a,s;return j.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes.inboxMessageId){e.next=3;break}throw new Error("Failed to find message id");case 3:if(!/^msg-a:/.test(t)){e.next=31;break}r=i(this._driver.getComposeViewDriverLiveSet().values()),e.prev=5,r.s();case 7:if((n=r.n()).done){e.next=18;break}return o=n.value,e.next=11,o.getDraftID();case 11:if(!(a=e.sent)||"msg-a:".concat(a)!==t){e.next=16;break}return e.next=15,o.getStopper().take(1).toPromise();case 15:return e.abrupt("break",18);case 16:e.next=7;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.next=28,this._driver.getGmailMessageIdForSyncMessageId(t);case 28:return e.abrupt("return",e.sent);case 31:if(s=/\d+$/.exec(t)){e.next=34;break}throw new Error("Should not happen");case 34:return e.abrupt("return",new O.default(s[0]).toString(16));case 35:case"end":return e.stop()}},e,this,[[5,20,23,26]])}));return e}()},{key:"getContentsElement",value:function(){if(!this._p.elements.body)throw new Error("Could not find body element");return this._p.elements.body}},{key:"getLinks",value:function(){throw new Error("not implemented yet")}},{key:"isElementInQuotedArea",value:function(e){return null!=(0,B.default)(e,function(e){return e.classList.contains("gmail_extra")})}},{key:"addMoreMenuItem",value:function(e){throw new Error("not implemented yet")}},{key:"addAttachmentIcon",value:function(e){return console.warn("MessageView.addAttachmentIcon is not implemented yet in Inbox"),new F}},{key:"getAttachmentCardViewDrivers",value:function(){return this._attachmentCardViews}},{key:"addAttachmentCard",value:function(e){var t=this._p.elements.attachmentsArea;if(!t)throw new Error("Could not find attachments area");var r=t.lastElementChild;return r||(t.style.display="",t.style.margin="16px 0 0",t.style.paddingTop="16px",r=document.createElement("div"),t.appendChild(r)),new N.default(o(o({},e),{},{element:null,container:r}),this._driver)}},{key:"addButtonToDownloadAllArea",value:function(e){}},{key:"getViewState",value:function(){return this._p.attributes.viewState}},{key:"getDateString",value:function(){throw new Error("not implemented yet")}},{key:"getSender",value:function(){var e=this._p.elements.sender;if(!e)throw new Error("could not find sender element");var t=e.getAttribute("email");if(!t)throw new Error("could not find email address");return{emailAddress:t,name:e.textContent}}},{key:"getRecipients",value:function(){var e=this._driver.getUserContact();return Array.prototype.map.call(this._p.attributes.recipientElements,function(t){var r=t.getAttribute("email");return r===e.emailAddress?e:{emailAddress:r,name:t.textContent}})}},{key:"getRecipientEmailAddresses",value:function(){return this.getRecipients().map(function(e){return e.emailAddress})}},{key:"getRecipientsFull",value:function(){function e(){return t.apply(this,arguments)}var t=(0,x.default)(j.default.mark(function e(){return j.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getRecipients());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getThreadViewDriver",value:function(){if(!this._threadViewDriver)throw new Error("failed to find threadView");return this._threadViewDriver}},{key:"getReadyStream",value:function(){return M.default.repeat(function(e){return e>10?null:(0,P.default)(null)}).ignoreValues().beforeEnd(function(){return null})}},{key:"destroy",value:function(){this._eventStream.end(),this._attachmentCardViews.slice().forEach(function(e){e.destroy()})}}]),e}(),z=(0,D.defn)(t,H);r.default=z},{"../../../../common/censorHTMLtree":637,"../../../../common/find-parent":640,"../../../lib/delay-asap":850,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/safe-event-emitter":898,"../detection/message/parser":785,"./inbox-attachment-card-view":810,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/regenerator":59,asap:83,"bignumber.js":99,kefir:327,"kefir-bus":324,ud:625}],821:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=o(e("lodash/sortBy")),c=(o(e("kefir")),o(e("kefir-bus"))),d=(o(e("../../../lib/dom/insert-element-in-order")),o(e("../../../lib/dom/querySelectorOrFail"))),f=function(){function e(t){var r=this;(0,i.default)(this,e),(0,s.default)(this,"_eventStream",(0,c.default)()),(0,s.default)(this,"_modalContainerElement",void 0),this._setupModalContainerElement(t),this._processOptions(t),(0,d.default)(this._modalContainerElement,".inboxsdk__close_button").addEventListener("click",function(e){r._eventStream.emit({eventName:"closeClick",domEvent:e})})}return(0,a.default)(e,[{key:"destroy",value:function(){this._modalContainerElement.remove(),this._eventStream.end()}},{key:"getModalContainerElement",value:function(){return this._modalContainerElement}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"_processOptions",value:function(e){this.setTitle(e.title),this.setContentElement(e.el),this.setButtons(e.buttons||[]),this.setChromeClasses(e.chrome,e.showCloseButton)}},{key:"setTitle",value:function(e){var t=(0,d.default)(this._modalContainerElement,"[role=heading]");e?(t.style.display="",t.textContent=e):t.style.display="none"}},{key:"setContentElement",value:function(e){var t=(0,d.default)(this._modalContainerElement,".inboxsdk__modal_content");t.innerHTML="","string"==typeof e?t.innerHTML=e:e instanceof Element&&t.appendChild(e)}},{key:"setButtons",value:function(e){var t=(0,d.default)(this._modalContainerElement,".inboxsdk__modal_buttons");e.length>0?this._modalContainerElement.classList.add("inboxsdk__modal_hasButtons"):this._modalContainerElement.classList.remove("inboxsdk__modal_hasButtons"),t.innerHTML="",(0,u.default)(e,[function(e){return"PRIMARY_ACTION"===e.type?0:1},function(e){return e.orderHint||0}]).forEach(function(e){var r=document.createElement("input");r.className="PRIMARY_ACTION"===e.type?"inboxsdk__primary":"",r.type="button",r.value=e.text,r.addEventListener("click",function(t){t.preventDefault(),e.onClick.call(null)}),t.appendChild(r)})}},{key:"setChromeClasses",value:function(e,t){!1===e?this._modalContainerElement.classList.add("inboxsdk__modal_chromeless"):this._modalContainerElement.classList.remove("inboxsdk__modal_chromeless"),t?this._modalContainerElement.classList.add("inboxsdk__modal_showCloseButton"):this._modalContainerElement.classList.remove("inboxsdk__modal_showCloseButton")}},{key:"_setupModalContainerElement",value:function(e){var t=e.constrainTitleWidth?"inboxsdk__modal_toprow--constrain-title-width":"";this._modalContainerElement=document.createElement("div"),this._modalContainerElement.className="inboxsdk__modal_fullscreen";var r='\n    <div class="inboxsdk__modal_container" tabindex="0" role="alertdialog">\n      <div class="inboxsdk__modal_toprow '.concat(t,'">\n        <span role="heading"></span>\n        <button title="Close" class="inboxsdk__close_button"></button>\n      </div>\n      <div class="inboxsdk__modal_content">\n      </div>\n      <div class="inboxsdk__modal_buttons"></div>\n    </div>\n    ');this._modalContainerElement.innerHTML=r}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"../../../lib/dom/insert-element-in-order":856,"../../../lib/dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"lodash/sortBy":519,ud:625}],822:[function(e,t,r){"use strict";function n(e){return""===e?p.NATIVE_ROUTE_IDS.INBOX:(0,c.default)(["snoozed","reminders","done","spam","trash"],e)?p.NATIVE_ROUTE_IDS[e.toUpperCase()]:/search\//.test(e)?p.NATIVE_ROUTE_IDS.SEARCH:"UNKNOWN"}function o(e){var t=e.split("/");return t.length<2?{}:{query:decodeURIComponent(t[1])}}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=a(e("@babel/runtime-corejs2/helpers/createClass")),u=a(e("@babel/runtime-corejs2/helpers/defineProperty")),c=a(e("lodash/includes")),d=(a(e("kefir")),a(e("kefir-stopper"))),f=a(e("kefir-bus")),p=e("../../../constants/router"),m=function(){function e(t,r){(0,s.default)(this,e),(0,u.default)(this,"_element",void 0),(0,u.default)(this,"_type",void 0),(0,u.default)(this,"_routeType",void 0),(0,u.default)(this,"_routeID",void 0),(0,u.default)(this,"_params",void 0),(0,u.default)(this,"_eventStream",(0,f.default)()),(0,u.default)(this,"_stopper",(0,d.default)()),this._element=t,this._type=r;var i=document.location.pathname.slice(1);this._routeID=n(i),this._params=o(i),this._routeType="UNKNOWN"===this._routeID?"UNKNOWN":"LIST"}return(0,l.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy()}},{key:"getElement",value:function(){return this._element}},{key:"getType",value:function(){return this._type}},{key:"getRouteType",value:function(){return this._routeType}},{key:"getRouteID",value:function(){return this._routeID}},{key:"getParams",value:function(){return this._params}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"refresh",value:function(){}},{key:"getHash",value:function(){throw new Error("should not happen")}},{key:"getCustomViewElement",value:function(){throw new Error("should not happen")}},{key:"addCollapsibleSection",value:function(e,t){throw new Error("not implemented yet")}},{key:"addSection",value:function(e,t){throw new Error("not implemented yet")}},{key:"setFullWidth",value:function(e){throw new Error("should not happen")}}]),e}();r.default=m},{"../../../constants/router":658,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,
kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/includes":493}],823:[function(e,t,r){"use strict";function n(e,t){var r=i(e);if(a){var n=a(e);t&&(n=n.filter(function(t){return s(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,y.default)(e,t,r[t])}):l?u(e,l(r)):n(Object(r)).forEach(function(t){c(e,t,s(r,t))})}return e}var i=e("@babel/runtime-corejs2/core-js/object/keys"),a=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),u=e("@babel/runtime-corejs2/core-js/object/define-properties"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f,p,m=d(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),h=d(e("@babel/runtime-corejs2/core-js/array/is-array")),b=d(e("@babel/runtime-corejs2/regenerator")),v=d(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),_=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),g=d(e("@babel/runtime-corejs2/helpers/createClass")),y=d(e("@babel/runtime-corejs2/helpers/defineProperty")),w=e("ud"),j=d(e("../../../driver-common/update-icon")),k=d(e("auto-html")),x=d(e("kefir")),E=d(e("kefir-bus")),S=(d(e("kefir-stopper")),d(e("kefir-cast"))),C=d(e("bignumber.js")),I=d(e("./InboxLabelView")),A=d(e("./InboxToolbarButtonView")),T=function(){function e(t,r,n){(0,_.default)(this,e),(0,y.default)(this,"_element",void 0),(0,y.default)(this,"_driver",void 0),(0,y.default)(this,"_p",void 0),(0,y.default)(this,"_userView",void 0),(0,y.default)(this,"_eventStream",(0,E.default)()),(0,y.default)(this,"_stopper",void 0),(0,y.default)(this,"_isDestroyed",!1),this._element=t,this._driver=r,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty()}return(0,g.default)(e,[{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"setUserView",value:function(e){this._userView=e}},{key:"isSelected",value:function(){if(!this._p.elements.checkbox)throw new Error("Did not find checkbox element");return"true"===this._p.elements.checkbox.getAttribute("aria-checked")}},{key:"addToolbarButton",value:function(e){var t=this._p.elements.toolbar;if(!t)throw new Error("could not find toolbar element");t.classList.add("inboxsdk__list_toolbar");var r=new A.default(o(o({},e),{},{onClick:function(r){r.dropdown&&(t.classList.add("inboxsdk__thread_row_force_toolbar_visible"),r.dropdown.once("destroy",function(){t.classList.remove("inboxsdk__thread_row_force_toolbar_visible")})),e.onClick&&e.onClick(r)}}),this._driver.getAppId(),t);return this._stopper.takeUntilBy(r.getStopper()).onValue(function(){r.destroy()}),r}},{key:"addAttachmentIcon",value:function(e){throw new Error("Not supported in Inbox")}},{key:"addButton",value:function(e){throw new Error("Not supported in Inbox")}},{key:"addActionButton",value:function(e){throw new Error("not yet implemented")}},{key:"addImage",value:function(e){if(this._isDestroyed)return void console.warn("addImage called on destroyed thread row");var t=this._p.elements.labelParent;if(!t)throw new Error("Could not find label parent element");var r=(0,S.default)(x.default,e).takeUntilBy(this._stopper).toProperty(),n=null;r.onValue(function(e){if(e){n||(n={iconSettings:{},iconWrapper:document.createElement("div"),remove:function(){this.iconWrapper.remove()}},n.iconWrapper.className="inboxsdk__thread_row_icon_wrapper");var r=n,o=r.iconSettings,i=r.iconWrapper;if((0,j.default)(o,i,!1,e.imageClass,e.imageUrl),e.tooltip&&i.setAttribute("title",e.tooltip),t!==i.parentElement){var a=t.querySelectorAll(".inboxsdk__inbox_thread_row_label"),s=a.length>0?a[a.length-1].nextElementSibling:t.firstChild;t.insertBefore(i,s)}}else n&&(n.remove(),n=null)}),this._stopper.onEnd(function(){n&&n.remove()})}},{key:"addLabel",value:function(e){if(this._isDestroyed)return void console.warn("addLabel called on destroyed thread row");var t=this._p.elements.labelParent;if(!t)throw new Error("Could not find label parent element");var r=(0,S.default)(x.default,e).takeUntilBy(this._stopper).toProperty(),n=null;r.onValue(function(e){if(e){if(!n){var r=new I.default,o=r.getElement();n={inboxLabelView:r,remove:o.remove.bind(o)}}if(n.inboxLabelView.updateLabelDescriptor(e),t!==n.inboxLabelView.getElement().parentElement){var i=t.querySelectorAll(".inboxsdk__inbox_thread_row_label"),a=i.length>0?i[i.length-1].nextElementSibling:t.firstChild;t.insertBefore(n.inboxLabelView.getElement(),a)}}else n&&(n.remove(),n=null)}),this._stopper.onEnd(function(){n&&n.remove()})}},{key:"getDateString",value:function(){throw new Error("Not supported in Inbox")}},{key:"getSubject",value:function(){if(!this._p.elements.subject)throw new Error("Failed to find subject");return this._p.elements.subject.textContent}},{key:"getThreadID",value:function(){throw new Error("Not supported in Inbox. Please use getThreadIDAsync() instead")}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(){var t,r,n,o;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes.inboxThreadId){e.next=3;break}throw new Error("Failed to find thread id");case 3:if(!/^thread-a:/.test(t)){e.next=16;break}return this._driver.trackThreadRowIdCall(!1,t),e.next=7,this._driver.getInboxMessageIdForInboxThreadId(t);case 7:return r=e.sent,e.next=10,this._driver.getGmailMessageIdForSyncMessageId(r);case 10:return n=e.sent,e.next=13,this._driver.getThreadIdFromMessageId(n);case 13:return e.abrupt("return",e.sent);case 16:if(this._driver.trackThreadRowIdCall(!0,t),o=/\d+$/.exec(t)){e.next=20;break}throw new Error("Should not happen");case 20:return e.abrupt("return",new C.default(o[0]).toString(16));case 21:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDraftID",value:function(){function e(){return t.apply(this,arguments)}var t=(0,v.default)(b.default.mark(function e(){var t,r,n,o;return b.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes,r=t.isOnlyDraft,n=t.inboxThreadId,!r||!n){e.next=8;break}if(o=/\d+$/.exec(n)){e.next=5;break}throw new Error("Should not happen");case 5:return e.abrupt("return",o[0]);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"getVisibleDraftCount",value:function(){var e=this._p.attributes.visibleDraftCount;if("number"!=typeof e)throw new Error("Failed to find visible draft count");return e}},{key:"getVisibleMessageCount",value:function(){var e=this._p.attributes.visibleMessageCount;if("number"!=typeof e)throw new Error("Failed to find visible message count");return e}},{key:"getContacts",value:function(){var e=this._p.attributes.contacts;if(!(0,h.default)(e))throw new Error("Failed to find contacts");return e}},{key:"replaceDate",value:function(e){throw new Error("Not supported in Inbox")}},{key:"replaceDraftLabel",value:function(e){var t=this;if(this._isDestroyed)return void console.warn("addLabel called on destroyed thread row");if(0!==this._p.attributes.visibleDraftCount){var r=this._p.elements,n=r.recipientParent,o=r.messageCountParent;if(!n||!o)throw new Error("Could not find necessary parent elements");var i=(0,S.default)(x.default,e).takeUntilBy(this._stopper).toProperty(),a=null;i.onValue(function(e){if(e){var r=e.text,i=e.count;a||(a={countEl:document.createElement("span"),draftEl:document.createElement("span"),remove:function(){this.countEl.remove(),this.draftEl.remove(),n.classList.remove("inboxsdk__thread_row_draft_label_replaced"),o.classList.remove("inboxsdk__thread_row_draft_count_replaced"),o.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)")||(o.style.display="none")}},a.draftEl.className="inboxsdk__thread_row_custom_draft_label",a.countEl.className="inboxsdk__thread_row_custom_draft_count",n.classList.add("inboxsdk__thread_row_draft_label_replaced")),a.draftEl.textContent=r,n!==a.draftEl.parentElement&&n.appendChild(a.draftEl);var s=o.querySelector("span:not(.inboxsdk__thread_row_custom_draft_count)");i&&i>1?(o.classList.add("inboxsdk__thread_row_draft_count_replaced"),o.style.display="inline",a.countEl.innerHTML=s?(0,k.default)(f||(f=(0,m.default)(["(",")"])),i):(0,k.default)(p||(p=(0,m.default)(["&nbsp;(",")"])),i),o!==a.countEl.parentElement&&o.appendChild(a.countEl)):(o.classList.remove("inboxsdk__thread_row_draft_count_replaced"),s||(o.style.display="none"),a.countEl.remove())}else a&&(a.remove(),a=null);t._stopper.onEnd(function(){a&&a.remove()})})}}},{key:"destroy",value:function(){this._isDestroyed=!0,this._eventStream.end()}}]),e}(),D=(0,w.defn)(t,T);r.default=D},{"../../../driver-common/update-icon":842,"./InboxLabelView":803,"./InboxToolbarButtonView":805,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/regenerator":59,"auto-html":89,"bignumber.js":99,kefir:327,"kefir-bus":324,"kefir-cast":325,"kefir-stopper":326,ud:625}],824:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i,a=o(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),s=o(e("@babel/runtime-corejs2/regenerator")),l=o(e("@babel/runtime-corejs2/core-js/set")),u=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),d=o(e("@babel/runtime-corejs2/helpers/createClass")),f=o(e("@babel/runtime-corejs2/helpers/defineProperty")),p=o(e("lodash/find")),m=e("ud"),h=o(e("auto-html")),b=o(e("kefir")),v=o(e("kefir-bus")),_=o(e("kefir-stopper")),g=o(e("bignumber.js")),y=o(e("../../../lib/delay-asap")),w=o(e("../../../lib/idMap")),j=o(e("../../../lib/dom/querySelectorOrFail")),k=o(e("../../../lib/dom/make-mutation-observer-chunked-stream")),x=o(e("../../../views/SimpleElementView")),E=(o(e("../../../views/conversations/custom-message-view")),o(e("../detection/thread/parser"))),S=function(){function e(t,r,n){var o=this;(0,c.default)(this,e),(0,f.default)(this,"_element",void 0),(0,f.default)(this,"_driver",void 0),(0,f.default)(this,"_p",void 0),(0,f.default)(this,"_eventStream",(0,v.default)()),(0,f.default)(this,"_messageViews",[]),(0,f.default)(this,"_receivedMessageView",(0,_.default)()),(0,f.default)(this,"_stopper",void 0),(0,f.default)(this,"_ready",void 0),(0,f.default)(this,"_sidebarPanels",new l.default),this._element=t,this._driver=r,this._p=n,this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty(),this._driver.getThreadViewElementsMap().set(this._element,this),this._ready=this._receivedMessageView.flatMap(function(){return(0,y.default)()}).onValue(function(){o._p=(0,E.default)(o._element)}).toProperty(),this.isLoadingStub()&&(0,k.default)(this._element,{attributes:!0,attributeFilter:["aria-busy"]}).takeUntilBy(this._stopper).onValue(function(){o.isLoadingStub()||o.destroy()})}return(0,d.default)(e,[{key:"isLoadingStub",value:function(){return"true"===this._element.getAttribute("aria-busy")}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"addMessageViewDriver",value:function(e){var t=this;this._messageViews.push(e),this._eventStream.plug(e.getEventStream().filter(function(e){return"contactHover"===e.eventName})),e.getStopper().takeUntilBy(this._stopper).onValue(function(){t._messageViews=t._messageViews.filter(function(t){return t!==e})}),this._receivedMessageView.destroy()}},{key:"getMessageViewDrivers",value:function(){return this._messageViews}},{key:"getToolbarElement",value:function(){if(!this._p.elements.toolbar)throw new Error("Failed to find toolbar");return this._p.elements.toolbar}},{key:"getSubject",value:function(){if(!this._p.elements.heading)throw new Error("Failed to find subject");return this._p.elements.heading.textContent}},{key:"getThreadID",value:function(){var e=this._p.attributes.inboxThreadId;if(!e)throw new Error("Failed to find thread id");/^msg-a:/.test(e)&&console.warn("ThreadView.getThreadID() returned an incorrect thread ID. This method will be deprecated soon. Use getThreadIDAsync() instead which does not have this problem.");var t=/\d+$/.exec(e);if(!t)throw new Error("Should not happen");return new g.default(t[0]).toString(16)}},{key:"getThreadIDAsync",value:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(s.default.mark(function e(){var t,r,n,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._p.attributes.inboxThreadId){e.next=3;break}throw new Error("Failed to find message id");case 3:if(!/^thread-a:/.test(t)){e.next=15;break}if(r=this._messageViews[0]){e.next=7;break}throw new Error("Should not happen");case 7:return e.next=9,r.getMessageIDAsync();case 9:return n=e.sent,e.next=12,this._driver.getThreadIdFromMessageId(n);case 12:return e.abrupt("return",e.sent);case 15:if(o=/\d+$/.exec(t)){e.next=18;break}throw new Error("Should not happen");case 18:return e.abrupt("return",new g.default(o[0]).toString(16));case 19:case"end":return e.stop()}},e,this)}));return e}()},{key:"registerHiddenCustomMessageNoticeProvider",value:function(e){throw new Error("not supported")}},{key:"addCustomMessage",value:function(e){throw new Error("not supported")}},{key:"addSidebarContentPanel",value:function(e){var t=this,r=this._driver.getAppSidebarView().addSidebarContentPanel(e);return this._sidebarPanels.add(r),r.getStopper().onValue(function(){t._sidebarPanels.delete(r)}),this._stopper.takeUntilBy(r.getStopper()).onValue(function(){r.remove()}),e.takeUntilBy(this._stopper).takeUntilBy(r.getStopper()).take(1).onValue(function(e){var n=t._p.elements.stickyHeading;if(n){var o=n.querySelector("."+(0,w.default)("sidebar_iconArea"));if(!o){var s=o=document.createElement("div");o.className=(0,w.default)("sidebar_iconArea"),t._driver.getAppSidebarView().getOpenOrOpeningStream().takeUntilBy(t._stopper).onValue(function(e){s.style.display=e?"none":""}),n.appendChild(o)}var l,u=e.appName||t._driver.getOpts().appName||e.title,c=e.appIconUrl||t._driver.getOpts().appIconUrl||e.iconUrl,d=(0,p.default)(o.querySelectorAll("."+(0,w.default)("sidebar_button_container")),function(e){var t=e.querySelector("button");if(!t||t.title!==u)return!1;var r=t.querySelector("img");return!(!r||r.src!==c)});if(d){var f=Number(d.getAttribute("data-count"))||1;d.setAttribute("data-count",f+1),l=d}else l=document.createElement("div"),l.className=(0,w.default)("sidebar_button_container"),l.innerHTML=(0,h.default)(i||(i=(0,a.default)(['\n            <button class="inboxsdk__button_icon" type="button" title="','">\n              <img class="inboxsdk__button_iconImg" src="','">\n            </button>\n          '])),u,c),(0,j.default)(l,"button").addEventListener("click",function(e){e.stopPropagation(),t._driver.getAppSidebarView().open(),r.scrollIntoView()},!0),o.appendChild(l);r.getStopper().onValue(function(){var e=Number(l.getAttribute("data-count"));e<=1?l.remove():2===e?l.removeAttribute("data-count"):l.setAttribute("data-count",String(e-1))})}}),r}},{key:"removePanels",value:function(){this._sidebarPanels.forEach(function(e){e.remove()})}},{key:"addNoticeBar",value:function(){var e=document.createElement("div");e.className=(0,w.default)("thread_noticeBar");var t=this._p.elements.heading;if(!t)throw new Error("Failed to find subject");t.insertAdjacentElement("afterend",e);var r=new x.default(e);return this._stopper.takeUntilBy(b.default.fromEvents(r,"destroy")).onValue(function(){return r.destroy()}),r}},{key:"addLabel",value:function(){throw new Error("not supported")}},{key:"getReadyStream",value:function(){return this._ready}},{key:"destroy",value:function(){this._driver.getThreadViewElementsMap().delete(this._element),this._eventStream.end()}}]),e}(),C=(0,m.defn)(t,S);r.default=C},{"../../../lib/delay-asap":850,"../../../lib/dom/make-mutation-observer-chunked-stream":862,"../../../lib/dom/querySelectorOrFail":868,"../../../lib/idMap":882,"../../../views/SimpleElementView":920,"../../../views/conversations/custom-message-view":927,"../detection/thread/parser":789,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/regenerator":59,"auto-html":89,"bignumber.js":99,kefir:327,"kefir-bus":324,"kefir-stopper":326,"lodash/find":484,ud:625}],825:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=e("ud"),u=o(e("kefir")),c=o(e("kefir-stopper")),d=o(e("contain-by-screen")),f=function(){function e(t,r){var n=this;if((0,i.default)(this,e),(0,s.default)(this,"_target",void 0),(0,s.default)(this,"_el",void 0),(0,s.default)(this,"_contentEl",void 0),(0,s.default)(this,"_arrowEl",void 0),(0,s.default)(this,"_stopper",(0,c.default)()),this._target=t,this._arrowEl=document.createElement("div"),this._arrowEl.className="inboxsdk__tooltip_arrow",this._contentEl=document.createElement("div"),this._contentEl.className="inboxsdk__tooltip_content",this._el=document.createElement("div"),this._el.style.position="fixed",this._el.className="inboxsdk__tooltip",this._el.appendChild(this._contentEl),r.el)this._contentEl.appendChild(r.el),this._el.classList.add("inboxsdk__tooltip_chromeless");else{var o=document.createElement("button");if(o.type="button",o.title="Close",o.className="inboxsdk__close_button",o.addEventListener("click",function(e){n.destroy()}),this._el.appendChild(o),r.imageUrl){var a=r.imageUrl,l=document.createElement("img");l.className="inboxsdk__tooltip_img",l.src=a,this._contentEl.appendChild(l)}if(r.title){var d=r.title,f=document.createElement("h1");f.textContent=d,this._contentEl.appendChild(f)}if(r.subtitle){var p=r.subtitle,m=document.createElement("div");m.className="inboxsdk__subtitle",m.textContent=p,this._contentEl.appendChild(m)}if(r.button){var h=r.button,b=document.createElement("input");b.type="button",b.value=h.title,b.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),h.onClick&&h.onClick.call(null)}),this._contentEl.appendChild(b)}}document.body.appendChild(this._el),document.body.appendChild(this._arrowEl),this._updatePosition(!0),this._el.addEventListener("load",function(e){n._updatePosition(!0)},!0),u.default.interval(200).takeUntilBy(this._stopper).map(function(){return t.getBoundingClientRect()}).skipDuplicates(function(e,t){return e.top===t.top&&e.left===t.left&&e.right===t.right&&e.bottom===t.bottom}).onValue(function(){n._updatePosition()})}return(0,a.default)(e,[{key:"destroy",value:function(){this._el.remove(),this._arrowEl.remove(),this._stopper.destroy()}},{key:"getStopper",value:function(){return this._stopper}},{key:"_updatePosition",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&(this._el.classList.add("inboxsdk__notransition"),this._arrowEl.classList.add("inboxsdk__notransition"));var r=(0,d.default)(this._el,this._target,{position:"top",hAlign:"center",vAlign:"center",buffer:10}),n=r.position;(0,d.default)(this._arrowEl,this._target,{position:n,forcePosition:!0,hAlign:"center",forceHAlign:!0,vAlign:"center",forceVAlign:!0,buffer:11}),["top","bottom","left","right"].forEach(function(t){e._arrowEl.classList.remove("inboxsdk__"+t)}),this._arrowEl.classList.add("inboxsdk__"+n),t&&(this._el.offsetHeight,this._arrowEl.offsetHeight,this._el.classList.remove("inboxsdk__notransition"),this._arrowEl.classList.remove("inboxsdk__notransition"))}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"contain-by-screen":138,kefir:327,"kefir-stopper":326,ud:625}],826:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/number/max-safe-integer")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=o(e("kefir")),c=o(e("kefir-bus")),d=o(e("kefir-stopper")),f=o(e("../../../lib/dom/insert-element-in-order")),p=o(e("../../../lib/dom/querySelectorOrFail")),m=o(e("../../../widgets/buttons/dropdown-view")),h=o(e("./inbox-dropdown-view")),b=o(e("../../../constants/nav-item-types")),v=o(e("../../../driver-common/update-icon")),_=function(){function e(t,r){var n=this;(0,a.default)(this,e),(0,l.default)(this,"_eventStream",(0,c.default)()),(0,l.default)(this,"_level",void 0),(0,l.default)(this,"_stopper",void 0),(0,l.default)(this,"_transitionResetter",(0,c.default)()),(0,l.default)(this,"_navItemDescriptor",void 0),(0,l.default)(this,"_children",0),(0,l.default)(this,"_name",""),(0,l.default)(this,"_type",null),(0,l.default)(this,"_orderHint",i.default),(0,l.default)(this,"_disabled",!1),(0,l.default)(this,"_isCollapsed",!1),(0,l.default)(this,"_iconSettings",{}),(0,l.default)(this,"_accessory",null),(0,l.default)(this,"_accessoryView",null),(0,l.default)(this,"_elements",void 0),this._level=r||0,this._elements={wrapper:document.createElement("div"),expander:document.createElement("div"),navItem:document.createElement("div"),name:document.createElement("span"),subNav:document.createElement("div"),subNavInner:document.createElement("div"),accessory:document.createElement("div")},this._level>2&&console.warn("Adding NavItems more than 3 levels deep is not supported"),this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty(),this._setupElements(),t.takeUntilBy(this._stopper).onValue(function(e){n._update(e),n._navItemDescriptor=e})}return(0,s.default)(e,[{key:"addNavItem",value:function(t,r){var n=this,o=new e(r,this._level+1);return o.getEventStream().filter(function(e){return"orderChanged"===e.eventName}).onValue(function(){return(0,f.default)(n._elements.subNavInner,o.getElement())}),(0,f.default)(this._elements.subNavInner,o.getElement()),this._children+=1,o.getStopper().onValue(function(){n._children-=1,n._updateChildrenClass(),n._updateDisabledState(n._navItemDescriptor||{}),n._updateAccessory(n._accessory,!0)}),this._updateChildrenClass(),this._updateDisabledState(this._navItemDescriptor||{}),this._updateAccessory(this._accessory,!0),o}},{key:"setActive",value:function(e){this._elements.navItem.classList.toggle("inboxsdk__navItem_active",e)}},{key:"toggleCollapse",value:function(){this._isCollapsed=!this._isCollapsed,this._isCollapsed?this._collapse():this._expand()}},{key:"setCollapsed",value:function(e){this._isCollapsed!==e&&(this._isCollapsed=e,this._isCollapsed?this._collapse():this._expand())}},{key:"isCollapsed",value:function(){return this._isCollapsed}},{key:"getElement",value:function(){return this._elements.wrapper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._elements.wrapper.remove()}},{key:"_setupElements",value:function(){var e=this,t=this._elements,r=t.wrapper,n=t.expander,o=t.navItem,i=t.name,a=t.subNav,s=t.subNavInner,l=t.accessory;r.className="inboxsdk__navItem_wrapper inboxsdk__navItem_level".concat(this._level),r.setAttribute("tabindex","-1"),r.setAttribute("data-order-hint",String(this._orderHint)),o.setAttribute("role","menuitem"),n.classList.add("inboxsdk__navItem_expander"),o.classList.add("inboxsdk__navItem"),i.classList.add("inboxsdk__navItem_name"),l.classList.add("inboxsdk__navItem_accessory"),a.classList.add("inboxsdk__navItem_subNav"),s.classList.add("inboxsdk__navItem_subNavInner"),n.innerHTML='<svg><polygon points="16.59 8.59 12 13.17 7.41 8.59 6 10 12 16 18 10"></polygon></svg>',o.appendChild(n),o.appendChild(i),o.appendChild(l),r.appendChild(o),a.appendChild(s),r.appendChild(a),this._eventStream.plug(u.default.fromEvents(o,"click").filter(function(){return!e._disabled}).map(function(e){return e.stopPropagation(),e.preventDefault(),{eventName:"click",domEvent:e}})),u.default.fromEvents(n,"click").takeUntilBy(this._stopper).filter(function(){return e._children>0}).onValue(function(t){e.toggleCollapse(),t.stopPropagation()})}},{key:"_collapse",value:function(){var e=this._elements,t=e.subNav,r=e.subNavInner;this._transitionResetter.emit(null),this._elements.wrapper.classList.add("inboxsdk__navItem_collapsed"),t.style.height="".concat(r.clientHeight,"px"),t.clientHeight,t.style.height="0",u.default.merge([u.default.fromEvents(t,"transitionend"),u.default.later(750)]).takeUntilBy(this._transitionResetter).take(1).onValue(function(){t.style.display="none"}),this._eventStream.emit({eventName:"collapsed"})}},{key:"_expand",value:function(){var e=this._elements,t=e.subNav,r=e.subNavInner;this._transitionResetter.emit(null),this._elements.wrapper.classList.remove("inboxsdk__navItem_collapsed"),t.style.display="",t.style.height="".concat(r.clientHeight,"px"),u.default.merge([u.default.fromEvents(t,"transitionend"),u.default.later(750)]).takeUntilBy(this._transitionResetter).take(1).onValue(function(){t.style.height=""}),this._eventStream.emit({eventName:"expanded"})}},{key:"_update",value:function(e){this._updateName(e.name),this._updateType(e.type),this._updateExpander(e),this._updateDisabledState(e),this._updateIcon(e),this._updateAccessory(e.accessory),this._updateOrder(e.orderHint||0===e.orderHint?e.orderHint:i.default)}},{key:"_updateName",value:function(e){this._name!==e&&(this._elements.name.textContent=e,this._elements.name.setAttribute("title",e),this._name=e)}},{key:"_updateType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.default.NAVIGATION;this._type!==e&&(this._elements.navItem.classList.toggle("inboxsdk__navItem_link",e===b.default.LINK),this._type=e)}},{key:"_updateExpander",value:function(e){var t=e.backgroundColor,r=e.expanderForegroundColor;this._elements.expander.style.backgroundColor=t||"",(0,p.default)(this._elements.expander,"polygon").style.fill=r||"",this._elements.wrapper.classList.toggle("inboxsdk__navItem_hasColor","string"==typeof t)}},{key:"_updateIcon",value:function(e){this._elements.navItem.classList.toggle("inboxsdk__navItem_hasIcon",(!this._disabled||this._level>0)&&Boolean(e.iconUrl||e.iconClass)),(0,v.default)(this._iconSettings,this._elements.navItem,!1,e.iconClass,e.iconUrl,this._elements.name)}},{key:"_updateAccessory",value:function(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this._accessory!==e)&&(this._accessoryView&&(this._accessoryView.destroy(),this._accessoryView=null),e&&!this._disabled&&(this._accessoryView=this._createAccessory(e)),this._accessory=e)}},{key:"_updateDisabledState",value:function(e){this._disabled=!(e.routeID||e.onClick)||0===this._level&&this._children>0,this._elements.wrapper.classList.toggle("inboxsdk__navItem_disabled",this._disabled)}},{key:"_updateOrder",value:function(e){this._orderHint!==e&&(this._elements.wrapper.setAttribute("data-order-hint",String(e)),this._orderHint=e,this._eventStream.emit({eventName:"orderChanged"}))}},{key:"_updateChildrenClass",value:function(){this._elements.wrapper.classList.toggle("inboxsdk__navItem_hasChildren",this._children>0)}},{key:"_createAccessory",value:function(e){switch(e.type){case"CREATE":return this._createCreateAccessory(e);case"ICON_BUTTON":return this._createIconButtonAccessory(e);case"DROPDOWN_BUTTON":return this._createDropdownButtonAccessory(e);default:throw new Error("A type must be specified for NavItem accessories")}}},{key:"_createCreateAccessory",value:function(e){var t=e.onClick;return this._createIconButtonAccessory({onClick:t,iconUrl:"//ssl.gstatic.com/bt/C3341AA7A1A076756462EE2E5CD71C11/2x/ic_add-cluster_24px_g60_r3_2x.png"})}},{key:"_createDropdownButtonAccessory",value:function(e){var t=e.onClick;return this._createIconButtonAccessory({onClick:t,iconUrl:"//www.gstatic.com/images/icons/material/system/2x/settings_black_18dp.png"},!0)}},{key:"_createIconButtonAccessory",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.onClick)throw new Error("An onClick handler is required");this._elements.wrapper.classList.add("inboxsdk__navItem_hasAccessory"),(0,v.default)({},this._elements.accessory,!1,e.iconClass,e.iconUrl);var n=(0,p.default)(this._elements.accessory,".inboxsdk__button_icon");n.setAttribute("tabindex","-1");var o=(0,d.default)(),i=null;return u.default.fromEvents(this._elements.accessory,"click").takeUntilBy(this._stopper).takeUntilBy(o).onValue(function(o){if(o.preventDefault(),o.stopPropagation(),r){if(i)return void i.close();n.classList.add("inboxsdk__active"),i=new m.default(new h.default,t._elements.accessory),i.setPlacementOptions({position:"right",hAlign:"left",vAlign:"top",buffer:10}),i.on("destroy",function(){n.classList.remove("inboxsdk__active"),i=null})}e.onClick({dropdown:i})}),u.default.merge([this._stopper,o]).take(1).onValue(function(){i&&i.close()}),{destroy:function(){t._elements.wrapper.classList.remove("inboxsdk__navItem_hasAccessory"),t._elements.accessory.innerHTML="",o.destroy()}}}}]),e}();r.default=_},{"../../../constants/nav-item-types":657,"../../../driver-common/update-icon":842,"../../../lib/dom/insert-element-in-order":856,"../../../lib/dom/querySelectorOrFail":868,"../../../widgets/buttons/dropdown-view":941,"./inbox-dropdown-view":818,"@babel/runtime-corejs2/core-js/number/max-safe-integer":7,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"kefir-stopper":326}],827:[function(e,t,r){"use strict";function n(){var e=d();return(0,c.default)(e,{attributes:!0}).toProperty(function(){}).filter(function(){return"none"!==window.getComputedStyle(e).display}).merge(u.default.later(150)).take(1).flatMap(function(){return(0,c.default)(e,{attributes:!0}).toProperty(function(){})}).filter(function(){return"none"===window.getComputedStyle(e).display}).map(function(){}).take(1)}
var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/parse-float")),s=i(e("lodash/once")),l=i(e("lodash/find")),u=i(e("kefir")),c=i(e("../../lib/dom/make-mutation-observer-chunked-stream")),d=(0,s.default)(function(){return(0,l.default)(document.body.children,function(e){var t=window.getComputedStyle(e);return"fixed"===t.position&&0===(0,a.default)(t.top)&&0===(0,a.default)(t.bottom)&&0===(0,a.default)(t.left)&&0===(0,a.default)(t.right)})})},{"../../lib/dom/make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-float":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"lodash/find":484,"lodash/once":516}],828:[function(e,t,r){"use strict";function n(e){var t=e.element,r=e.discardButton;return s.default.merge([(0,l.default)(t,"keydown").filter(function(e){return[13,32].indexOf(e.which)>-1||[13,32].indexOf(e.keyCode)>-1}).filter(function(e){return r&&r.contains(e.target)}),(0,l.default)(t,"click").filter(function(e){return r&&r.contains(e.target)})]).map(function(e){return{eventName:"discard",data:{cancel:function(){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),u(t)}}}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("asap")),s=i(e("kefir")),l=i(e("../../lib/from-event-target-capture")),u=function(e){return(0,a.default)(function(){return e.dispatchEvent(new CustomEvent("inboxSDKdiscardCanceled",{bubbles:!1,cancelable:!1,detail:null}))})}},{"../../lib/from-event-target-capture":878,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83,kefir:327}],829:[function(e,t,r){"use strict";function n(e){var t=e.element,r=e.sendButton,n=e.sendAndArchive;return s.default.merge([(0,l.default)(t,"keydown").filter(function(e){return e.ctrlKey||e.metaKey}).filter(function(e){return 13===e.which||13===e.keyCode}),(0,l.default)(t,"keydown").filter(function(e){return[13,32].indexOf(e.which)>-1||[13,32].indexOf(e.keyCode)>-1}).filter(function(e){return r&&r.contains(e.target)||n&&n.contains(e.target)}),(0,l.default)(t,"click").filter(function(e){return r&&r.contains(e.target)||n&&n.contains(e.target)})]).filter(function(e){return!t.hasAttribute("data-inboxsdk-send-replaced")||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1)}).map(function(e){return{eventName:"presending",data:{cancel:function(){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),u(t)}}}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("asap")),s=i(e("kefir")),l=i(e("../../lib/from-event-target-capture")),u=function(e){return(0,a.default)(function(){return e.dispatchEvent(new CustomEvent("inboxSDKsendCanceled",{bubbles:!1,cancelable:!1,detail:null}))})}},{"../../lib/from-event-target-capture":878,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,asap:83,kefir:327}],830:[function(e,t,r){"use strict";function n(){var e=document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/);if(e){var t=e[1];return"/u/".concat(e[2],"/d/").concat(t)}var r=document.location.pathname.match(/(\/u\/\d+)\//i);return r?r[1]:"/u/0"}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],831:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){var n,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.default)(t,{syncMessageID:r});case 2:if(n=e.sent,o=n.match(/<a\b[^<>]+\bhref="\/mail[^"]*(?:\?|&(?:amp;)?)view=att&(?:amp;)?th=([a-f0-9]+)&/i)){e.next=6;break}throw new Error("Failed to find gmail message id for inbox message id");case 6:return e.abrupt("return",o[1]);case 7:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=a(e("./getOriginalMessagePage")),d=(0,u.defn)(t,n);r.default=d},{"./getOriginalMessagePage":833,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,ud:625}],832:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,c.default)(u.default.mark(function e(t,r){var n,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isUsingSyncAPI||!t.isUsingSyncAPI()){e.next=8;break}return e.next=3,(0,p.default)(t,"rfc822msgid:"+r);case 3:return n=e.sent,o=n.threads,e.abrupt("return",o[0].oldGmailThreadID);case 8:return e.abrupt("return",i(t,r));case 9:case"end":return e.stop()}},e)})),o.apply(this,arguments)}function i(e,t){return a.apply(this,arguments)}function a(){return a=(0,c.default)(u.default.mark(function e(t,r){var n,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=m.default,e.t1="https://mail.google.com/mail".concat((0,h.default)(),"/"),e.t2=t.getPageCommunicator().getIkValue(),e.next=5,t.getGmailActionToken();case 5:return e.t3=e.sent,e.t4="rfc822msgid:".concat(r),e.t5={ik:e.t2,at:e.t3,ui:"2",view:"tl",start:"0",num:"1",rt:"c",search:"query",q:e.t4},e.t6={withCredentials:!0},e.t7={"content-type":"application/x-www-form-urlencoded;charset=UTF-8"},e.t8={method:"POST",url:e.t1,data:e.t5,xhrFields:e.t6,canRetry:!0,headers:e.t7},e.next=13,(0,e.t0)(e.t8);case 13:if(n=e.sent,o=(0,f.extractThreads)(n.text),1===o.length){e.next=17;break}throw new Error("Failed to find gmail thread id for rfc message id. Message may not exist in user's account.");case 17:return e.abrupt("return",o[0].gmailThreadId);case 18:case"end":return e.stop()}},e)})),a.apply(this,arguments)}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/regenerator")),c=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=e("ud"),f=e("../dom-driver/gmail/gmail-response-processor"),p=l(e("./getSyncThreadsForSearch")),m=l(e("./gmailAjax")),h=l(e("./getAccountUrlPart")),b=(0,d.defn)(t,n);r.default=b},{"../dom-driver/gmail/gmail-response-processor":700,"./getAccountUrlPart":830,"./getSyncThreadsForSearch":834,"./gmailAjax":836,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,ud:625}],833:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){var n,o,i,a,l,u,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ik:t.getPageCommunicator().getIkValue(),view:"om"},r.oldGmailMessageID?n.th=r.oldGmailMessageID:r.syncMessageID&&(n.permmsgid=r.syncMessageID),i=document.location.pathname.match(/\/b\/(.+?)\/u\/(\d+)/),i?o=document.location.origin+document.location.pathname:(a=document.location.pathname.match(/(\/u\/\d+)\//i),l=a?a[1]:"/u/0",o="https://mail.google.com/mail".concat(l)),e.next=6,(0,c.default)({url:o,method:"GET",canRetry:!0,data:n});case 6:return u=e.sent,d=u.text,e.abrupt("return",d);case 9:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=a(e("./gmailAjax")),d=(0,u.defn)(t,n);r.default=d},{"./gmailAjax":836,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,ud:625}],834:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,u.default)(s.default.mark(function e(t,r){var n,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=f.default,e.t1="https://mail.google.com/sync".concat((0,p.default)(),"/i/bv"),e.next=4,t.getPageCommunicator().getXsrfToken();case 4:return e.t2=e.sent,e.next=7,t.getPageCommunicator().getBtaiHeader();case 7:return e.t3=e.sent,e.t4={"Content-Type":"application/json","X-Framework-Xsrf-Token":e.t2,"X-Gmail-BTAI":e.t3,"X-Google-BTD":"1"},e.t5=(0,l.default)({1:{2:1,4:r}}),e.t6={method:"POST",url:e.t1,headers:e.t4,data:e.t5},e.next=13,(0,e.t0)(e.t6);case 13:return n=e.sent,o=n.text,e.abrupt("return",{threads:(0,d.extractThreadsFromSearchResponse)(o),_text:o});case 16:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/core-js/json/stringify")),u=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),c=e("ud"),d=e("../dom-driver/gmail/gmail-sync-response-processor"),f=a(e("./gmailAjax")),p=a(e("./getAccountUrlPart")),m=(0,c.defn)(t,n);r.default=m},{"../dom-driver/gmail/gmail-sync-response-processor":701,"./getAccountUrlPart":830,"./gmailAjax":836,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,ud:625}],835:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){var n,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getPageCommunicator().getIkValue(),e.next=3,(0,c.default)(n,r);case 3:if(o=e.sent,i=(0,d.extractGmailThreadIdFromMessageIdSearch)(o)){e.next=7;break}throw new Error("Failed to find thread id for given message id");case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=a(e("./requestGmailThread")),d=e("../dom-driver/gmail/gmail-response-processor"),f=(0,u.defn)(t,n);r.default=f},{"../dom-driver/gmail/gmail-response-processor":700,"./requestGmailThread":839,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,ud:625}],836:[function(e,t,r){"use strict";function n(e,t){var r=s(e);if(l){var n=l(e);t&&(n=n.filter(function(t){return u(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,h.default)(e,t,r[t])}):c?d(e,c(r)):n(Object(r)).forEach(function(t){f(e,t,u(r,t))})}return e}function i(e){return a.apply(this,arguments)}function a(){return a=(0,b.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(/^https:\/\/mail\.google\.com(?:$|\/)/.test(t.url)){e.next=2;break}throw new Error("Should not happen: gmailAjax called with non-gmail url");case 2:if("https://mail.google.com"!==document.location.origin){e.next=6;break}return e.next=5,k(t);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.next=9,k(o(o({},t),{},{canRetry:!1}));case 9:return e.abrupt("return",e.sent);case 12:if(e.prev=12,e.t0=e.catch(6),!e.t0||0!==e.t0.status){e.next=27;break}return e.prev=15,e.next=18,_.default.fromPromise((0,g.default)("https://mail.google.com/mail/u/0/")).merge(_.default.later(j,void 0)).take(1).takeErrors(1).toPromise();case 18:e.next=22;break;case 20:e.prev=20,e.t1=e.catch(15);case 22:return e.next=24,k(t);case 24:return e.abrupt("return",e.sent);case 27:if(!(e.t0&&"number"==typeof e.t0.status&&e.t0.status>=500)){e.next=33;break}return e.next=30,k(t);case 30:return e.abrupt("return",e.sent);case 33:throw e.t0;case 34:case"end":return e.stop()}},e,null,[[6,12],[15,20]])})),a.apply(this,arguments)}var s=e("@babel/runtime-corejs2/core-js/object/keys"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),d=e("@babel/runtime-corejs2/core-js/object/define-properties"),f=e("@babel/runtime-corejs2/core-js/object/define-property"),p=e("@babel/runtime-corejs2/helpers/interopRequireDefault");f(r,"__esModule",{value:!0}),r.default=void 0;var m=p(e("@babel/runtime-corejs2/regenerator")),h=p(e("@babel/runtime-corejs2/helpers/defineProperty")),b=p(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),v=e("ud"),_=p(e("kefir")),g=p(e("../lib/imageRequest")),y=p(e("../../common/rate-limit-queuer")),w=p(e("../../common/ajax")),j=6e4,k=(0,y.default)((0,y.default)(w.default,1e3,7),1e4,50),x=(0,v.defn)(t,i);r.default=x},{"../../common/ajax":634,"../../common/rate-limit-queuer":649,"../lib/imageRequest":883,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,kefir:327,ud:625}],837:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=e("ud"),a=o(e("../../common/rate-limit-queuer")),s=o(e("../../common/ajax")),l=(0,i.defn)(t,(0,a.default)(s.default,1e3,7)),u=l;r.default=u},{"../../common/ajax":634,"../../common/rate-limit-queuer":649,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,ud:625}],838:[function(e,t,r){"use strict";function n(e,t,r,n){var o=e.querySelector(".inboxsdk__button_icon");o||(o=document.createElement("div"),o.classList.add("inboxsdk__button_icon"),o.appendChild(t)),r?e.appendChild(o):e.insertBefore(e,n||e.firstElementChild)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],839:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){var n,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={ui:2,ik:t,view:"cv",th:r,pcd:1,mb:0,rt:"c",search:"inbox",type:r},e.next=3,(0,d.default)({method:"POST",url:"https://mail.google.com/mail".concat((0,f.default)(),"?").concat(c.default.stringify(n)),canRetry:!0});case 3:return o=e.sent,i=o.text,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=void 0;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),u=e("ud"),c=a(e("querystring")),d=a(e("./gmailAjax")),f=a(e("./getAccountUrlPart")),p=(0,u.defn)(t,n);r.default=p},{"./getAccountUrlPart":830,"./gmailAjax":836,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,querystring:579,ud:625}],840:[function(e,t,r){(function(t){(function(){"use strict";function n(e){var t=o();return function(){var r,n=(0,_.default)(e);if(t){var o=(0,_.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,v.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/core-js/date/now")),u=s(e("@babel/runtime-corejs2/core-js/object/keys")),c=s(e("@babel/runtime-corejs2/core-js/json/stringify")),d=s(e("@babel/runtime-corejs2/helpers/extends")),f=s(e("@babel/runtime-corejs2/helpers/slicedToArray")),p=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=s(e("@babel/runtime-corejs2/helpers/createClass")),h=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),b=s(e("@babel/runtime-corejs2/helpers/inherits")),v=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),_=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),g=s(e("@babel/runtime-corejs2/helpers/defineProperty")),y=s(e("lodash/flatMap")),w=s(e("lodash/sortBy")),j=s(e("classnames")),k=s(e("kefir")),x=s(e("kefir-stopper")),E=s(e("react")),S=s(e("react-draggable-list")),C=s(e("react-smooth-collapse")),I=(s(e("../../../common/get-or-fail")),s(e("../../lib/idMap"))),A=s(e("../../lib/react/ElementContainer")),T={stiffness:400,damping:50},D=function(e){function r(e){var t;return(0,p.default)(this,r),t=o.call(this,e),(0,g.default)((0,h.default)(t),"_list",void 0),(0,g.default)((0,h.default)(t),"_main",void 0),(0,g.default)((0,h.default)(t),"_stopper",(0,x.default)()),t.state={expansionSettings:t._readExpansionSettings()},t}(0,b.default)(r,e);var o=n(r);return(0,m.default)(r,[{key:"componentDidMount",value:function(){var e=this;k.default.fromEvents(window,"storage").filter(function(e){return"inboxsdk__sidebar_expansion_settings"===e.key}).takeUntilBy(this._stopper).onValue(function(){e.setState({expansionSettings:e._readExpansionSettings()})})}},{key:"componentWillUnmount",value:function(){this._stopper.destroy()}},{key:"scrollPanelIntoView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._list.getItemInstance(e),n=this.props.container;r.scrollIntoView(t,n&&n())}},{key:"closePanel",value:function(e){var t=this.props.panels.find(function(t){return t.instanceId===e});t&&this._expandedToggle(t.appId,t.id,!1)}},{key:"openPanel",value:function(e){var t=this.props.panels.find(function(t){return t.instanceId===e});t&&this._expandedToggle(t.appId,t.id,!0)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.panels!==e.panels||this.state.expansionSettings!==t.expansionSettings}},{key:"_expandedToggle",value:function(e,t,r){var n=this._readExpansionSettings();Object.prototype.hasOwnProperty.call(n.apps,e)||(n.apps[e]={ids:{}}),n.apps[e].ids[t]={lastUse:(0,l.default)(),expanded:r},this.setState({expansionSettings:n},this.props.onExpandedToggle),this._saveExpansionSettings(n)}},{key:"_readExpansionSettings",value:function(){var e;try{e=JSON.parse(t.localStorage.getItem("inboxsdk__sidebar_expansion_settings")||"null")}catch(e){console.error("Failed to read sidebar settings",e)}return e||{apps:{}}}},{key:"_saveExpansionSettings",value:function(e){var r=(0,y.default)((0,u.default)(e.apps),function(t){return(0,u.default)(e.apps[t].ids).map(function(e){return[t,e]})});if(r.length>200){(0,w.default)(r,function(t){var r=(0,f.default)(t,2),n=r[0],o=r[1];return e.apps[n].ids[o].lastUse}).slice(0,r.length-200).forEach(function(t){var r=(0,f.default)(t,2),n=r[0],o=r[1];delete e.apps[n].ids[o],0===(0,u.default)(e.apps[n].ids).length&&delete e.apps[n]})}try{t.localStorage.setItem("inboxsdk__sidebar_expansion_settings",(0,c.default)(e))}catch(e){console.error("Failed to save sidebar settings",e)}}},{key:"render",value:function(){var e=this,t=this.state.expansionSettings,r=this.props,n=r.panels,o=r.onClose,i=r.onOutsideClick,a=r.onMoveEnd,s=r.container,l=n.length>1,u=1===n.length&&n[0].hideTitleBar,c=n.map(function(r){var n=Object.prototype.hasOwnProperty.call(t.apps,r.appId)?t.apps[r.appId]:null,o=n?n.ids[r.id]:null,i=!o||o.expanded;return{panelDescriptor:r,showControls:l,expanded:i,onExpandedToggle:function(t){e._expandedToggle(r.appId,r.id,t)}}});return E.default.createElement("div",{className:(0,j.default)((0,I.default)("app_sidebar"),(0,g.default)({},(0,I.default)("hideTitleBar"),u))},E.default.createElement("div",{className:(0,I.default)("app_sidebar_main"),ref:function(t){t&&(e._main=t)}},E.default.createElement("div",{className:(0,I.default)("app_sidebar_content_area")},E.default.createElement(S.default,{padding:0,ref:function(t){t&&(e._list=t)},itemKey:function(e){return e.panelDescriptor.instanceId},template:M,list:c,onMoveEnd:function(e,t,r,n){a(e.map(function(e){return e.panelDescriptor}),t.panelDescriptor,r,n)},springConfig:T,container:s||function(){return e._main}})),i&&E.default.createElement("div",{className:(0,I.default)("app_sidebar_content_area_padding"),onClick:function(e){e.preventDefault(),i()}})),o&&E.default.createElement("button",{className:"inboxsdk__close_button",type:"button",title:"Close",onClick:o}))}}]),r}(E.default.Component);r.default=D;var M=function(e){function t(){var e;(0,p.default)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=r.call.apply(r,[this].concat(o)),(0,g.default)((0,h.default)(e),"_el",void 0),e}(0,b.default)(t,e);var r=n(t);return(0,m.default)(t,[{key:"scrollIntoView",value:function(e,t){if(e&&t){var r=this._el.parentElement;r&&t.scrollTo({top:r.offsetTop,behavior:"smooth"})}else this._el.scrollIntoView({behavior:"smooth"})}},{key:"getDragHeight",value:function(){return 40}},{key:"componentDidMount",value:function(){(!this.props.item.showControls||this.props.item.expanded)&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}},{key:"componentDidUpdate",value:function(e){var t=!e.item.showControls||e.item.expanded,r=!this.props.item.showControls||this.props.item.expanded;!t&&r?document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelActivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}})):t&&!r&&document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelDeactivated",{bubbles:!0,cancelable:!1,detail:{instanceId:this.props.item.panelDescriptor.instanceId}}))}},{key:"shouldComponentUpdate",value:function(e){return this.props.itemSelected!==e.itemSelected||this.props.item.panelDescriptor!==e.item.panelDescriptor||this.props.item.showControls!==e.item.showControls||this.props.item.expanded!==e.item.expanded}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.dragHandleProps,o=r.itemSelected,i=r.item,a=i.panelDescriptor,s=a.title,l=a.appName,u=a.iconClass,c=a.iconUrl,f=a.el,p=i.showControls,m=i.expanded,h=i.onExpandedToggle,b=.01*o+1,v=4*o;return E.default.createElement("div",{ref:function(e){e&&(t._el=e)},className:(0,j.default)((0,I.default)("app_sidebar_content_panel"),(e={},(0,g.default)(e,(0,I.default)("dragged"),o>.2),(0,g.default)(e,(0,I.default)("expanded"),m),(0,g.default)(e,(0,I.default)("showControls"),p),e)),style:{transform:1===b?"none":"scale(".concat(b,")"),boxShadow:0===v?"none":"0px 0px ".concat(v,"px 0px rgba(0, 0, 0, 0.3)")}},E.default.createElement("div",{className:(0,I.default)("app_sidebar_content_panel_top_line"),"data-app-name":l},E.default.createElement("span",(0,d.default)({className:(0,I.default)("app_sidebar_content_panel_title")},p?n:null),E.default.createElement("div",{className:(0,I.default)("app_sidebar_content_panel_grip")}),E.default.createElement("span",{className:(0,I.default)("app_sidebar_content_panel_title_icon_container")},E.default.createElement("span",{className:(0,j.default)((0,I.default)("app_sidebar_content_panel_title_icon"),u)},c&&E.default.createElement("img",{src:c}))),E.default.createElement("span",{className:(0,I.default)("app_sidebar_content_panel_title_text")},s)),E.default.createElement("span",{className:(0,I.default)("app_sidebar_content_panel_toggle"),onClick:function(){return h(!m)}},E.default.createElement("button",{type:"button",className:(0,I.default)("app_sidebar_content_panel_toggle_button")}))),E.default.createElement(C.default,{expanded:!p||m,heightTransition:".15s ease"},E.default.createElement(A.default,{className:(0,I.default)("app_sidebar_content_panel_content"),el:f})))}}]),t}(E.default.Component)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../../common/get-or-fail":642,"../../lib/idMap":882,"../../lib/react/ElementContainer":895,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/extends":40,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/helpers/slicedToArray":53,classnames:104,kefir:327,"kefir-stopper":326,"lodash/flatMap":487,"lodash/sortBy":519,react:606,"react-draggable-list":588,"react-smooth-collapse":603}],841:[function(e,t,r){(function(n){(function(){"use strict";var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/core-js/date/now")),s=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=i(e("@babel/runtime-corejs2/helpers/createClass")),u=i(e("@babel/runtime-corejs2/helpers/defineProperty")),c=e("ud"),d=(i(e("auto-html")),i(e("kefir"))),f=i(e("kefir-bus")),p=(i(e("kefir-stopper")),i(e("../../lib/delay-asap"))),m=i(e("../../lib/idMap")),h=i(e("../../lib/dom/querySelectorOrFail")),b=function(){function e(t,r,o,i){var l=this;(0,s.default)(this,e),(0,u.default)(this,"_driver",void 0),(0,u.default)(this,"_stopper",void 0),(0,u.default)(this,"_eventStream",(0,f.default)()),(0,u.default)(this,"_isActive",!1),(0,u.default)(this,"_instanceId","".concat((0,a.default)(),"-").concat(Math.random())),(0,u.default)(this,"_sidebarId",void 0),(0,u.default)(this,"_isGlobal",void 0),this._driver=t,this._sidebarId=o,this._isGlobal=Boolean(i),this._stopper=this._eventStream.ignoreValues().beforeEnd(function(){return null}).toProperty();var c=n.document;this._eventStream.plug(d.default.fromEvents(c.body,"inboxsdkSidebarPanelActivated").filter(function(e){return e.detail.instanceId===l._instanceId}).map(function(){return l._isActive=!0,{eventName:"activate"}})),this._eventStream.plug(d.default.fromEvents(c.body,"inboxsdkSidebarPanelDeactivated").filter(function(e){return e.detail.instanceId===l._instanceId}).map(function(){return l._isActive=!1,{eventName:"deactivate"}}));var b,v=(0,p.default)().toProperty().onValue(function(){}),_=!1,g=(0,h.default)(c.body,"."+(0,m.default)("app_sidebar_waiting_platform"));r.flatMap(function(e){return v.map(function(){return e})}).takeUntilBy(this._stopper).onValue(function(e){var r=e.el,n=e.iconUrl,o=e.iconClass,a=e.title,s=e.orderHint,u=e.id,d=e.hideTitleBar,f=e.appIconUrl,p=e.primaryColor,m=e.secondaryColor;b=e.appName||t.getOpts().appName||e.title,c.body.contains(r)||g.appendChild(r);var h=_?"inboxsdkUpdateSidebarPanel":"inboxsdkNewSidebarPanel";_=!0,r.dispatchEvent(new CustomEvent(h,{bubbles:!0,cancelable:!1,detail:{appIconUrl:f||l._driver.getOpts().appIconUrl||n,appId:l._driver.getAppId(),appName:b,hideTitleBar:Boolean(d),iconClass:o,iconUrl:n,id:String(u||a),instanceId:l._instanceId,isGlobal:i,orderHint:"number"==typeof s?s:0,primaryColor:p||l._driver.getOpts().primaryColor,secondaryColor:m||l._driver.getOpts().secondaryColor,sidebarId:l._sidebarId,title:a}}))}),this._stopper.onValue(function(){_&&c.body.dispatchEvent(new CustomEvent("inboxsdkRemoveSidebarPanel",{bubbles:!0,cancelable:!1,detail:{appName:b,sidebarId:l._sidebarId,instanceId:l._instanceId}}))})}return(0,l.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"scrollIntoView",value:function(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelScrollIntoView",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,sidebarId:this._sidebarId}}))}},{key:"close",value:function(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelClose",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}},{key:"open",value:function(){document.body.dispatchEvent(new CustomEvent("inboxsdkSidebarPanelOpen",{bubbles:!0,cancelable:!1,detail:{instanceId:this._instanceId,isGlobal:this._isGlobal,sidebarId:this._sidebarId}}))}},{key:"isActive",value:function(){return this._isActive}},{key:"remove",value:function(){this._eventStream.end()}}]),e}(),v=(0,c.defn)(t,b);r.default=v}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/delay-asap":850,"../../lib/dom/querySelectorOrFail":868,"../../lib/idMap":882,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"auto-html":89,kefir:327,"kefir-bus":324,"kefir-stopper":326,ud:625}],842:[function(e,t,r){"use strict";function n(e,t,r){var n=document.createElement("div");return n.classList.add("inboxsdk__button_icon"),n.innerHTML="&nbsp;",t?e.appendChild(n):e.insertBefore(n,r||e.firstElementChild),n}function o(e,t,r,o){var i=n(t,r,o);i.innerHTML="";var a=document.createElement("img");return a.classList.add("inboxsdk__button_iconImg"),a.src=e,i.appendChild(a),i}function i(e,t,r,i,a,s,l){if(r&&s)throw new Error("append and insertBeforeEl should not be used together");if(l&&(i||a))throw new Error("iconHtml can not be used together with iconClass or iconUrl");l?(e.iconHtmlElement||(e.iconHtmlElement=n(t,r,s)),e.iconHtmlElement.innerHTML=l,
e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null),e.iconElement&&(e.iconElement.remove(),e.iconElement=null)):a?(e.iconImgElement?e.iconImgElement.firstElementChild.src=a:e.iconImgElement=o(a,t,r,s),e.iconImgElement.setAttribute("class","inboxsdk__button_icon ".concat(i||"")),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconElement&&(e.iconElement.remove(),e.iconElement=null)):i?(e.iconElement||(e.iconElement=n(t,r,s)),e.iconElement.setAttribute("class","inboxsdk__button_icon "+i),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null)):(e.iconElement&&(e.iconElement.remove(),e.iconElement=null),e.iconHtmlElement&&(e.iconHtmlElement.remove(),e.iconHtmlElement=null),e.iconImgElement&&(e.iconImgElement.remove(),e.iconImgElement=null))}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=i},{"@babel/runtime-corejs2/core-js/object/define-property":12}],843:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=o(e("./logger")),u=function(){function e(t){(0,i.default)(this,e),(0,s.default)(this,"_name",void 0),(0,s.default)(this,"_runCount",0),(0,s.default)(this,"_errorLogs",[]),(0,s.default)(this,"_hasReported",!1),this._name=t}return(0,a.default)(e,[{key:"run",value:function(e,t){if(this._hasReported)throw new Error("Has already reported");this._runCount++;try{return t()}catch(t){return this._errorLogs.push({name:e,message:t.message}),null}}},{key:"report",value:function(e){if(this._hasReported)throw new Error("Has already reported");this._hasReported=!0,this._errorLogs.length&&l.default.error(new Error("Error Collector: ".concat(this._name)),{errorLogs:this._errorLogs,extra:e()})}},{key:"getErrorLogs",value:function(){return this._errorLogs}},{key:"runCount",value:function(){return this._runCount}},{key:"errorCount",value:function(){return this._errorLogs.length}}]),e}();r.default=u},{"./logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],844:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/weak-map")),a=o(e("@babel/runtime-corejs2/core-js/map")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/helpers/defineProperty")),c=function(){function e(t){(0,s.default)(this,e),(0,u.default)(this,"_mappers",void 0),(0,u.default)(this,"_map",new i.default),this._mappers=new a.default(t)}return(0,l.default)(e,[{key:"get",value:function(e){var t=this._map.get(e);if(!t){var r=this._mappers.get(e.constructor);if(!r)throw new Error("Unknown class ".concat(e.constructor.name));t=r(e),this._map.set(e,t)}return t}}]),e}();r.default=c},{"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],845:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=o(e("contain-by-screen")),u=o(e("kefir")),c=o(e("kefir-bus")),d=o(e("kefir-stopper")),f=o(e("./fromEventsWithOptions")),p=function(){function e(t,r,n){(0,i.default)(this,e),(0,s.default)(this,"_manualRepositions",(0,c.default)()),(0,s.default)(this,"_stopper",(0,d.default)()),u.default.merge([this._manualRepositions,u.default.fromEvents(window,"resize"),(0,f.default)(window,"scroll",{capture:!0,passive:!0}).filter(function(e){return e.target.contains(r)})]).toProperty(function(){return null}).takeUntilBy(this._stopper).onValue(function(){(0,l.default)(t,r,n)})}return(0,a.default)(e,[{key:"reposition",value:function(){this._manualRepositions.emit(null)}},{key:"destroy",value:function(){this._stopper.destroy()}}]),e}();r.default=p},{"./fromEventsWithOptions":879,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"contain-by-screen":138,kefir:327,"kefir-bus":324,"kefir-stopper":326}],846:[function(e,t,r){"use strict";function n(e,t){return s.default.stream(function(r){function n(e){switch(e.type){case"value":var n=e.value,i=t?Array.prototype.map.call(n,t):n;o.forEach(function(e,t){var r=(e.el,e.removalStream);Array.prototype.indexOf.call(i,t)<0&&(o.delete(t),r.destroy())});for(var a=0,s=n.length;a<s;a++){var u=n[a],c=i[a];if(!o.has(c)){var d=(0,l.default)(),f={el:u,removalStream:d};o.set(c,f),r.emit(f)}}break;case"error":r.error(e.value);break;case"end":r.end()}}var o=new a.default;return e.onAny(n),function(){o.forEach(function(e){e.removalStream.destroy()}),e.offAny(n)}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/map")),s=i(e("kefir")),l=i(e("kefir-stopper"))},{"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-stopper":326}],847:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/core-js/date/now")),c=l(e("@babel/runtime-corejs2/core-js/object/assign")),d=l(e("@babel/runtime-corejs2/regenerator")),f=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),p=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),m=l(e("@babel/runtime-corejs2/helpers/createClass")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("asap")),v=l(e("lodash/once")),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),g=l(e("./logger")),y=function(){function e(){(0,p.default)(this,e),(0,h.default)(this,"ajaxInterceptStream",void 0),this.ajaxInterceptStream=_.fromEvents(document,"inboxSDKajaxIntercept").map(function(e){return e.detail})}return(0,m.default)(e,[{key:"getUserEmailAddress",value:function(){var e=document.head.getAttribute("data-inboxsdk-user-email-address");if("string"!=typeof e)throw new Error("should not happen");return e}},{key:"getUserLanguage",value:function(){var e=document.head.getAttribute("data-inboxsdk-user-language");if("string"!=typeof e)throw new Error("should not happen");return e}},{key:"getIkValue",value:function(){var e=document.head.getAttribute("data-inboxsdk-ik-value");if(e)return e;if(window.opener){var t=window.opener.document.head.getAttribute("data-inboxsdk-ik-value");if(t)return t;throw new Error("Failed to look up parent window 'ik' value")}throw new Error("Failed to look up 'ik' value")}},{key:"isUsingSyncAPI",value:function(){return!1}},{key:"getXsrfToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(d.default.mark(function e(){var t,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.head.getAttribute("data-inboxsdk-xsrf-token"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.ajaxInterceptStream.filter(function(e){return"xsrfTokenHeaderReceived"===e.type}).take(1).toPromise();case 7:if(r=document.head.getAttribute("data-inboxsdk-xsrf-token")){e.next=10;break}throw new Error("Failed to look up XSRF token");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"getBtaiHeader",value:function(){function e(){return t.apply(this,arguments)}var t=(0,f.default)(d.default.mark(function e(){var t,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=document.head.getAttribute("data-inboxsdk-btai-header"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.ajaxInterceptStream.filter(function(e){return"btaiHeaderReceived"===e.type}).take(1).toPromise();case 7:if(r=document.head.getAttribute("data-inboxsdk-btai-header")){e.next=10;break}throw new Error("Failed to look up BTAI header");case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"resolveUrlRedirects",value:function(e){return this.pageAjax({url:e,method:"HEAD"}).then(function(e){return e.responseURL})}},{key:"pageAjax",value:function(e){var t="".concat((0,u.default)(),"-").concat(Math.random()),r=_.fromEvents(document,"inboxSDKpageAjaxDone").filter(function(e){return e.detail&&e.detail.id===t}).take(1).flatMap(function(e){if(e.detail.error){var t=(0,c.default)(new Error(e.detail.message||"Connection error"),{status:e.detail.status});return e.detail.stack&&(t.stack=e.detail.stack),_.constantError(t)}return _.constant({text:e.detail.text,responseURL:e.detail.responseURL})}).toPromise();return document.dispatchEvent(new CustomEvent("inboxSDKpageAjax",{bubbles:!1,cancelable:!1,detail:(0,c.default)({},e,{id:t})})),r}},{key:"silenceGmailErrorsForAMoment",value:function(){document.dispatchEvent(new CustomEvent("inboxSDKsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}));var e=new Error("Forgot to unsilence page errors"),t=!1,r=(0,v.default)(function(){t=!0,document.dispatchEvent(new CustomEvent("inboxSDKunsilencePageErrors",{bubbles:!1,cancelable:!1,detail:null}))});return(0,b.default)(function(){t||(g.default.error(e),r())}),r}},{key:"registerAllowedHashLinkStartTerm",value:function(e){document.dispatchEvent(new CustomEvent("inboxSDKregisterAllowedHashLinkStartTerm",{bubbles:!1,cancelable:!1,detail:{term:e}}))}}]),e}();r.default=y},{"./logger":891,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,asap:83,kefir:327,"lodash/once":516}],848:[function(e,t,r){"use strict";function n(e,t){var r=a(e);if(s){var n=s(e);t&&(n=n.filter(function(t){return l(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,p.default)(e,t,r[t])}):u?c(e,u(r)):n(Object(r)).forEach(function(t){d(e,t,l(r,t))})}return e}function i(e,t){if(!(0,m.default)(t))throw new Error("suggestions must be an array");return t.map(function(t){var r=o({},t);if("string"!=typeof r.name&&"string"!=typeof r.nameHTML)throw new Error("suggestion must have name or nameHTML property");if("string"!=typeof r.routeName&&"string"!=typeof r.externalURL&&"string"!=typeof r.searchTerm&&"function"!=typeof r.onClick)throw new Error("suggestion must have routeName, externalURL, searchTerm, or onClick property");if("string"==typeof r.iconURL){var n=r.iconURL;e.getLogger().deprecationWarning('AutocompleteSearchResult "iconURL" property',"AutocompleteSearchResult.iconUrl"),r.iconUrl||(1===e.getOpts().REQUESTED_API_VERSION?r.iconUrl=n:console.error("Support for iconURL property was dropped after API version 1")),delete r.iconURL}return r})}var a=e("@babel/runtime-corejs2/core-js/object/keys"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),c=e("@babel/runtime-corejs2/core-js/object/define-properties"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=i;var p=f(e("@babel/runtime-corejs2/helpers/defineProperty")),m=f(e("@babel/runtime-corejs2/core-js/array/is-array"))},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],849:[function(e,t,r){"use strict";function n(e){if(0===e.length||/^-?[0-9]/.test(e))throw new Error("Invalid CSS selector");return e.replace(/[^a-z0-9]/g,"\\$&")}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],850:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e){return d.stream(function(t){(0,c.default)(function(){t.emit(e),t.end()})})}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=o;var c=u(e("asap")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,asap:83,kefir:327}],851:[function(e,t,r){"use strict";function n(e){s.default.merge([s.default.fromEvents(e,"keypress"),s.default.fromEvents(e,"keydown"),s.default.fromEvents(e,"keyup")]).onValue(function(e){e.stopPropagation();var t=new KeyboardEvent(e.type,{bubbles:!0});(0,a.default)(t,{cancelable:{value:e.cancelable},bubbles:{value:e.bubbles},target:{value:e.target},detail:{value:e.detail},key:{value:e.key},code:{value:e.code},location:{value:e.location},ctrlKey:{value:e.ctrlKey},shiftKey:{value:e.shiftKey},altKey:{value:e.altKey},metaKey:{value:e.metaKey},repeat:{value:e.repeat},isComposing:{value:e.isComposing},charCode:{value:e.charCode},keyCode:{value:e.keyCode},which:{value:e.which}}),document.dispatchEvent(t)})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/object/define-properties")),s=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],852:[function(e,t,r){"use strict";function n(e){return function(t){var r=e(t.el);return t.removalStream.take(1).onValue(function(){r.destroy()}),r}}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],853:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/defineProperty")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),p=l(e("kefir-bus")),m=function(){function e(t){(0,u.default)(this,e),(0,d.default)(this,"_eventStream",(0,p.default)()),(0,d.default)(this,"_element",void 0),this._element=t,this._setupEventStream()}return(0,c.default)(e,[{key:"destroy",value:function(){this._element.remove(),this._eventStream.end()}},{key:"getElement",value:function(){return this._element}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"activate",value:function(){}},{key:"deactivate",value:function(){}},{key:"_setupEventStream",value:function(){var e=f.fromEvents(this._element,"click");e.onValue(function(e){e.stopPropagation(),e.preventDefault()}),this._eventStream.plug(e.map(function(e){return{eventName:"click",domEvent:e}}))}}]),e}();r.default=m},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,"kefir-bus":324}],854:[function(e,t,r){"use strict";function n(e,t,r){var n={};r.forEach(function(t){var r,o=e.getAttribute(t);n[t]=null==o?null:null!==(r=i(o))&&void 0!==r?r:o});for(var a=0;a<t.length;a++){var s=t[a];if(o(n,s,r))return s}return null}function o(e,t,r){for(var n=0;n<r.length;n++){var o,a=r[n],s=t.getAttribute(a),l=null==s?null:null!==(o=i(s))&&void 0!==o?o:s;if(l>e[a])return!0;if(l<e[a])return!1}return!1}function i(e){var t=(0,l.default)(e);return!isNaN(t)&&isFinite(t)?t:null}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=n;var l=s(e("@babel/runtime-corejs2/core-js/parse-float"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-float":22,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],855:[function(e,t,r){"use strict";function n(e){return e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function o(e,t){return t.contains(e.startContainer)||t.contains(e.endContainer)}function i(e,t){return!n(e)&&o(e,t)}function a(e,t){var r=document.getSelection();return c.default.toArray([r&&r.rangeCount?r.getRangeAt(0):null,t],c.default.compose(c.default.keep(),c.default.filter(function(t){return i(t,e)}),c.default.map(function(e){return e.toString()}),c.default.take(1)))[0]}function s(e,t){var r=document.getSelection();return c.default.toArray([r&&r.rangeCount?r.getRangeAt(0):null,t],c.default.compose(c.default.keep(),c.default.filter(function(t){return i(t,e)}),c.default.map(function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.innerHTML}),c.default.take(1)))[0]}var l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.getSelectedTextInElement=a,r.getSelectedHTMLInElement=s;var c=u(e("transducers.js"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"transducers.js":623}],856:[function(e,t,r){"use strict";function n(e,t){var r=void 0!==l&&e[u]||e["@@iterator"];if(!r){if(c(e)||(r=o(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){d=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(d)throw a}}}}function o(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?s(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=m.default.toArray(Array.prototype.slice.call(e.children),m.default.compose(m.default.filter(function(e){var i,a=!1,s=n(r);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=t.getAttribute(l),c=e.getAttribute(l);if(null!=u&&null!=c){a=!0;var d=void 0;if((d=isNaN((0,p.default)(u))||isNaN((0,p.default)(c))?c.localeCompare(u):(0,p.default)(c)-(0,p.default)(u))>0)return!0;if(d<0)return!1}}}catch(e){s.e(e)}finally{s.f()}return!!o&&!a}),m.default.take(1)))[0];e.insertBefore(t,i)}var s=e("@babel/runtime-corejs2/core-js/array/from"),l=e("@babel/runtime-corejs2/core-js/symbol"),u=e("@babel/runtime-corejs2/core-js/symbol/iterator"),c=e("@babel/runtime-corejs2/core-js/array/is-array"),d=e("@babel/runtime-corejs2/core-js/object/define-property"),f=e("@babel/runtime-corejs2/helpers/interopRequireDefault");d(r,"__esModule",{value:!0}),r.default=a;var p=f(e("@babel/runtime-corejs2/core-js/parse-float")),m=f(e("transducers.js")),h=["data-group-order-hint","data-order-hint","data-insertion-order-hint"]},{"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/parse-float":22,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"transducers.js":623}],857:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("ud")),c=l(e("kefir")),d=u.defn(t,function(e,t,r){if(e.focus(),e instanceof HTMLTextAreaElement){var n=e.selectionStart;e.selectionStart<e.selectionEnd&&(e.value=e.value.substring(0,e.selectionStart)+e.value.substring(e.selectionEnd)),e.value=e.value.substring(0,n)+t+e.value.substring(n),e.selectionStart=n+t.length,e.selectionEnd=n+t.length}else{var o=null;if(e.getSelection?o=e:e.ownerDocument&&e.ownerDocument.getSelection&&(o=e.ownerDocument),o){var i=o.getSelection();if(i.getRangeAt&&i.rangeCount){var a=r||i.getRangeAt(0);a.deleteContents();var s;if(t instanceof DocumentFragment)s=t;else if(s=document.createDocumentFragment(),t instanceof HTMLElement)s.appendChild(t);else{var l=document.createElement("div");l.innerHTML=t;for(var u;u=l.firstChild;)s.appendChild(u)}var d=s.firstElementChild;a.insertNode(s);var f=document.createEvent("MouseEvents");f.initMouseEvent("mousedown",!1,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),f.preventDefault(),e.dispatchEvent(f),a.collapse(!1),i.removeAllRanges(),i.addRange(a);var p=c.default.merge([c.default.fromEvents(e,"mousedown"),c.default.fromEvents(e,"keypress")]);c.default.fromEvents(e,"focus").takeUntilBy(p).onValue(function(){i.removeAllRanges(),i.addRange(a)});return d}}}}),f=d;r.default=f},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327,ud:625}],858:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e){return c.stream(function(t){return f&&f.bind(e,function(e){return t.emit(e),!1},"keydown")})}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=o;var c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),d=u(e("combokeys-capture")),f="undefined"!=typeof document&&new d.default(document.body,!0)},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"combokeys-capture":137,kefir:327}],859:[function(e,t,r){"use strict";function n(e){if("function"!=typeof s)return null;var t=new s,r=new s;return(n=function(e){return e?r:t})(e)}function o(e){if(!e||!e.nodeType)throw new Error("Expected element, got "+String(e));return p.stream(function(t){function r(e){if(1===e.nodeType){o.has(e)&&i(new Error("Already had removalStream for element with class "+e.className));var r=(0,m.default)();o.set(e,r);try{t.emit({el:e,removalStream:r})}catch(e){i(e)}}}function n(e){if(1===e.nodeType){var t=o.get(e);if(o.delete(e),t)try{t.destroy()}catch(e){i(e)}else i(new Error("Could not find removalStream for element with class "+e.className))}}var o=new d.default,a=!1,s=new MutationObserver(function(e){e.forEach(function(e){Array.prototype.forEach.call(e.addedNodes,r),Array.prototype.forEach.call(e.removedNodes,n)})});return(0,f.default)(function(){a||(s.observe(e,{childList:!0}),Array.prototype.slice.call(e.children).forEach(r))}),function(){a=!0,s.disconnect(),(0,f.default)(function(){o.forEach(function(e){e.destroy()})})}})}function i(e){setTimeout(function(){throw e},1)}var a=e("@babel/runtime-corejs2/helpers/typeof"),s=e("@babel/runtime-corejs2/core-js/weak-map"),l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),c=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.default=o;var d=c(e("@babel/runtime-corejs2/core-js/map")),f=c(e("asap")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=l&&u;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=i?u(e,s):null;c&&(c.get||c.set)?l(o,s,c):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),m=c(e("kefir-stopper"))},{"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,asap:83,kefir:327,"kefir-stopper":326}],860:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(){var e=new c.default;return function(t){var r=e.get(t.el);return r?(r.getSize()>1&&console.warn("element is part of multiple element streams",r.getSize(),t.el),r.add(t.removalStream.flatMap(p.default)),d.never()):(r=new f.default(t.removalStream.flatMap(p.default)),r.stream.onValue(function(){e.delete(t.el)}),e.set(t.el,r),d.constant({el:t.el,removalStream:r.stream}))}}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=o;var c=u(e("@babel/runtime-corejs2/core-js/map")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),f=u(e("../stopper-pool")),p=u(e("../delay-asap"))},{"../delay-asap":850,"../stopper-pool":900,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],861:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e){return function(t){var r=e(t.el)
;return r?(t.removalStream.take(1).onValue(function(){r.destroy()}),u.constant(r)):u.never()}}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor");s(r,"__esModule",{value:!0}),r.default=o;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],862:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e,t){return d.stream(function(r){var n=new MutationObserver(function(e){r.emit(e instanceof Array?e:(0,c.default)(e))});return n.observe(e,t),function(){n.disconnect()}})}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=o;var c=u(e("@babel/runtime-corejs2/core-js/array/from")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir"))},{"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],863:[function(e,t,r){"use strict";function n(e,t){return(0,a.default)(e,t).flatten()}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("./make-mutation-observer-chunked-stream"))},{"./make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],864:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("../from-event-target-capture")),a=e("ud"),s=(e("kefir"),(0,i.default)(document.body,"mouseup")),l=(0,a.defn)(t,function(e){return(0,i.default)(e,"mousedown").flatMapLatest(function(){return s.take(1).filter(function(t){return e.contains(t.target)})})}),u=l;r.default=u},{"../from-event-target-capture":878,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,ud:625}],865:[function(e,t,r){"use strict";function n(e){if("function"!=typeof p)return null;var t=new p,r=new p;return(n=function(e){return e?r:t})(e)}function o(e,t){var r=void 0!==c&&e[d]||e["@@iterator"];if(!r){if(f(e)||(r=i(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?u(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e){return v.merge([(0,_.default)(document,"click"),(0,_.default)(document.body,"focus")]).filter(function(t){return!t.shouldIgnore&&(t.isTrusted||!1)&&e.every(function(e){var r,n=o((0,g.default)(t.target));try{for(n.s();!(r=n.n()).done;){if(r.value===e)return!1}}catch(e){n.e(e)}finally{n.f()}return!0})}).map(function(e){return{type:"outsideInteraction",cause:e}}).merge(v.fromEvents(document,"keydown").filter(function(e){return e.key?"Escape"===e.key:27===e.which}).map(function(e){return e.preventDefault(),e.stopPropagation(),{type:"escape",cause:e}})).map(function(e){return e})}var l=e("@babel/runtime-corejs2/helpers/typeof"),u=e("@babel/runtime-corejs2/core-js/array/from"),c=e("@babel/runtime-corejs2/core-js/symbol"),d=e("@babel/runtime-corejs2/core-js/symbol/iterator"),f=e("@babel/runtime-corejs2/core-js/array/is-array"),p=e("@babel/runtime-corejs2/core-js/weak-map"),m=e("@babel/runtime-corejs2/core-js/object/define-property"),h=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),b=e("@babel/runtime-corejs2/helpers/interopRequireDefault");m(r,"__esModule",{value:!0}),r.default=s;var v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=m&&h;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=i?h(e,a):null;s&&(s.get||s.set)?m(o,a,s):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),_=b(e("../from-event-target-capture")),g=b(e("./parentNodes"))},{"../from-event-target-capture":878,"./parentNodes":866,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/symbol":28,"@babel/runtime-corejs2/core-js/symbol/iterator":29,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],866:[function(e,t,r){"use strict";function n(e){return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e;case 2:if(e=e.rfaAnchor||e._logicalParent||e.parentNode){t.next=0;break}case 3:case"end":return t.stop()}},s)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/regenerator")),s=a.default.mark(n)},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59}],867:[function(e,t,r){"use strict";function n(e,t){var r=e.querySelectorAll(t);if(1!==r.length)throw new Error("Found ".concat(r.length," elements when expecting 1 using selector ").concat((0,a.default)(t)));return r[0]}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/json/stringify"))},{"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],868:[function(e,t,r){"use strict";function n(e,t){var r=e.querySelector(t);if(!r)throw new Error("Failed to find element with selector: ".concat(t));return r}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],869:[function(e,t,r){"use strict";function n(e){var t=new MouseEvent("click");(0,a.default)(t,{target:{value:e.target},detail:{value:e.detail},screenX:{value:e.screenX},screenY:{value:e.screenY},clientX:{value:e.clientX},clientY:{value:e.clientY},button:{value:e.button},buttons:{value:e.buttons},ctrlKey:{value:e.ctrlKey},shiftKey:{value:e.shiftKey},altKey:{value:e.altKey},metaKey:{value:e.metaKey}}),document.dispatchEvent(t)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/object/define-properties"))},{"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],870:[function(e,t,r){"use strict";function n(e,t){var r="inboxsdk__".concat(e),n=document.getElementById(r);if(!t)return void(n&&n.remove());if(!n){if(n=document.createElement("style"),n.className="inboxsdk__custom",n.id=r,!document.head)throw new Error("missing head");document.head.appendChild(n)}n.textContent=t}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],871:[function(e,t,r){"use strict";function n(e,t,r){e.value=t;var n=document.createEvent("Event");n.initEvent(r),e.dispatchEvent(n)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],872:[function(e,t,r){"use strict";function n(e){return{files:e,fileNames:(0,u.default)(e).map(function(e){return"string"==typeof e.name?e.name:void 0})}}function o(e,t){var r=n(t),o={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,c.default)(e,{type:"dragenter",bubbles:!0,cancelable:!1,props:o,dataTransfer:r}),(0,c.default)(e,{type:"dragover",bubbles:!0,cancelable:!1,props:o,dataTransfer:r})}function i(e,t){var r=n(t),o={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,c.default)(e,{type:"drop",bubbles:!0,cancelable:!1,props:o,dataTransfer:r})}function a(e,t){var r=n(t),o={screenX:0,screenY:0,clientX:0,clientY:0,buttons:1,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,detail:0};(0,c.default)(e,{type:"dragleave",bubbles:!0,cancelable:!1,props:o,dataTransfer:r}),(0,c.default)(e,{type:"dragend",bubbles:!0,cancelable:!1,props:o,dataTransfer:r})}var s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.simulateDragOver=o,r.simulateDrop=i,r.simulateDragEnd=a;var u=l(e("@babel/runtime-corejs2/core-js/array/from")),c=l(e("./trigger-relay-event"))},{"./trigger-relay-event":875,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],873:[function(e,t,r){"use strict";function n(e,t,r){(0,a.default)(e,{type:"keydown",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:r,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}}),(0,a.default)(e,{type:"keypress",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:r,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}}),(0,a.default)(e,{type:"keyup",bubbles:!0,cancelable:!0,props:{keyCode:t,charCode:r,ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("./trigger-relay-event"))},{"./trigger-relay-event":875,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],874:[function(e,t,r){"use strict";function n(e,t){var r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,0,e.offsetLeft,e.offsetTop,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}function o(e){n(e,"mouseover")}function i(e){n(e,"mousedown"),n(e,"mouseup"),n(e,"click"),n(e,"mouseleave"),n(e,"mouseout"),e.blur()}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n,r.simulateHover=o,r.simulateClick=i},{"@babel/runtime-corejs2/core-js/object/define-property":12}],875:[function(e,t,r){"use strict";function n(e,t){return o.apply(this,arguments)}function o(){return o=(0,l.default)(s.default.mark(function e(t,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.dispatchEvent(new CustomEvent("inboxsdk_event_relay",{bubbles:!0,cancelable:!1,detail:r}));case 1:case"end":return e.stop()}},e)})),o.apply(this,arguments)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n;var s=a(e("@babel/runtime-corejs2/regenerator")),l=a(e("@babel/runtime-corejs2/helpers/asyncToGenerator"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59}],876:[function(e,t,r){"use strict";function n(e){var t=null,r=null,n=e.split("<"),o=n[0].replace(/\u202c/g,"").trim();if(n.length>1)t=o,r=n[1].split(">")[0].replace(/\u202c/g,"").trim();else{if(!(0,s.default)(o))throw(0,a.default)(new Error("Invalid email address"),{firstPartTrimmed:o});r=o}return{name:t,emailAddress:r}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/object/assign")),s=i(e("./is-valid-email"))},{"./is-valid-email":888,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],877:[function(e,t,r){"use strict";function n(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],878:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e,t){return u.stream(function(r){function n(e){r.value(e)}return e.addEventListener(t,n,!0),function(){e.removeEventListener(t,n,!0)}})}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor");s(r,"__esModule",{value:!0}),r.default=o;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],879:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e,t,r){return u.stream(function(n){return(0,c.addEventListener)(e,t,n.emit,r),function(){(0,c.removeEventListener)(e,t,n.emit,r)}})}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor");s(r,"__esModule",{value:!0}),r.default=o;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir")),c=e("event-listener-with-options")},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/typeof":57,"event-listener-with-options":302,kefir:327}],880:[function(e,t,r){"use strict";function n(e){var t=e.querySelectorAll("[hspace=inboxsdk__chip]");return[].concat((0,d.default)((0,c.default)(t).map(function(e){return e.parentElement})),(0,d.default)((0,c.default)(e.querySelectorAll("[hspace=inboxsdk__chip_main]"))))}function o(e){return f.default.later(0).merge((0,h.default)(e,{attributes:!0,attributeFilter:["class"]})).map(function(){return!e.classList.contains("inboxsdk__ensure_link_active")}).filter(Boolean).take(1)}function i(e){var t=e.getAttribute("data-sdk-linkchip-claimed");return b===t?!e._linkChipEnhancedByThisExtension:null==t}function a(e){return!!e._linkChipEnhancedByThisExtension}function s(e){var t=e.querySelector("a");t&&(t.addEventListener("mousedown",function(e){e.stopImmediatePropagation()},!0),t.addEventListener("click",function(e){e.stopImmediatePropagation()},!0));var r=document.createElement("img");r.src=v,r.setAttribute("style","opacity: 0.55; cursor: pointer; float: right; position: relative; top: -1px;"),r.addEventListener("mousedown",function(t){e.remove()},!0),r.addEventListener("click",function(e){e.stopImmediatePropagation(),e.preventDefault()},!0),e.addEventListener("mouseenter",function(){e.appendChild(r),(0,m.default)(e,"a > span").style.textDecoration="underline"}),e.addEventListener("mouseleave",function(){r.remove(),(0,m.default)(e,"a > span").style.textDecoration="none"}),e.addEventListener("mousedown",function(e){e.preventDefault()}),e.contentEditable="false",e.setAttribute("data-sdk-linkchip-claimed",b),e._linkChipEnhancedByThisExtension=!0}var l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.default=void 0;var c=u(e("@babel/runtime-corejs2/core-js/array/from")),d=u(e("@babel/runtime-corejs2/helpers/toConsumableArray")),f=(u(e("lodash/once")),u(e("kefir"))),p=e("ud"),m=u(e("./dom/querySelectorOrFail")),h=u(e("./dom/make-mutation-observer-chunked-stream")),b=""+Math.random(),v="https://ssl.gstatic.com/ui/v1/icons/common/x_8px.png",_=(0,p.defn)(t,function(e){try{e.getBodyElement()}catch(e){return}var t=e.getElement();o(t).takeUntilBy(e.getStopper()).onValue(function(){t.classList.add("inboxsdk__ensure_link_active"),e.getStopper().onValue(function(){t.classList.remove("inboxsdk__ensure_link_active")}),e.getEventStream().filter(function(e){return"bodyChanged"===e.eventName}).toProperty(function(){return null}).debounce(100,{immediate:!0}).takeUntilBy(e.getStopper()).onValue(function(){y(e)}),e.getEventStream().filter(function(e){return"presending"===e.eventName}).onValue(function(){w(e)})})}),g=_;r.default=g;var y=(0,p.defn)(t,function(e){n(e.getBodyElement()).filter(i).forEach(s)},"doFixing"),w=(0,p.defn)(t,function(e){n(e.getBodyElement()).filter(a).forEach(function(e){var t=e.querySelector('img[src="'.concat(v,'"]'));t&&t.remove();var r=e.querySelector("a > span");r&&(r.style.textDecoration="none")})},"doPresendFixing")},{"./dom/make-mutation-observer-chunked-stream":862,"./dom/querySelectorOrFail":868,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/toConsumableArray":56,kefir:327,"lodash/once":516,ud:625}],881:[function(e,t,r){"use strict";function n(e,t){try{e(t)}catch(e){f.default.error(e)}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/helpers/typeof")),s=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=i(e("@babel/runtime-corejs2/helpers/createClass")),u=i(e("@babel/runtime-corejs2/helpers/defineProperty")),c=i(e("lodash/remove")),d=i(e("asap")),f=i(e("./logger")),p=function(){function e(){(0,s.default)(this,e),(0,u.default)(this,"_targets",[]),(0,u.default)(this,"_pendingHandlers",[]),(0,u.default)(this,"_handlers",[])}return(0,l.default)(e,[{key:"registerHandler",value:function(e){var t=this;return-1===this._pendingHandlers.indexOf(e)&&(this._pendingHandlers.push(e),(0,d.default)(function(){for(var e=t._pendingHandlers.slice(),r=e.length-1;r>=0;r--){var n=e[r];-1===t._handlers.indexOf(n)&&(t._handlers.push(n),t._informHandlerOfTargets(n))}t._pendingHandlers=[]})),function(){(0,c.default)(t._pendingHandlers,function(t){return t===e}),(0,c.default)(t._handlers,function(t){return t===e})}}},{key:"addTarget",value:function(e){var t=this;this._targets.push(e),e&&"object"===(0,a.default)(e)&&"function"==typeof e.on&&e.on("destroy",function(){t.removeTarget(e)}),this._informHandlersOfTarget(e)}},{key:"removeTarget",value:function(e){(0,c.default)(this._targets,function(t){return t===e})}},{key:"dumpHandlers",value:function(){this._pendingHandlers=[],this._handlers=[]}},{key:"_informHandlerOfTargets",value:function(e){for(var t=this._targets.slice(),r=0;r<t.length;r++)n(e,t[r])}},{key:"_informHandlersOfTarget",value:function(e){for(var t=this._handlers.slice(),r=0;r<t.length;r++)n(t[r],e)}}]),e}();r.default=p},{"./logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,asap:83,"lodash/remove":518}],882:[function(e,t,r){"use strict";function n(e){var t=c.get(e);if(null!=t)return t;if(null==d){if(null==(d=document.documentElement.getAttribute("data-map-id"))){var r=new u.default;r.update("PWVe"+Math.floor((0,l.default)()/36e5)+"PYiE0"),d=r.digest("hex").slice(0,16)+"",document.documentElement.setAttribute("data-map-id",d)}f=/x$/.test(d)}var n;if(f){n="idm".concat(String(d.charCodeAt(0)%10),"_").concat(e)}else{var o=new u.default;o.update("4iYi29W"+e+":"+d+"jn2mPvTG"),n=o.digest("hex").slice(0,16).replace(/[0-9]/g,function(e){return String.fromCharCode("A".charCodeAt(0)+Number(e))})}return c.set(e,n),n}function o(){c.clear(),d=null}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=n,r._reset=o;var s=a(e("@babel/runtime-corejs2/core-js/map")),l=a(e("@babel/runtime-corejs2/core-js/date/now")),u=a(e("sha.js/sha256")),c=new s.default,d=null,f=!1},{"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"sha.js/sha256":617}],883:[function(e,t,r){"use strict";function n(e){return new a.default(function(t,r){var n=new Image;n.addEventListener("load",function(){return t(n)}),n.addEventListener("error",r),n.src=e})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],884:[function(e,t,r){"use strict";function n(e){var t=/ (\d+)$/.exec(e);return t?e.slice(0,e.length-t[0].length)+" "+(Number(t[1])+1):e+" 2"}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],885:[function(e,t,r){"use strict";function n(e){u=e}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.setInjectScriptImplementation=n,r.injectScript=void 0;var a=i(e("lodash/once")),s=i(e("kefir")),l=i(e("./dom/make-mutation-observer-chunked-stream")),u=function(){window.chrome.runtime.sendMessage({type:"inboxsdk__injectPageWorld"},function(e){if(!e){var t=document.createElement("script");t.type="text/javascript",t.src=window.chrome.runtime.getURL("pageWorld.js"),document.documentElement.appendChild(t)}})},c=(0,a.default)(function(){return document.head.hasAttribute("data-inboxsdk-script-injected")||(document.head.setAttribute("data-inboxsdk-script-injected","true"),u()),s.default.later(0,null).merge((0,l.default)(document.head,{attributes:!0})).filter(function(){return document.head.hasAttribute("data-inboxsdk-user-email-address")}).take(1).map(function(){return null}).toPromise()});r.injectScript=c},{"./dom/make-mutation-observer-chunked-stream":862,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"lodash/once":516}],886:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e){var t=document.createElement("div"),r=e.iconUrl?(0,m.default)(c||(c=(0,f.default)(['\n<img style="height:16px; width:16px; vertical-align: bottom; border: none;" height="16px" width="16px" src="','">&nbsp;\n'])),e.iconUrl):"",n=(0,m.default)(d||(d=(0,f.default)(['\n<div contenteditable="false" class="inboxsdk__compose_linkChip"\nstyle="width: 396px; height: 18px; max-height: 18px; padding: 5px; color: rgb(34, 34, 34); font-family: arial; font-style: normal; font-weight: bold; font-size: 13px; cursor: default; border: 1px solid rgb(221, 221, 221); line-height: 1; background-color: rgb(245, 245, 245);" hspace="inboxsdk__chip_main">\n  <a href="','" target="_blank" style=" display:inline-block; max-width: 366px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; max-height: 1.2em; text-decoration: none; cursor: pointer; padding: 1px 0; border: none; ">\n    ','\n    <span dir="ltr" style="color: rgb(17, 85, 204); text-decoration: none; vertical-align: bottom;">',"</span>\n  </a>\n</div>\n"])),e.url,{__html:r},e.text);return t.innerHTML=n,t.children[0]}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var c,d,f=u(e("@babel/runtime-corejs2/helpers/taggedTemplateLiteral")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("ud")),m=u(e("auto-html")),h=p.defn(t,function(e,t){e.focus();var r=o(t),n=document.createDocumentFragment();return n.appendChild(document.createTextNode("​")),n.appendChild(r),n.appendChild(document.createTextNode("​")),e.insertBodyHTMLAtCursor(n),e.isFullscreen()||e.isInlineReplyForm()||document.activeElement===e.getBodyElement()||(e.setMinimized(!0),e.setMinimized(!1)),e.focus(),r}),b=h;r.default=b},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/taggedTemplateLiteral":55,"@babel/runtime-corejs2/helpers/typeof":57,"auto-html":89,ud:625}],887:[function(e,t,r){"use strict";function n(e){var t=new l.default;return t.update("YlEHtGl72+c"+e),t.digest("hex")}function o(e){if(u.has(n(e)))return!0;var t=c.exec(e);if(!t)return!1;var r=t[1],o=t[2],i=new l.default;return i.update(r),i.digest("hex").slice(0,10)===o}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=o;var s=a(e("@babel/runtime-corejs2/core-js/set")),l=a(e("sha.js/sha1")),u=new s.default(["b540a2819e4b26823288046869e5577852178d69","1e9084cb394369dcdfd43cfcd84d17b78b0903dd","a9b816b86b6085eb0b80315da6b2297ff30cf7b6","5140e277522fd95ece3d540c94b97f443bcc3256","b56a2d6e6f650ed6eae78774d3b1f02d969d8485","bc6308648a588258f31f8f4b64f7c4652b6fcaac","4cb8e6bd1aab0b4b05c7f07fbe8332b842009358"]),c=/^sdk_(.{5,15})_([0-9a-f]{10})$/},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"sha.js/sha1":616}],888:[function(e,t,r){"use strict";function n(e){return null!=e&&o.test(e)}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n;var o=/^([^<>()[\]\\,;:\s"]+|".+")@[^\s<>]+$/},{"@babel/runtime-corejs2/core-js/object/define-property":12}],889:[function(e,t,r){"use strict";function n(e){return null!=e}e("@babel/runtime-corejs2/core-js/object/define-property")(r,"__esModule",{value:!0}),r.default=n},{"@babel/runtime-corejs2/core-js/object/define-property":12}],890:[function(e,t,r){"use strict";function n(e){var t=new s.default;return t.update("bdnanNrDjv"+e),t.digest("hex").slice(0,32)}function o(e){return"f471fe7b7343b47a202437c3962cc335"===n(e)}var i=e("@babel/runtime-corejs2/core-js/object/define-property"),a=e("@babel/runtime-corejs2/helpers/interopRequireDefault");i(r,"__esModule",{value:!0}),r.default=o;var s=a(e("sha.js/sha256"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"sha.js/sha256":617}],891:[function(e,t,r){(function(t){(function(){"use strict";function n(e,t){var r=_(e);if(g){var n=g(e);t&&(n=n.filter(function(t){return y(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,R.default)(e,t,r[t])}):w?j(e,w(r)):n(Object(r)).forEach(function(t){k(e,t,y(r,t))})}return e}function i(){var e="undefined"!=typeof document&&document.documentElement.getAttribute("data-inboxsdk-active-app-ids")||"[]";return JSON.parse(e)}function a(e,t,r,n){if(K.push((0,V.default)({appId:e,version:t.appVersion||void 0})),document.documentElement.setAttribute("data-inboxsdk-active-app-ids",(0,N.default)(i().concat([{appId:e,version:t.appVersion||void 0}]))),!E&&(E=r,S=n,$=t.eventTracking,t.globalErrorLogging)){Error.stackTraceLimit<40&&(Error.stackTraceLimit=40),window.addEventListener("error",function(e){e.error&&te.error(e.error,"Uncaught exception")}),c(window,"setTimeout",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[0]&&(r[0]=u(r[0],"setTimeout callback")),e.apply(this,r)}}),c(window,"setInterval",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[0]&&(r[0]=u(r[0],"setInterval callback")),e.apply(this,r)}})
;var o=window.EventTarget&&window.EventTarget.prototype||window.Node.prototype;c(o,"addEventListener",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if("function"==typeof r[1])try{var o=r[1].__inboxsdk_logged;o||(o=u(r[1],"event listener"),r[1].__inboxsdk_logged=o),r[1]=o}catch(e){console.error("Failed to error wrap function",e)}return e.apply(this,r)}}),c(o,"removeEventListener",function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[1]&&r[1].__inboxsdk_logged&&(r[1]=r[1].__inboxsdk_logged),e.apply(this,r)}}),c(window,"MutationObserver",function(e){function t(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return"function"==typeof r[0]&&(r[0]=u(r[0],"MutationObserver callback")),e.bind&&e.bind.apply?new(e.bind.apply(e,[null].concat(r))):new e(r[0])}return e=e||window.WebKitMutationObserver,t.prototype=e.prototype,t})}}function s(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t?K:i();if(e){var n=r.slice(),a=!1;return n.forEach(function(t,r){a||t.appId!==e||(a=!0,n[r]=o(o({},t),{},{causedBy:!0})),(0,V.default)(n[r])}),(0,V.default)(n)}return r}function l(e,t,r,n){(0,H.default)(e,t,{appId:r,sentByApp:n,appIds:s(r),loaderVersion:E,implVersion:S,userEmailHash:C,isUsingSyncAPI:J})}function u(e,t){var r=t?"Uncaught error in "+t:"Uncaught error";return function(){for(var t=this,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return te.run(function(){return e.apply(t,o)},r)}}function c(e,t,r){var n=r(e[t]);n.__original=e[t],e[t]=n}function d(e){var t=new B.default;return t.update("inboxsdk:"+e),t.digest("hex")}function f(e,t,r,n){if(n&&"object"!=(0,T.default)(n))throw new Error("properties must be object or null: "+n);var o={type:t,event:r,timestamp:1e3*(0,P.default)(),origin:document.location.origin,sessionId:Y,emailHash:C,loaderVersion:E,implementationVersion:S,isUsingSyncAPI:J,properties:n};"gmail"!=t?(0,L.default)(o,{extensionId:(0,U.default)(),appIds:s(e)}):(0,L.default)(o,{appIds:s(null,!1)}),"undefined"!=typeof document&&(X.add(o),document.documentElement.setAttribute("data-inboxsdk-last-event",""+(0,P.default)()))}function p(e){return(0,P.default)()+6e5>e}function m(){return h.apply(this,arguments)}function h(){return h=(0,A.default)(I.default.mark(function e(){var t,r,n;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,q.default)({url:"https://www.inboxsdk.com/api/v2/events/oauth",XMLHttpRequest:(0,G.getXMLHttpRequest)()});case 2:return t=e.sent,r=t.text,n=JSON.parse(r),p(n.expirationDate)&&(console.warn("Got an apparently already expired token. Assuming our clock is busted..."),n.expirationDate=(0,P.default)()+18e5),e.abrupt("return",n);case 7:case"end":return e.stop()}},e)})),h.apply(this,arguments)}function b(){return v.apply(this,arguments)}function v(){return v=(0,A.default)(I.default.mark(function e(){var t;return I.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=re)||p(t.expirationDate)){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,m();case 7:return re=e.sent,e.abrupt("return",re);case 9:case"end":return e.stop()}},e)})),v.apply(this,arguments)}var _=e("@babel/runtime-corejs2/core-js/object/keys"),g=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),y=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),w=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),j=e("@babel/runtime-corejs2/core-js/object/define-properties"),k=e("@babel/runtime-corejs2/core-js/object/define-property"),x=e("@babel/runtime-corejs2/helpers/interopRequireDefault");k(r,"__esModule",{value:!0}),r.hashEmail=d,r.default=void 0;var E,S,C,I=x(e("@babel/runtime-corejs2/regenerator")),A=x(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),T=x(e("@babel/runtime-corejs2/helpers/typeof")),D=x(e("@babel/runtime-corejs2/helpers/classCallCheck")),M=x(e("@babel/runtime-corejs2/helpers/createClass")),R=x(e("@babel/runtime-corejs2/helpers/defineProperty")),O=x(e("@babel/runtime-corejs2/core-js/set")),P=x(e("@babel/runtime-corejs2/core-js/date/now")),L=x(e("@babel/runtime-corejs2/core-js/object/assign")),V=x(e("@babel/runtime-corejs2/core-js/object/freeze")),N=x(e("@babel/runtime-corejs2/core-js/json/stringify")),B=x(e("sha.js/sha256")),q=x(e("../../common/ajax")),U=x(e("../../common/get-extension-id")),F=x(e("../../common/get-session-id")),H=x(e("../../common/log-error")),z=x(e("./persistent-queue")),W=x(e("./dom/make-mutation-observer-stream")),G=e("ext-corb-workaround"),K=[],$=!1,J=void 0,Y=(0,F.default)(),Q=new O.default,Z=function(){return"undefined"==typeof document||!document.documentElement.hasAttribute("data-inboxsdk-master-claimed")&&(document.documentElement.setAttribute("data-inboxsdk-master-claimed","true"),!0)}(),X=new z.default("events"),ee=(0,P.default)(),te=function(){function e(t,r,n,o){var i=this;(0,D.default)(this,e),(0,R.default)(this,"_appId",void 0),(0,R.default)(this,"_isMaster",void 0),a(t,r,n,o),this._appId=t,this._isMaster=function(){return!(!$||"undefined"!=typeof document&&document.documentElement.hasAttribute("data-inboxsdk-app-logger-master-chosen"))&&(document.documentElement.setAttribute("data-inboxsdk-app-logger-master-chosen","true"),!0)}(),this._isMaster&&"undefined"!=typeof document&&(document.addEventListener("inboxSDKinjectedError",function(e){var t=e.detail;i.error((0,L.default)(new Error(t.message),{stack:t.stack}),t.details)}),document.addEventListener("inboxSDKinjectedEventSdkPassive",function(e){var t=e.detail;i.eventSdkPassive(t.name,t.details)}))}return(0,M.default)(e,[{key:"setUserEmailAddress",value:function(e){C=d(e)}},{key:"shouldTrackEverything",value:function(){return"ca05afe92819df590a4196c31814fdb24050e8f49d8a41613f3d6cfb5729c785"===C}},{key:"setIsUsingSyncAPI",value:function(e){J=e}},{key:"run",value:function(e,t){try{return e()}catch(e){throw this.error(e,t),e}}},{key:"error",value:function(e,t){l(e,t,this._appId,!1)}},{key:"errorApp",value:function(e,t){l(e,t,this._appId,!0)}},{key:"errorSite",value:function(e,t){this._isMaster&&this.error(e,t)}},{key:"eventApp",value:function(e,t){f(this._appId,"app",e,t)}},{key:"eventSdkActive",value:function(e,t){$&&f(this._appId,"sdkActive",e,t)}},{key:"eventSdkPassive",value:function(e,t){f(this._appId,"sdkPassive",e,t)}},{key:"eventSite",value:function(e,t){this._isMaster&&f(this._appId,"gmail",e,t)}},{key:"deprecationWarning",value:function(e,t){console.warn("InboxSDK: ".concat(e," is deprecated.")+(t?" Please use ".concat(t," instead."):""));var r=e+(t?":"+t:"");Q.has(r)||(this.eventSdkPassive("deprecated.".concat(e)),Q.add(r))}},{key:"getAppLogger",value:function(){var e=this;return{error:function(t,r){return e.errorApp(t,r)},event:function(t,r){return e.eventApp(t,r)}}}},{key:"trackFunctionPerformance",value:function(e,t,r){var n=this;if(Math.random()<t&&"visible"===document.visibilityState&&this._isMaster){var i=(0,P.default)();e(),setTimeout(function(){var e=(0,P.default)();n.eventSdkPassive("function performance result",o({value:e-i,timeSinceFirstLoad:e-ee},r))},10)}else e()}}],[{key:"run",value:function(t,r){try{return t()}catch(t){throw e.error(t,r),t}}},{key:"error",value:function(e,t){l(e,t,void 0,!1)}}]),e}();r.default=te;var re=null;Z&&"undefined"!=typeof document&&"undefined"!=typeof MutationObserver&&(0,W.default)(document.documentElement,{attributes:!0,attributeFilter:["data-inboxsdk-last-event"]}).map(function(){return null}).throttle(12e4).onValue(function(){var e=X.removeAll();0!==e.length&&(0,A.default)(I.default.mark(function r(){var n,o,i;return I.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b();case 2:return n=r.sent,o=n.oauthToken,i="AIzaSyAwlvUR2x3OnCeas8hW8NDzVMswL5hZGg8",r.next=7,(0,q.default)({url:"https://pubsub.googleapis.com/v1/projects/mailfoogae/topics/events:publish?key=".concat(encodeURIComponent(i)),method:"POST",headers:{Authorization:"Bearer ".concat(o),"Content-Type":"application/json"},data:(0,N.default)({messages:[{data:t.from((0,N.default)({data:e,timestamp:1e3*(0,P.default)()})).toString("base64")}]})});case 7:case"end":return r.stop()}},r)}))().catch(function(e){te.error(e,{type:"Failed to log events"})})})}).call(this)}).call(this,e("buffer").Buffer)},{"../../common/ajax":634,"../../common/get-extension-id":641,"../../common/get-session-id":643,"../../common/log-error":648,"./dom/make-mutation-observer-stream":863,"./persistent-queue":893,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/assign":9,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,buffer:101,"ext-corb-workaround":305,"sha.js/sha256":617}],892:[function(e,t,r){"use strict";function n(e,t){var r=(0,s.default)(null);return(0,u.default)(e.split("/"),t.split("/")).forEach(function(e,t){var n=(0,a.default)(e,2),o=n[0],i=n[1];":"===o[0]&&(r[o.slice(1)]=decodeURIComponent(i.replace(/\+/g," ")))}),(0,l.default)(r)}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/helpers/slicedToArray")),s=i(e("@babel/runtime-corejs2/core-js/object/create")),l=i(e("@babel/runtime-corejs2/core-js/object/freeze")),u=i(e("lodash/zip"))},{"@babel/runtime-corejs2/core-js/object/create":10,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/slicedToArray":53,"lodash/zip":532}],893:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/core-js/json/stringify")),a=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=o(e("@babel/runtime-corejs2/helpers/createClass")),l=o(e("@babel/runtime-corejs2/helpers/defineProperty")),u=function(){function e(t){(0,a.default)(this,e),(0,l.default)(this,"_fallbackQueue",[]),(0,l.default)(this,"_sid",void 0),this._sid="inboxsdk__persistentqueue_"+t}return(0,s.default)(e,[{key:"_getSavedQueue",value:function(){var e=JSON.parse(localStorage.getItem(this._sid));return null==e&&(e=[]),e}},{key:"_putSavedQueue",value:function(e){localStorage.setItem(this._sid,(0,i.default)(e))}},{key:"_clearSavedQueue",value:function(){localStorage.removeItem(this._sid)}},{key:"add",value:function(e){var t=!1;if("undefined"!=typeof localStorage)try{var r=this._getSavedQueue();r.push(e),this._putSavedQueue(r),t=!0}catch(e){}t||this._fallbackQueue.push(e)}},{key:"remove",value:function(){var e;if("undefined"!=typeof localStorage)try{var t=this._getSavedQueue(),r=t.shift();this._putSavedQueue(t),e=r}catch(e){}return void 0===e&&(e=this._fallbackQueue.shift()),e}},{key:"removeAll",value:function(){var e=void 0;if("undefined"!=typeof localStorage)try{var t=this._getSavedQueue();this._clearSavedQueue(),e=t}catch(e){}return void 0===e&&(e=[]),e=e.concat(this._fallbackQueue),this._fallbackQueue=[],e}},{key:"peekAll",value:function(){var e=void 0;if("undefined"!=typeof localStorage)try{e=this._getSavedQueue()}catch(e){}return void 0===e&&(e=[]),e=e.concat(this._fallbackQueue)}},{key:"clear",value:function(){if("undefined"!=typeof localStorage)try{this._clearSavedQueue()}catch(e){}this._fallbackQueue.length=0}}]),e}();r.default=u},{"@babel/runtime-corejs2/core-js/json/stringify":4,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],894:[function(e,t,r){"use strict";function n(e,t){var r=t||{},n=new a.default,o=e.replace(/:([^/]+)/g,function(e,t){if(t in r)return n.add(t),encodeURIComponent(String(r[t]));throw new Error("Missing param: ".concat(t))});if((0,s.default)(r).length!==n.size)throw new Error("Extra parameters given");return o}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/set")),s=i(e("@babel/runtime-corejs2/core-js/object/keys"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],895:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("react")),b=function(e){function t(){var e;(0,l.default)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=r.call.apply(r,[this].concat(o)),(0,m.default)((0,c.default)(e),"props",void 0),(0,m.default)((0,c.default)(e),"_content",void 0),(0,m.default)((0,c.default)(e),"_contentRefCb",function(t){t&&(e._content=t)}),e}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"componentDidMount",value:function(){this._content.appendChild(this.props.el)}},{key:"componentDidUpdate",value:function(e){if(e.el!==this.props.el){for(;this._content.lastElementChild;)this._content.lastElementChild.remove();this._content.appendChild(this.props.el)}}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||this.props.el!==e.el}},{key:"render",value:function(){return h.default.createElement("div",{className:this.props.className,ref:this._contentRefCb})}}]),t}(h.default.Component);r.default=b},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,react:606}],896:[function(e,t,r){"use strict";function n(e){return e.replace(/\.IDMAP_([-a-zA-Z0-9_]+)/g,function(e,t){return".".concat((0,a.default)(t))})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("./idMap"))},{"./idMap":882,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],897:[function(e,t,r){"use strict";function n(e,t){var r=(0,a.default)(e)?e:[e];return(0,l.default)(r,function(e){return t.match(c(e))})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/array/is-array")),s=i(e("lodash/memoize")),l=i(e("lodash/find")),u=i(e("lodash/escapeRegExp")),c=(0,s.default)(function(e){return new RegExp("^"+(0,u.default)(e).replace(/\/:[^/]+/g,"/([^/]+)")+"/?$")})},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/escapeRegExp":483,"lodash/find":484,"lodash/memoize":513}],898:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/get")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("events")),h=s(e("./logger")),b=function(e){function t(){return(0,l.default)(this,t),r.apply(this,arguments)}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"emit",value:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];try{return(0,c.default)((0,p.default)(t.prototype),"emit",this).apply(this,arguments)}catch(e){return h.default.error(e),!0}}}]),t}(m.default);r.default=b},{"./logger":891,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/get":41,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,events:304}],899:[function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!e.getElementById("inboxsdk__shared_style")){var t=e.createElement("style");if(t.id="inboxsdk__shared_style",l.onValue(function(e){t.textContent=(0,s.default)(e)}),!e.head)throw new Error("missing head");e.head.appendChild(t)}}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("ud-kefir")),s=i(e("./rewriteCssWithIdMap")),l=(0,a.default)(t,".inboxsdk__notransition {\n  -webkit-transition: none !important;\n  -moz-transition: none !important;\n  -o-transition: none !important;\n  -ms-transition: none !important;\n  transition: none !important;\n}\n\n.inboxsdk__close_button {\n  height: 24px;\n  width: 24px;\n  opacity: 0.7;\n  position: relative;\n  background: none;\n  border: none;\n  padding: 0;\n  box-sizing: content-box;\n  outline: none;\n  cursor: pointer;\n}\n.inboxsdk__close_button:focus,\n.inboxsdk__close_button:hover {\n  opacity: 1;\n}\n.inboxsdk__close_button:focus::before {\n  background-color: rgba(0, 0, 0, 0.12);\n}\n.inboxsdk__close_button::before {\n  border-radius: 50%;\n  position: absolute;\n  top: -4px;\n  bottom: -4px;\n  left: -4px;\n  right: -4px;\n  padding: 4px;\n  content: ' ';\n}\n.inboxsdk__close_button::after {\n  content: ' ';\n  background: url(https://www.gstatic.com/images/icons/material/system/1x/close_black_24dp.png);\n  position: absolute;\n  height: 24px;\n  width: 24px;\n  top: 0;\n  left: 0;\n}\n\n.IDMAP_app_sidebar_waiting_platform {\n  display: none;\n}\n\n/* drawer */\n\n.inboxsdk__drawer_view_container {\n  visibility: visible;\n  direction: initial;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n  z-index: 51;\n  pointer-events: none;\n}\n.inboxsdk__drawer_view {\n  position: absolute;\n  pointer-events: auto;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  width: 452px;\n  font: normal normal normal normal 13px / normal 'Helvetica Neue', Helvetica,\n    Arial, sans-serif;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n  background-color: #fff;\n  outline: none;\n  box-shadow: 0 0 8px rgba(0, 0, 0, 0.18), 0 8px 16px rgba(0, 0, 0, 0.36);\n  -webkit-transform: translateX(100%);\n  transform: translateX(100%);\n  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n.inboxsdk__drawer_view.inboxsdk__match_sidebar_content_panel_width {\n  width: 300px;\n}\n\n.inboxsdk__drawer_view.inboxsdk__active {\n  -webkit-transform: none;\n  transform: none;\n}\n.inboxsdk__drawer_title_bar {\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #e0e0e0;\n  padding: 16px 20px;\n  white-space: nowrap;\n  display: -webkit-flex;\n  display: flex;\n  flex: 0 0 auto;\n  -webkit-flex: 0 0 auto;\n}\n.inboxsdk__drawer_title_bar .inboxsdk__close_button {\n  margin-right: 20px;\n  -webkit-flex-shrink: 0;\n  flex-shrink: 0;\n}\n.inboxsdk__drawer_title {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font: normal normal normal normal 20px / 24px 'Helvetica Neue', Helvetica,\n    Arial, sans-serif;\n}\n\n/* backdrop */\n\n.inboxsdk__inbox_backdrop {\n  visibility: visible;\n  position: fixed;\n  height: 100vh;\n  width: 100vw;\n  bottom: 0;\n  left: 0;\n  z-index: 50;\n  background-color: transparent;\n  transition: background-color 150ms cubic-bezier(0.4, 0, 1, 1);\n}\n.inboxsdk__inbox_backdrop.inboxsdk__active {\n  background-color: rgba(10, 10, 10, 0.6);\n  transition: background-color 70ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n.inboxsdk__inbox_backdrop ~ .inboxsdk__inbox_backdrop {\n  opacity: 0.6;\n}\n\n/* sidebar */\n\n.IDMAP_app_sidebar_main {\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-direction: column;\n  flex-direction: column;\n}\n\n.IDMAP_app_sidebar > .inboxsdk__close_button {\n  position: absolute;\n  bottom: 10px;\n  right: 20px;\n}\n\n.IDMAP_app_sidebar_content_area {\n  width: 216px;\n}\n\n.IDMAP_app_sidebar_content_panel {\n  overflow: hidden;\n  font: 12px Arial, sans-serif;\n  max-height: 100%;\n  box-sizing: border-box;\n}\n\n.IDMAP_app_sidebar_content_panel_top_line {\n  white-space: nowrap;\n  display: -webkit-flex;\n  display: flex;\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n\n.IDMAP_app_sidebar_content_panel:not(.IDMAP_expanded)\n  .IDMAP_app_sidebar_content_panel_top_line {\n  border-bottom: 1px solid #ddd;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_top_line:hover,\n.IDMAP_app_sidebar_content_panel.IDMAP_dragged\n  .IDMAP_app_sidebar_content_panel_top_line {\n  background: rgba(0, 0, 0, 0.03);\n}\n\n.IDMAP_app_sidebar_content_panel_title {\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_title {\n  cursor: move;\n}\n\n.IDMAP_app_sidebar_content_panel_title_text {\n  padding-left: 6px;\n  vertical-align: middle;\n  font: bold 13px / 40px 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  color: rgba(0, 0, 0, 0.87);\n}\n\n.IDMAP_app_sidebar.IDMAP_hideTitleBar\n  .IDMAP_app_sidebar_content_panel_top_line {\n  display: none;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_top_line:hover\n  .IDMAP_app_sidebar_content_panel_grip {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 10px;\n  height: 40px;\n  background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI2cHgiIGhlaWdodD0iMTJweCIgdmlld0JveD0iMCAwIDYgMTIiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Q29tYmluZWQgU2hhcGU8L3RpdGxlPiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4gICAgPGRlZnM+PC9kZWZzPiAgICA8ZyBpZD0iRkluYWxzLSoqSmFuLTkqKiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iU2lkZWJhci1jbG9zZWQtQ29weSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIC0xNC4wMDAwMDApIiBmaWxsPSIjQUFBQUFBIj4gICAgICAgICAgICA8ZyBpZD0iU2lkZWJhciIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgPGcgaWQ9IkJveC1pbmZvLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwLjAwMDAwMCwgMC4wMDAwMDApIj4gICAgICAgICAgICAgICAgICAgIDxnIGlkPSJHcmlwcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAuMDAwMDAwLCAxNC41MDAwMDApIj4gICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMC42NjY2NjY2NjcsNS40MTY2NjY2NyBDMC42NjY2NjY2NjcsNC44NjQzODE5MiAxLjExMDUzMTQ5LDQuNDE2NjY2NjcgMS42NjY2NjY2Nyw0LjQxNjY2NjY3IEMyLjIxODk1MTQyLDQuNDE2NjY2NjcgMi42NjY2NjY2Nyw0Ljg2MDUzMTQ5IDIuNjY2NjY2NjcsNS40MTY2NjY2NyBDMi42NjY2NjY2Nyw1Ljk2ODk1MTQyIDIuMjIyODAxODQsNi40MTY2NjY2NyAxLjY2NjY2NjY3LDYuNDE2NjY2NjcgQzEuMTE0MzgxOTIsNi40MTY2NjY2NyAwLjY2NjY2NjY2Nyw1Ljk3MjgwMTg0IDAuNjY2NjY2NjY3LDUuNDE2NjY2NjcgWiBNMC42NjY2NjY2NjcsMS4yNSBDMC42NjY2NjY2NjcsMC42OTc3MTUyNSAxLjExMDUzMTQ5LDAuMjUgMS42NjY2NjY2NywwLjI1IEMyLjIxODk1MTQyLDAuMjUgMi42NjY2NjY2NywwLjY5Mzg2NDgyMiAyLjY2NjY2NjY3LDEuMjUgQzIuNjY2NjY2NjcsMS44MDIyODQ3NSAyLjIyMjgwMTg0LDIuMjUgMS42NjY2NjY2NywyLjI1IEMxLjExNDM4MTkyLDIuMjUgMC42NjY2NjY2NjcsMS44MDYxMzUxOCAwLjY2NjY2NjY2NywxLjI1IFogTTAuNjY2NjY2NjY3LDkuNTgzMzMzMzMgQzAuNjY2NjY2NjY3LDkuMDMxMDQ4NTggMS4xMTA1MzE0OSw4LjU4MzMzMzMzIDEuNjY2NjY2NjcsOC41ODMzMzMzMyBDMi4yMTg5NTE0Miw4LjU4MzMzMzMzIDIuNjY2NjY2NjcsOS4wMjcxOTgxNiAyLjY2NjY2NjY3LDkuNTgzMzMzMzMgQzIuNjY2NjY2NjcsMTAuMTM1NjE4MSAyLjIyMjgwMTg0LDEwLjU4MzMzMzMgMS42NjY2NjY2NywxMC41ODMzMzMzIEMxLjExNDM4MTkyLDEwLjU4MzMzMzMgMC42NjY2NjY2NjcsMTAuMTM5NDY4NSAwLjY2NjY2NjY2Nyw5LjU4MzMzMzMzIFogTTMuMzAwMDAwMTksMS4yNSBDMy4zMDAwMDAxOSwwLjY5NzcxNTI1IDMuNzQzODY1MDEsMC4yNSA0LjMwMDAwMDE5LDAuMjUgQzQuODUyMjg0OTQsMC4yNSA1LjMwMDAwMDE5LDAuNjkzODY0ODIyIDUuMzAwMDAwMTksMS4yNSBDNS4zMDAwMDAxOSwxLjgwMjI4NDc1IDQuODU2MTM1MzcsMi4yNSA0LjMwMDAwMDE5LDIuMjUgQzMuNzQ3NzE1NDQsMi4yNSAzLjMwMDAwMDE5LDEuODA2MTM1MTggMy4zMDAwMDAxOSwxLjI1IFogTTMuMzAwMDAwMTksNS40MTY2NjY2NyBDMy4zMDAwMDAxOSw0Ljg2NDM4MTkyIDMuNzQzODY1MDEsNC40MTY2NjY2NyA0LjMwMDAwMDE5LDQuNDE2NjY2NjcgQzQuODUyMjg0OTQsNC40MTY2NjY2NyA1LjMwMDAwMDE5LDQuODYwNTMxNDkgNS4zMDAwMDAxOSw1LjQxNjY2NjY3IEM1LjMwMDAwMDE5LDUuOTY4OTUxNDIgNC44NTYxMzUzNyw2LjQxNjY2NjY3IDQuMzAwMDAwMTksNi40MTY2NjY2NyBDMy43NDc3MTU0NCw2LjQxNjY2NjY3IDMuMzAwMDAwMTksNS45NzI4MDE4NCAzLjMwMDAwMDE5LDUuNDE2NjY2NjcgWiBNMy4zMDAwMDAxOSw5LjU4MzMzMzMzIEMzLjMwMDAwMDE5LDkuMDMxMDQ4NTggMy43NDM4NjUwMSw4LjU4MzMzMzMzIDQuMzAwMDAwMTksOC41ODMzMzMzMyBDNC44NTIyODQ5NCw4LjU4MzMzMzMzIDUuMzAwMDAwMTksOS4wMjcxOTgxNiA1LjMwMDAwMDE5LDkuNTgzMzMzMzMgQzUuMzAwMDAwMTksMTAuMTM1NjE4MSA0Ljg1NjEzNTM3LDEwLjU4MzMzMzMgNC4zMDAwMDAxOSwxMC41ODMzMzMzIEMzLjc0NzcxNTQ0LDEwLjU4MzMzMzMgMy4zMDAwMDAxOSwxMC4xMzk0Njg1IDMuMzAwMDAwMTksOS41ODMzMzMzMyBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgICAgICAgICAgICAgIDwvZz4gICAgICAgICAgICAgICAgPC9nPiAgICAgICAgICAgIDwvZz4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==)\n    50% center no-repeat;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon_container {\n  width: 20px;\n  height: 20px;\n  vertical-align: middle;\n  margin-left: 6px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  margin-top: -1px;\n}\n\n.IDMAP_app_sidebar_content_panel_title_icon,\n.IDMAP_app_sidebar_content_panel_title_icon > img {\n  width: 13px;\n  height: 13px;\n}\n\n.IDMAP_app_sidebar_content_panel_toggle {\n  -webkit-flex: 1;\n  flex: 1;\n  text-align: right;\n  visibility: hidden;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_showControls\n  .IDMAP_app_sidebar_content_panel_toggle {\n  visibility: visible;\n  cursor: pointer;\n}\n\n.IDMAP_app_sidebar_content_panel_toggle_button {\n  margin-top: 12px;\n  margin-right: 4px;\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAA30lEQVR4Ae3RO04EMRgE4Q45hlkuxWMPCwdBLNxjZQJPNBkq4U7qm9x/lyb6A0mSJEmSJEmS9NB/iXjKV57DJdd8ZmSzS34yc+cJueaemVvG/vnzSODz596ES77XUZxwzN+b8HjM5wlva/7uhI91DCes+efvPf9u5AYSTvMbfwAm9OfzhNf2fJbQn48S+vNRQn8+SujPRwn9+SjhpT+fJPTno4T+fJTQnw8T+PxyAp/fT+Dz+wl8fj+Bz28n8PnVBD6/msDnVxP4/GoCn99MYPP7xmm+JEmSJEmSJEmSfgG9E96X0mx7vAAAAABJRU5ErkJggg==)\n    center / 20px no-repeat;\n  border: none;\n  width: 14px;\n  height: 14px;\n  -webkit-transform: rotate(-90deg);\n  transform: rotate(-90deg);\n  transition: -webkit-transform 0.15s, transform 0.15s;\n  outline: none;\n  opacity: 0.6;\n  cursor: pointer;\n}\n\n.IDMAP_app_sidebar_content_panel_top_line:hover\n  .IDMAP_app_sidebar_content_panel_toggle_button,\n.IDMAP_app_sidebar_content_panel.IDMAP_dragged\n  .IDMAP_app_sidebar_content_panel_top_line\n  .IDMAP_app_sidebar_content_panel_toggle_button {\n  opacity: 0.9;\n}\n\n.IDMAP_app_sidebar_content_panel.IDMAP_expanded\n  .IDMAP_app_sidebar_content_panel_toggle_button {\n  -webkit-transform: rotate(0);\n  transform: rotate(0);\n}\n\n.IDMAP_app_sidebar_content_panel_content {\n  margin-bottom: 25px;\n}\n\n.IDMAP_sidebar_iconArea .IDMAP_sidebar_button_container {\n  position: relative;\n}\n\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:focus,\n.IDMAP_sidebar_iconArea .inboxsdk__button_icon:hover {\n  outline: none;\n}\n\n/* end sidebar */\n\n/* shared parts of app id warning */\n\n.inboxsdk__appid_warning {\n  margin: 0;\n  padding: 9px;\n  color: #4b4b4b;\n  background: #ff6c6c;\n  font-size: 10pt;\n}\n\n.inboxsdk__appid_warning_main {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.inboxsdk__appid_warning .topline {\n  font-weight: bold;\n  font-size: 11pt;\n}\n\na.inboxsdk__appid_register {\n  color: white;\n  display: inline-block;\n  background: #1989ff;\n  border-radius: 3px;\n  text-decoration: none;\n  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);\n  padding: 7px;\n  font-size: 10pt;\n  vertical-align: middle;\n  margin-left: 1em;\n}\n\n.inboxsdk__thread_row_icon_wrapper {\n  display: inline-block;\n}\n\n.inboxsdk__thread_row_icon_wrapper .inboxsdk__button_iconImg {\n  margin-top: 0px;\n}\n\n.IDMAP_thread_noticeBar {\n  background: #f8ebc0;\n  margin-bottom: 10px;\n  padding: 12px 4px 6px 12px;\n}\n")},{"./rewriteCssWithIdMap":896,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"ud-kefir":624}],900:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0
;var u=l(e("@babel/runtime-corejs2/core-js/array/is-array")),c=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),d=l(e("@babel/runtime-corejs2/helpers/createClass")),f=l(e("@babel/runtime-corejs2/helpers/defineProperty")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("kefir")),m=function(){function e(t){var r=this;(0,c.default)(this,e),(0,f.default)(this,"_streamCount",0),(0,f.default)(this,"_ended",!1),(0,f.default)(this,"_pool",p.pool()),(0,f.default)(this,"stream",void 0),this.stream=this._pool.filter(function(){return 0===--r._streamCount&&(r._ended=!0,!0)}).take(1).toProperty(),this.stream.onValue(function(){}),this.add(t)}return(0,d.default)(e,[{key:"add",value:function(e){if(this._ended)throw new Error("Tried to add a stream to a stopped StopperPool");var t=(0,u.default)(e)?e:[e];this._streamCount+=t.length,this._pool.plug(p.merge(t.map(function(e){return e.take(1)})))}},{key:"getSize",value:function(){return this._streamCount}}]),e}();r.default=m},{"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],901:[function(e,t,r){"use strict";function n(e){if("function"!=typeof a)return null;var t=new a,r=new a;return(n=function(e){return e?r:t})(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,n=new Error("waitFor timeout"),o=u.later(t,null).flatMap(function(){var t=e();return t?u.constant(t):(setTimeout(function(){throw n},0),u.constantError(n))}),i=Boolean;return u.later(0,null).merge(u.interval(r,null)).map(function(){return e()}).filter(i).merge(o).take(1).takeErrors(1)}var i=e("@babel/runtime-corejs2/helpers/typeof"),a=e("@babel/runtime-corejs2/core-js/weak-map"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor");s(r,"__esModule",{value:!0}),r.default=o;var u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},a=s&&l;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=a?l(e,u):null;c&&(c.get||c.set)?s(o,u,c):o[u]=e[u]}return o.default=e,r&&r.set(e,o),o}(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/typeof":57,kefir:327}],902:[function(e,t,r){"use strict";function n(e){return s.default.fromESObservable((0,a.default)(e).map(function(e){var t=e.removal,r=s.default.fromPromise(t);return{el:e.value,removalStream:r}}))}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("live-set/toValueObservable")),s=i(e("kefir"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"live-set/toValueObservable":335}],903:[function(e,t,r){"use strict";function n(e){return new s.default({read:function(){throw new Error("should not happen; liveset was inactive")},listen:function(t,r){t(new a.default);var n=e.observe({value:function(e){var t=e.el,n=e.removalStream;r.add(t),n.take(1).onValue(function(){r.remove(t)})}});return function(){n.unsubscribe()}}})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/set")),s=i(e("live-set"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"live-set":332}],904:[function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,n=new Error("waitFor timeout");return new a.default(function(o,i){function a(){try{var l=e();l?o(l):s>=t?i(n):(s+=r,setTimeout(a,r))}catch(e){i(e)}}var s=0;setTimeout(a,1)})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=n;var a=i(e("@babel/runtime-corejs2/core-js/promise"))},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],905:[function(t,r,n){(function(r){(function(){"use strict";var n=t("@babel/runtime-corejs2/helpers/interopRequireDefault"),o=n(t("@babel/runtime-corejs2/core-js/date/now")),i=n(t("@babel/runtime-corejs2/core-js/promise"));if(!r.__InboxSDKImpLoader){var a,s=(0,o.default)(),l=!!document.querySelector('[role=banner] div[aria-label] div div a[href^="https://myaccount.google."], [role=banner]+div div[aria-label] div div a[href^="https://myaccount.google."]');try{void 0!==e&&e&&e.amd&&(a=e,e=null);var u=t("kefir"),c=new i.default(function(e,t){"complete"===document.readyState||"interactive"===document.readyState?e():e(u.merge([u.fromEvents(document,"DOMContentLoaded"),u.fromEvents(window,"load")]).take(1).map(function(){return null}).toPromise())});r.__InboxSDKImpLoader={load:function(r,n,i){if("0.1"!==r)throw new Error("Unsupported InboxSDK version");if("dropbox"===n)throw new Error("No longer supported");var a=(0,o.default)();return c.then(function(){var r;try{void 0!==e&&e&&e.amd&&(r=e,e=null);return(0,t("./platform-implementation").makePlatformImplementation)(n,i,{piMainStarted:s,piLoadStarted:a,wasAccountSwitcherReadyAtStart:l})}finally{r&&(e=r)}})}}}finally{a&&(e=a)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./platform-implementation":919,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],906:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/core-js/object/freeze")),l=o(e("@babel/runtime-corejs2/core-js/weak-map")),u=o(e("@babel/runtime-corejs2/core-js/map")),c=o(e("@babel/runtime-corejs2/core-js/date/now")),d=o(e("lodash/defaults")),f=o(e("lodash/sortBy")),p=o(e("lodash/find")),m=o(e("kefir")),h=o(e("kefir-bus")),b=o(e("../../common/defer")),v=o(e("../../common/get-or-fail")),_=(0,s.default)({destroy:(0,s.default)(function(){})}),g=new l.default,y=function(){function e(t,r){(0,i.default)(this,e);var n={driver:r,messagesByKey:new u.default,queuedPackets:[]};g.set(this,n)}return(0,a.default)(e,[{key:"showMessage",value:function(e){(0,d.default)(e,{priority:0,time:15e3,hideOnViewChanged:!0,persistent:!1}),this.hideMessage(e.messageKey);var t=(0,v.default)(g,this),r=t.driver.getButterBarDriver(),n=(0,c.default)()+"-"+Math.random(),o=r.getSharedMessageQueue();if(o.unshift({messageId:n,priority:e.priority,persistent:e.persistent}),o=(0,f.default)(o,function(e){return-e.priority}),o=o.filter(function(e,t){return 0===t||e.persistent}),r.setSharedMessageQueue(o),!(0,p.default)(o,function(e){return e.messageId===n}))return _;var i=(0,h.default)();e.hideOnViewChanged&&i.plug(m.default.later(0,null).flatMap(function(){return t.driver.getRouteViewDriverStream().changes()}).map(function(){return null})),isFinite(e.time)&&i.plug(m.default.later(e.time,null));var a=new Error("Butter bar message timed out");i.plug(m.default.later(12e4,null).map(function(e){return t.driver.getLogger().errorApp(a),e})),i.take(1).onValue(function(){e.messageKey&&t.messagesByKey.delete(e.messageKey);var o=r.getSharedMessageQueue();r.setSharedMessageQueue(o.filter(function(e){return e.messageId!==n}))}),r.getNoticeAvailableStream().toProperty(function(){return null}).takeUntilBy(i).filter(function(){var e=r.getSharedMessageQueue();return e[0]||i.value(void 0),e[0]&&e[0].messageId===n}).onValue(function(){var t=r.showMessage(e);i.take(1).onValue(function(){t.destroy()})});var s={destroy:function(){i.value(void 0)}};return e.messageKey&&t.messagesByKey.set(e.messageKey,s),s}},{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.default)(e,{text:"Loading...",priority:-3,time:1/0,persistent:!0,hideOnViewChanged:!0}),e.time=1/0,this.showMessage(e)}},{key:"showError",value:function(e){return(0,d.default)(e,{priority:100,className:"inboxsdk__butterbar_error"}),this.showMessage(e)}},{key:"showSaving",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.default)(t,{text:"Saving...",confirmationText:"Saved",confirmationTime:1e3,priority:-2,time:1/0,persistent:!0,hideOnViewChanged:!1,showConfirmation:!0});var r=this.showMessage(t),n=(0,b.default)();return n.promise.then(function(){r.destroy(),t.showConfirmation&&e.showMessage({text:t.confirmationText,messageKey:t.messageKey,time:t.confirmationTime,priority:200})},function(){r.destroy()}),n}},{key:"hideMessage",value:function(e){if(e){var t=(0,v.default)(g,this),r=t.messagesByKey.get(e);r&&r.destroy()}}},{key:"hideGmailMessage",value:function(){(0,v.default)(g,this).driver.getButterBarDriver().hideGmailMessage()}}]),e}();r.default=y},{"../../common/defer":639,"../../common/get-or-fail":642,"@babel/runtime-corejs2/core-js/date/now":3,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"lodash/defaults":479,"lodash/find":484,"lodash/sortBy":519}],907:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/regenerator")),c=l(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),d=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=l(e("@babel/runtime-corejs2/helpers/createClass")),p=l(e("@babel/runtime-corejs2/core-js/weak-map")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("ud")),h=l(e("kefir")),b=l(e("../../common/get-or-fail")),v=(l(e("../views/compose-view")),l(e("../lib/handler-registry"))),_=m.defonce(t,function(){return new p.default}),g=.01,y=function(){function e(t,r){(0,d.default)(this,e);var n={driver:t,membrane:r,handlerRegistry:new v.default,composeViewStream:t.getComposeViewDriverStream().map(function(e){return r.get(e)})};_.set(this,n),t.getStopper().onValue(function(){n.handlerRegistry.dumpHandlers()}),n.composeViewStream.onValue(function(e){t.getLogger().trackFunctionPerformance(function(){n.handlerRegistry.addTarget(e)},g,{type:"composeViewHandler",isInlineReplyForm:e.isInlineReplyForm()})})}return(0,f.default)(e,[{key:"registerComposeViewHandler",value:function(e){return(0,b.default)(_,this).handlerRegistry.registerHandler(e)}},{key:"openNewComposeView",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(u.default.mark(function e(){var t,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,b.default)(_,this),e.next=3,t.driver.openNewComposeViewDriver();case 3:return r=e.sent,e.abrupt("return",t.membrane.get(r));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"openDraftByMessageID",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,c.default)(u.default.mark(function e(t){var r,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,b.default)(_,this),n=r.composeViewStream.take(1).toPromise(),e.next=4,r.driver.openDraftByMessageID(t);case 4:return e.abrupt("return",h.default.fromPromise(n).merge(h.default.later(15e3,null).flatMap(function(){return h.default.constantError(new Error("draft did not open in time"))})).take(1).takeErrors(1).toPromise());case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"getComposeView",value:function(){var e=(0,b.default)(_,this),t=e.driver;if(t.getLogger().deprecationWarning("Compose.getComposeView","Compose.openNewComposeView"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.openNewComposeView()}}]),e}(),w=m.defn(t,y);r.default=w},{"../../common/get-or-fail":642,"../lib/handler-registry":881,"../views/compose-view":924,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,kefir:327,ud:625}],908:[function(e,t,r){"use strict";function n(e,t,r,n,o,i,a){t.map(function(e){return{viewDriver:e,view:i.get(e)}}).flatMap(function(e){return e.viewDriver.getReadyStream().map(function(){return e}).takeUntilBy(d.default.fromEvents(e.view,"destroy"))}).onValue(function(e){n.addTarget(e.view)})}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=r.MessageViewToolbarSectionNames=r.MessageViewViewStates=void 0;var a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/defineProperty")),u=i(e("@babel/runtime-corejs2/core-js/weak-map")),c=i(e("@babel/runtime-corejs2/core-js/object/freeze")),d=i(e("kefir")),f=i(e("../../common/get-or-fail")),p=i(e("../views/conversations/thread-view")),m=i(e("../views/conversations/message-view")),h=(i(e("../views/conversations/attachment-card-view")),i(e("../lib/handler-registry"))),b=new u.default,v=(0,c.default)({HIDDEN:"HIDDEN",COLLAPSED:"COLLAPSED",EXPANDED:"EXPANDED"});r.MessageViewViewStates=v;var _=(0,c.default)({MORE:"MORE"});r.MessageViewToolbarSectionNames=_;var g=function(){function e(t,r,o){(0,a.default)(this,e),(0,l.default)(this,"MessageViewViewStates",v),(0,l.default)(this,"MessageViewToolbarSectionNames",_);var i={appId:t,driver:r,threadViewHandlerRegistry:new h.default,messageViewHandlerRegistries:{all:new h.default,loaded:new h.default},attachmentCardViewHandlerRegistry:new h.default};b.set(this,i),r.getStopper().onValue(function(){i.threadViewHandlerRegistry.dumpHandlers(),i.messageViewHandlerRegistries.all.dumpHandlers(),i.messageViewHandlerRegistries.loaded.dumpHandlers()}),r.getAttachmentCardViewDriverStream().filter(function(e){return"FILE"===e.getAttachmentType()}).onValue(function(e){var t=o.get(e);i.attachmentCardViewHandlerRegistry.addTarget(t)}),n(t,r.getThreadViewDriverStream().filter(function(e){return!e.isLoadingStub()}),p.default,i.threadViewHandlerRegistry,this,o,r),n(t,r.getMessageViewDriverStream(),m.default,i.messageViewHandlerRegistries.all,this,o,r),n(t,r.getMessageViewDriverStream().flatMap(function(e){return e.isLoaded()?d.default.constant(e):e.getEventStream().filter(function(e){return"messageLoad"===e.eventName}).map(function(){return e}).take(1)}),m.default,i.messageViewHandlerRegistries.loaded,this,o,r)}return(0,s.default)(e,[{key:"registerThreadViewHandler",value:function(e){return(0,f.default)(b,this).threadViewHandlerRegistry.registerHandler(e)}},{key:"registerMessageViewHandler",value:function(e){return(0,f.default)(b,this).messageViewHandlerRegistries.loaded.registerHandler(e)}},{key:"registerMessageViewHandlerAll",value:function(e){return(0,f.default)(b,this).messageViewHandlerRegistries.all.registerHandler(e)}},{key:"registerFileAttachmentCardViewHandler",value:function(e){return(0,f.default)(b,this).attachmentCardViewHandlerRegistry.registerHandler(e)}}]),e}(),y=g;r.default=y},{"../../common/get-or-fail":642,"../lib/handler-registry":881,"../views/conversations/attachment-card-view":926,"../views/conversations/message-view":928,"../views/conversations/thread-view":929,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327}],909:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/regenerator")),a=o(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),s=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),l=o(e("@babel/runtime-corejs2/helpers/createClass")),u=o(e("@babel/runtime-corejs2/core-js/weak-map")),c=o(e("kefir")),d=o(e("kefir-cast")),f=o(e("../views/content-panel-view")),p=o(e("../../common/get-or-fail")),m=(o(e("../dom-driver/gmail/views/gmail-support-item-view")),new u.default),h=function(){function e(t,r,n){(0,s.default)(this,e);var o={appId:t,driver:r,piOpts:n};m.set(this,o)}return(0,l.default)(e,[{key:"addSidebarContentPanel",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,a.default)(i.default.mark(function e(t){var r,n,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,d.default)(c.default,t).toProperty(),n=(0,p.default)(m,this),n.driver.getLogger().eventSdkPassive("global.addSidebarContentPanel"),e.next=5,n.driver.addGlobalSidebarContentPanel(r);case 5:if(!(o=e.sent)){e.next=8;break}return e.abrupt("return",new f.default(o));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"addSupportItem",value:function(e){var t=(0,p.default)(m,this);return t.driver.getLogger().eventSdkPassive("global.addSupportItem"),t.driver.addSupportItem(e)}}]),e}();r.default=h},{"../../common/get-or-fail":642,"../dom-driver/gmail/views/gmail-support-item-view":753,"../views/content-panel-view":925,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/regenerator":59,kefir:327,"kefir-cast":325}],910:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/core-js/weak-map")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("ud")),p=l(e("../../common/get-or-fail")),m=l(e("../views/keyboard-shortcut-handle")),h=f.defonce(t,function(){return new d.default}),b=function(){function e(t,r,n,o){(0,u.default)(this,e);var i={appId:t,appName:r,appIconUrl:n,driver:o};h.set(this,i)}return(0,c.default)(e,[{key:"createShortcutHandle",value:function(e){var t=(0,p.default)(h,this),r=e.chord,n=e.description;if(!r)throw new Error("Keyboard.createShortcutHandle chord missing");null==n&&(console.error("Keyboard.createShortcutHandle chord missing"),n="");var o=new m.default(r,n);return t.driver.activateShortcut(o,t.appName,t.appIconUrl),o}}]),e}(),v=f.defn(t,b);r.default=v},{"../../common/get-or-fail":642,"../views/keyboard-shortcut-handle":930,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,ud:625}],911:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=o(e("@babel/runtime-corejs2/core-js/weak-map")),u=o(e("@babel/runtime-corejs2/core-js/object/freeze")),c=o(e("../../common/get-or-fail")),d=o(e("../lib/handler-registry")),f=(o(e("../views/thread-row-view")),new l.default),p=function(){function e(t,r,n){(0,i.default)(this,e),(0,s.default)(this,"ActionButtonTypes",m);var o={appId:t,driver:r,membrane:n,threadRowViewRegistry:new d.default};f.set(this,o),r.getStopper().onValue(function(){o.threadRowViewRegistry.dumpHandlers()}),o.driver.getThreadRowViewDriverStream().onValue(function(e){var t=n.get(e);o.threadRowViewRegistry.addTarget(t)})}return(0,a.default)(e,[{key:"registerThreadRowViewHandler",value:function(e){return(0,c.default)(f,this).threadRowViewRegistry.registerHandler(e)}},{key:"getSelectedThreadRowViews",value:function(){var e=(0,c.default)(f,this);return e.driver.getSelectedThreadRowViewDrivers().map(function(t){return e.membrane.get(t)})}},{key:"registerThreadRowViewSelectionHandler",value:function(e){return(0,c.default)(f,this).driver.registerThreadRowViewSelectionHandler(e)}}]),e}();r.default=p;var m=(0,u.default)({LINK:"LINK",DROPDOWN:"DROPDOWN",ACTION:"ACTION"})},{"../../common/get-or-fail":642,"../lib/handler-registry":881,"../views/thread-row-view":938,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/freeze":13,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],912:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/core-js/weak-map")),l=e("ud"),u=o(e("../widgets/modal-view")),c=o(e("../../common/get-or-fail")),d=(0,l.defonce)(t,function(){return new s.default}),f=function(){function e(t,r,n){(0,i.default)(this,e);var o={appId:t,driver:r,piOpts:n};d.set(this,o)}return(0,a.default)(e,[{key:"show",value:function(e){var t=(0,c.default)(d,this).driver;(0,c.default)(d,this).piOpts.inboxBeta&&t.getLogger().deprecationWarning("Modal.show","Widgets.showModalView");var r=t.createModalViewDriver(e),n=new u.default({driver:t,modalViewDriver:r});return n.show(),n}},{key:"createModalView",value:function(e){var t=(0,c.default)(d,this).driver;t.getLogger().deprecationWarning("Modal.createModalView","Widgets.showModalView");var r=t.createModalViewDriver(e);return new u.default({driver:t,modalViewDriver:r})}}]),e}(),p=(0,l.defn)(t,f);r.default=p},{"../../common/get-or-fail":642,"../widgets/modal-view":943,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,ud:625}],913:[function(e,t,r){"use strict";function n(e,t){return new m.default(e,t,"sent",t.getSentMailNativeNavItem())}var o=e("@babel/runtime-corejs2/core-js/object/define-property"),i=e("@babel/runtime-corejs2/helpers/interopRequireDefault");o(r,"__esModule",{value:!0}),r.default=void 0;var a=i(e("@babel/runtime-corejs2/helpers/classCallCheck")),s=i(e("@babel/runtime-corejs2/helpers/createClass")),l=i(e("@babel/runtime-corejs2/helpers/defineProperty")),u=i(e("@babel/runtime-corejs2/core-js/weak-map")),c=i(e("kefir")),d=i(e("kefir-cast")),f=i(e("../../common/get-or-fail")),p=i(e("../views/nav-item-view")),m=i(e("../views/native-nav-item-view")),h=i(e("../constants/nav-item-types")),b=new u.default,v=function(){function e(t,r){(0,a.default)(this,e),(0,l.default)(this,"NavItemTypes",h.default),(0,l.default)(this,"SENT_MAIL",void 0);var o={appId:t,driver:r,navItemViews:[]};b.set(this,o),this.SENT_MAIL=n(t,r)}return(0,s.default)(e,[{key:"addNavItem",value:function(e){var t=(0,f.default)(b,this),r=(0,d.default)(c.default,e).toProperty(),n=new p.default(t.appId,t.driver,r,t.driver.addNavItem(t.appId,r));return t.navItemViews.push(n),n}}]),e}();r.default=v,(0,l.default)(v,"SENT_MAIL",null)},{"../../common/get-or-fail":642,"../constants/nav-item-types":657,"../views/native-nav-item-view":931,"../views/nav-item-view":932,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-cast":325}],914:[function(e,t,r){"use strict";function n(e,t,r){t.currentRouteViewDriver instanceof w.default&&t.currentRouteViewDriver.destroy(),t.currentRouteViewDriver=r;var n=t.membrane.get(r);if(i(t,r),n.getRouteType()===j.ROUTE_TYPES.CUSTOM&&o(t,r,n),t.allRoutesHandlerRegistry.addTarget(n),n.getRouteType()===j.ROUTE_TYPES.LIST){var a=new g.default(r,t.driver,t.appId),s=t.listRouteHandlerRegistries[n.getRouteID()];s&&s.addTarget(a),t.listRouteHandlerRegistries[j.NATIVE_ROUTE_IDS.ANY_LIST].addTarget(a)}}function o(e,t,r){var n=r.getRouteID(),o=(0,p.default)(n)?n:[n],i=(0,m.default)(e.customRoutes,function(e){return(0,h.default)((0,p.default)(e.routeID)?e.routeID:[e.routeID],o).length});if(i){var a=new y.default(t),s=t.getCustomViewElement();if(!s)throw new Error("should not happen");e.driver.showCustomRouteView(s);try{i.onActivate(a)}catch(t){e.driver.getLogger().error(t)}}}function i(e,t){e.driver.setShowNativeNavMarker(t.getType()!==j.ROUTE_TYPES.CUSTOM),e.driver.setShowNativeAddonSidebar(t.getType()!==j.ROUTE_TYPES.CUSTOM)}var a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/defineProperty")),d=s(e("@babel/runtime-corejs2/core-js/weak-map")),f=s(e("@babel/runtime-corejs2/core-js/object/values")),p=s(e("@babel/runtime-corejs2/core-js/array/is-array")),m=s(e("lodash/find")),h=s(e("lodash/intersection")),b=e("ud"),v=s(e("../lib/handler-registry")),_=s(e("../../common/get-or-fail")),g=(s(e("../views/route-view/route-view")),s(e("../views/route-view/list-route-view"))),y=s(e("../views/route-view/custom-route-view")),w=s(e("../views/route-view/dummy-route-view-driver")),j=e("../constants/router"),k=(0,b.defonce)(t,function(){return new d.default}),x=.01,E=function(){function e(t,r,o){var i=this;(0,l.default)(this,e),(0,c.default)(this,"NativeRouteIDs",j.NATIVE_ROUTE_IDS),(0,c.default)(this,"NativeListRouteIDs",j.NATIVE_LIST_ROUTE_IDS),(0,c.default)(this,"RouteTypes",j.ROUTE_TYPES);var a={appId:t,driver:r,currentRouteViewDriver:new w.default,allRoutesHandlerRegistry:new v.default,customRoutes:[],membrane:o,listRouteHandlerRegistries:{}};(0,f.default)(j.NATIVE_LIST_ROUTE_IDS).forEach(function(e){a.listRouteHandlerRegistries[e]=new v.default}),k.set(this,a),r.getRouteViewDriverStream().onValue(function(e){r.getLogger().trackFunctionPerformance(function(){return n(i,a,e)},x,{type:"handleRouteViewChange",routeID:e.getRouteID()})}),r.getStopper().onValue(function(){a.allRoutesHandlerRegistry.dumpHandlers(),(0,f.default)(a.listRouteHandlerRegistries).forEach(function(e){e.dumpHandlers()})})}return(0,u.default)(e,[{key:"createLink",value:function(e,t){return(0,_.default)(k,this).driver.createLink(e,t)}},{key:"goto",value:function(e,t){if("string"!=typeof e)throw new Error("routeID must be a string");var r=(0,_.default)(k,this),n=r.driver;return"string"==typeof t&&n.getLogger().deprecationWarning("Router.goto param string","param object (e.g. {param: value})"),n.goto(e,t)}},{key:"handleCustomRoute",value:function(e,t){var r={routeID:e,onActivate:t},n=(0,_.default)(k,this).driver.addCustomRouteID(e),o=(0,_.default)(k,this),i=o.customRoutes,a=o.driver;return i.push(r),a.getLogger().eventSdkPassive("Router.handleCustomRoute"),function(){n();var e=i.indexOf(r);e>-1&&i.splice(e,1)}}},{key:"handleAllRoutes",value:function(e){return(0,_.default)(k,this).allRoutesHandlerRegistry.registerHandler(e)}},{key:"handleListRoute",value:function(e,t){var r=(0,_.default)(k,this),n=r.listRouteHandlerRegistries;if(!n[e])throw new Error("Invalid routeID specified");return n[e].registerHandler(t)}},{key:"handleCustomListRoute",value:function(e,t){return(0,_.default)(k,this).driver.addCustomListRouteID(e,t)}},{key:"getCurrentRouteView",value:function(){var e=(0,_.default)(k,this);return e.membrane.get(e.currentRouteViewDriver)}}]),e}(),S=(0,b.defn)(t,E);r.default=S},{"../../common/get-or-fail":642,"../constants/router":658,"../lib/handler-registry":881,"../views/route-view/custom-route-view":933,"../views/route-view/dummy-route-view-driver":934,"../views/route-view/list-route-view":935,"../views/route-view/route-view":936,"@babel/runtime-corejs2/core-js/array/is-array":2,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/values":21,
"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"lodash/find":484,"lodash/intersection":494,ud:625}],915:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/core-js/weak-map")),l=o(e("../../common/get-or-fail")),u=new s.default,c=function(){function e(t,r){(0,i.default)(this,e);var n={appId:t,driver:r};u.set(this,n)}return(0,a.default)(e,[{key:"registerSearchSuggestionsProvider",value:function(e){if("function"!=typeof e)throw new Error("Incorrect arguments");(0,l.default)(u,this).driver.registerSearchSuggestionsProvider(e)}},{key:"registerSearchQueryRewriter",value:function(e){if("function"!=typeof e.termReplacer||"string"!=typeof e.term)throw new Error("Incorrect arguments");if(!e.term.match(/^(app|has):/))throw new Error("Custom search term must begin with 'app:'");(0,l.default)(u,this).driver.registerSearchQueryRewriter(e)}}]),e}();r.default=c},{"../../common/get-or-fail":642,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44}],916:[function(e,t,r){"use strict";function n(e,t){var r=l(e);if(u){var n=u(e);t&&(n=n.filter(function(t){return c(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,j.default)(e,t,r[t])}):d?f(e,d(r)):n(Object(r)).forEach(function(t){p(e,t,c(r,t))})}return e}function i(e){var t=a();return function(){var r,n=(0,w.default)(e);if(t){var o=(0,w.default)(this).constructor;r=s(n,arguments,o)}else r=n.apply(this,arguments);return(0,y.default)(this,r)}}function a(){if("undefined"==typeof Reflect||!s)return!1;if(s.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s(Boolean,[],function(){})),!0}catch(e){return!1}}var s=e("@babel/runtime-corejs2/core-js/reflect/construct"),l=e("@babel/runtime-corejs2/core-js/object/keys"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),f=e("@babel/runtime-corejs2/core-js/object/define-properties"),p=e("@babel/runtime-corejs2/core-js/object/define-property"),m=e("@babel/runtime-corejs2/helpers/interopRequireDefault");p(r,"__esModule",{value:!0}),r.default=void 0;var h=m(e("@babel/runtime-corejs2/helpers/objectWithoutProperties")),b=m(e("@babel/runtime-corejs2/helpers/classCallCheck")),v=m(e("@babel/runtime-corejs2/helpers/createClass")),_=m(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),g=m(e("@babel/runtime-corejs2/helpers/inherits")),y=m(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),w=m(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),j=m(e("@babel/runtime-corejs2/helpers/defineProperty")),k=m(e("@babel/runtime-corejs2/core-js/weak-map")),x=m(e("kefir")),E=m(e("kefir-cast")),S=m(e("kefir-stopper")),C=m(e("../lib/safe-event-emitter")),I=m(e("../../common/get-or-fail")),A=m(e("../views/app-toolbar-button-view")),T=e("../constants/toolbars"),D=["hideFor"],M=new k.default,R=function(e){function t(e,n,o,i){var a;(0,b.default)(this,t),a=r.call(this),(0,j.default)((0,_.default)(a),"SectionNames",T.SECTION_NAMES);var s={appId:e,driver:n,membrane:o,piOpts:i};return M.set((0,_.default)(a),s),a}(0,g.default)(t,e);var r=i(t);return(0,v.default)(t,[{key:"registerThreadButton",value:function(e){var t=(0,I.default)(M,this);"OTHER"!==e.listSection&&"OTHER"!==e.threadSection||!e.hasDropdown||(t.driver.getLogger().errorApp(new Error("registerThreadButton does not support listSection=OTHER or threadSection=OTHER and hasDropdown=true together")),e=o(o({},e),{},{hasDropdown:!1}));var r=e,n=r.hideFor,i=(0,h.default)(r,D),a=function(){return t.driver.registerThreadButton(o(o({},i),{},{onClick:function(e){i.onClick&&i.onClick({position:e.position,dropdown:e.dropdown,selectedThreadViews:e.selectedThreadViewDrivers.map(function(e){return t.membrane.get(e)}),selectedThreadRowViews:e.selectedThreadRowViewDrivers.map(function(e){return t.membrane.get(e)})})}}))};if(n){var s=(0,S.default)(),l=null;t.driver.getRouteViewDriverStream().takeUntilBy(s).onValue(function(e){var r=t.membrane.get(e);n(r)?l&&(l(),l=null):l||(l=a())});return function(){s.destroy(),l&&(l(),l=null)}}return a()}},{key:"registerToolbarButtonForList",value:function(e){var t=(0,I.default)(M,this);return this.registerThreadButton({positions:["LIST"],listSection:e.section,title:e.title,iconUrl:e.iconUrl,iconClass:e.iconClass,onClick:function(r){e.onClick&&e.onClick({dropdown:r.dropdown,selectedThreadRowViews:r.selectedThreadRowViews,get threadRowViews(){return t.driver.getLogger().deprecationWarning("Toolbars.registerToolbarButtonForList onClick event.threadRowViews"),r.selectedThreadRowViews}})},hasDropdown:e.hasDropdown,orderHint:e.orderHint,hideFor:e.hideFor,keyboardShortcutHandle:e.keyboardShortcutHandle})}},{key:"registerToolbarButtonForThreadView",value:function(e){return this.registerThreadButton({positions:["THREAD"],threadSection:e.section,title:e.title,iconUrl:e.iconUrl,iconClass:e.iconClass,onClick:function(t){if(1!==t.selectedThreadViews.length)throw new Error("should not happen");e.onClick&&e.onClick({dropdown:t.dropdown,threadView:t.selectedThreadViews[0]})},hasDropdown:e.hasDropdown,orderHint:e.orderHint,hideFor:e.hideFor,keyboardShortcutHandle:e.keyboardShortcutHandle})}},{key:"setAppToolbarButton",value:function(e){var t=(0,I.default)(M,this),r=t.driver,n=t.piOpts;if(r.getLogger().deprecationWarning("Toolbars.setAppToolbarButton","Toolbars.addToolbarButtonForApp"),1!==n.REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.addToolbarButtonForApp(e)}},{key:"addToolbarButtonForApp",value:function(e){var t=(0,E.default)(x.default,e),r=(0,I.default)(M,this).driver.addToolbarButtonForApp(t);return new A.default((0,I.default)(M,this).driver,r)}}]),t}(C.default);r.default=R},{"../../common/get-or-fail":642,"../constants/toolbars":659,"../lib/safe-event-emitter":898,"../views/app-toolbar-button-view":921,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/objectWithoutProperties":49,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-cast":325,"kefir-stopper":326}],917:[function(e,t,r){"use strict";function n(e){if("function"!=typeof i)return null;var t=new i,r=new i;return(n=function(e){return e?r:t})(e)}var o=e("@babel/runtime-corejs2/helpers/typeof"),i=e("@babel/runtime-corejs2/core-js/weak-map"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/core-js/weak-map")),f=l(e("lodash/find")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},l=a&&s;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var c=l?s(e,u):null;c&&(c.get||c.set)?a(i,u,c):i[u]=e[u]}return i.default=e,r&&r.set(e,i),i}(e("ud")),m=l(e("../../common/get-or-fail")),h=p.defonce(t,function(){return new d.default}),b=function(){function e(t,r){(0,u.default)(this,e),h.set(this,{driver:t,piOpts:r})}return(0,c.default)(e,[{key:"getEmailAddress",value:function(){return(0,m.default)(h,this).driver.getUserEmailAddress()}},{key:"isConversationViewDisabled",value:function(){return(0,m.default)(h,this).driver.isConversationViewDisabled()}},{key:"isUsingGmailMaterialUI",value:function(){return(0,m.default)(h,this).driver.getLogger().deprecationWarning("User.isUsingGmailMaterialUI"),!0}},{key:"getLanguage",value:function(){return(0,m.default)(h,this).driver.getUserLanguage()}},{key:"getUserContact",value:function(){var e=(0,m.default)(h,this),t=e.driver,r=e.piOpts;if(t.getLogger().deprecationWarning("User.getUserContact","User.getEmailAddress"),1!==r.REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return t.getUserContact()}},{key:"getAccountSwitcherContactList",value:function(){var e=(0,m.default)(h,this),t=e.driver;t.getLogger().deprecationWarning("User.getAccountSwitcherContactList","User.getEmailAddress");var r=t.getAccountSwitcherContactList(),n=this.getEmailAddress();return!!(0,f.default)(r,function(e){return e.emailAddress===n})||(r=r.concat([{name:n,emailAddress:n}])),r}}]),e}(),v=p.defn(t,b);r.default=v},{"../../common/get-or-fail":642,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/typeof":57,"lodash/find":484,ud:625}],918:[function(e,t,r){"use strict";function n(e,t){var r=i(e);if(a){var n=a(e);t&&(n=n.filter(function(t){return s(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,m.default)(e,t,r[t])}):l?u(e,l(r)):n(Object(r)).forEach(function(t){c(e,t,s(r,t))})}return e}var i=e("@babel/runtime-corejs2/core-js/object/keys"),a=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),s=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),l=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),u=e("@babel/runtime-corejs2/core-js/object/define-properties"),c=e("@babel/runtime-corejs2/core-js/object/define-property"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");c(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/core-js/object/keys")),p=d(e("@babel/runtime-corejs2/core-js/map")),m=d(e("@babel/runtime-corejs2/helpers/defineProperty")),h=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),b=d(e("@babel/runtime-corejs2/helpers/createClass")),v=d(e("kefir")),_=d(e("kefir-cast")),g=e("ud"),y=d(e("../widgets/modal-view")),w=d(e("../widgets/mole-view")),j=d(e("../widgets/drawer-view")),k=d(e("../widgets/top-message-bar-view")),x=d(e("../views/compose-view")),E=d(e("../../common/get-or-fail")),S=function(){function e(t,r){(0,h.default)(this,e);var n={driver:r};C.set(this,n)}return(0,b.default)(e,[{key:"showModalView",value:function(e){e.buttons&&(e.buttons=e.buttons.map(function(e){if(e.onClick){var t=e.onClick;return o(o({},e),{},{onClick:function(){t({modalView:i})}})}return e}));var t=(0,E.default)(C,this),r=t.driver,n=r.createModalViewDriver(e),i=new y.default({driver:r,modalViewDriver:n});return i.show(),i}},{key:"showMoleView",value:function(e){var t=(0,E.default)(C,this).driver.createMoleViewDriver(e),r=new w.default({moleViewDriver:t});return t.show(),r}},{key:"showTopMessageBarView",value:function(e){var t=(0,E.default)(C,this).driver.createTopMessageBarDriver((0,_.default)(v.default,e));return new k.default({topMessageBarViewDriver:t})}},{key:"showDrawerView",value:function(e){if((0,E.default)(C,this).driver.getLogger().eventSdkActive("Widgets.showDrawerView used",{keys:(0,f.default)(e)}),e.composeView&&!(e.composeView instanceof x.default))throw new Error("composeView option was not a ComposeView");var t=(0,E.default)(C,this).driver.createDrawerViewDriver(e);return new j.default(t)}}]),e}(),C=new p.default,I=(0,g.defn)(t,S);r.default=I},{"../../common/get-or-fail":642,"../views/compose-view":924,"../widgets/drawer-view":942,"../widgets/modal-view":943,"../widgets/mole-view":944,"../widgets/top-message-bar-view":945,"@babel/runtime-corejs2/core-js/map":5,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-cast":325,ud:625}],919:[function(e,t,r){(function(t){(function(){"use strict";function t(e,t){var r=l(e);if(u){var n=u(e);t&&(n=n.filter(function(t){return c(e,t).enumerable})),r.push.apply(r,n)}return r}function n(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach(function(t){(0,w.default)(e,t,n[t])}):d?f(e,d(n)):t(Object(n)).forEach(function(t){p(e,t,c(n,t))})}return e}function o(e){var t=i();return function(){var r,n=(0,y.default)(e);if(t){var o=(0,y.default)(this).constructor;r=s(n,arguments,o)}else r=n.apply(this,arguments);return(0,g.default)(this,r)}}function i(){if("undefined"==typeof Reflect||!s)return!1;if(s.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s(Boolean,[],function(){})),!0}catch(e){return!1}}function a(e,t,r){if("string"!=typeof e)throw new Error("appId must be a string");var o=n({globalErrorLogging:!0,eventTracking:!0,inboxBeta:!1},t);switch(o.REQUESTED_API_VERSION=+o.REQUESTED_API_VERSION,o.REQUESTED_API_VERSION){case 2:o.inboxBeta=!0;break;case 1:break;default:throw new Error("InboxSDK: Unsupported API version "+o.REQUESTED_API_VERSION)}var i={"https://mail.google.com":ce.default,"https://inbox.google.com":de.default},a=o.VERSION,s=S.BUILD_VERSION,l=new fe.default(e,o,a,s),u=document.location.origin,c=i[u];if(!c)return console.log("InboxSDK: Unsupported origin",u),new x.default(function(e,t){});(0,I.default)();var d=new c(e,a,s,l,o,r);return d.onready.then(function(){(0,pe.default)(e)||(console.error("\n===========================================================\nInboxSDK: You have loaded InboxSDK with an invalid appId:\n".concat(e,"\nRegistering an appId is free. Please see\nhttps://www.inboxsdk.com/docs/#RequiredSetup\n===========================================================\n")),d.showAppIdWarning()),d.isRunningInPageContext()&&console.warn("Running the InboxSDK outside of an extension content script is not recommended!"),l.eventSdkPassive("instantiate");var t=new be(d,e,o);if("https://inbox.google.com"===u&&!o.inboxBeta)return console.log("InboxSDK: Unsupported origin",u),me.has(e)||(me.add(e),l.eventSdkPassive("not load")),new x.default(function(e,t){});me.has(e)||(me.add(e),l.eventSdkPassive("load"));try{window.localStorage&&/@streak\.com$/.test(d.getUserEmailAddress())&&!window.localStorage.getItem("inboxsdk__enable_sourcemap")&&window.localStorage.setItem("inboxsdk__enable_sourcemap","true")}catch(e){console.error(e)}return t})}var s=e("@babel/runtime-corejs2/core-js/reflect/construct"),l=e("@babel/runtime-corejs2/core-js/object/keys"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),f=e("@babel/runtime-corejs2/core-js/object/define-properties"),p=e("@babel/runtime-corejs2/core-js/object/define-property"),m=e("@babel/runtime-corejs2/helpers/interopRequireDefault");p(r,"__esModule",{value:!0}),r.makePlatformImplementation=a,r.PlatformImplementation=void 0;var h=m(e("@babel/runtime-corejs2/helpers/classCallCheck")),b=m(e("@babel/runtime-corejs2/helpers/createClass")),v=m(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),_=m(e("@babel/runtime-corejs2/helpers/inherits")),g=m(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),y=m(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),w=m(e("@babel/runtime-corejs2/helpers/defineProperty")),j=m(e("@babel/runtime-corejs2/core-js/set")),k=m(e("@babel/runtime-corejs2/core-js/weak-map")),x=m(e("@babel/runtime-corejs2/core-js/promise")),E=m(e("./lib/safe-event-emitter")),S=e("../common/version"),C=m(e("../common/get-or-fail")),I=m(e("./lib/shared-style")),A=m(e("./lib/Membrane")),T=m(e("./views/conversations/attachment-card-view")),D=m(e("./dom-driver/gmail/views/gmail-attachment-card-view")),M=m(e("./dom-driver/inbox/views/inbox-attachment-card-view")),R=m(e("./views/conversations/message-view")),O=m(e("./dom-driver/gmail/views/gmail-message-view")),P=m(e("./dom-driver/inbox/views/inbox-message-view")),L=m(e("./views/conversations/thread-view")),V=m(e("./dom-driver/gmail/views/gmail-thread-view")),N=m(e("./dom-driver/inbox/views/inbox-thread-view")),B=m(e("./views/thread-row-view")),q=m(e("./dom-driver/gmail/views/gmail-thread-row-view")),U=m(e("./dom-driver/inbox/views/inbox-thread-row-view")),F=m(e("./views/compose-view")),H=m(e("./dom-driver/gmail/views/gmail-compose-view")),z=m(e("./dom-driver/inbox/views/inbox-compose-view")),W=m(e("./views/route-view/dummy-route-view-driver")),G=m(e("./views/route-view/route-view")),K=m(e("./dom-driver/gmail/views/gmail-route-view/gmail-route-view")),$=m(e("./dom-driver/inbox/views/inbox-route-view")),J=m(e("./dom-driver/inbox/views/inbox-dummy-route-view")),Y=m(e("./dom-driver/inbox/views/inbox-custom-route-view")),Q=m(e("./namespaces/butter-bar")),Z=m(e("./namespaces/compose")),X=m(e("./namespaces/conversations")),ee=m(e("./namespaces/keyboard")),te=m(e("./namespaces/widgets")),re=m(e("./namespaces/modal")),ne=m(e("./namespaces/lists")),oe=m(e("./namespaces/nav-menu")),ie=m(e("./namespaces/router")),ae=m(e("./namespaces/search")),se=m(e("./namespaces/toolbars")),le=m(e("./namespaces/user")),ue=m(e("./namespaces/global")),ce=m(e("./dom-driver/gmail/gmail-driver")),de=m(e("./dom-driver/inbox/inbox-driver")),fe=m(e("./lib/logger")),pe=m(e("./lib/is-valid-app-id")),me=new j.default,he=new k.default,be=function(e){function t(e,n,o){var i;(0,h.default)(this,t),i=r.call(this),(0,w.default)((0,v.default)(i),"destroyed",void 0),(0,w.default)((0,v.default)(i),"LOADER_VERSION",void 0),(0,w.default)((0,v.default)(i),"IMPL_VERSION",void 0),(0,w.default)((0,v.default)(i),"Compose",void 0),(0,w.default)((0,v.default)(i),"Conversations",void 0),(0,w.default)((0,v.default)(i),"Keyboard",void 0),(0,w.default)((0,v.default)(i),"User",void 0),(0,w.default)((0,v.default)(i),"Lists",void 0),(0,w.default)((0,v.default)(i),"NavMenu",void 0),(0,w.default)((0,v.default)(i),"Router",void 0),(0,w.default)((0,v.default)(i),"Search",void 0),(0,w.default)((0,v.default)(i),"Toolbars",void 0),(0,w.default)((0,v.default)(i),"ButterBar",void 0),(0,w.default)((0,v.default)(i),"Widgets",void 0),(0,w.default)((0,v.default)(i),"Global",void 0),(0,w.default)((0,v.default)(i),"Modal",void 0),(0,w.default)((0,v.default)(i),"Logger",void 0);var a=o.appName,s=o.appIconUrl,l=o.VERSION,u={driver:e};he.set((0,v.default)(i),u);var c=new A.default([[H.default,function(t){return new F.default(e,t,c)}],[z.default,function(t){return new F.default(e,t,c)}],[D.default,function(t){return new T.default(t,e,c)}],[M.default,function(t){return new T.default(t,e,c)}],[O.default,function(t){return new R.default(t,n,c,i.Conversations,e)}],[P.default,function(t){return new R.default(t,n,c,i.Conversations,e)}],[V.default,function(t){return new L.default(t,n,e,c)}],[N.default,function(t){return new L.default(t,n,e,c)}],[q.default,function(e){return new B.default(e)}],[U.default,function(e){return new B.default(e)}],[K.default,function(e){return new G.default(e)}],[$.default,function(e){return new G.default(e)}],[J.default,function(e){return new G.default(e)}],[Y.default,function(e){return new G.default(e)}],[W.default,function(e){return new G.default(e)}]]);return i.destroyed=!1,i.LOADER_VERSION=l,i.IMPL_VERSION=S.BUILD_VERSION,i.ButterBar=new Q.default(n,e),e.setButterBar(i.ButterBar),i.Compose=new Z.default(e,c),i.Conversations=new X.default(n,e,c),i.Keyboard=new ee.default(n,a,s,e),i.User=new le.default(e,o),i.Lists=new ne.default(n,e,c),i.NavMenu=new oe.default(n,e),i.Router=new ie.default(n,e,c),i.Search=new ae.default(n,e),i.Toolbars=new se.default(n,e,c,o),i.Widgets=new te.default(n,e),1===o.REQUESTED_API_VERSION&&(i.Modal=new re.default(n,e,o)),o.REQUESTED_API_VERSION>=2&&(i.Global=new ue.default(n,e,o)),i.Logger=e.getLogger().getAppLogger(),i}(0,_.default)(t,e);var r=o(t);return(0,b.default)(t,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,(0,C.default)(he,this).driver.destroy(),this.emit("destroy"))}}]),t}(E.default);r.PlatformImplementation=be}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../common/get-or-fail":642,"../common/version":651,"./dom-driver/gmail/gmail-driver":662,"./dom-driver/gmail/views/gmail-attachment-card-view":713,"./dom-driver/gmail/views/gmail-compose-view":716,"./dom-driver/gmail/views/gmail-message-view":746,"./dom-driver/gmail/views/gmail-route-view/gmail-route-view":751,"./dom-driver/gmail/views/gmail-thread-row-view":754,"./dom-driver/gmail/views/gmail-thread-view":757,"./dom-driver/inbox/inbox-driver":795,"./dom-driver/inbox/views/inbox-attachment-card-view":810,"./dom-driver/inbox/views/inbox-compose-view":815,"./dom-driver/inbox/views/inbox-custom-route-view":816,"./dom-driver/inbox/views/inbox-dummy-route-view":819,"./dom-driver/inbox/views/inbox-message-view":820,"./dom-driver/inbox/views/inbox-route-view":822,"./dom-driver/inbox/views/inbox-thread-row-view":823,"./dom-driver/inbox/views/inbox-thread-view":824,"./lib/Membrane":844,"./lib/is-valid-app-id":887,"./lib/logger":891,"./lib/safe-event-emitter":898,"./lib/shared-style":899,"./namespaces/butter-bar":906,"./namespaces/compose":907,"./namespaces/conversations":908,"./namespaces/global":909,"./namespaces/keyboard":910,"./namespaces/lists":911,"./namespaces/modal":912,"./namespaces/nav-menu":913,"./namespaces/router":914,"./namespaces/search":915,"./namespaces/toolbars":916,"./namespaces/user":917,"./namespaces/widgets":918,"./views/compose-view":924,"./views/conversations/attachment-card-view":926,"./views/conversations/message-view":928,"./views/conversations/thread-view":929,"./views/route-view/dummy-route-view-driver":934,"./views/route-view/route-view":936,"./views/thread-row-view":938,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/set":27,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],920:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("../lib/safe-event-emitter")),b=function(e){function t(e){var n;return(0,l.default)(this,t),n=r.call(this),(0,m.default)((0,c.default)(n),"el",void 0),(0,m.default)((0,c.default)(n),"destroyed",!1),n.el=e,n}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.emit("destroy"),this.el.remove())}}]),t}(h.default);r.default=b},{"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],921:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("@babel/runtime-corejs2/core-js/weak-map")),b=s(e("../lib/safe-event-emitter")),v=s(e("../../common/get-or-fail")),_=new h.default,g=function(e){function t(e,n){var o;(0,l.default)(this,t),o=r.call(this),(0,m.default)((0,c.default)(o),"destroyed",void 0);var i={appToolbarButtonViewDriverPromise:n,appToolbarButtonViewDriver:null};return _.set((0,c.default)(o),i),o.destroyed=!1,i.appToolbarButtonViewDriverPromise.then(function(e){i.appToolbarButtonViewDriver=e,e.getStopper().onValue(function(){o.destroyed=!0,o.emit("destroy")})}),e.getStopper().onValue(function(){o.remove()}),o}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"open",value:function(){(0,v.default)(_,this).appToolbarButtonViewDriverPromise.then(function(e){e.open()})}},{key:"close",value:function(){(0,v.default)(_,this).appToolbarButtonViewDriverPromise.then(function(e){e.close()})}},{key:"remove",value:function(){(0,v.default)(_,this).appToolbarButtonViewDriverPromise.then(function(e){e.destroy()})}}]),t}(b.default);r.default=g},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],922:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t,r){t.getEventStream().onValue(function(t){var r=t.eventName;e.emit(r)}),t.getEventStream().filter(function(e){return"rowClicked"===e.eventName}).onValue(function(e){var t=e.rowDescriptor;t.routeID&&r.goto(t.routeID,t.routeParams),"function"==typeof t.onClick&&t.onClick()}),t.getEventStream().filter(function(e){return"titleLinkClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onTitleLinkClick&&r.onTitleLinkClick(e)}),t.getEventStream().filter(function(e){return"footerClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onFooterLinkClick&&r.onFooterLinkClick(e)}),t.getEventStream().onEnd(function(){e.destroyed=!0,e.emit("destroy")})}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("@babel/runtime-corejs2/core-js/weak-map")),v=e("ud"),_=l(e("../lib/safe-event-emitter")),g=l(e("../../common/get-or-fail")),y=new b.default,w=function(e){function t(e,n){var o;(0,u.default)(this,t),o=r.call(this),(0,h.default)((0,d.default)(o),"destroyed",void 0);var a={collapsibleSectionViewDriver:e};return y.set((0,d.default)(o),a),o.destroyed=!1,i((0,d.default)(o),e,n),o}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"setCollapsed",value:function(e){(0,g.default)(y,this).collapsibleSectionViewDriver.setCollapsed(e)}},{key:"remove",value:function(){this.destroy()}},{key:"destroy",value:function(){(0,
g.default)(y,this).collapsibleSectionViewDriver.destroy(),this.removeAllListeners()}}]),t}(_.default),j=(0,v.defn)(t,w);r.default=j},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,ud:625}],923:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e){e.destroyed=!0,e.emit("destroy")}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("@babel/runtime-corejs2/core-js/weak-map")),v=l(e("@babel/runtime-corejs2/core-js/object/keys")),_=l(e("../lib/safe-event-emitter")),g=l(e("../../common/get-or-fail")),y=new b.default,w=function(e){function t(e,n,o){var a;(0,u.default)(this,t),a=r.call(this),(0,h.default)((0,d.default)(a),"destroyed",!1);var s={optionsPromise:e,composeViewDriver:n,driver:o};return y.set((0,d.default)(a),s),s.optionsPromise.then(function(e){if(!e)return void i((0,d.default)(a));s.composeViewDriver.getStopper().onValue(function(){i((0,d.default)(a))})}),a}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"showTooltip",value:function(e){var t=(0,g.default)(y,this);t.driver.getLogger().eventSdkPassive("ComposeButtonView.showTooltip",{keys:(0,v.default)(e)}),t.optionsPromise.then(function(r){r&&t.composeViewDriver.addTooltipToButton(r.buttonViewController,r.buttonDescriptor,e)})}},{key:"closeTooltip",value:function(){var e=(0,g.default)(y,this);e.optionsPromise.then(function(t){t&&e.composeViewDriver.closeButtonTooltip(t.buttonViewController)})}}]),t}(_.default);r.default=w},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],924:[function(e,t,r){"use strict";function n(e){if("function"!=typeof l)return null;var t=new l,r=new l;return(n=function(e){return e?r:t})(e)}function o(e){var t=i();return function(){var r,n=(0,g.default)(e);if(t){var o=(0,g.default)(this).constructor;r=s(n,arguments,o)}else r=n.apply(this,arguments);return(0,_.default)(this,r)}}function i(){if("undefined"==typeof Reflect||!s)return!1;if(s.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s(Boolean,[],function(){})),!0}catch(e){return!1}}var a=e("@babel/runtime-corejs2/helpers/typeof"),s=e("@babel/runtime-corejs2/core-js/reflect/construct"),l=e("@babel/runtime-corejs2/core-js/weak-map"),u=e("@babel/runtime-corejs2/core-js/object/define-property"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/helpers/interopRequireDefault");u(r,"__esModule",{value:!0}),r.default=void 0;var f=d(e("@babel/runtime-corejs2/regenerator")),p=d(e("@babel/runtime-corejs2/helpers/asyncToGenerator")),m=d(e("@babel/runtime-corejs2/helpers/classCallCheck")),h=d(e("@babel/runtime-corejs2/helpers/createClass")),b=d(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),v=d(e("@babel/runtime-corejs2/helpers/inherits")),_=d(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),g=d(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),y=d(e("@babel/runtime-corejs2/helpers/defineProperty")),w=d(e("@babel/runtime-corejs2/core-js/weak-map")),j=d(e("@babel/runtime-corejs2/core-js/array/from")),k=d(e("../lib/safe-event-emitter")),x=d(e("kefir")),E=d(e("kefir-cast")),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={},i=u&&c;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=i?c(e,s):null;l&&(l.get||l.set)?u(o,s,l):o[s]=e[s]}return o.default=e,r&&r.set(e,o),o}(e("ud")),C=d(e("../../common/get-or-fail")),I=d(e("./compose-button-view")),A=S.defonce(t,function(){return new w.default}),T=function(e){function t(e,n,o){var i;(0,m.default)(this,t),i=r.call(this),(0,y.default)((0,b.default)(i),"destroyed",!1);var a={driver:e,membrane:o,composeViewImplementation:n};return A.set((0,b.default)(i),a),i.on("newListener",function(t){"close"===t?(e.getLogger().deprecationWarning("composeView close event","composeView destroy event"),1!==e.getOpts().REQUESTED_API_VERSION&&console.error("The composeView close event was removed after API version 1")):"messageIDChange"===t?(e.getLogger().deprecationWarning("composeView messageIDChange event","composeView.getDraftID"),1!==e.getOpts().REQUESTED_API_VERSION&&console.error("The composeView messageIDChange event was removed after API version 1")):"linkPopOver"===t&&n.setupLinkPopOvers()}),a.composeViewImplementation.getEventStream().onValue(function(t){if("destroy"===t.eventName)i.destroyed=!0,1===e.getOpts().REQUESTED_API_VERSION&&i.emit("close");else if("messageIDChange"===t.eventName&&1!==e.getOpts().REQUESTED_API_VERSION)return;i.emit(t.eventName,t.data)}),i}(0,v.default)(t,e);var r=o(t);return(0,h.default)(t,[{key:"addButton",value:function(e){var t=(0,C.default)(A,this),r=(0,E.default)(x.default,e),n=t.composeViewImplementation.addButton(r,t.driver.getAppId(),{composeView:this});return new I.default(n,t.composeViewImplementation,t.driver)}},{key:"addComposeNotice",value:function(e){return(0,C.default)(A,this).composeViewImplementation.addComposeNotice(e)}},{key:"addStatusBar",value:function(e){return(0,C.default)(A,this).composeViewImplementation.addStatusBar(e)}},{key:"hideNativeStatusBar",value:function(){return(0,C.default)(A,this).composeViewImplementation.hideNativeStatusBar()}},{key:"addRecipientRow",value:function(e){return{destroy:(0,C.default)(A,this).composeViewImplementation.addRecipientRow((0,E.default)(x.default,e))}}},{key:"forceRecipientRowsOpen",value:function(){return(0,C.default)(A,this).composeViewImplementation.forceRecipientRowsOpen()}},{key:"hideNativeRecipientRows",value:function(){return(0,C.default)(A,this).composeViewImplementation.hideNativeRecipientRows()}},{key:"hideRecipientArea",value:function(){return(0,C.default)(A,this).composeViewImplementation.hideRecipientArea()}},{key:"close",value:function(){(0,C.default)(A,this).composeViewImplementation.close()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sendAndArchive:!1},t=e.sendAndArchive;(0,C.default)(A,this).composeViewImplementation.send({sendAndArchive:t})}},{key:"discard",value:function(){(0,C.default)(A,this).composeViewImplementation.discard()}},{key:"getMetadataForm",value:function(){return(0,C.default)(A,this).composeViewImplementation.getMetadataFormElement()}},{key:"getSubjectInput",value:function(){return(0,C.default)(A,this).composeViewImplementation.getSubjectInput()}},{key:"getBodyElement",value:function(){return(0,C.default)(A,this).composeViewImplementation.getBodyElement()}},{key:"getComposeID",value:function(){var e=(0,C.default)(A,this),t=e.driver,r=e.composeViewImplementation;if(t.getLogger().deprecationWarning("composeView.getComposeID"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return r.getComposeID()}},{key:"getInitialMessageID",value:function(){return(0,C.default)(A,this).composeViewImplementation.getInitialMessageID()}},{key:"getMessageID",value:function(){var e=(0,C.default)(A,this),t=e.driver,r=e.composeViewImplementation;if(t.getLogger().deprecationWarning("composeView.getMessageID","composeView.getDraftID"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return r.getMessageID()}},{key:"getThreadID",value:function(){return(0,C.default)(A,this).composeViewImplementation.getThreadID()}},{key:"getDraftID",value:function(){return(0,C.default)(A,this).composeViewImplementation.getDraftID()}},{key:"getCurrentDraftID",value:function(){return(0,C.default)(A,this).composeViewImplementation.getCurrentDraftID()}},{key:"getHTMLContent",value:function(){return(0,C.default)(A,this).composeViewImplementation.getHTMLContent()}},{key:"getSelectedBodyHTML",value:function(){return(0,C.default)(A,this).composeViewImplementation.getSelectedBodyHTML()||""}},{key:"getSelectedBodyText",value:function(){return(0,C.default)(A,this).composeViewImplementation.getSelectedBodyText()||""}},{key:"getSubject",value:function(){return(0,C.default)(A,this).composeViewImplementation.getSubject()}},{key:"getTextContent",value:function(){return(0,C.default)(A,this).composeViewImplementation.getTextContent()}},{key:"getToRecipients",value:function(){return(0,C.default)(A,this).composeViewImplementation.getToRecipients()}},{key:"getCcRecipients",value:function(){return(0,C.default)(A,this).composeViewImplementation.getCcRecipients()}},{key:"getBccRecipients",value:function(){return(0,C.default)(A,this).composeViewImplementation.getBccRecipients()}},{key:"insertTextIntoBodyAtCursor",value:function(e){return(0,C.default)(A,this).composeViewImplementation.insertBodyTextAtCursor(e)}},{key:"insertHTMLIntoBodyAtCursor",value:function(e){return(0,C.default)(A,this).composeViewImplementation.insertBodyHTMLAtCursor(e)}},{key:"insertLinkChipIntoBodyAtCursor",value:function(e,t,r){return r&&"string"==typeof r&&0===r.indexOf("http")?(0,C.default)(A,this).composeViewImplementation.insertLinkChipIntoBody({text:e,url:t,iconUrl:r}):void console.warn("You must provide a publicly accessible iconUrl")}},{key:"insertLinkIntoBodyAtCursor",value:function(e,t){return(0,C.default)(A,this).composeViewImplementation.insertLinkIntoBody(e,t)}},{key:"isForward",value:function(){return(0,C.default)(A,this).composeViewImplementation.isForward()}},{key:"isInlineReplyForm",value:function(){return(0,C.default)(A,this).composeViewImplementation.isInlineReplyForm()}},{key:"isFullscreen",value:function(){return(0,C.default)(A,this).composeViewImplementation.isFullscreen()}},{key:"setFullscreen",value:function(e){(0,C.default)(A,this).composeViewImplementation.setFullscreen(e)}},{key:"isMinimized",value:function(){return(0,C.default)(A,this).composeViewImplementation.isMinimized()}},{key:"setMinimized",value:function(e){(0,C.default)(A,this).composeViewImplementation.setMinimized(e)}},{key:"setTitleBarColor",value:function(e){return(0,C.default)(A,this).composeViewImplementation.setTitleBarColor(e)}},{key:"setTitleBarText",value:function(e){return(0,C.default)(A,this).composeViewImplementation.setTitleBarText(e)}},{key:"popOut",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(f.default.mark(function e(){var t,r;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,C.default)(A,this).driver.getNextComposeViewDriver(),(0,C.default)(A,this).composeViewImplementation.popOut(),e.next=4,t;case 4:return r=e.sent,e.abrupt("return",(0,C.default)(A,this).membrane.get(r));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"isReply",value:function(){return(0,C.default)(A,this).composeViewImplementation.isReply()}},{key:"setToRecipients",value:function(e){(0,C.default)(A,this).composeViewImplementation.setToRecipients(e)}},{key:"setCcRecipients",value:function(e){(0,C.default)(A,this).composeViewImplementation.setCcRecipients(e)}},{key:"setBccRecipients",value:function(e){(0,C.default)(A,this).composeViewImplementation.setBccRecipients(e)}},{key:"getFromContact",value:function(){return(0,C.default)(A,this).composeViewImplementation.getFromContact()}},{key:"getFromContactChoices",value:function(){return(0,C.default)(A,this).composeViewImplementation.getFromContactChoices()}},{key:"setFromEmail",value:function(e){(0,C.default)(A,this).composeViewImplementation.setFromEmail(e)}},{key:"setSubject",value:function(e){(0,C.default)(A,this).composeViewImplementation.setSubject(e)}},{key:"setBodyHTML",value:function(e){(0,C.default)(A,this).composeViewImplementation.setBodyHTML(e)}},{key:"setBodyText",value:function(e){(0,C.default)(A,this).composeViewImplementation.setBodyText(e)}},{key:"attachFiles",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(t[0]instanceof Blob){e.next=4;break}throw new Error("parameter must be an array of Blob objects");case 4:return e.abrupt("return",(0,C.default)(A,this).composeViewImplementation.attachFiles((0,j.default)(t)));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"attachInlineFiles",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:if(t[0]instanceof Blob){e.next=4;break}throw new Error("parameter must be an array of Blob objects");case 4:return e.abrupt("return",(0,C.default)(A,this).composeViewImplementation.attachInlineFiles((0,j.default)(t)));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"dragFilesIntoCompose",value:function(e){var t=(0,C.default)(A,this),r=t.driver;if(r.getLogger().deprecationWarning("ComposeView.dragFilesIntoCompose","ComposeView.attachInlineFiles"),1!==r.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.attachInlineFiles(e)}},{key:"getElement",value:function(){return(0,C.default)(A,this).composeViewImplementation.getElement()}},{key:"registerRequestModifier",value:function(e){(0,C.default)(A,this).composeViewImplementation.registerRequestModifier(e)}},{key:"replaceSendButton",value:function(e){var t=e.el;return(0,C.default)(A,this).composeViewImplementation.replaceSendButton(t)}},{key:"hideDiscardButton",value:function(){return(0,C.default)(A,this).composeViewImplementation.hideDiscardButton()}},{key:"ensureFormattingToolbarIsHidden",value:function(){(0,C.default)(A,this).composeViewImplementation.ensureFormattingToolbarIsHidden()}},{key:"ensureAppButtonToolbarsAreClosed",value:function(){(0,C.default)(A,this).composeViewImplementation.ensureAppButtonToolbarsAreClosed()}},{key:"overrideEditSubject",value:function(){var e=(0,C.default)(A,this),t=e.driver,r=e.composeViewImplementation;if(t.getLogger().deprecationWarning("composeView.overrideEditSubject"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");"function"==typeof r.overrideEditSubject&&r.overrideEditSubject()}}]),t}(k.default);r.default=T},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"./compose-button-view":923,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/asyncToGenerator":36,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/helpers/typeof":57,"@babel/runtime-corejs2/regenerator":59,kefir:327,"kefir-cast":325,ud:625}],925:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("@babel/runtime-corejs2/core-js/weak-map")),b=(s(e("kefir")),s(e("../lib/safe-event-emitter"))),v=s(e("../../common/get-or-fail")),_=new h.default,g=function(e){function t(e){var n;(0,l.default)(this,t),n=r.call(this),(0,m.default)((0,c.default)(n),"destroyed",!1);var o={contentPanelViewImplementation:e};return _.set((0,c.default)(n),o),n._bindToStreamEvents(),n}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"remove",value:function(){(0,v.default)(_,this).contentPanelViewImplementation.remove()}},{key:"close",value:function(){(0,v.default)(_,this).contentPanelViewImplementation.close()}},{key:"open",value:function(){(0,v.default)(_,this).contentPanelViewImplementation.open()}},{key:"isActive",value:function(){return(0,v.default)(_,this).contentPanelViewImplementation.isActive()}},{key:"_bindToStreamEvents",value:function(){var e=this,t=(0,v.default)(_,this).contentPanelViewImplementation.getEventStream();t.onValue(function(t){var r=t.eventName;e.emit(r)}),t.onEnd(function(){e.destroyed=!0,e.emit("destroy")})}}]),t}(b.default);r.default=g},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327}],926:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=e("ud"),b=(s(e("util")),s(e("../../lib/safe-event-emitter"))),v=function(e){function t(e,n,o){var i;return(0,l.default)(this,t),i=r.call(this),(0,m.default)((0,c.default)(i),"_attachmentCardImplementation",void 0),(0,m.default)((0,c.default)(i),"_driver",void 0),(0,m.default)((0,c.default)(i),"_membrane",void 0),(0,m.default)((0,c.default)(i),"destroyed",void 0),i.destroyed=!1,i._driver=n,i._membrane=o,i._attachmentCardImplementation=e,i._attachmentCardImplementation.getStopper().onValue(function(){i.destroyed=!0,i.emit("destroy")}),i}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"getAttachmentType",value:function(){return this._attachmentCardImplementation.getAttachmentType()}},{key:"addButton",value:function(e){this._attachmentCardImplementation.addButton(e)}},{key:"getTitle",value:function(){return this._attachmentCardImplementation.getTitle()}},{key:"getDownloadURL",value:function(){if(this._driver.getLogger().deprecationWarning("AttachmentCardView.getDownloadURL","AttachmentCardView.addButton -> onClick -> AttachmentCardClickEvent"),1!==this._driver.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this._attachmentCardImplementation.getDownloadURL()}},{key:"getMessageView",value:function(){var e=this._attachmentCardImplementation.getMessageViewDriver();return e?this._membrane.get(e):null}}]),t}(b.default),_=(0,h.defn)(t,v);r.default=_},{"../../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,ud:625,util:629}],927:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=(s(e("kefir")),s(e("kefir-stopper"))),b=(s(e("lodash/once")),s(e("../../lib/safe-event-emitter"))),v=function(e){function t(e,n){var o;return(0,l.default)(this,t),o=r.call(this),(0,m.default)((0,c.default)(o),"_el",void 0),(0,m.default)((0,c.default)(o),"_iconEl",void 0),(0,m.default)((0,c.default)(o),"_contentEl",void 0),(0,m.default)((0,c.default)(o),"_contentHeaderEl",void 0),(0,m.default)((0,c.default)(o),"_contentBodyEl",void 0),(0,m.default)((0,c.default)(o),"_destroyed",!1),(0,m.default)((0,c.default)(o),"_stopper",(0,h.default)()),(0,m.default)((0,c.default)(o),"_isCollapsed",!0),(0,m.default)((0,c.default)(o),"_lastDescriptor",void 0),o._setupElement(),e.takeUntilBy(o._stopper).onValue(function(e){o._el.setAttribute("data-inboxsdk-sortdate",String(e.sortDate.getTime()));var t=o._lastDescriptor;if(o._lastDescriptor=e,!t||t.iconUrl!==e.iconUrl){var r=document.createElement("img");r.src=e.iconUrl,o._iconEl.innerHTML="",o._iconEl.appendChild(r)}t&&t.collapsedEl===e.collapsedEl||!o._isCollapsed||(t&&t.collapsedEl.remove(),o._contentEl.appendChild(e.collapsedEl)),t&&t.headerEl===e.headerEl||(t&&t.headerEl.remove(),o._contentHeaderEl.appendChild(e.headerEl)),t&&t.bodyEl===e.bodyEl||(t&&t.bodyEl.remove(),o._contentBodyEl.appendChild(e.bodyEl))}).take(1).onValue(n),o}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._stopper.destroy(),this.emit("destroy"),this._el.remove())}},{key:"expand",value:function(){this._isCollapsed=!1;var e=this._lastDescriptor;e&&e.collapsedEl.remove(),this._contentEl.appendChild(this._contentHeaderEl),this._contentEl.appendChild(this._contentBodyEl),this._el.classList.remove("inboxsdk__custom_message_view_collapsed"),this.emit("expanded")}},{key:"collapse",value:function(){this._isCollapsed=!0,this._contentHeaderEl.remove(),this._contentBodyEl.remove();var e=this._lastDescriptor;e&&this._contentEl.appendChild(e.collapsedEl),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this.emit("collapsed")}},{key:"getElement",value:function(){return this._el}},{key:"getSortDate",value:function(){return this._lastDescriptor?this._lastDescriptor.sortDate:null}},{key:"_setupElement",value:function(){var e=this;this._el=document.createElement("div"),this._el.classList.add("inboxsdk__custom_message_view"),this._el.classList.add("inboxsdk__custom_message_view_collapsed"),this._iconEl=document.createElement("div"),this._iconEl.classList.add("inboxsdk__custom_message_view_icon"),this._contentEl=document.createElement("div"),this._contentEl.classList.add("inboxsdk__custom_message_view_content"),this._contentHeaderEl=document.createElement("div"),this._contentHeaderEl.classList.add("inboxsdk__custom_message_view_header"),this._contentBodyEl=document.createElement("div"),this._contentBodyEl.classList.add("inboxsdk__custom_message_view_body"),this._el.appendChild(this._iconEl),this._el.appendChild(this._contentEl),this._el.addEventListener("click",function(t){e._isCollapsed&&(e.expand(),t.preventDefault(),t.stopPropagation())}),this._contentHeaderEl.addEventListener("click",function(t){e.collapse(),t.preventDefault(),t.stopPropagation()})}}]),t}(b.default);r.default=v},{"../../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-stopper":326,"lodash/once":516}],928:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t,r){r.onEnd(function(){e.destroyed=!0,e.emit("destroy"),e.removeAllListeners()}),r.filter(function(e){return"internal"!==e.type&&"contactHover"===e.eventName}).onValue(function(t){e.emit(t.eventName,{contactType:t.contactType,contact:t.contact,messageView:e,threadView:e.getThreadView()})}),e.isLoaded()?(0,g.default)(function(){e.emit("load",{messageView:e})}):r.filter(function(e){return"messageLoad"===e.eventName}).onValue(function(t){e.emit("load",{messageView:e})}),r.filter(function(e){return"viewStateChange"===e.eventName}).onValue(function(r){e.emit("viewStateChange",{oldViewState:t.Conversations.MessageViewViewStates[r.oldValue],newViewState:t.Conversations.MessageViewViewStates[r.newValue],messageView:e})})}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("@babel/runtime-corejs2/core-js/weak-map")),v=l(e("@babel/runtime-corejs2/core-js/array/from")),_=e("ud"),g=l(e("asap")),y=l(e("../../lib/safe-event-emitter")),w=l(e("../../../common/get-or-fail")),j=(l(e("./attachment-card-view")),e("../../namespaces/conversations")),k=(0,_.defonce)(t,function(){return new b.default}),x=function(e){function t(e,n,o,a,s){var l;(0,u.default)(this,t),l=r.call(this),(0,h.default)((0,d.default)(l),"destroyed",!1);var c={messageViewImplementation:e,membrane:o,Conversations:a,driver:s,linksInBody:null};return k.set((0,d.default)(l),c),i((0,d.default)(l),c,e.getEventStream()),l}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"addAttachmentCardView",value:function(e){var t=(0,w.default)(k,this),r=t.messageViewImplementation,n=t.membrane,o=r.addAttachmentCard(e),i=n.get(o);return o.getPreviewClicks().onValue(function(t){e.previewOnClick&&e.previewOnClick({attachmentCardView:i,preventDefault:function(){return t.preventDefault()}})}),i}},{key:"addAttachmentCardViewNoPreview",value:function(e){return this.addAttachmentCardView(e)}},{key:"addAttachmentsToolbarButton",value:function(e){var t=(0,w.default)(k,this),r=t.messageViewImplementation,n=t.membrane;r.addButtonToDownloadAllArea({tooltip:e.tooltip,iconUrl:e.iconUrl,onClick:function(){var t=r.getAttachmentCardViewDrivers().map(function(e){return n.get(e)});e.onClick({attachmentCardViews:t})}})}},{key:"addToolbarButton",value:function(e){if("function"!=typeof e.onClick||"string"!=typeof e.title||!Object.prototype.hasOwnProperty.call(j.MessageViewToolbarSectionNames,e.section))throw new Error("Missing required properties on MessageViewToolbarButtonDescriptor object");(0,w.default)(k,this).messageViewImplementation.addMoreMenuItem(e)}},{key:"getBodyElement",value:function(){return(0,w.default)(k,this).messageViewImplementation.getContentsElement()}},{key:"getMessageID",value:function(){return(0,w.default)(k,this).driver.getLogger().deprecationWarning("messageView.getMessageID","messageView.getMessageIDAsync"),(0,w.default)(k,this).messageViewImplementation.getMessageID()}},{
key:"getMessageIDAsync",value:function(){return(0,w.default)(k,this).messageViewImplementation.getMessageIDAsync()}},{key:"getFileAttachmentCardViews",value:function(){var e=(0,w.default)(k,this),t=e.messageViewImplementation,r=e.membrane;return t.getAttachmentCardViewDrivers().filter(function(e){return"FILE"===e.getAttachmentType()}).map(function(e){return r.get(e)})}},{key:"getAttachmentCardViews",value:function(){var e=(0,w.default)(k,this),t=e.driver;if(t.getLogger().deprecationWarning("MessageView.getAttachmentCardViews","MessageView.getFileAttachmentCardViews"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return this.getFileAttachmentCardViews()}},{key:"isElementInQuotedArea",value:function(e){return(0,w.default)(k,this).messageViewImplementation.isElementInQuotedArea(e)}},{key:"isLoaded",value:function(){return(0,w.default)(k,this).messageViewImplementation.isLoaded()}},{key:"getLinksInBody",value:function(){var e=this,t=(0,w.default)(k,this);if(!t.linksInBody){var r=this.getBodyElement().querySelectorAll("a");t.linksInBody=(0,v.default)(r).map(function(t){return{text:t.textContent,html:t.innerHTML,href:t.href,element:t,isInQuotedArea:e.isElementInQuotedArea(t)}})}return t.linksInBody}},{key:"getSender",value:function(){return(0,w.default)(k,this).messageViewImplementation.getSender()}},{key:"getRecipients",value:function(){return(0,w.default)(k,this).driver.getLogger().deprecationWarning("MessageView.getRecipients","MessageView.getRecipientEmailAddresses() or MessageView.getRecipientsFull()"),this.getRecipientEmailAddresses().map(function(e){return{emailAddress:e,name:null}})}},{key:"getRecipientEmailAddresses",value:function(){return(0,w.default)(k,this).messageViewImplementation.getRecipientEmailAddresses()}},{key:"getRecipientsFull",value:function(){return(0,w.default)(k,this).messageViewImplementation.getRecipientsFull()}},{key:"getThreadView",value:function(){var e=(0,w.default)(k,this),t=e.messageViewImplementation;return e.membrane.get(t.getThreadViewDriver())}},{key:"getDateString",value:function(){return(0,w.default)(k,this).messageViewImplementation.getDateString()}},{key:"addAttachmentIcon",value:function(e){return(0,w.default)(k,this).messageViewImplementation.addAttachmentIcon(e)}},{key:"getViewState",value:function(){var e=(0,w.default)(k,this);return e.Conversations.MessageViewViewStates[e.messageViewImplementation.getViewState()]}},{key:"hasOpenReply",value:function(){var e=(0,w.default)(k,this),t=e.driver;e.messageViewImplementation;if(t.getLogger().deprecationWarning("MessageView.hasOpenReply"),1!==t.getOpts().REQUESTED_API_VERSION)throw new Error("This method was discontinued after API version 1");return(0,w.default)(k,this).messageViewImplementation.hasOpenReply()}}]),t}(y.default),E=(0,_.defn)(t,x);r.default=E},{"../../../common/get-or-fail":642,"../../lib/safe-event-emitter":898,"../../namespaces/conversations":908,"./attachment-card-view":926,"@babel/runtime-corejs2/core-js/array/from":1,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,asap:83,ud:625}],929:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){t.getEventStream().onEnd(function(){e.destroyed=!0,e.emit("destroy"),e.removeAllListeners()}),t.getEventStream().filter(function(e){return"internal"!==e.type&&"contactHover"===e.eventName}).onValue(function(t){var r=(0,j.default)(k,e),n=r.membrane;e.emit(t.eventName,{contactType:t.contactType,messageView:n.get(t.messageViewDriver),contact:t.contact,threadView:e})})}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("@babel/runtime-corejs2/core-js/weak-map")),v=e("ud"),_=l(e("../../lib/safe-event-emitter")),g=l(e("kefir-cast")),y=l(e("kefir")),w=l(e("../content-panel-view")),j=l(e("../../../common/get-or-fail")),k=(0,v.defonce)(t,function(){return new b.default}),x=function(e){function t(e,n,o,a){var s;(0,u.default)(this,t),s=r.call(this),(0,h.default)((0,d.default)(s),"destroyed",!1);var l={threadViewImplementation:e,appId:n,driver:o,membrane:a};return k.set((0,d.default)(s),l),i((0,d.default)(s),e),s}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"addSidebarContentPanel",value:function(e){var t=(0,g.default)(y.default,e).toProperty(),r=(0,j.default)(k,this);r.driver.getLogger().eventSdkPassive("threadView.addSidebarContentPanel");var n=r.threadViewImplementation.addSidebarContentPanel(t);return n?new w.default(n):null}},{key:"addNoticeBar",value:function(){return(0,j.default)(k,this).threadViewImplementation.addNoticeBar()}},{key:"registerHiddenCustomMessageNoticeProvider",value:function(e){return(0,j.default)(k,this).threadViewImplementation.registerHiddenCustomMessageNoticeProvider(e)}},{key:"addCustomMessage",value:function(e){var t=(0,g.default)(y.default,e).toProperty(),r=(0,j.default)(k,this);return r.driver.getLogger().eventSdkPassive("threadView.addCustomMessage"),r.threadViewImplementation.addCustomMessage(t)}},{key:"getMessageViews",value:function(){var e=(0,j.default)(k,this),t=e.threadViewImplementation,r=e.membrane;return t.getMessageViewDrivers().filter(function(e){return e.isLoaded()}).map(function(e){return r.get(e)})}},{key:"getMessageViewsAll",value:function(){var e=(0,j.default)(k,this),t=e.threadViewImplementation,r=e.membrane;return t.getMessageViewDrivers().map(function(e){return r.get(e)})}},{key:"getSubject",value:function(){return(0,j.default)(k,this).threadViewImplementation.getSubject()}},{key:"getThreadID",value:function(){return(0,j.default)(k,this).driver.getLogger().deprecationWarning("threadView.getThreadID","threadView.getThreadIDAsync"),(0,j.default)(k,this).threadViewImplementation.getThreadID()}},{key:"getThreadIDAsync",value:function(){return(0,j.default)(k,this).threadViewImplementation.getThreadIDAsync()}},{key:"addLabel",value:function(){return(0,j.default)(k,this).threadViewImplementation.addLabel()}}]),t}(_.default),E=(0,v.defn)(t,x);r.default=E},{"../../../common/get-or-fail":642,"../../lib/safe-event-emitter":898,"../content-panel-view":925,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-cast":325,ud:625}],930:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("../lib/safe-event-emitter")),b=function(e){function t(e,n){var o;return(0,l.default)(this,t),o=r.call(this),(0,m.default)((0,c.default)(o),"chord",void 0),(0,m.default)((0,c.default)(o),"description",void 0),o.chord=e,o.description=n,o}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"remove",value:function(){this.emit("destroy")}}]),t}(h.default);r.default=b},{"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],931:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){switch(t.eventName){case"expanded":case"collapsed":e.emit(t.eventName)}}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/core-js/weak-map")),b=l(e("../lib/safe-event-emitter")),v=l(e("kefir")),_=l(e("kefir-cast")),g=(l(e("../../common/defer")),l(e("../../common/get-or-fail"))),y=l(e("./nav-item-view")),w=new h.default,j=function(e){function t(e,n,o,a){var s;(0,u.default)(this,t),s=r.call(this);var l={appId:e,driver:n,labelName:o,navItemViews:[],navItemViewDriver:null,navItemViewDriverPromise:a};return w.set((0,d.default)(s),l),a.then(function(e){e&&(l.navItemViewDriver=e,e.getEventStream().onValue(function(e){return i((0,d.default)(s),e)}))}),s}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"addNavItem",value:function(e){var t=(0,g.default)(w,this),r=(0,_.default)(v.default,e).toProperty(),n=new y.default(t.appId,t.driver,r,t.navItemViewDriverPromise.then(function(e){return e.addNavItem(t.appId,r)}));return t.navItemViews.push(n),n}},{key:"isCollapsed",value:function(){return"collapsed"===localStorage.getItem("inboxsdk__nativeNavItem__state_"+(0,g.default)(w,this).labelName)}},{key:"setCollapsed",value:function(e){var t=(0,g.default)(w,this);t.navItemViewDriver?t.navItemViewDriver.setCollapsed(e):localStorage.setItem("inboxsdk__nativeNavItem__state_"+t.labelName,e?"collapsed":"expanded")}}]),t}(b.default);r.default=j},{"../../common/defer":639,"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"./nav-item-view":932,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-cast":325}],932:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,b.default)(e);if(t){var o=(0,b.default)(this).constructor;r=s(n,arguments,o)}else r=n.apply(this,arguments);return(0,h.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!s)return!1;if(s.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t,r,n){var o=(0,c.default)(n,2),i=o[0],a=o[1];switch(a.eventName){case"click":if(i.type===x.default.GROUPER)return;if("function"==typeof i.onClick){var s=!1,l={preventDefault:function(){s=!0}};if(i.onClick(l),s)break}i.routeID?r.goto(i.routeID,i.routeParams):t.toggleCollapse();break;case"expanded":case"collapsed":e.emit(a.eventName)}}function a(e,t){var r=(0,c.default)(t,2),n=r[0],o=r[1];e.setActive(n&&o.getRouteID()===n.routeID&&(0,g.default)(n.routeParams||{},o.getParams()))}var s=e("@babel/runtime-corejs2/core-js/reflect/construct"),l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.default=void 0;var c=u(e("@babel/runtime-corejs2/helpers/slicedToArray")),d=u(e("@babel/runtime-corejs2/helpers/classCallCheck")),f=u(e("@babel/runtime-corejs2/helpers/createClass")),p=u(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),m=u(e("@babel/runtime-corejs2/helpers/inherits")),h=u(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),b=u(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),v=u(e("@babel/runtime-corejs2/helpers/defineProperty")),_=u(e("@babel/runtime-corejs2/core-js/weak-map")),g=u(e("lodash/isEqual")),y=u(e("kefir")),w=u(e("kefir-cast")),j=(u(e("../../common/defer")),u(e("../../common/get-or-fail"))),k=u(e("../lib/safe-event-emitter")),x=u(e("../constants/nav-item-types")),E=new _.default,S=function(e){function t(e,n,o,s){var l;(0,d.default)(this,t),l=r.call(this),(0,v.default)((0,p.default)(l),"destroyed",!1);var u={appId:e,driver:n,navItemDescriptorPropertyStream:o,navItemViews:[],navItemViewDriver:null,navItemViewDriverPromise:s};return E.set((0,p.default)(l),u),n.getStopper().onValue(l.remove.bind((0,p.default)(l))),s.then(function(e){if(!l.destroyed&&e){var t=u.driver;u.navItemViewDriver=e,u.navItemDescriptorPropertyStream.sampledBy(e.getEventStream(),function(e,t){return[e,t]}).onValue(function(r){return i((0,p.default)(l),e,t,r)}),y.default.combine([u.navItemDescriptorPropertyStream,t.getRouteViewDriverStream()]).takeUntilBy(e.getEventStream().filter(function(){return!1}).beforeEnd(function(){return null})).onValue(function(t){a(e,t)})}}),l}(0,m.default)(t,e);var r=n(t);return(0,f.default)(t,[{key:"addNavItem",value:function(e){if(this.destroyed)throw new Error("this nav item view does not exist");var r=(0,j.default)(E,this),n=r.driver,o=r.appId,i=r.navItemViews,a=(0,w.default)(y.default,e).toProperty(),s=new t(o,n,a,r.navItemViewDriverPromise.then(function(e){return e.addNavItem(r.appId,a)}));return i.push(s),s}},{key:"remove",value:function(){if(!this.destroyed){var e=(0,j.default)(E,this),t=e.navItemViews;this.destroyed=!0,this.emit("destroy"),t.forEach(function(e){e.remove()}),e.navItemViewDriverPromise.then(function(e){e.destroy()})}}},{key:"isCollapsed",value:function(){var e=(0,j.default)(E,this),t=e.navItemViewDriver;return!!t&&t.isCollapsed()}},{key:"setCollapsed",value:function(e){(0,j.default)(E,this).navItemViewDriverPromise.then(function(t){t.setCollapsed(e)})}}]),t}(k.default);r.default=S},{"../../common/defer":639,"../../common/get-or-fail":642,"../constants/nav-item-types":657,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/helpers/slicedToArray":53,kefir:327,"kefir-cast":325,"lodash/isEqual":501}],933:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/core-js/weak-map")),u=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=s(e("@babel/runtime-corejs2/helpers/createClass")),d=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=s(e("@babel/runtime-corejs2/helpers/inherits")),p=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=e("ud"),b=s(e("./route-view")),v=s(e("../../../common/get-or-fail")),_=function(e){function t(e){var n;(0,u.default)(this,t),n=r.call(this,e);var o={routeViewDriver:e};return g.set((0,d.default)(n),o),n}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"setFullWidth",value:function(e){(0,v.default)(g,this).routeViewDriver.setFullWidth(e)}},{key:"getElement",value:function(){var e=(0,v.default)(g,this),t=e.routeViewDriver,r=t.getCustomViewElement();if(!r)throw new Error("Should not happen");return r}}]),t}(b.default),g=(0,h.defonce)(t,function(){return new l.default}),y=(0,h.defn)(t,_);r.default=y},{"../../../common/get-or-fail":642,"./route-view":936,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,ud:625}],934:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=(o(e("kefir")),o(e("kefir-bus"))),u=o(e("kefir-stopper")),c=e("ud"),d=function(){function e(){(0,i.default)(this,e),(0,s.default)(this,"_eventStream",(0,l.default)()),(0,s.default)(this,"_stopper",(0,u.default)())}return(0,a.default)(e,[{key:"getRouteType",value:function(){return"UNKNOWN"}},{key:"getRouteID",value:function(){return"UNKNOWN"}},{key:"getParams",value:function(){return{}}},{key:"getEventStream",value:function(){return this._eventStream}},{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._eventStream.end(),this._stopper.destroy()}}]),e}(),f=(0,c.defn)(t,d);r.default=f},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,kefir:327,"kefir-bus":324,"kefir-stopper":326,ud:625}],935:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){e.getEventStream().onEnd(function(){(0,j.default)(x,t).sectionViews.forEach(function(e){e.destroy()})})}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/core-js/weak-map")),c=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),d=l(e("@babel/runtime-corejs2/helpers/createClass")),f=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),p=l(e("@babel/runtime-corejs2/helpers/inherits")),m=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),h=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),b=e("ud"),v=l(e("./route-view")),_=l(e("kefir")),g=l(e("kefir-cast")),y=l(e("../collapsible-section-view")),w=l(e("../section-view")),j=l(e("../../../common/get-or-fail")),k=function(e){function t(e,n,o){var a;(0,c.default)(this,t),a=r.call(this,e);var s={routeViewDriver:e,driver:n,appId:o,sectionViews:[]};return x.set((0,f.default)(a),s),i(e,(0,f.default)(a)),a}(0,p.default)(t,e);var r=n(t);return(0,d.default)(t,[{key:"addCollapsibleSection",value:function(e){var t=(0,j.default)(x,this),r=t.routeViewDriver.addCollapsibleSection((0,g.default)(_.default,e).toProperty(),t.appId),n=new y.default(r,t.driver);return t.sectionViews.push(n),n}},{key:"addSection",value:function(e){var t=(0,j.default)(x,this),r=t.routeViewDriver.addSection((0,g.default)(_.default,e).toProperty(),t.appId),n=new w.default(r,t.driver);return t.sectionViews.push(n),n}},{key:"refresh",value:function(){(0,j.default)(x,this).routeViewDriver.refresh()}}]),t}(v.default),x=new u.default,E=(0,b.defn)(t,k);r.default=E},{"../../../common/get-or-fail":642,"../collapsible-section-view":922,"../section-view":937,"./route-view":936,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-cast":325,ud:625}],936:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t){e.getEventStream().onEnd(function(){t.destroyed=!0,t.emit("destroy"),t.removeAllListeners()})}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("@babel/runtime-corejs2/core-js/weak-map")),v=l(e("../../lib/safe-event-emitter")),_=e("ud"),g=l(e("../../../common/get-or-fail")),y=new b.default,w=function(e){function t(e){var n;(0,u.default)(this,t),n=r.call(this),(0,h.default)((0,d.default)(n),"destroyed",void 0);var o={routeID:null,routeType:null,params:null,routeViewDriver:e};return y.set((0,d.default)(n),o),n.destroyed=!1,i(e,(0,d.default)(n)),n}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"getRouteID",value:function(){var e=(0,g.default)(y,this);return e.routeID||(e.routeID=e.routeViewDriver.getRouteID()),e.routeID}},{key:"getRouteType",value:function(){var e=(0,g.default)(y,this);return e.routeType||(e.routeType=e.routeViewDriver.getRouteType()),e.routeType}},{key:"getParams",value:function(){var e=(0,g.default)(y,this);return e.params||(e.params=e.routeViewDriver.getParams()),e.params}}]),t}(v.default),j=(0,_.defn)(t,w);r.default=j},{"../../../common/get-or-fail":642,"../../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,ud:625}],937:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,m.default)(e);if(t){var o=(0,m.default)(this).constructor;r=a(n,arguments,o)}else r=n.apply(this,arguments);return(0,p.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e,t,r){t.getEventStream().onValue(function(t){e.emit(t.eventName)}),t.getEventStream().filter(function(e){return"rowClicked"===e.eventName}).onValue(function(e){var t=e.rowDescriptor;t.routeID&&r.goto(t.routeID,t.routeParams),"function"==typeof t.onClick&&t.onClick()}),t.getEventStream().filter(function(e){return"summaryClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onTitleLinkClick&&r.onTitleLinkClick(e)}),t.getEventStream().filter(function(e){return"footerClicked"===e.eventName}).onValue(function(t){var r=t.sectionDescriptor;r.onFooterLinkClick&&r.onFooterLinkClick(e)}),t.getEventStream().onEnd(function(){e.destroyed=!0,e.emit("destroy")})}var a=e("@babel/runtime-corejs2/core-js/reflect/construct"),s=e("@babel/runtime-corejs2/core-js/object/define-property"),l=e("@babel/runtime-corejs2/helpers/interopRequireDefault");s(r,"__esModule",{value:!0}),r.default=void 0;var u=l(e("@babel/runtime-corejs2/helpers/classCallCheck")),c=l(e("@babel/runtime-corejs2/helpers/createClass")),d=l(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),f=l(e("@babel/runtime-corejs2/helpers/inherits")),p=l(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),m=l(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),h=l(e("@babel/runtime-corejs2/helpers/defineProperty")),b=l(e("@babel/runtime-corejs2/core-js/weak-map")),v=e("ud"),_=l(e("../lib/safe-event-emitter")),g=l(e("../../common/get-or-fail")),y=new b.default,w=function(e){function t(e,n){var o;(0,u.default)(this,t),o=r.call(this),(0,h.default)((0,d.default)(o),"destroyed",void 0);var a={sectionViewDriver:e};return y.set((0,d.default)(o),a),o.destroyed=!1,i((0,d.default)(o),e,n),o}(0,f.default)(t,e);var r=n(t);return(0,c.default)(t,[{key:"remove",value:function(){this.destroy()}},{key:"destroy",value:function(){(0,g.default)(y,this).sectionViewDriver.destroy(),this.removeAllListeners()}}]),t}(_.default),j=(0,v.defn)(t,w);r.default=j},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,ud:625}],938:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("@babel/runtime-corejs2/core-js/weak-map")),b=s(e("@babel/runtime-corejs2/core-js/promise")),v=s(e("../lib/safe-event-emitter")),_=s(e("../../common/get-or-fail")),g=new h.default,y=function(e){function t(e){var n;(0,l.default)(this,t),n=r.call(this),(0,m.default)((0,c.default)(n),"destroyed",void 0);var o={threadRowViewDriver:e};return g.set((0,c.default)(n),o),n.destroyed=!1,e.getEventStream().onEnd(function(){n.destroyed=!0,n.emit("destroy")}),e.setUserView((0,c.default)(n)),n}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"addLabel",value:function(e){(0,_.default)(g,this).threadRowViewDriver.addLabel(e)}},{key:"addImage",value:function(e){(0,_.default)(g,this).threadRowViewDriver.addImage(e)}},{key:"addButton",value:function(e){(0,_.default)(g,this).threadRowViewDriver.addButton(e)}},{key:"addActionButton",value:function(e){(0,_.default)(g,this).threadRowViewDriver.addActionButton(e)}},{key:"addAttachmentIcon",value:function(e){(0,_.default)(g,this).threadRowViewDriver.addAttachmentIcon(e)}},{key:"replaceDate",value:function(e){(0,_.default)(g,this).threadRowViewDriver.replaceDate(e)}},{key:"replaceDraftLabel",value:function(e){(0,
_.default)(g,this).threadRowViewDriver.replaceDraftLabel(e)}},{key:"getElement",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getElement()}},{key:"getSubject",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getSubject()}},{key:"getDateString",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getDateString()}},{key:"getThreadID",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getThreadID()}},{key:"getThreadIDAsync",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getThreadIDAsync()}},{key:"getThreadIDIfStable",value:function(){return this.getVisibleMessageCount()>0?this.getThreadID():null}},{key:"getThreadIDIfStableAsync",value:function(){return this.getVisibleMessageCount()>0?this.getThreadIDAsync():b.default.resolve(null)}},{key:"getDraftID",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getDraftID()}},{key:"getVisibleDraftCount",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getVisibleDraftCount()}},{key:"getVisibleMessageCount",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getVisibleMessageCount()}},{key:"getContacts",value:function(){return(0,_.default)(g,this).threadRowViewDriver.getContacts()}}]),t}(v.default);r.default=y},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/promise":24,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],939:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=o(e("kefir-stopper")),u=function(){function e(t){var r=this;(0,i.default)(this,e),(0,s.default)(this,"_activateFunction",void 0),(0,s.default)(this,"_view",void 0),(0,s.default)(this,"_stopper",(0,l.default)()),this._activateFunction=t.activateFunction||t.onClick,this._view=t.buttonView,this._view.getEventStream().filter(function(e){return"click"===e.eventName}).onValue(function(){r.activate()})}return(0,a.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._activateFunction=null,this._view.destroy(),this._stopper.destroy()}},{key:"update",value:function(e){this.getView().update(e),this.setActivateFunction(e&&(e.activateFunction||e.onClick))}},{key:"getView",value:function(){return this._view}},{key:"setActivateFunction",value:function(e){this._activateFunction=e}},{key:"activate",value:function(){this._activateFunction&&this._activateFunction({})}}]),e}();r.default=u},{"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"kefir-stopper":326}],940:[function(e,t,r){"use strict";var n=e("@babel/runtime-corejs2/core-js/object/define-property"),o=e("@babel/runtime-corejs2/helpers/interopRequireDefault");n(r,"__esModule",{value:!0}),r.default=void 0;var i=o(e("@babel/runtime-corejs2/helpers/classCallCheck")),a=o(e("@babel/runtime-corejs2/helpers/createClass")),s=o(e("@babel/runtime-corejs2/helpers/defineProperty")),l=o(e("kefir-stopper")),u=o(e("./dropdown-view")),c=function(){function e(t){(0,i.default)(this,e),(0,s.default)(this,"_view",void 0),(0,s.default)(this,"_dropdownShowFunction",void 0),(0,s.default)(this,"_dropdownView",null),(0,s.default)(this,"_DropdownViewDriverClass",void 0),(0,s.default)(this,"_dropdownPositionOptions",void 0),(0,s.default)(this,"_stopper",(0,l.default)()),this._dropdownShowFunction=t.dropdownShowFunction,this._DropdownViewDriverClass=t.dropdownViewDriverClass;var r=this._view=t.buttonView;this._dropdownPositionOptions=t.dropdownPositionOptions,r.getElement().setAttribute("aria-haspopup","true"),r.getElement().setAttribute("aria-pressed","false"),r.getElement().setAttribute("aria-expanded","false"),this._bindToViewEvents()}return(0,a.default)(e,[{key:"getStopper",value:function(){return this._stopper}},{key:"destroy",value:function(){this._view&&(this._view.destroy(),this._view=null),this._dropdownView&&(this._dropdownView.close(),this._dropdownView=null),this._stopper.destroy()}},{key:"update",value:function(e){this.getView().update(e),this.setDropdownShowFunction(e&&e.dropdownShowFunction)}},{key:"getView",value:function(){if(!this._view)throw new Error("Already destroyed");return this._view}},{key:"setDropdownShowFunction",value:function(e){this._dropdownShowFunction=e}},{key:"showDropdown",value:function(){this.hideDropdown();var e=this._view;if(!e)throw new Error("Already destroyed");e.activate();var t=this._dropdownView=new u.default(new this._DropdownViewDriverClass,e.getElement(),void 0);this._dropdownPositionOptions&&t.setPlacementOptions(this._dropdownPositionOptions),t.on("destroy",this._dropdownClosed.bind(this)),this._dropdownShowFunction&&this._dropdownShowFunction({dropdown:this._dropdownView}),e.getElement().setAttribute("aria-pressed","true"),e.getElement().setAttribute("aria-expanded","true")}},{key:"hideDropdown",value:function(){this._dropdownView&&this._dropdownView.close()}},{key:"isDropdownVisible",value:function(){return!!this._dropdownView}},{key:"_bindToViewEvents",value:function(){var e=this;if(!this._view)throw new Error("Already destroyed");this._view.getEventStream().filter(function(e){return"click"===e.eventName}).onValue(function(){e._toggleDropdownState()})}},{key:"_toggleDropdownState",value:function(){this._dropdownView?this._dropdownView.close():this.showDropdown()}},{key:"_dropdownClosed",value:function(){var e=this._view;e&&(e.deactivate(),this._dropdownView=null,e.getElement().setAttribute("aria-pressed","false"),e.getElement().setAttribute("aria-expanded","false"))}}]),e}();r.default=c},{"./dropdown-view":941,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"kefir-stopper":326}],941:[function(e,t,r){"use strict";function n(e,t){var r=l(e);if(u){var n=u(e);t&&(n=n.filter(function(t){return c(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){(0,j.default)(e,t,r[t])}):d?f(e,d(r)):n(Object(r)).forEach(function(t){p(e,t,c(r,t))})}return e}function i(e){var t=a();return function(){var r,n=(0,w.default)(e);if(t){var o=(0,w.default)(this).constructor;r=s(n,arguments,o)}else r=n.apply(this,arguments);return(0,y.default)(this,r)}}function a(){if("undefined"==typeof Reflect||!s)return!1;if(s.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s(Boolean,[],function(){})),!0}catch(e){return!1}}var s=e("@babel/runtime-corejs2/core-js/reflect/construct"),l=e("@babel/runtime-corejs2/core-js/object/keys"),u=e("@babel/runtime-corejs2/core-js/object/get-own-property-symbols"),c=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptor"),d=e("@babel/runtime-corejs2/core-js/object/get-own-property-descriptors"),f=e("@babel/runtime-corejs2/core-js/object/define-properties"),p=e("@babel/runtime-corejs2/core-js/object/define-property"),m=e("@babel/runtime-corejs2/helpers/interopRequireDefault");p(r,"__esModule",{value:!0}),r.default=void 0;var h=m(e("@babel/runtime-corejs2/helpers/toConsumableArray")),b=m(e("@babel/runtime-corejs2/helpers/classCallCheck")),v=m(e("@babel/runtime-corejs2/helpers/createClass")),_=m(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),g=m(e("@babel/runtime-corejs2/helpers/inherits")),y=m(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),w=m(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),j=m(e("@babel/runtime-corejs2/helpers/defineProperty")),k=m(e("asap")),x=m(e("../../lib/safe-event-emitter")),E=m(e("kefir")),S=m(e("../../lib/dom/make-mutation-observer-chunked-stream")),C=m(e("../../lib/ScrollableContainByScreen")),I=m(e("../../lib/dom/outsideClicksAndEscape")),A=function(e){function t(e,n,i){var a;(0,b.default)(this,t),a=r.call(this),(0,j.default)((0,_.default)(a),"_dropdownViewDriver",void 0),(0,j.default)((0,_.default)(a),"destroyed",!1),(0,j.default)((0,_.default)(a),"closed",!1),(0,j.default)((0,_.default)(a),"_options",void 0),(0,j.default)((0,_.default)(a),"_userPlacementOptions",{hAlign:"left"}),(0,j.default)((0,_.default)(a),"_scrollableContainByScreen",null),(0,j.default)((0,_.default)(a),"_didInsertContainerEl",void 0),(0,j.default)((0,_.default)(a),"el",void 0),a._dropdownViewDriver=e,a._options=o(o({},e.getDropdownOptions&&e.getDropdownOptions()),i),a.el=e.getContentElement();var s=e.getContainerElement();document.contains(s)?a._didInsertContainerEl=!1:(document.body.insertBefore(s,document.body.firstElementChild),a._didInsertContainerEl=!0),s.hasAttribute("tabindex")||s.setAttribute("tabindex","-1");var l=E.default.fromEvents((0,_.default)(a),"destroy"),u=[n,s];a._options.extraElementsToIgnore&&u.push.apply(u,(0,h.default)(a._options.extraElementsToIgnore)),(0,I.default)(u).takeUntilBy(l).filter(function(e){var t=!1,r={type:e.type,cause:e.cause,cancel:function(){t=!0}};return a.emit("preautoclose",r),!t}).onValue(function(){a.close()}),a._options.manualPosition||(s.style.position="fixed",(0,k.default)(function(){a.closed||(E.default.fromEvents((0,_.default)(a),"_placementOptionsUpdated").toProperty(function(){return null}).takeUntilBy(l).onValue(function(){a._scrollableContainByScreen&&a._scrollableContainByScreen.destroy(),a._scrollableContainByScreen=new C.default(s,n,a._userPlacementOptions)}),(0,S.default)(e.getContentElement(),{childList:!0,attributes:!0,characterData:!0,subtree:!0}).throttle(200).takeUntilBy(l).onValue(function(){return a.reposition()}))}));var c=document.activeElement;return(0,k.default)(function(){a.closed||document.activeElement===c&&s.focus()}),a}(0,g.default)(t,e);var r=i(t);return(0,v.default)(t,[{key:"setPlacementOptions",value:function(e){if(this._options.manualPosition)return void console.error("DropdownView.setPlacementOptions() was called on a manually-positioned DropdownView.");this._userPlacementOptions=o(o({},this._userPlacementOptions),e),this.emit("_placementOptionsUpdated")}},{key:"close",value:function(){this.destroyed||(this.destroyed=this.closed=!0,this._scrollableContainByScreen&&this._scrollableContainByScreen.destroy(),this.emit("destroy"),this._didInsertContainerEl&&this._dropdownViewDriver.getContainerElement().remove(),this._dropdownViewDriver.destroy())}},{key:"reposition",value:function(){this._scrollableContainByScreen&&this._scrollableContainByScreen.reposition()}}]),t}(x.default);r.default=A},{"../../lib/ScrollableContainByScreen":845,"../../lib/dom/make-mutation-observer-chunked-stream":862,"../../lib/dom/outsideClicksAndEscape":865,"../../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-properties":11,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor":14,"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors":15,"@babel/runtime-corejs2/core-js/object/get-own-property-symbols":17,"@babel/runtime-corejs2/core-js/object/keys":19,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,"@babel/runtime-corejs2/helpers/toConsumableArray":56,asap:83,kefir:327}],942:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("kefir")),b=(s(e("kefir-bus")),e("ud")),v=s(e("../lib/safe-event-emitter")),_=s(e("../views/compose-view")),g=function(e){function t(e){var n;return(0,l.default)(this,t),n=r.call(this),(0,m.default)((0,c.default)(n),"destroyed",!1),(0,m.default)((0,c.default)(n),"_driver",void 0),n._driver=e,n._driver.getSlideAnimationDone().onValue(function(){n.emit("slideAnimationDone")}),n._driver.getClosingStream().onValue(function(){n.emit("closing")}),n._driver.getClosedStream().onValue(function(){n.destroyed=!0,n.emit("destroy")}),n._driver.getPreAutoCloseStream().onValue(function(e){n.emit("preautoclose",e)}),document.dispatchEvent(new CustomEvent("inboxSDKcloseDrawers",{bubbles:!1,cancelable:!1,detail:null})),h.default.fromEvents(document,"inboxSDKcloseDrawers").takeUntilBy(h.default.fromEvents((0,c.default)(n),"closing")).onValue(function(){n.close()}),n}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"close",value:function(){this._driver.close()}},{key:"associateComposeView",value:function(e,t){if(!(e instanceof _.default))throw new Error("argument was not a ComposeView");this._driver.associateComposeView(e,t)}},{key:"disassociateComposeView",value:function(){this._driver.disassociateComposeView()}}]),t}(v.default),y=(0,b.defn)(t,g);r.default=y},{"../lib/safe-event-emitter":898,"../views/compose-view":924,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-bus":324,ud:625}],943:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;r=s(n,arguments,o)}else r=n.apply(this,arguments);return(0,m.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!s)return!1;if(s.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(s(Boolean,[],function(){})),!0}catch(e){return!1}}function i(e){k&&k.modalView===e?(k=null,E.length>0?E.pop().show():j&&j.destroy()):E.indexOf(e)>-1&&E.splice(E.indexOf(e),1)}function a(e,t){k?(x.emit(k.modalView),E.push(k.modalView),k.modalViewDriver.getModalContainerElement().remove()):j||(j=e._driver.createBackdrop(502),j.getStopper().onValue(function(){j=null,E.slice().forEach(function(e){e.close()}),k&&k.modalView.close()})),k={modalView:e,modalViewDriver:t}}var s=e("@babel/runtime-corejs2/core-js/reflect/construct"),l=e("@babel/runtime-corejs2/core-js/object/define-property"),u=e("@babel/runtime-corejs2/helpers/interopRequireDefault");l(r,"__esModule",{value:!0}),r.default=void 0;var c=u(e("@babel/runtime-corejs2/helpers/classCallCheck")),d=u(e("@babel/runtime-corejs2/helpers/createClass")),f=u(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),p=u(e("@babel/runtime-corejs2/helpers/inherits")),m=u(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),h=u(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),b=u(e("@babel/runtime-corejs2/helpers/defineProperty")),v=u(e("kefir")),_=u(e("kefir-bus")),g=e("ud"),y=u(e("../lib/safe-event-emitter")),w=function(e){function t(e){var n;return(0,c.default)(this,t),n=r.call(this),(0,b.default)((0,f.default)(n),"destroyed",!1),(0,b.default)((0,f.default)(n),"_driver",void 0),(0,b.default)((0,f.default)(n),"_modalViewDriver",void 0),n._driver=e.driver,n._modalViewDriver=e.modalViewDriver,e.modalViewDriver.getEventStream().filter(function(e){return"closeClick"===e.eventName}).onValue(function(){n.close()}),e.modalViewDriver.getEventStream().onEnd(function(){n._modalViewDriver=null,n.destroyed=!0,i((0,f.default)(n)),n.emit("destroy")}),n}(0,p.default)(t,e);var r=n(t);return(0,d.default)(t,[{key:"show",value:function(){var e=this,t=this._modalViewDriver;if(!t)throw new Error("Modal can not be shown after being hidden");var r=v.default.merge([v.default.fromEvents(this,"destroy"),x.filter(function(t){return t===e})]);document.body.appendChild(t.getModalContainerElement()),t.getModalContainerElement().focus(),v.default.fromEvents(document.body,"keydown").filter(function(e){return 27===e.keyCode}).takeUntilBy(r).onValue(function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e.close()}),a(this,t)}},{key:"setTitle",value:function(e){if(!this._modalViewDriver)throw new Error("Modal can not be shown after being hidden");this._modalViewDriver.setTitle(e)}},{key:"close",value:function(){this._modalViewDriver&&this._modalViewDriver.destroy()}},{key:"addButton",value:function(e){throw new Error("not implemented")}}]),t}(y.default),j=null,k=null,x=(0,_.default)(),E=[],S=(0,g.defn)(t,w);r.default=S},{"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51,kefir:327,"kefir-bus":324,ud:625}],944:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/helpers/defineProperty")),h=s(e("@babel/runtime-corejs2/core-js/weak-map")),b=s(e("../../common/get-or-fail")),v=s(e("../lib/safe-event-emitter")),_=new h.default,g=function(e){function t(e){var n;(0,l.default)(this,t),n=r.call(this),(0,m.default)((0,c.default)(n),"destroyed",!1);var o={driver:e.moleViewDriver};return _.set((0,c.default)(n),o),o.driver.getEventStream().onValue(function(e){n.emit(e.eventName,e.detail)}),o.driver.getEventStream().onEnd(function(){n.destroyed=!0,n.emit("destroy")}),n}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"close",value:function(){(0,b.default)(_,this).driver.destroy()}},{key:"setTitle",value:function(e){(0,b.default)(_,this).driver.setTitle(e)}},{key:"setMinimized",value:function(e){(0,b.default)(_,this).driver.setMinimized(e)}},{key:"getMinimized",value:function(){return(0,b.default)(_,this).driver.getMinimized()}}]),t}(v.default);r.default=g},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/defineProperty":39,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}],945:[function(e,t,r){"use strict";function n(e){var t=o();return function(){var r,n=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;r=i(n,arguments,o)}else r=n.apply(this,arguments);return(0,f.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!i)return!1;if(i.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(i(Boolean,[],function(){})),!0}catch(e){return!1}}var i=e("@babel/runtime-corejs2/core-js/reflect/construct"),a=e("@babel/runtime-corejs2/core-js/object/define-property"),s=e("@babel/runtime-corejs2/helpers/interopRequireDefault");a(r,"__esModule",{value:!0}),r.default=void 0;var l=s(e("@babel/runtime-corejs2/helpers/classCallCheck")),u=s(e("@babel/runtime-corejs2/helpers/createClass")),c=s(e("@babel/runtime-corejs2/helpers/assertThisInitialized")),d=s(e("@babel/runtime-corejs2/helpers/inherits")),f=s(e("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),p=s(e("@babel/runtime-corejs2/helpers/getPrototypeOf")),m=s(e("@babel/runtime-corejs2/core-js/weak-map")),h=s(e("../../common/get-or-fail")),b=s(e("../lib/safe-event-emitter")),v=new m.default,_=function(e){function t(e){var n;(0,l.default)(this,t),n=r.call(this);var o={driver:e.topMessageBarViewDriver};return v.set((0,c.default)(n),o),n}(0,d.default)(t,e);var r=n(t);return(0,u.default)(t,[{key:"remove",value:function(){(0,h.default)(v,this).driver.remove()}}]),t}(b.default);r.default=_},{"../../common/get-or-fail":642,"../lib/safe-event-emitter":898,"@babel/runtime-corejs2/core-js/object/define-property":12,"@babel/runtime-corejs2/core-js/reflect/construct":25,"@babel/runtime-corejs2/core-js/weak-map":30,"@babel/runtime-corejs2/helpers/assertThisInitialized":35,"@babel/runtime-corejs2/helpers/classCallCheck":37,"@babel/runtime-corejs2/helpers/createClass":38,"@babel/runtime-corejs2/helpers/getPrototypeOf":42,"@babel/runtime-corejs2/helpers/inherits":43,"@babel/runtime-corejs2/helpers/interopRequireDefault":44,"@babel/runtime-corejs2/helpers/possibleConstructorReturn":51}]},{},[653])(653)});